!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=158)}([function(e,t,n){(function(e){!function(t,n){e.exports=n()}(this,function(){"use strict";function t(){return gr.apply(null,arguments)}function r(e){gr=e}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t;for(t in e)return!1;return!0}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,r){return yt(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function p(e){return null==e._pf&&(e._pf=f()),e._pf}function m(e){if(null==e._isValid){var t=p(e),n=yr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function _(e){var t=h(NaN);return null!=e?d(p(t),e):p(t).userInvalidated=!0,t}function g(e){return void 0===e}function v(e,t){var n,r,i;if(g(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),g(t._i)||(e._i=t._i),g(t._f)||(e._f=t._f),g(t._l)||(e._l=t._l),g(t._strict)||(e._strict=t._strict),g(t._tzm)||(e._tzm=t._tzm),g(t._isUTC)||(e._isUTC=t._isUTC),g(t._offset)||(e._offset=t._offset),g(t._pf)||(e._pf=p(t)),g(t._locale)||(e._locale=t._locale),br.length>0)for(n in br)r=br[n],i=t[r],g(i)||(e[r]=i);return e}function y(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Tr===!1&&(Tr=!0,t.updateOffset(this),Tr=!1)}function b(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function T(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function k(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=T(t)),n}function w(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&k(e[r])!==k(t[r]))&&o++;return o+s}function M(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function S(e,n){var r=!0;return d(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,s=[],o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){i+="\n["+o+"] ";for(var a in arguments[0])i+=a+": "+arguments[0][a]+", ";i=i.slice(0,-2)}else i=arguments[o];s.push(i)}M(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function L(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),kr[e]||(M(n),kr[e]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function C(e){var t,n;for(n in e)t=e[n],E(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function x(e,t){var n,r=d({},e);for(n in t)l(t,n)&&(s(e[n])&&s(t[n])?(r[n]={},d(r[n],e[n]),d(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)l(e,n)&&!l(t,n)&&s(e[n])&&(r[n]=d({},r[n]));return r}function D(e){null!=e&&this.set(e)}function j(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return E(r)?r.call(t,n):r}function R(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function A(){return this._invalidDate}function Y(e){return this._ordinal.replace("%d",e)}function I(e,t,n,r){var i=this._relativeTime[n];return E(i)?i(e,t,n,r):i.replace(/%d/i,e)}function P(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}function O(e,t){var n=e.toLowerCase();Rr[n]=Rr[n+"s"]=Rr[t]=e}function N(e){return"string"==typeof e?Rr[e]||Rr[e.toLowerCase()]:void 0}function H(e){var t,n,r={};for(n in e)l(e,n)&&(t=N(n),t&&(r[t]=e[n]));return r}function U(e,t){Ar[e]=t}function F(e){var t=[];for(var n in e)t.push({unit:n,priority:Ar[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function $(e,n){return function(r){return null!=r?(X(this,e,r),t.updateOffset(this,n),this):q(this,e)}}function q(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function X(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function W(e){return e=N(e),E(this[e])?this[e]():this}function B(e,t){if("object"==typeof e){e=H(e);for(var n=F(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=N(e),E(this[e]))return this[e](t);return this}function z(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function G(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Or[e]=i),t&&(Or[t[0]]=function(){return z(i.apply(this,arguments),t[1],t[2])}),n&&(Or[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function J(e){var t,n,r=e.match(Yr);for(t=0,n=r.length;t<n;t++)Or[r[t]]?r[t]=Or[r[t]]:r[t]=V(r[t]);return function(t){var i,s="";for(i=0;i<n;i++)s+=r[i]instanceof Function?r[i].call(t,e):r[i];return s}}function K(e,t){return e.isValid()?(t=Z(t,e.localeData()),Pr[t]=Pr[t]||J(t),Pr[t](e)):e.localeData().invalidDate()}function Z(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Ir.lastIndex=0;r>=0&&Ir.test(e);)e=e.replace(Ir,n),Ir.lastIndex=0,r-=1;return e}function Q(e,t,n){ti[e]=E(t)?t:function(e,r){return e&&n?n:t}}function ee(e,t){return l(ti,e)?ti[e](t._strict,t._locale):new RegExp(te(e))}function te(e){return ne(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function ne(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function re(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=k(e)}),n=0;n<e.length;n++)ni[e[n]]=r}function ie(e,t){re(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function se(e,t,n){null!=t&&l(ni,e)&&ni[e](t,n._a,n,e)}function oe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ae(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||fi).test(t)?"format":"standalone"][e.month()]:this._months}function ue(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[fi.test(t)?"format":"standalone"][e.month()]:this._monthsShort}function ce(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?(i=hi.call(this._shortMonthsParse,o),i!==-1?i:null):(i=hi.call(this._longMonthsParse,o),i!==-1?i:null):"MMM"===t?(i=hi.call(this._shortMonthsParse,o),i!==-1?i:(i=hi.call(this._longMonthsParse,o),i!==-1?i:null)):(i=hi.call(this._longMonthsParse,o),i!==-1?i:(i=hi.call(this._shortMonthsParse,o),i!==-1?i:null))}function le(e,t,n){var r,i,s;if(this._monthsParseExact)return ce.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function de(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=k(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function he(e){return null!=e?(de(this,e),t.updateOffset(this,!0),this):q(this,"Month")}function fe(){return oe(this.year(),this.month())}function pe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||_e.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=_i),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function me(e){return this._monthsParseExact?(l(this,"_monthsRegex")||_e.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=gi),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _e(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],s=[];for(t=0;t<12;t++)n=h([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),s.sort(e),t=0;t<12;t++)r[t]=ne(r[t]),i[t]=ne(i[t]);for(t=0;t<24;t++)s[t]=ne(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ge(e){return ve(e)?366:365}function ve(e){return e%4===0&&e%100!==0||e%400===0}function ye(){return ve(this.year())}function be(e,t,n,r,i,s,o){var a=new Date(e,t,n,r,i,s,o);return e<100&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function Te(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ke(e,t,n){var r=7+t-n;return-((7+Te(e,0,r).getUTCDay()-t)%7)+r-1}function we(e,t,n,r,i){var s,o,a=(7+n-r)%7,u=ke(e,r,i),c=1+7*(t-1)+a+u;return c<=0?(s=e-1,o=ge(s)+c):c>ge(e)?(s=e+1,o=c-ge(e)):(s=e,o=c),{year:s,dayOfYear:o}}function Me(e,t,n){var r,i,s=ke(e.year(),t,n),o=Math.floor((e.dayOfYear()-s-1)/7)+1;return o<1?(i=e.year()-1,r=o+Se(i,t,n)):o>Se(e.year(),t,n)?(r=o-Se(e.year(),t,n),i=e.year()+1):(i=e.year(),r=o),{week:r,year:i}}function Se(e,t,n){var r=ke(e,t,n),i=ke(e+1,t,n);return(ge(e)-r+i)/7}function Le(e){return Me(e,this._week.dow,this._week.doy).week}function Ee(){return this._week.dow}function Ce(){return this._week.doy}function xe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function De(e){var t=Me(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function je(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Re(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ae(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays}function Ye(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ie(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Pe(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?(i=hi.call(this._weekdaysParse,o),i!==-1?i:null):"ddd"===t?(i=hi.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=hi.call(this._minWeekdaysParse,o),i!==-1?i:null):"dddd"===t?(i=hi.call(this._weekdaysParse,o),i!==-1?i:(i=hi.call(this._shortWeekdaysParse,o),i!==-1?i:(i=hi.call(this._minWeekdaysParse,o),i!==-1?i:null))):"ddd"===t?(i=hi.call(this._shortWeekdaysParse,o),i!==-1?i:(i=hi.call(this._weekdaysParse,o),i!==-1?i:(i=hi.call(this._minWeekdaysParse,o),i!==-1?i:null))):(i=hi.call(this._minWeekdaysParse,o),i!==-1?i:(i=hi.call(this._weekdaysParse,o),i!==-1?i:(i=hi.call(this._shortWeekdaysParse,o),i!==-1?i:null)))}function Oe(e,t,n){var r,i,s;if(this._weekdaysParseExact)return Pe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Ne(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=je(e,this.localeData()),this.add(e-t,"d")):t}function He(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ue(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Re(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Fe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=wi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function $e(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Mi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Si),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xe(){function e(e,t){return t.length-e.length}var t,n,r,i,s,o=[],a=[],u=[],c=[];for(t=0;t<7;t++)n=h([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),s=this.weekdays(n,""),o.push(r),a.push(i),u.push(s),c.push(r),c.push(i),c.push(s);for(o.sort(e),a.sort(e),u.sort(e),c.sort(e),t=0;t<7;t++)a[t]=ne(a[t]),u[t]=ne(u[t]),c[t]=ne(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function We(){return this.hours()%12||12}function Be(){return this.hours()||24}function ze(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ge(e,t){return t._meridiemParse}function Ve(e){return"p"===(e+"").toLowerCase().charAt(0)}function Je(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ke(e){return e?e.toLowerCase().replace("_","-"):e}function Ze(e){for(var t,n,r,i,s=0;s<e.length;){for(i=Ke(e[s]).split("-"),t=i.length,n=Ke(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=Qe(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&w(i,n,!0)>=t-1)break;t--}s++}return null}function Qe(t){var r=null;if(!Di[t]&&void 0!==e&&e&&e.exports)try{r=Li._abbr,n(153)("./"+t),et(r)}catch(e){}return Di[t]}function et(e,t){var n;return e&&(n=g(t)?rt(e):tt(e,t),n&&(Li=n)),Li._abbr}function tt(e,t){if(null!==t){var n=xi;if(t.abbr=e,null!=Di[e])L("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Di[e]._config;else if(null!=t.parentLocale){if(null==Di[t.parentLocale])return ji[t.parentLocale]||(ji[t.parentLocale]=[]),ji[t.parentLocale].push({name:e,config:t}),null;n=Di[t.parentLocale]._config}return Di[e]=new D(x(n,t)),ji[e]&&ji[e].forEach(function(e){tt(e.name,e.config)}),et(e),Di[e]}return delete Di[e],null}function nt(e,t){if(null!=t){var n,r=xi;null!=Di[e]&&(r=Di[e]._config),t=x(r,t),n=new D(t),n.parentLocale=Di[e],Di[e]=n,et(e)}else null!=Di[e]&&(null!=Di[e].parentLocale?Di[e]=Di[e].parentLocale:null!=Di[e]&&delete Di[e]);return Di[e]}function rt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Li;if(!i(e)){if(t=Qe(e))return t;e=[e]}return Ze(e)}function it(){return Sr(Di)}function st(e){var t,n=e._a;return n&&p(e).overflow===-2&&(t=n[ii]<0||n[ii]>11?ii:n[si]<1||n[si]>oe(n[ri],n[ii])?si:n[oi]<0||n[oi]>24||24===n[oi]&&(0!==n[ai]||0!==n[ui]||0!==n[ci])?oi:n[ai]<0||n[ai]>59?ai:n[ui]<0||n[ui]>59?ui:n[ci]<0||n[ci]>999?ci:-1,p(e)._overflowDayOfYear&&(t<ri||t>si)&&(t=si),p(e)._overflowWeeks&&t===-1&&(t=li),p(e)._overflowWeekday&&t===-1&&(t=di),p(e).overflow=t),e}function ot(e){var t,n,r,i,s,o,a=e._i,u=Ri.exec(a)||Ai.exec(a);if(u){for(p(e).iso=!0,t=0,n=Ii.length;t<n;t++)if(Ii[t][1].exec(u[1])){i=Ii[t][0],r=Ii[t][2]!==!1;break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=Pi.length;t<n;t++)if(Pi[t][1].exec(u[3])){s=(u[2]||" ")+Pi[t][0];break}if(null==s)return void(e._isValid=!1)}if(!r&&null!=s)return void(e._isValid=!1);if(u[4]){if(!Yi.exec(u[4]))return void(e._isValid=!1);o="Z"}e._f=i+(s||"")+(o||""),ht(e)}else e._isValid=!1}function at(e){var n=Oi.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));ot(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function ut(e,t,n){return null!=e?e:null!=t?t:n}function ct(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,r,i,s=[];if(!e._d){for(r=ct(e),e._w&&null==e._a[si]&&null==e._a[ii]&&dt(e),e._dayOfYear&&(i=ut(e._a[ri],r[ri]),e._dayOfYear>ge(i)&&(p(e)._overflowDayOfYear=!0),n=Te(i,0,e._dayOfYear),e._a[ii]=n.getUTCMonth(),e._a[si]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[oi]&&0===e._a[ai]&&0===e._a[ui]&&0===e._a[ci]&&(e._nextDay=!0,e._a[oi]=0),e._d=(e._useUTC?Te:be).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[oi]=24)}}function dt(e){var t,n,r,i,s,o,a,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)s=1,o=4,n=ut(t.GG,e._a[ri],Me(bt(),1,4).year),r=ut(t.W,1),i=ut(t.E,1),(i<1||i>7)&&(u=!0);else{s=e._locale._week.dow,o=e._locale._week.doy;var c=Me(bt(),s,o);n=ut(t.gg,e._a[ri],c.year),r=ut(t.w,c.week),null!=t.d?(i=t.d,(i<0||i>6)&&(u=!0)):null!=t.e?(i=t.e+s,(t.e<0||t.e>6)&&(u=!0)):i=s}r<1||r>Se(n,s,o)?p(e)._overflowWeeks=!0:null!=u?p(e)._overflowWeekday=!0:(a=we(n,r,i,s,o),e._a[ri]=a.year,e._dayOfYear=a.dayOfYear)}function ht(e){if(e._f===t.ISO_8601)return void ot(e);e._a=[],p(e).empty=!0;var n,r,i,s,o,a=""+e._i,u=a.length,c=0;for(i=Z(e._f,e._locale).match(Yr)||[],n=0;n<i.length;n++)s=i[n],r=(a.match(ee(s,e))||[])[0],r&&(o=a.substr(0,a.indexOf(r)),o.length>0&&p(e).unusedInput.push(o),a=a.slice(a.indexOf(r)+r.length),c+=r.length),Or[s]?(r?p(e).empty=!1:p(e).unusedTokens.push(s),se(s,r,e)):e._strict&&!r&&p(e).unusedTokens.push(s);p(e).charsLeftOver=u-c,a.length>0&&p(e).unusedInput.push(a),e._a[oi]<=12&&p(e).bigHour===!0&&e._a[oi]>0&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[oi]=ft(e._locale,e._a[oi],e._meridiem),lt(e),st(e)}function ft(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function pt(e){var t,n,r,i,s;if(0===e._f.length)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)s=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],ht(t),m(t)&&(s+=p(t).charsLeftOver,s+=10*p(t).unusedTokens.length,p(t).score=s,(null==r||s<r)&&(r=s,n=t));d(e,n||t)}function mt(e){if(!e._d){var t=H(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function _t(e){var t=new y(st(gt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function gt(e){var t=e._i,n=e._f;return e._locale=e._locale||rt(e._l),null===t||void 0===n&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new y(st(t)):(u(t)?e._d=t:i(n)?pt(e):n?ht(e):vt(e),m(e)||(e._d=null),e))}function vt(e){var n=e._i;void 0===n?e._d=new Date(t.now()):u(n)?e._d=new Date(n.valueOf()):"string"==typeof n?at(e):i(n)?(e._a=c(n.slice(0),function(e){return parseInt(e,10)}),lt(e)):"object"==typeof n?mt(e):a(n)?e._d=new Date(n):t.createFromInputFallback(e)}function yt(e,t,n,r,a){var u={};return n!==!0&&n!==!1||(r=n,n=void 0),(s(e)&&o(e)||i(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=n,u._i=e,u._f=t,u._strict=r,_t(u)}function bt(e,t,n,r){return yt(e,t,n,r,!1)}function Tt(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function kt(){return Tt("isBefore",[].slice.call(arguments,0))}function wt(){return Tt("isAfter",[].slice.call(arguments,0))}function Mt(e){var t=H(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,a=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+1e3*a*60*60,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=rt(),this._bubble()}function St(e){return e instanceof Mt}function Lt(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Et(e,t){G(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+z(~~(e/60),2)+t+z(~~e%60,2)})}function Ct(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(Fi)||["-",0,0],s=+(60*i[1])+k(i[2]);return 0===s?0:"+"===i[0]?s:-s}function xt(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(b(e)||u(e)?e.valueOf():bt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):bt(e).local()}function Dt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function jt(e,n){var r,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(e=Ct(Zr,e),null===e)return this}else Math.abs(e)<16&&(e*=60);return!this._isUTC&&n&&(r=Dt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!n||this._changeInProgress?zt(this,$t(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Dt(this)}function Rt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function At(e){return this.utcOffset(0,e)}function Yt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Dt(this),"m")),this}function It(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=Ct(Kr,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Pt(e){return!!this.isValid()&&(e=e?bt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Ot(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Nt(){if(!g(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),e=gt(e),e._a){var t=e._isUTC?h(e._a):bt(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ht(){return!!this.isValid()&&!this._isUTC}function Ut(){return!!this.isValid()&&this._isUTC}function Ft(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function $t(e,t){var n,r,i,s=e,o=null;return St(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(s={},t?s[t]=e:s.milliseconds=e):(o=$i.exec(e))?(n="-"===o[1]?-1:1,s={y:0,d:k(o[si])*n,h:k(o[oi])*n,m:k(o[ai])*n,s:k(o[ui])*n,ms:k(Lt(1e3*o[ci]))*n}):(o=qi.exec(e))?(n="-"===o[1]?-1:1,s={y:qt(o[2],n),M:qt(o[3],n),w:qt(o[4],n),d:qt(o[5],n),h:qt(o[6],n),m:qt(o[7],n),s:qt(o[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(i=Wt(bt(s.from),bt(s.to)),s={},s.ms=i.milliseconds,s.M=i.months),r=new Mt(s),St(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Xt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Wt(e,t){var n;return e.isValid()&&t.isValid()?(t=xt(t,e),e.isBefore(t)?n=Xt(e,t):(n=Xt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Bt(e,t){return function(n,r){var i,s;return null===r||isNaN(+r)||(L(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=$t(n,r),zt(this,i,e),this}}function zt(e,n,r,i){var s=n._milliseconds,o=Lt(n._days),a=Lt(n._months);e.isValid()&&(i=null==i||i,s&&e._d.setTime(e._d.valueOf()+s*r),o&&X(e,"Date",q(e,"Date")+o*r),a&&de(e,q(e,"Month")+a*r),i&&t.updateOffset(e,o||a))}function Gt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Vt(e,n){var r=e||bt(),i=xt(r,this).startOf("day"),s=t.calendarFormat(this,i)||"sameElse",o=n&&(E(n[s])?n[s].call(this,r):n[s]);return this.format(o||this.localeData().calendar(s,this,bt(r)))}function Jt(){return new y(this)}function Kt(e,t){var n=b(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&(t=N(g(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Zt(e,t){var n=b(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&(t=N(g(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Qt(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function en(e,t){var n,r=b(e)?e:bt(e);return!(!this.isValid()||!r.isValid())&&(t=N(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function tn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function nn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function rn(e,t,n){var r,i,s,o;return this.isValid()?(r=xt(e,this),r.isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),t=N(t),"year"===t||"month"===t||"quarter"===t?(o=sn(this,r),"quarter"===t?o/=3:"year"===t&&(o/=12)):(s=this-r,o="second"===t?s/1e3:"minute"===t?s/6e4:"hour"===t?s/36e5:"day"===t?(s-i)/864e5:"week"===t?(s-i)/6048e5:s),n?o:T(o)):NaN):NaN}function sn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(i,"months");return t-s<0?(n=e.clone().add(i-1,"months"),r=(t-s)/(s-n)):(n=e.clone().add(i+1,"months"),r=(t-s)/(n-s)),-(i+r)||0}function on(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function an(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?E(Date.prototype.toISOString)?this.toDate().toISOString():K(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function un(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)}function cn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=K(this,e);return this.localeData().postformat(n)}function ln(e,t){return this.isValid()&&(b(e)&&e.isValid()||bt(e).isValid())?$t({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dn(e){return this.from(bt(),e)}function hn(e,t){return this.isValid()&&(b(e)&&e.isValid()||bt(e).isValid())?$t({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fn(e){return this.to(bt(),e)}function pn(e){var t;return void 0===e?this._locale._abbr:(t=rt(e),null!=t&&(this._locale=t),this)}function mn(){return this._locale}function _n(e){switch(e=N(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function gn(e){return e=N(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function vn(){return this._d.valueOf()-6e4*(this._offset||0)}function yn(){return Math.floor(this.valueOf()/1e3)}function bn(){return new Date(this.valueOf())}function Tn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function kn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function wn(){return this.isValid()?this.toISOString():null}function Mn(){return m(this)}function Sn(){return d({},p(this))}function Ln(){return p(this).overflow}function En(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Cn(e,t){G(0,[e,e.length],0,t)}function xn(e){return An.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Dn(e){return An.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function jn(){return Se(this.year(),1,4)}function Rn(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)}function An(e,t,n,r,i){var s;return null==e?Me(this,r,i).year:(s=Se(e,r,i),t>s&&(t=s),Yn.call(this,e,t,n,r,i))}function Yn(e,t,n,r,i){var s=we(e,t,n,r,i),o=Te(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function In(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Pn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function On(e,t){t[ci]=k(1e3*("0."+e))}function Nn(){return this._isUTC?"UTC":""}function Hn(){return this._isUTC?"Coordinated Universal Time":""}function Un(e){return bt(1e3*e)}function Fn(){return bt.apply(null,arguments).parseZone()}function $n(e){return e}function qn(e,t,n,r){var i=rt(),s=h().set(r,t);return i[n](s,e)}function Xn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return qn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=qn(e,r,n,"month");return i}function Wn(e,t,n,r){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i=rt(),s=e?i._week.dow:0;if(null!=n)return qn(t,(n+s)%7,r,"day");var o,u=[];for(o=0;o<7;o++)u[o]=qn(t,(o+s)%7,r,"day");return u}function Bn(e,t){return Xn(e,t,"months")}function zn(e,t){return Xn(e,t,"monthsShort")}function Gn(e,t,n){return Wn(e,t,n,"weekdays")}function Vn(e,t,n){return Wn(e,t,n,"weekdaysShort")}function Jn(e,t,n){return Wn(e,t,n,"weekdaysMin")}function Kn(){var e=this._data;return this._milliseconds=es(this._milliseconds),this._days=es(this._days),this._months=es(this._months),e.milliseconds=es(e.milliseconds),e.seconds=es(e.seconds),e.minutes=es(e.minutes),e.hours=es(e.hours),e.months=es(e.months),e.years=es(e.years),this}function Zn(e,t,n,r){var i=$t(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Qn(e,t){return Zn(this,e,t,1)}function er(e,t){return Zn(this,e,t,-1)}function tr(e){return e<0?Math.floor(e):Math.ceil(e)}function nr(){var e,t,n,r,i,s=this._milliseconds,o=this._days,a=this._months,u=this._data;return s>=0&&o>=0&&a>=0||s<=0&&o<=0&&a<=0||(s+=864e5*tr(ir(a)+o),o=0,a=0),u.milliseconds=s%1e3,e=T(s/1e3),u.seconds=e%60,t=T(e/60),u.minutes=t%60,n=T(t/60),u.hours=n%24,o+=T(n/24),i=T(rr(o)),a+=i,o-=tr(ir(i)),r=T(a/12),a%=12,u.days=o,u.months=a,u.years=r,this}function rr(e){return 4800*e/146097}function ir(e){return 146097*e/4800}function sr(e){var t,n,r=this._milliseconds;if(e=N(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+rr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ir(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function or(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12)}function ar(e){return function(){return this.as(e)}}function ur(e){return e=N(e),this[e+"s"]()}function cr(e){return function(){return this._data[e]}}function lr(){return T(this.days()/7)}function dr(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function hr(e,t,n){var r=$t(e).abs(),i=_s(r.as("s")),s=_s(r.as("m")),o=_s(r.as("h")),a=_s(r.as("d")),u=_s(r.as("M")),c=_s(r.as("y")),l=i<gs.s&&["s",i]||s<=1&&["m"]||s<gs.m&&["mm",s]||o<=1&&["h"]||o<gs.h&&["hh",o]||a<=1&&["d"]||a<gs.d&&["dd",a]||u<=1&&["M"]||u<gs.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,dr.apply(null,l)}function fr(e){return void 0===e?_s:"function"==typeof e&&(_s=e,!0)}function pr(e,t){return void 0!==gs[e]&&(void 0===t?gs[e]:(gs[e]=t,!0))}function mr(e){var t=this.localeData(),n=hr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function _r(){var e,t,n,r=vs(this._milliseconds)/1e3,i=vs(this._days),s=vs(this._months);e=T(r/60),t=T(e/60),r%=60,e%=60,n=T(s/12),s%=12;var o=n,a=s,u=i,c=t,l=e,d=r,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(c||l||d?"T":"")+(c?c+"H":"")+(l?l+"M":"")+(d?d+"S":""):"P0D"}var gr,vr;vr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var yr=vr,br=t.momentProperties=[],Tr=!1,kr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var wr;wr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Mr,Sr=wr,Lr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Er={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Cr="Invalid date",xr="%d",Dr=/\d{1,2}/,jr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Rr={},Ar={},Yr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ir=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pr={},Or={},Nr=/\d/,Hr=/\d\d/,Ur=/\d{3}/,Fr=/\d{4}/,$r=/[+-]?\d{6}/,qr=/\d\d?/,Xr=/\d\d\d\d?/,Wr=/\d\d\d\d\d\d?/,Br=/\d{1,3}/,zr=/\d{1,4}/,Gr=/[+-]?\d{1,6}/,Vr=/\d+/,Jr=/[+-]?\d+/,Kr=/Z|[+-]\d\d:?\d\d/gi,Zr=/Z|[+-]\d\d(?::?\d\d)?/gi,Qr=/[+-]?\d+(\.\d{1,3})?/,ei=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ti={},ni={},ri=0,ii=1,si=2,oi=3,ai=4,ui=5,ci=6,li=7,di=8;Mr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var hi=Mr;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),G("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("month","M"),U("month",8),Q("M",qr),Q("MM",qr,Hr),Q("MMM",function(e,t){return t.monthsShortRegex(e)}),Q("MMMM",function(e,t){return t.monthsRegex(e)}),re(["M","MM"],function(e,t){t[ii]=k(e)-1}),re(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ii]=i:p(n).invalidMonth=e});var fi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,pi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),mi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_i=ei,gi=ei;G("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),O("year","y"),U("year",1),Q("Y",Jr),Q("YY",qr,Hr),Q("YYYY",zr,Fr),Q("YYYYY",Gr,$r),Q("YYYYYY",Gr,$r),re(["YYYYY","YYYYYY"],ri),re("YYYY",function(e,n){n[ri]=2===e.length?t.parseTwoDigitYear(e):k(e)}),re("YY",function(e,n){n[ri]=t.parseTwoDigitYear(e)}),re("Y",function(e,t){t[ri]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return k(e)+(k(e)>68?1900:2e3)};var vi=$("FullYear",!0);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),O("week","w"),O("isoWeek","W"),U("week",5),U("isoWeek",5),Q("w",qr),Q("ww",qr,Hr),Q("W",qr),Q("WW",qr,Hr),ie(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=k(e)});var yi={dow:0,doy:6};G("d",0,"do","day"),G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),O("day","d"),O("weekday","e"),O("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),Q("d",qr),Q("e",qr),Q("E",qr),Q("dd",function(e,t){return t.weekdaysMinRegex(e)}),Q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Q("dddd",function(e,t){return t.weekdaysRegex(e)}),ie(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:p(n).invalidWeekday=e}),ie(["d","e","E"],function(e,t,n,r){t[r]=k(e)});var bi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ti="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ki="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),wi=ei,Mi=ei,Si=ei;G("H",["HH",2],0,"hour"),G("h",["hh",2],0,We),G("k",["kk",2],0,Be),G("hmm",0,0,function(){return""+We.apply(this)+z(this.minutes(),2)}),G("hmmss",0,0,function(){return""+We.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),ze("a",!0),ze("A",!1),O("hour","h"),U("hour",13),Q("a",Ge),Q("A",Ge),Q("H",qr),Q("h",qr),Q("HH",qr,Hr),Q("hh",qr,Hr),Q("hmm",Xr),Q("hmmss",Wr),Q("Hmm",Xr),Q("Hmmss",Wr),re(["H","HH"],oi),re(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),re(["h","hh"],function(e,t,n){t[oi]=k(e),p(n).bigHour=!0}),re("hmm",function(e,t,n){var r=e.length-2;t[oi]=k(e.substr(0,r)),t[ai]=k(e.substr(r)),p(n).bigHour=!0}),re("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[oi]=k(e.substr(0,r)),t[ai]=k(e.substr(r,2)),t[ui]=k(e.substr(i)),p(n).bigHour=!0}),re("Hmm",function(e,t,n){var r=e.length-2;t[oi]=k(e.substr(0,r)),t[ai]=k(e.substr(r))}),re("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[oi]=k(e.substr(0,r)),t[ai]=k(e.substr(r,2)),t[ui]=k(e.substr(i))});var Li,Ei=/[ap]\.?m?\.?/i,Ci=$("Hours",!0),xi={calendar:Lr,longDateFormat:Er,invalidDate:Cr,ordinal:xr,ordinalParse:Dr,relativeTime:jr,months:pi,monthsShort:mi,week:yi,weekdays:bi,weekdaysMin:ki,weekdaysShort:Ti,meridiemParse:Ei},Di={},ji={},Ri=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ai=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Yi=/Z|[+-]\d\d(?::?\d\d)?/,Ii=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Pi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Oi=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=S("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Ni=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Hi=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}),Ui=function(){return Date.now?Date.now():+new Date};Et("Z",":"),Et("ZZ",""),Q("Z",Zr),Q("ZZ",Zr),re(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ct(Zr,e)});var Fi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var $i=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,qi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;$t.fn=Mt.prototype;var Xi=Bt(1,"add"),Wi=Bt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Bi=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Cn("gggg","weekYear"),Cn("ggggg","weekYear"),Cn("GGGG","isoWeekYear"),Cn("GGGGG","isoWeekYear"),O("weekYear","gg"),O("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),Q("G",Jr),Q("g",Jr),Q("GG",qr,Hr),Q("gg",qr,Hr),Q("GGGG",zr,Fr),Q("gggg",zr,Fr),Q("GGGGG",Gr,$r),Q("ggggg",Gr,$r),ie(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=k(e)}),ie(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),O("quarter","Q"),U("quarter",7),Q("Q",Nr),re("Q",function(e,t){t[ii]=3*(k(e)-1)}),G("D",["DD",2],"Do","date"),O("date","D"),U("date",9),Q("D",qr),Q("DD",qr,Hr),Q("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),re(["D","DD"],si),re("Do",function(e,t){t[si]=k(e.match(qr)[0],10)});var zi=$("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),O("dayOfYear","DDD"),U("dayOfYear",4),Q("DDD",Br),Q("DDDD",Ur),re(["DDD","DDDD"],function(e,t,n){n._dayOfYear=k(e)}),G("m",["mm",2],0,"minute"),O("minute","m"),U("minute",14),Q("m",qr),Q("mm",qr,Hr),re(["m","mm"],ai);var Gi=$("Minutes",!1);G("s",["ss",2],0,"second"),O("second","s"),U("second",15),Q("s",qr),Q("ss",qr,Hr),re(["s","ss"],ui);var Vi=$("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),O("millisecond","ms"),U("millisecond",16),Q("S",Br,Nr),Q("SS",Br,Hr),Q("SSS",Br,Ur);var Ji;for(Ji="SSSS";Ji.length<=9;Ji+="S")Q(Ji,Vr);for(Ji="S";Ji.length<=9;Ji+="S")re(Ji,On);var Ki=$("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var Zi=y.prototype;Zi.add=Xi,Zi.calendar=Vt,Zi.clone=Jt,Zi.diff=rn,Zi.endOf=gn,Zi.format=cn,Zi.from=ln,Zi.fromNow=dn,Zi.to=hn,Zi.toNow=fn,Zi.get=W,Zi.invalidAt=Ln,Zi.isAfter=Kt,Zi.isBefore=Zt,Zi.isBetween=Qt,Zi.isSame=en,Zi.isSameOrAfter=tn,Zi.isSameOrBefore=nn,Zi.isValid=Mn,Zi.lang=Bi,Zi.locale=pn,Zi.localeData=mn,Zi.max=Hi,Zi.min=Ni,Zi.parsingFlags=Sn,Zi.set=B,Zi.startOf=_n,Zi.subtract=Wi,Zi.toArray=Tn,Zi.toObject=kn,Zi.toDate=bn,Zi.toISOString=an,Zi.inspect=un,Zi.toJSON=wn,Zi.toString=on,Zi.unix=yn,Zi.valueOf=vn,Zi.creationData=En,Zi.year=vi,Zi.isLeapYear=ye,Zi.weekYear=xn,Zi.isoWeekYear=Dn,Zi.quarter=Zi.quarters=In,Zi.month=he,Zi.daysInMonth=fe,Zi.week=Zi.weeks=xe,Zi.isoWeek=Zi.isoWeeks=De,Zi.weeksInYear=Rn,Zi.isoWeeksInYear=jn,Zi.date=zi,Zi.day=Zi.days=Ne,Zi.weekday=He,Zi.isoWeekday=Ue,Zi.dayOfYear=Pn,Zi.hour=Zi.hours=Ci,Zi.minute=Zi.minutes=Gi,Zi.second=Zi.seconds=Vi,Zi.millisecond=Zi.milliseconds=Ki,Zi.utcOffset=jt,Zi.utc=At,Zi.local=Yt,Zi.parseZone=It,Zi.hasAlignedHourOffset=Pt,Zi.isDST=Ot,Zi.isLocal=Ht,Zi.isUtcOffset=Ut,Zi.isUtc=Ft,Zi.isUTC=Ft,Zi.zoneAbbr=Nn,Zi.zoneName=Hn,Zi.dates=S("dates accessor is deprecated. Use date instead.",zi),Zi.months=S("months accessor is deprecated. Use month instead",he),Zi.years=S("years accessor is deprecated. Use year instead",vi),Zi.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Rt),Zi.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Nt);var Qi=D.prototype;Qi.calendar=j,Qi.longDateFormat=R,Qi.invalidDate=A,Qi.ordinal=Y,Qi.preparse=$n,Qi.postformat=$n,Qi.relativeTime=I,Qi.pastFuture=P,Qi.set=C,Qi.months=ae,Qi.monthsShort=ue,Qi.monthsParse=le,Qi.monthsRegex=me,Qi.monthsShortRegex=pe,Qi.week=Le,Qi.firstDayOfYear=Ce,Qi.firstDayOfWeek=Ee,Qi.weekdays=Ae,Qi.weekdaysMin=Ie,Qi.weekdaysShort=Ye,Qi.weekdaysParse=Oe,Qi.weekdaysRegex=Fe,Qi.weekdaysShortRegex=$e,Qi.weekdaysMinRegex=qe,Qi.isPM=Ve,Qi.meridiem=Je,et("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===k(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=S("moment.lang is deprecated. Use moment.locale instead.",et),t.langData=S("moment.langData is deprecated. Use moment.localeData instead.",rt);var es=Math.abs,ts=ar("ms"),ns=ar("s"),rs=ar("m"),is=ar("h"),ss=ar("d"),os=ar("w"),as=ar("M"),us=ar("y"),cs=cr("milliseconds"),ls=cr("seconds"),ds=cr("minutes"),hs=cr("hours"),fs=cr("days"),ps=cr("months"),ms=cr("years"),_s=Math.round,gs={s:45,m:45,h:22,d:26,M:11},vs=Math.abs,ys=Mt.prototype;return ys.abs=Kn,ys.add=Qn,ys.subtract=er,ys.as=sr,ys.asMilliseconds=ts,ys.asSeconds=ns,ys.asMinutes=rs,ys.asHours=is,ys.asDays=ss,ys.asWeeks=os,ys.asMonths=as,ys.asYears=us,ys.valueOf=or,ys._bubble=nr,ys.get=ur,ys.milliseconds=cs,ys.seconds=ls,ys.minutes=ds,ys.hours=hs,ys.days=fs,ys.weeks=lr,ys.months=ps,ys.years=ms,ys.humanize=mr,ys.toISOString=_r,ys.toString=_r,ys.toJSON=_r,ys.locale=pn,ys.localeData=mn,ys.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",_r),ys.lang=Bi,G("X",0,0,"unix"),G("x",0,0,"valueOf"),Q("x",Jr),Q("X",Qr),re("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),re("x",function(e,t,n){n._d=new Date(k(e))}),t.version="2.17.1",r(bt),t.fn=Zi,t.min=kt,t.max=wt,t.now=Ui,t.utc=h,t.unix=Un,t.months=Bn,t.isDate=u,t.locale=et,t.invalid=_,t.duration=$t,t.isMoment=b,t.weekdays=Gn,t.parseZone=Fn,t.localeData=rt,t.isDuration=St,t.monthsShort=zn,t.weekdaysMin=Jn,t.defineLocale=tt,t.updateLocale=nt,t.locales=it,t.weekdaysShort=Vn,t.normalizeUnits=N,t.relativeTimeRounding=fr,t.relativeTimeThreshold=pr,t.calendarFormat=Gt,t.prototype=Zi,t})}).call(t,n(6)(e))},,function(e,t,n){var r,i;/*!
 * jQuery JavaScript Library v3.1.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2016-09-22T22:30Z
 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,s){"use strict";function o(e,t){t=t||se;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function a(e){var t=!!e&&"length"in e&&e.length,n=ve.type(e);return"function"!==n&&!ve.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function u(e,t,n){return ve.isFunction(t)?ve.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?ve.grep(e,function(e){return e===t!==n}):"string"!=typeof t?ve.grep(e,function(e){return le.call(t,e)>-1!==n}):Ce.test(t)?ve.filter(t,e,n):(t=ve.filter(t,e),ve.grep(e,function(e){return le.call(t,e)>-1!==n&&1===e.nodeType}))}function c(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return ve.each(e.match(Ae)||[],function(e,n){t[n]=!0}),t}function d(e){return e}function h(e){throw e}function f(e,t,n){var r;try{e&&ve.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&ve.isFunction(r=e.then)?r.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}function p(){se.removeEventListener("DOMContentLoaded",p),n.removeEventListener("load",p),ve.ready()}function m(){this.expando=ve.expando+m.uid++}function _(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ue.test(e)?JSON.parse(e):e)}function g(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Fe,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=_(n)}catch(e){}He.set(e,t,n)}else n=void 0;return n}function v(e,t,n,r){var i,s=1,o=20,a=r?function(){return r.cur()}:function(){return ve.css(e,t,"")},u=a(),c=n&&n[3]||(ve.cssNumber[t]?"":"px"),l=(ve.cssNumber[t]||"px"!==c&&+u)&&qe.exec(ve.css(e,t));if(l&&l[3]!==c){c=c||l[3],n=n||[],l=+u||1;do s=s||".5",l/=s,ve.style(e,t,l+c);while(s!==(s=a()/u)&&1!==s&&--o)}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}function y(e){var t,n=e.ownerDocument,r=e.nodeName,i=ze[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=ve.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ze[r]=i,i)}function b(e,t){for(var n,r,i=[],s=0,o=e.length;s<o;s++)r=e[s],r.style&&(n=r.style.display,t?("none"===n&&(i[s]=Ne.get(r,"display")||null,i[s]||(r.style.display="")),""===r.style.display&&We(r)&&(i[s]=y(r))):"none"!==n&&(i[s]="none",Ne.set(r,"display",n)));for(s=0;s<o;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}function T(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&ve.nodeName(e,t)?ve.merge([e],n):n}function k(e,t){for(var n=0,r=e.length;n<r;n++)Ne.set(e[n],"globalEval",!t||Ne.get(t[n],"globalEval"))}function w(e,t,n,r,i){for(var s,o,a,u,c,l,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if(s=e[f],s||0===s)if("object"===ve.type(s))ve.merge(h,s.nodeType?[s]:s);else if(Ze.test(s)){for(o=o||d.appendChild(t.createElement("div")),a=(Ve.exec(s)||["",""])[1].toLowerCase(),u=Ke[a]||Ke._default,o.innerHTML=u[1]+ve.htmlPrefilter(s)+u[2],l=u[0];l--;)o=o.lastChild;ve.merge(h,o.childNodes),o=d.firstChild,o.textContent=""}else h.push(t.createTextNode(s));for(d.textContent="",f=0;s=h[f++];)if(r&&ve.inArray(s,r)>-1)i&&i.push(s);else if(c=ve.contains(s.ownerDocument,s),o=T(d.appendChild(s),"script"),c&&k(o),n)for(l=0;s=o[l++];)Je.test(s.type||"")&&n.push(s);return d}function M(){return!0}function S(){return!1}function L(){try{return se.activeElement}catch(e){}}function E(e,t,n,r,i,s){var o,a;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(a in t)E(e,a,n,r,t[a],s);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=S;else if(!i)return e;return 1===s&&(o=i,i=function(e){return ve().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=ve.guid++)),e.each(function(){ve.event.add(this,t,i,r,n)})}function C(e,t){return ve.nodeName(e,"table")&&ve.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function x(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function D(e){var t=ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function j(e,t){var n,r,i,s,o,a,u,c;if(1===t.nodeType){if(Ne.hasData(e)&&(s=Ne.access(e),o=Ne.set(t,s),c=s.events)){delete o.handle,o.events={};for(i in c)for(n=0,r=c[i].length;n<r;n++)ve.event.add(t,i,c[i][n])}He.hasData(e)&&(a=He.access(e),u=ve.extend({},a),He.set(t,u))}}function R(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function A(e,t,n,r){t=ue.apply([],t);var i,s,a,u,c,l,d=0,h=e.length,f=h-1,p=t[0],m=ve.isFunction(p);if(m||h>1&&"string"==typeof p&&!_e.checkClone&&st.test(p))return e.each(function(i){var s=e.eq(i);m&&(t[0]=p.call(this,i,s.html())),A(s,t,n,r)});if(h&&(i=w(t,e[0].ownerDocument,!1,e,r),s=i.firstChild,1===i.childNodes.length&&(i=s),s||r)){for(a=ve.map(T(i,"script"),x),u=a.length;d<h;d++)c=i,d!==f&&(c=ve.clone(c,!0,!0),u&&ve.merge(a,T(c,"script"))),n.call(e[d],c,d);if(u)for(l=a[a.length-1].ownerDocument,ve.map(a,D),d=0;d<u;d++)c=a[d],Je.test(c.type||"")&&!Ne.access(c,"globalEval")&&ve.contains(l,c)&&(c.src?ve._evalUrl&&ve._evalUrl(c.src):o(c.textContent.replace(at,""),l))}return e}function Y(e,t,n){for(var r,i=t?ve.filter(t,e):e,s=0;null!=(r=i[s]);s++)n||1!==r.nodeType||ve.cleanData(T(r)),r.parentNode&&(n&&ve.contains(r.ownerDocument,r)&&k(T(r,"script")),r.parentNode.removeChild(r));return e}function I(e,t,n){var r,i,s,o,a=e.style;return n=n||lt(e),n&&(o=n.getPropertyValue(t)||n[t],""!==o||ve.contains(e.ownerDocument,e)||(o=ve.style(e,t)),!_e.pixelMarginRight()&&ct.test(o)&&ut.test(t)&&(r=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=r,a.minWidth=i,a.maxWidth=s)),void 0!==o?o+"":o}function P(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function O(e){if(e in mt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=pt.length;n--;)if(e=pt[n]+t,e in mt)return e}function N(e,t,n){var r=qe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function H(e,t,n,r,i){var s,o=0;for(s=n===(r?"border":"content")?4:"width"===t?1:0;s<4;s+=2)"margin"===n&&(o+=ve.css(e,n+Xe[s],!0,i)),r?("content"===n&&(o-=ve.css(e,"padding"+Xe[s],!0,i)),"margin"!==n&&(o-=ve.css(e,"border"+Xe[s]+"Width",!0,i))):(o+=ve.css(e,"padding"+Xe[s],!0,i),"padding"!==n&&(o+=ve.css(e,"border"+Xe[s]+"Width",!0,i)));return o}function U(e,t,n){var r,i=!0,s=lt(e),o="border-box"===ve.css(e,"boxSizing",!1,s);if(e.getClientRects().length&&(r=e.getBoundingClientRect()[t]),r<=0||null==r){if(r=I(e,t,s),(r<0||null==r)&&(r=e.style[t]),ct.test(r))return r;i=o&&(_e.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+H(e,t,n||(o?"border":"content"),i,s)+"px"}function F(e,t,n,r,i){return new F.prototype.init(e,t,n,r,i)}function $(){gt&&(n.requestAnimationFrame($),ve.fx.tick())}function q(){return n.setTimeout(function(){_t=void 0}),_t=ve.now()}function X(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Xe[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function W(e,t,n){for(var r,i=(G.tweeners[t]||[]).concat(G.tweeners["*"]),s=0,o=i.length;s<o;s++)if(r=i[s].call(n,t,e))return r}function B(e,t,n){var r,i,s,o,a,u,c,l,d="width"in t||"height"in t,h=this,f={},p=e.style,m=e.nodeType&&We(e),_=Ne.get(e,"fxshow");n.queue||(o=ve._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,ve.queue(e,"fx").length||o.empty.fire()})}));for(r in t)if(i=t[r],vt.test(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!_||void 0===_[r])continue;m=!0}f[r]=_&&_[r]||ve.style(e,r)}if(u=!ve.isEmptyObject(t),u||!ve.isEmptyObject(f)){d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=_&&_.display,null==c&&(c=Ne.get(e,"display")),l=ve.css(e,"display"),"none"===l&&(c?l=c:(b([e],!0),c=e.style.display||c,l=ve.css(e,"display"),b([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===ve.css(e,"float")&&(u||(h.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1;for(r in f)u||(_?"hidden"in _&&(m=_.hidden):_=Ne.access(e,"fxshow",{display:c}),s&&(_.hidden=!m),m&&b([e],!0),h.done(function(){m||b([e]),Ne.remove(e,"fxshow");for(r in f)ve.style(e,r,f[r])})),u=W(m?_[r]:0,r,h),r in _||(_[r]=u.start,m&&(u.end=u.start,u.start=0))}}function z(e,t){var n,r,i,s,o;for(n in e)if(r=ve.camelCase(n),i=t[r],s=e[n],ve.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=ve.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function G(e,t,n){var r,i,s=0,o=G.prefilters.length,a=ve.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=_t||q(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,s=1-r,o=0,u=c.tweens.length;o<u;o++)c.tweens[o].run(s);return a.notifyWith(e,[c,s,n]),s<1&&u?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ve.extend({},t),opts:ve.extend(!0,{specialEasing:{},easing:ve.easing._default},n),originalProperties:t,originalOptions:n,startTime:_t||q(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ve.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),l=c.props;for(z(l,c.opts.specialEasing);s<o;s++)if(r=G.prefilters[s].call(c,e,l,c.opts))return ve.isFunction(r.stop)&&(ve._queueHooks(c.elem,c.opts.queue).stop=ve.proxy(r.stop,r)),r;return ve.map(l,W,c),ve.isFunction(c.opts.start)&&c.opts.start.call(e,c),ve.fx.timer(ve.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function V(e){return(e.match(Ae)||[]).join(" ")}function J(e){return e.getAttribute&&e.getAttribute("class")||""}function K(e,t,n,r){var i;if(ve.isArray(t))ve.each(t,function(t,i){n||xt.test(e)?r(e,i):K(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==ve.type(t))r(e,t);else for(i in t)K(e+"["+i+"]",t[i],n,r)}function Z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(Ae)||[];if(ve.isFunction(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Q(e,t,n,r){function i(a){var u;return s[a]=!0,ve.each(e[a]||[],function(e,a){var c=a(t,n,r);return"string"!=typeof c||o||s[c]?o?!(u=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),u}var s={},o=e===Ft;return i(t.dataTypes[0])||!s["*"]&&i("*")}function ee(e,t){var n,r,i=ve.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ve.extend(!0,e,r),e}function te(e,t,n){for(var r,i,s,o,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)s=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==u[0]&&u.unshift(s),n[s]}function ne(e,t,n,r){var i,s,o,a,u,c={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=l.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=s,s=l.shift())if("*"===s)s=u;else if("*"!==u&&u!==s){if(o=c[u+" "+s]||c["* "+s],!o)for(i in c)if(a=i.split(" "),a[1]===s&&(o=c[u+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[i]:c[i]!==!0&&(s=a[0],l.unshift(a[1]));break}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+u+" to "+s}}}return{state:"success",data:t}}function re(e){return ve.isWindow(e)?e:9===e.nodeType&&e.defaultView}var ie=[],se=n.document,oe=Object.getPrototypeOf,ae=ie.slice,ue=ie.concat,ce=ie.push,le=ie.indexOf,de={},he=de.toString,fe=de.hasOwnProperty,pe=fe.toString,me=pe.call(Object),_e={},ge="3.1.1",ve=function(e,t){return new ve.fn.init(e,t)},ye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,be=/^-ms-/,Te=/-([a-z])/g,ke=function(e,t){return t.toUpperCase()};ve.fn=ve.prototype={jquery:ge,constructor:ve,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ve.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ve.each(this,e)},map:function(e){return this.pushStack(ve.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ce,sort:ie.sort,splice:ie.splice},ve.extend=ve.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||ve.isFunction(o)||(o={}),a===u&&(o=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],r=e[t],o!==r&&(c&&r&&(ve.isPlainObject(r)||(i=ve.isArray(r)))?(i?(i=!1,s=n&&ve.isArray(n)?n:[]):s=n&&ve.isPlainObject(n)?n:{},o[t]=ve.extend(c,s,r)):void 0!==r&&(o[t]=r));return o},ve.extend({expando:"jQuery"+(ge+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ve.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ve.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==he.call(e))&&(!(t=oe(e))||(n=fe.call(t,"constructor")&&t.constructor,"function"==typeof n&&pe.call(n)===me))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?de[he.call(e)]||"object":typeof e},globalEval:function(e){o(e)},camelCase:function(e){return e.replace(be,"ms-").replace(Te,ke)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(a(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ye,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?ve.merge(n,"string"==typeof e?[e]:e):ce.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:le.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,a=!n;s<o;s++)r=!t(e[s],s),r!==a&&i.push(e[s]);return i},map:function(e,t,n){var r,i,s=0,o=[];if(a(e))for(r=e.length;s<r;s++)i=t(e[s],s,n),null!=i&&o.push(i);else for(s in e)i=t(e[s],s,n),null!=i&&o.push(i);return ue.apply([],o)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),ve.isFunction(e))return r=ae.call(arguments,2),i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))},i.guid=e.guid=e.guid||ve.guid++,i},now:Date.now,support:_e}),"function"==typeof Symbol&&(ve.fn[Symbol.iterator]=ie[Symbol.iterator]),ve.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){de["[object "+t+"]"]=t.toLowerCase()});var we=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){function t(e,t,n,r){var i,s,o,a,u,c,l,h=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:F)!==A&&R(t),t=t||A,I)){if(11!==p&&(u=ge.exec(e)))if(i=u[1]){if(9===p){if(!(o=t.getElementById(i)))return n;if(o.id===i)return n.push(o),n}else if(h&&(o=h.getElementById(i))&&H(t,o)&&o.id===i)return n.push(o),n}else{if(u[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&k.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(i)),n}if(k.qsa&&!B[e+" "]&&(!P||!P.test(e))){if(1!==p)h=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(Te,ke):t.setAttribute("id",a=U),c=L(e),s=c.length;s--;)c[s]="#"+a+" "+f(c[s]);l=c.join(","),h=ve.test(e)&&d(t.parentNode)||t}if(l)try{return Z.apply(n,h.querySelectorAll(l)),n}catch(e){}finally{a===U&&t.removeAttribute("id")}}}return C(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[U]=!0,e}function i(e){var t=A.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Me(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function h(){}function f(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=t.next,s=i||r,o=n&&"parentNode"===s,a=q++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,u){var c,l,d,h=[$,a];if(u){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(d=t[U]||(t[U]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[s])&&c[0]===$&&c[1]===a)return h[2]=c[2];if(l[s]=h,h[2]=e(t,n,u))return!0}return!1}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _(e,n,r){for(var i=0,s=n.length;i<s;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var s,o=[],a=0,u=e.length,c=null!=t;a<u;a++)(s=e[a])&&(n&&!n(s,r,i)||(o.push(s),c&&t.push(a)));return o}function v(e,t,n,i,s,o){return i&&!i[U]&&(i=v(i)),s&&!s[U]&&(s=v(s,o)),r(function(r,o,a,u){var c,l,d,h=[],f=[],p=o.length,m=r||_(t||"*",a.nodeType?[a]:a,[]),v=!e||!r&&t?m:g(m,h,e,a,u),y=n?s||(r?e:p||i)?[]:o:v;if(n&&n(v,y,a,u),i)for(c=g(y,f),i(c,[],a,u),l=c.length;l--;)(d=c[l])&&(y[f[l]]=!(v[f[l]]=d));if(r){if(s||e){if(s){for(c=[],l=y.length;l--;)(d=y[l])&&c.push(v[l]=d);s(null,y=[],c,u)}for(l=y.length;l--;)(d=y[l])&&(c=s?ee(r,d):h[l])>-1&&(r[c]=!(o[c]=d))}}else y=g(y===o?y.splice(p,y.length):y),s?s(null,o,y,u):Z.apply(o,y)})}function y(e){for(var t,n,r,i=e.length,s=w.relative[e[0].type],o=s||w.relative[" "],a=s?1:0,u=p(function(e){return e===t},o,!0),c=p(function(e){return ee(t,e)>-1},o,!0),l=[function(e,n,r){var i=!s&&(r||n!==x)||((t=n).nodeType?u(e,n,r):c(e,n,r));return t=null,i}];a<i;a++)if(n=w.relative[e[a].type])l=[p(m(l),n)];else{if(n=w.filter[e[a].type].apply(null,e[a].matches),n[U]){for(r=++a;r<i&&!w.relative[e[r].type];r++);return v(a>1&&m(l),a>1&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<r&&y(e.slice(a,r)),r<i&&y(e=e.slice(r)),r<i&&f(e))}l.push(n)}return m(l)}function b(e,n){var i=n.length>0,s=e.length>0,o=function(r,o,a,u,c){var l,d,h,f=0,p="0",m=r&&[],_=[],v=x,y=r||s&&w.find.TAG("*",c),b=$+=null==v?1:Math.random()||.1,T=y.length;for(c&&(x=o===A||o||c);p!==T&&null!=(l=y[p]);p++){if(s&&l){for(d=0,o||l.ownerDocument===A||(R(l),a=!I);h=e[d++];)if(h(l,o||A,a)){u.push(l);break}c&&($=b)}i&&((l=!h&&l)&&f--,r&&m.push(l))}if(f+=p,i&&p!==f){for(d=0;h=n[d++];)h(m,_,o,a);if(r){if(f>0)for(;p--;)m[p]||_[p]||(_[p]=J.call(u));_=g(_)}Z.apply(u,_),c&&!r&&_.length>0&&f+n.length>1&&t.uniqueSort(u)}return c&&($=b,x=v),m};return i?r(o):o}var T,k,w,M,S,L,E,C,x,D,j,R,A,Y,I,P,O,N,H,U="sizzle"+1*new Date,F=e.document,$=0,q=0,X=n(),W=n(),B=n(),z=function(e,t){return e===t&&(j=!0),0},G={}.hasOwnProperty,V=[],J=V.pop,K=V.push,Z=V.push,Q=V.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(se),he=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,ye=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ke=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){R()},Me=p(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Z.apply(V=Q.call(F.childNodes),F.childNodes),V[F.childNodes.length].nodeType}catch(e){Z={apply:V.length?function(e,t){K.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}k=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:F;return r!==A&&9===r.nodeType&&r.documentElement?(A=r,Y=A.documentElement,I=!S(A),F!==A&&(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),k.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=i(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=_e.test(A.getElementsByClassName),k.getById=i(function(e){return Y.appendChild(e).id=U,!A.getElementsByName||!A.getElementsByName(U).length}),k.getById?(w.filter.ID=function(e){var t=e.replace(ye,be);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&I){var n=t.getElementById(e);return n?[n]:[]}}):(w.filter.ID=function(e){var t=e.replace(ye,be);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&I){var n,r,i,s=t.getElementById(e);if(s){if(n=s.getAttributeNode("id"),n&&n.value===e)return[s];for(i=t.getElementsByName(e),r=0;s=i[r++];)if(n=s.getAttributeNode("id"),n&&n.value===e)return[s]}return[]}}),w.find.TAG=k.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):k.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[i++];)1===n.nodeType&&r.push(n);return r}return s},w.find.CLASS=k.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&I)return t.getElementsByClassName(e)},O=[],P=[],(k.qsa=_e.test(A.querySelectorAll))&&(i(function(e){Y.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+U+"-]").length||P.push("~="),e.querySelectorAll(":checked").length||P.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||P.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&P.push(":enabled",":disabled"),Y.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(k.matchesSelector=_e.test(N=Y.matches||Y.webkitMatchesSelector||Y.mozMatchesSelector||Y.oMatchesSelector||Y.msMatchesSelector))&&i(function(e){k.disconnectedMatch=N.call(e,"*"),N.call(e,"[s!='']:x"),O.push("!=",se)}),P=P.length&&new RegExp(P.join("|")),O=O.length&&new RegExp(O.join("|")),t=_e.test(Y.compareDocumentPosition),H=t||_e.test(Y.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return j=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!k.sortDetached&&t.compareDocumentPosition(e)===n?e===A||e.ownerDocument===F&&H(F,e)?-1:t===A||t.ownerDocument===F&&H(F,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return j=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,a=[e],u=[t];if(!i||!s)return e===A?-1:t===A?1:i?-1:s?1:D?ee(D,e)-ee(D,t):0;if(i===s)return o(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?o(a[r],u[r]):a[r]===F?-1:u[r]===F?1:0},A):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&R(e),n=n.replace(le,"='$1']"),k.matchesSelector&&I&&!B[n+" "]&&(!O||!O.test(n))&&(!P||!P.test(n)))try{var r=N.call(e,n);if(r||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&R(e),H(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&R(e);var n=w.attrHandle[t.toLowerCase()],r=n&&G.call(w.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==r?r:k.attributes||!I?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(Te,ke)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(j=!k.detectDuplicates,D=!k.sortStable&&e.slice(0),e.sort(z),j){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},M=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=M(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=M(t);return n},w=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=L(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=X[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&X(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var s=t.attr(i,e);return null==s?"!="===n:!n||(s+="","="===n?s===r:"!="===n?s!==r:"^="===n?r&&0===s.indexOf(r):"*="===n?r&&s.indexOf(r)>-1:"$="===n?r&&s.slice(-r.length)===r:"~="===n?(" "+s.replace(oe," ")+" ").indexOf(r)>-1:"|="===n&&(s===r||s.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,d,h,f,p,m=s!==o?"nextSibling":"previousSibling",_=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!u&&!a,y=!1;if(_){if(s){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?_.firstChild:_.lastChild],o&&v){for(h=_,d=h[U]||(h[U]={}),l=d[h.uniqueID]||(d[h.uniqueID]={}),c=l[e]||[],f=c[0]===$&&c[1],y=f&&c[2],h=f&&_.childNodes[f];h=++f&&h&&h[m]||(y=f=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){l[e]=[$,f,y];break}}else if(v&&(h=t,d=h[U]||(h[U]={}),l=d[h.uniqueID]||(d[h.uniqueID]={}),c=l[e]||[],f=c[0]===$&&c[1],y=f),y===!1)for(;(h=++f&&h&&h[m]||(y=f=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++y||(v&&(d=h[U]||(h[U]={}),l=d[h.uniqueID]||(d[h.uniqueID]={}),l[e]=[$,y]),h!==t)););return y-=i,y===r||y%r===0&&y/r>=0}}},PSEUDO:function(e,n){var i,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[U]?s(n):s.length>1?(i=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=s(e,n),o=i.length;o--;)r=ee(e,i[o]),e[r]=!(t[r]=i[o])}):function(e){return s(e,0,i)}):s}},pseudos:{not:r(function(e){var t=[],n=[],i=E(e.replace(ae,"$1"));return i[U]?r(function(e,t,n,r){for(var s,o=i(e,null,r,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ye,be),function(t){return(t.textContent||t.innerText||M(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,be).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===Y},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},w.pseudos.nth=w.pseudos.eq;for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[T]=a(T);for(T in{submit:!0,reset:!0})w.pseudos[T]=u(T);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,L=t.tokenize=function(e,n){var r,i,s,o,a,u,c,l=W[e+" "];if(l)return n?0:l.slice(0);for(a=e,u=[],c=w.preFilter;a;){r&&!(i=ue.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(s=[])),r=!1,(i=ce.exec(a))&&(r=i.shift(),s.push({value:r,type:i[0].replace(ae," ")}),a=a.slice(r.length));for(o in w.filter)!(i=fe[o].exec(a))||c[o]&&!(i=c[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):W(e,u).slice(0)},E=t.compile=function(e,t){var n,r=[],i=[],s=B[e+" "];if(!s){for(t||(t=L(e)),n=t.length;n--;)s=y(t[n]),s[U]?r.push(s):i.push(s);s=B(e,b(i,r)),s.selector=e}return s},C=t.select=function(e,t,n,r){var i,s,o,a,u,c="function"==typeof e&&e,l=!r&&L(e=c.selector||e);if(n=n||[],1===l.length){if(s=l[0]=l[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&I&&w.relative[s[1].type]){if(t=(w.find.ID(o.matches[0].replace(ye,be),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(i=fe.needsContext.test(e)?0:s.length;i--&&(o=s[i],!w.relative[a=o.type]);)if((u=w.find[a])&&(r=u(o.matches[0].replace(ye,be),ve.test(s[0].type)&&d(t.parentNode)||t))){if(s.splice(i,1),e=r.length&&f(s),!e)return Z.apply(n,r),n;break}}return(c||E(e,l))(r,t,!I,n,!t||ve.test(e)&&d(t.parentNode)||t),n},k.sortStable=U.split("").sort(z).join("")===U,k.detectDuplicates=!!j,R(),k.sortDetached=i(function(e){return 1&e.compareDocumentPosition(A.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);ve.find=we,ve.expr=we.selectors,ve.expr[":"]=ve.expr.pseudos,ve.uniqueSort=ve.unique=we.uniqueSort,ve.text=we.getText,ve.isXMLDoc=we.isXML,ve.contains=we.contains,ve.escapeSelector=we.escape;var Me=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&ve(e).is(n))break;r.push(e)}return r},Se=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Le=ve.expr.match.needsContext,Ee=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ce=/^.[^:#\[\.,]*$/;ve.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ve.find.matchesSelector(r,e)?[r]:[]:ve.find.matches(e,ve.grep(t,function(e){return 1===e.nodeType}))},ve.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ve(e).filter(function(){for(t=0;t<r;t++)if(ve.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ve.find(e,i[t],n);return r>1?ve.uniqueSort(n):n},filter:function(e){return this.pushStack(u(this,e||[],!1))},not:function(e){return this.pushStack(u(this,e||[],!0))},is:function(e){return!!u(this,"string"==typeof e&&Le.test(e)?ve(e):e||[],!1).length}});var xe,De=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ve.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||xe,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:De.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ve?t[0]:t,ve.merge(this,ve.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),Ee.test(r[1])&&ve.isPlainObject(t))for(r in t)ve.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=se.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ve.isFunction(e)?void 0!==n.ready?n.ready(e):e(ve):ve.makeArray(e,this)}).prototype=ve.fn,xe=ve(se);var je=/^(?:parents|prev(?:Until|All))/,Re={children:!0,contents:!0,next:!0,prev:!0};ve.fn.extend({has:function(e){var t=ve(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ve.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o="string"!=typeof e&&ve(e);if(!Le.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&ve.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?ve.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?le.call(ve(e),this[0]):le.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ve.uniqueSort(ve.merge(this.get(),ve(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ve.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Me(e,"parentNode")},parentsUntil:function(e,t,n){return Me(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return Me(e,"nextSibling")},prevAll:function(e){return Me(e,"previousSibling")},nextUntil:function(e,t,n){return Me(e,"nextSibling",n)},prevUntil:function(e,t,n){return Me(e,"previousSibling",n)},siblings:function(e){return Se((e.parentNode||{}).firstChild,e)},children:function(e){return Se(e.firstChild)},contents:function(e){return e.contentDocument||ve.merge([],e.childNodes)}},function(e,t){ve.fn[e]=function(n,r){var i=ve.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ve.filter(r,i)),this.length>1&&(Re[e]||ve.uniqueSort(i),je.test(e)&&i.reverse()),this.pushStack(i)}});var Ae=/[^\x20\t\r\n\f]+/g;ve.Callbacks=function(e){e="string"==typeof e?l(e):ve.extend({},e);var t,n,r,i,s=[],o=[],a=-1,u=function(){for(i=e.once,r=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)s[a].apply(n[0],n[1])===!1&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){ve.each(n,function(n,r){ve.isFunction(r)?e.unique&&c.has(r)||s.push(r):r&&r.length&&"string"!==ve.type(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return ve.each(arguments,function(e,t){for(var n;(n=ve.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--}),this},has:function(e){return e?ve.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=o=[],n||t||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},ve.extend({Deferred:function(e){var t=[["notify","progress",ve.Callbacks("memory"),ve.Callbacks("memory"),2],["resolve","done",ve.Callbacks("once memory"),ve.Callbacks("once memory"),0,"resolved"],["reject","fail",ve.Callbacks("once memory"),ve.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return ve.Deferred(function(n){ve.each(t,function(t,r){var i=ve.isFunction(e[r[4]])&&e[r[4]];s[r[1]](function(){var e=i&&i.apply(this,arguments);e&&ve.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){function s(e,t,r,i){return function(){var a=this,u=arguments,c=function(){var n,c;if(!(e<o)){if(n=r.apply(a,u),n===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,ve.isFunction(c)?i?c.call(n,s(o,t,d,i),s(o,t,h,i)):(o++,c.call(n,s(o,t,d,i),s(o,t,h,i),s(o,t,d,t.notifyWith))):(r!==d&&(a=void 0,u=[n]),(i||t.resolveWith)(a,u))}},l=i?c:function(){try{c()}catch(n){ve.Deferred.exceptionHook&&ve.Deferred.exceptionHook(n,l.stackTrace),e+1>=o&&(r!==h&&(a=void 0,u=[n]),t.rejectWith(a,u))}};e?l():(ve.Deferred.getStackHook&&(l.stackTrace=ve.Deferred.getStackHook()),n.setTimeout(l))}}var o=0;return ve.Deferred(function(n){t[0][3].add(s(0,n,ve.isFunction(i)?i:d,n.notifyWith)),t[1][3].add(s(0,n,ve.isFunction(e)?e:d)),t[2][3].add(s(0,n,ve.isFunction(r)?r:h))}).promise()},promise:function(e){return null!=e?ve.extend(e,i):i}},s={};return ve.each(t,function(e,n){var o=n[2],a=n[5];i[n[1]]=o.add,a&&o.add(function(){r=a},t[3-e][2].disable,t[0][2].lock),o.add(n[3].fire),s[n[0]]=function(){return s[n[0]+"With"](this===s?void 0:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),i=ae.call(arguments),s=ve.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?ae.call(arguments):n,--t||s.resolveWith(r,i)}};if(t<=1&&(f(e,s.done(o(n)).resolve,s.reject),"pending"===s.state()||ve.isFunction(i[n]&&i[n].then)))return s.then();for(;n--;)f(i[n],o(n),s.reject);return s.promise()}});var Ye=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ve.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Ye.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ve.readyException=function(e){n.setTimeout(function(){throw e})};var Ie=ve.Deferred();ve.fn.ready=function(e){return Ie.then(e).catch(function(e){ve.readyException(e)}),this},ve.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ve.readyWait++:ve.ready(!0)},ready:function(e){(e===!0?--ve.readyWait:ve.isReady)||(ve.isReady=!0,e!==!0&&--ve.readyWait>0||Ie.resolveWith(se,[ve]))}}),ve.ready.then=Ie.then,"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll?n.setTimeout(ve.ready):(se.addEventListener("DOMContentLoaded",p),n.addEventListener("load",p));var Pe=function(e,t,n,r,i,s,o){var a=0,u=e.length,c=null==n;if("object"===ve.type(n)){i=!0;for(a in n)Pe(e,t,a,n[a],!0,s,o)}else if(void 0!==r&&(i=!0,ve.isFunction(r)||(o=!0),c&&(o?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(ve(e),n)})),t))for(;a<u;a++)t(e[a],n,o?r:r.call(e[a],a,t(e[a],n)));return i?e:c?t.call(e):u?t(e[0],n):s},Oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};m.uid=1,m.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[ve.camelCase(t)]=n;else for(r in t)i[ve.camelCase(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ve.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){ve.isArray(t)?t=t.map(ve.camelCase):(t=ve.camelCase(t),t=t in r?[t]:t.match(Ae)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||ve.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ve.isEmptyObject(t)}};var Ne=new m,He=new m,Ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fe=/[A-Z]/g;ve.extend({hasData:function(e){return He.hasData(e)||Ne.hasData(e)},data:function(e,t,n){return He.access(e,t,n)},removeData:function(e,t){He.remove(e,t)},_data:function(e,t,n){return Ne.access(e,t,n)},_removeData:function(e,t){Ne.remove(e,t)}}),ve.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=He.get(s),1===s.nodeType&&!Ne.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=ve.camelCase(r.slice(5)),g(s,r,i[r])));Ne.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){He.set(this,e)}):Pe(this,function(t){var n;if(s&&void 0===t){if(n=He.get(s,e),void 0!==n)return n;if(n=g(s,e),void 0!==n)return n}else this.each(function(){He.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){He.remove(this,e)})}}),ve.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Ne.get(e,t),n&&(!r||ve.isArray(n)?r=Ne.access(e,t,ve.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ve.queue(e,t),r=n.length,i=n.shift(),s=ve._queueHooks(e,t),o=function(){ve.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ne.get(e,n)||Ne.access(e,n,{empty:ve.Callbacks("once memory").add(function(){Ne.remove(e,[t+"queue",n])})})}}),ve.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ve.queue(this[0],e):void 0===t?this:this.each(function(){var n=ve.queue(this,e,t);ve._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ve.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ve.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ve.Deferred(),s=this,o=this.length,a=function(){--r||i.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=Ne.get(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var $e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,qe=new RegExp("^(?:([+-])=|)("+$e+")([a-z%]*)$","i"),Xe=["Top","Right","Bottom","Left"],We=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&ve.contains(e.ownerDocument,e)&&"none"===ve.css(e,"display")},Be=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i},ze={};ve.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){We(this)?ve(this).show():ve(this).hide()})}});var Ge=/^(?:checkbox|radio)$/i,Ve=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Je=/^$|\/(?:java|ecma)script/i,Ke={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td;var Ze=/<|&#?\w+;/;!function(){var e=se.createDocumentFragment(),t=e.appendChild(se.createElement("div")),n=se.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),_e.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",_e.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Qe=se.documentElement,et=/^key/,tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nt=/^([^.]*)(?:\.(.+)|)/;ve.event={global:{},add:function(e,t,n,r,i){var s,o,a,u,c,l,d,h,f,p,m,_=Ne.get(e);if(_)for(n.handler&&(s=n,n=s.handler,i=s.selector),i&&ve.find.matchesSelector(Qe,i),n.guid||(n.guid=ve.guid++),(u=_.events)||(u=_.events={}),(o=_.handle)||(o=_.handle=function(t){return void 0!==ve&&ve.event.triggered!==t.type?ve.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ae)||[""],c=t.length;c--;)a=nt.exec(t[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(d=ve.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,d=ve.event.special[f]||{},l=ve.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ve.expr.match.needsContext.test(i),namespace:p.join(".")},s),(h=u[f])||(h=u[f]=[],h.delegateCount=0,d.setup&&d.setup.call(e,r,p,o)!==!1||e.addEventListener&&e.addEventListener(f,o)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),ve.event.global[f]=!0)},remove:function(e,t,n,r,i){var s,o,a,u,c,l,d,h,f,p,m,_=Ne.hasData(e)&&Ne.get(e);if(_&&(u=_.events)){for(t=(t||"").match(Ae)||[""],c=t.length;c--;)if(a=nt.exec(t[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(d=ve.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,h=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)l=h[s],!i&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(s,1),l.selector&&h.delegateCount--,d.remove&&d.remove.call(e,l));o&&!h.length&&(d.teardown&&d.teardown.call(e,p,_.handle)!==!1||ve.removeEvent(e,f,_.handle),delete u[f])}else for(f in u)ve.event.remove(e,f+t[c],n,r,!0);ve.isEmptyObject(u)&&Ne.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,s,o,a=ve.event.fix(e),u=new Array(arguments.length),c=(Ne.get(this,"events")||{})[a.type]||[],l=ve.event.special[a.type]||{};for(u[0]=a,t=1;t<arguments.length;t++)u[t]=arguments[t];if(a.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,a)!==!1){for(o=ve.event.handlers.call(this,a,c),t=0;(i=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(s=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,r=((ve.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u),void 0!==r&&(a.result=r)===!1&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,r,i,s,o,a=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||c.disabled!==!0)){for(s=[],o={},n=0;n<u;n++)r=t[n],i=r.selector+" ",void 0===o[i]&&(o[i]=r.needsContext?ve(i,this).index(c)>-1:ve.find(i,this,null,[c]).length),o[i]&&s.push(r);s.length&&a.push({elem:c,handlers:s})}return c=this,u<t.length&&a.push({elem:c,handlers:t.slice(u)}),a},addProp:function(e,t){Object.defineProperty(ve.Event.prototype,e,{enumerable:!0,configurable:!0,get:ve.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ve.expando]?e:new ve.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==L()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===L()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ve.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ve.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ve.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ve.Event=function(e,t){if(!(this instanceof ve.Event))return new ve.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?M:S,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ve.extend(this,t),this.timeStamp=e&&e.timeStamp||ve.now(),this[ve.expando]=!0},ve.Event.prototype={constructor:ve.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=M,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=M,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=M,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ve.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&et.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&tt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ve.event.addProp),ve.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ve.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return i&&(i===r||ve.contains(r,i))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),ve.fn.extend({on:function(e,t,n,r){return E(this,e,t,n,r)},one:function(e,t,n,r){return E(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ve(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=S),this.each(function(){ve.event.remove(this,e,n,t)})}});var rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,it=/<script|<style|<link/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,ot=/^true\/(.*)/,at=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ve.extend({htmlPrefilter:function(e){return e.replace(rt,"<$1></$2>")},clone:function(e,t,n){var r,i,s,o,a=e.cloneNode(!0),u=ve.contains(e.ownerDocument,e);if(!(_e.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ve.isXMLDoc(e)))for(o=T(a),s=T(e),r=0,i=s.length;r<i;r++)R(s[r],o[r]);if(t)if(n)for(s=s||T(e),o=o||T(a),r=0,i=s.length;r<i;r++)j(s[r],o[r]);else j(e,a);return o=T(a,"script"),o.length>0&&k(o,!u&&T(e,"script")),a},cleanData:function(e){for(var t,n,r,i=ve.event.special,s=0;void 0!==(n=e[s]);s++)if(Oe(n)){if(t=n[Ne.expando]){if(t.events)for(r in t.events)i[r]?ve.event.remove(n,r):ve.removeEvent(n,r,t.handle);n[Ne.expando]=void 0}n[He.expando]&&(n[He.expando]=void 0)}}}),ve.fn.extend({detach:function(e){return Y(this,e,!0)},remove:function(e){return Y(this,e)},text:function(e){return Pe(this,function(e){return void 0===e?ve.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){C(this,e).appendChild(e)}})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=C(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ve.cleanData(T(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ve.clone(this,e,t)})},html:function(e){return Pe(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!Ke[(Ve.exec(e)||["",""])[1].toLowerCase()]){e=ve.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(ve.cleanData(T(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var n=this.parentNode;ve.inArray(this,e)<0&&(ve.cleanData(T(this)),n&&n.replaceChild(t,this))},e)}}),ve.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ve.fn[e]=function(e){for(var n,r=[],i=ve(e),s=i.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),ve(i[o])[t](n),ce.apply(r,n.get());return this.pushStack(r)}});var ut=/^margin/,ct=new RegExp("^("+$e+")(?!px)[a-z%]+$","i"),lt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Qe.appendChild(o);var e=n.getComputedStyle(a);t="1%"!==e.top,s="2px"===e.marginLeft,r="4px"===e.width,a.style.marginRight="50%",i="4px"===e.marginRight,Qe.removeChild(o),a=null}}var t,r,i,s,o=se.createElement("div"),a=se.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",_e.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),ve.extend(_e,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),r},pixelMarginRight:function(){return e(),i},reliableMarginLeft:function(){return e(),s}}))}();var dt=/^(none|table(?!-c[ea]).+)/,ht={position:"absolute",visibility:"hidden",display:"block"},ft={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","Moz","ms"],mt=se.createElement("div").style;ve.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=I(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=ve.camelCase(t),u=e.style;if(t=ve.cssProps[a]||(ve.cssProps[a]=O(a)||a),o=ve.cssHooks[t]||ve.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:u[t];s=typeof n,"string"===s&&(i=qe.exec(n))&&i[1]&&(n=v(e,t,i),s="number"),null!=n&&n===n&&("number"===s&&(n+=i&&i[3]||(ve.cssNumber[a]?"":"px")),_e.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u[t]=n))}},css:function(e,t,n,r){var i,s,o,a=ve.camelCase(t);return t=ve.cssProps[a]||(ve.cssProps[a]=O(a)||a),o=ve.cssHooks[t]||ve.cssHooks[a],o&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=I(e,t,r)),"normal"===i&&t in ft&&(i=ft[t]),""===n||n?(s=parseFloat(i),n===!0||isFinite(s)?s||0:i):i}}),ve.each(["height","width"],function(e,t){ve.cssHooks[t]={get:function(e,n,r){if(n)return!dt.test(ve.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?U(e,t,r):Be(e,ht,function(){return U(e,t,r)})},set:function(e,n,r){var i,s=r&&lt(e),o=r&&H(e,t,r,"border-box"===ve.css(e,"boxSizing",!1,s),s);return o&&(i=qe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=ve.css(e,t)),N(e,n,o)}}}),ve.cssHooks.marginLeft=P(_e.reliableMarginLeft,function(e,t){if(t)return(parseFloat(I(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ve.each({margin:"",padding:"",border:"Width"},function(e,t){ve.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Xe[r]+t]=s[r]||s[r-2]||s[0];return i}},ut.test(e)||(ve.cssHooks[e+t].set=N)}),ve.fn.extend({css:function(e,t){return Pe(this,function(e,t,n){var r,i,s={},o=0;if(ve.isArray(t)){for(r=lt(e),i=t.length;o<i;o++)s[t[o]]=ve.css(e,t[o],!1,r);return s}return void 0!==n?ve.style(e,t,n):ve.css(e,t)},e,t,arguments.length>1)}}),ve.Tween=F,F.prototype={constructor:F,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||ve.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(ve.cssNumber[n]?"":"px")},cur:function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},run:function(e){var t,n=F.propHooks[this.prop];return this.options.duration?this.pos=t=ve.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ve.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ve.fx.step[e.prop]?ve.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ve.cssProps[e.prop]]&&!ve.cssHooks[e.prop]?e.elem[e.prop]=e.now:ve.style(e.elem,e.prop,e.now+e.unit)}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ve.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ve.fx=F.prototype.init,ve.fx.step={};var _t,gt,vt=/^(?:toggle|show|hide)$/,yt=/queueHooks$/;ve.Animation=ve.extend(G,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return v(n.elem,e,qe.exec(t),n),n}]},tweener:function(e,t){ve.isFunction(e)?(t=e,e=["*"]):e=e.match(Ae);for(var n,r=0,i=e.length;r<i;r++)n=e[r],G.tweeners[n]=G.tweeners[n]||[],G.tweeners[n].unshift(t)},prefilters:[B],prefilter:function(e,t){t?G.prefilters.unshift(e):G.prefilters.push(e)}}),ve.speed=function(e,t,n){var r=e&&"object"==typeof e?ve.extend({},e):{complete:n||!n&&t||ve.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ve.isFunction(t)&&t};return ve.fx.off||se.hidden?r.duration=0:"number"!=typeof r.duration&&(r.duration in ve.fx.speeds?r.duration=ve.fx.speeds[r.duration]:r.duration=ve.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){ve.isFunction(r.old)&&r.old.call(this),r.queue&&ve.dequeue(this,r.queue)},r},ve.fn.extend({fadeTo:function(e,t,n,r){return this.filter(We).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ve.isEmptyObject(e),s=ve.speed(t,n,r),o=function(){var t=G(this,ve.extend({},e),s);(i||Ne.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=ve.timers,o=Ne.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&yt.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));!t&&n||ve.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ne.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=ve.timers,o=r?r.length:0;for(n.finish=!0,ve.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ve.each(["toggle","show","hide"],function(e,t){var n=ve.fn[t];ve.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(X(t,!0),e,r,i)}}),ve.each({slideDown:X("show"),slideUp:X("hide"),slideToggle:X("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ve.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ve.timers=[],ve.fx.tick=function(){var e,t=0,n=ve.timers;for(_t=ve.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ve.fx.stop(),_t=void 0},ve.fx.timer=function(e){ve.timers.push(e),e()?ve.fx.start():ve.timers.pop()},ve.fx.interval=13,ve.fx.start=function(){gt||(gt=n.requestAnimationFrame?n.requestAnimationFrame($):n.setInterval(ve.fx.tick,ve.fx.interval))},ve.fx.stop=function(){n.cancelAnimationFrame?n.cancelAnimationFrame(gt):n.clearInterval(gt),gt=null},ve.fx.speeds={slow:600,fast:200,_default:400},ve.fn.delay=function(e,t){return e=ve.fx?ve.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=se.createElement("input"),t=se.createElement("select"),n=t.appendChild(se.createElement("option"));e.type="checkbox",_e.checkOn=""!==e.value,_e.optSelected=n.selected,e=se.createElement("input"),e.value="t",e.type="radio",_e.radioValue="t"===e.value}();var bt,Tt=ve.expr.attrHandle;ve.fn.extend({attr:function(e,t){return Pe(this,ve.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ve.removeAttr(this,e)})}}),ve.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?ve.prop(e,t,n):(1===s&&ve.isXMLDoc(e)||(i=ve.attrHooks[t.toLowerCase()]||(ve.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void ve.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=ve.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!_e.radioValue&&"radio"===t&&ve.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Ae);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return t===!1?ve.removeAttr(e,n):e.setAttribute(n,n),n}},ve.each(ve.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Tt[t]||ve.find.attr;Tt[t]=function(e,t,r){var i,s,o=t.toLowerCase();return r||(s=Tt[o],Tt[o]=i,i=null!=n(e,t,r)?o:null,Tt[o]=s),i}});var kt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;ve.fn.extend({prop:function(e,t){return Pe(this,ve.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ve.propFix[e]||e]})}}),ve.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&ve.isXMLDoc(e)||(t=ve.propFix[t]||t,i=ve.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ve.find.attr(e,"tabindex");return t?parseInt(t,10):kt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_e.optSelected||(ve.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ve.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ve.propFix[this.toLowerCase()]=this}),ve.fn.extend({addClass:function(e){var t,n,r,i,s,o,a,u=0;if(ve.isFunction(e))return this.each(function(t){ve(this).addClass(e.call(this,t,J(this)))});if("string"==typeof e&&e)for(t=e.match(Ae)||[];n=this[u++];)if(i=J(n),r=1===n.nodeType&&" "+V(i)+" "){for(o=0;s=t[o++];)r.indexOf(" "+s+" ")<0&&(r+=s+" ");a=V(r),i!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,s,o,a,u=0;if(ve.isFunction(e))return this.each(function(t){ve(this).removeClass(e.call(this,t,J(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ae)||[];n=this[u++];)if(i=J(n),r=1===n.nodeType&&" "+V(i)+" "){for(o=0;s=t[o++];)for(;r.indexOf(" "+s+" ")>-1;)r=r.replace(" "+s+" "," ");a=V(r),i!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ve.isFunction(e)?this.each(function(n){ve(this).toggleClass(e.call(this,n,J(this),t),t)}):this.each(function(){var t,r,i,s;if("string"===n)for(r=0,i=ve(this),s=e.match(Ae)||[];t=s[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=J(this),t&&Ne.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ne.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+V(J(n))+" ").indexOf(t)>-1)return!0;return!1}});var Mt=/\r/g;ve.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ve.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ve(this).val()):e,null==i?i="":"number"==typeof i?i+="":ve.isArray(i)&&(i=ve.map(i,function(e){return null==e?"":e+""})),t=ve.valHooks[this.type]||ve.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=ve.valHooks[i.type]||ve.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Mt,""):null==n?"":n)}}}),ve.extend({valHooks:{option:{get:function(e){var t=ve.find.attr(e,"value");return null!=t?t:V(ve.text(e))}},select:{get:function(e){var t,n,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],u=o?s+1:i.length;for(r=s<0?u:o?s:0;r<u;r++)if(n=i[r],(n.selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!ve.nodeName(n.parentNode,"optgroup"))){if(t=ve(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,s=ve.makeArray(t),o=i.length;o--;)r=i[o],(r.selected=ve.inArray(ve.valHooks.option.get(r),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),ve.each(["radio","checkbox"],function(){ve.valHooks[this]={set:function(e,t){if(ve.isArray(t))return e.checked=ve.inArray(ve(e).val(),t)>-1}},_e.checkOn||(ve.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var St=/^(?:focusinfocus|focusoutblur)$/;ve.extend(ve.event,{trigger:function(e,t,r,i){var s,o,a,u,c,l,d,h=[r||se],f=fe.call(e,"type")?e.type:e,p=fe.call(e,"namespace")?e.namespace.split("."):[];if(o=a=r=r||se,3!==r.nodeType&&8!==r.nodeType&&!St.test(f+ve.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),c=f.indexOf(":")<0&&"on"+f,e=e[ve.expando]?e:new ve.Event(f,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:ve.makeArray(t,[e]),d=ve.event.special[f]||{},i||!d.trigger||d.trigger.apply(r,t)!==!1)){if(!i&&!d.noBubble&&!ve.isWindow(r)){for(u=d.delegateType||f,St.test(u+f)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(r.ownerDocument||se)&&h.push(a.defaultView||a.parentWindow||n)}for(s=0;(o=h[s++])&&!e.isPropagationStopped();)e.type=s>1?u:d.bindType||f,l=(Ne.get(o,"events")||{})[e.type]&&Ne.get(o,"handle"),l&&l.apply(o,t),l=c&&o[c],l&&l.apply&&Oe(o)&&(e.result=l.apply(o,t),e.result===!1&&e.preventDefault());return e.type=f,i||e.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),t)!==!1||!Oe(r)||c&&ve.isFunction(r[f])&&!ve.isWindow(r)&&(a=r[c],a&&(r[c]=null),ve.event.triggered=f,r[f](),ve.event.triggered=void 0,a&&(r[c]=a)),e.result}},simulate:function(e,t,n){var r=ve.extend(new ve.Event,n,{type:e,isSimulated:!0});ve.event.trigger(r,null,t)}}),ve.fn.extend({trigger:function(e,t){return this.each(function(){ve.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ve.event.trigger(e,t,n,!0)}}),ve.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ve.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ve.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_e.focusin="onfocusin"in n,_e.focusin||ve.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ve.event.simulate(t,e.target,ve.event.fix(e))};ve.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Ne.access(r,t);i||r.addEventListener(e,n,!0),Ne.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Ne.access(r,t)-1;i?Ne.access(r,t,i):(r.removeEventListener(e,n,!0),Ne.remove(r,t))}}});var Lt=n.location,Et=ve.now(),Ct=/\?/;ve.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ve.error("Invalid XML: "+e),t};var xt=/\[\]$/,Dt=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;ve.param=function(e,t){var n,r=[],i=function(e,t){var n=ve.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(ve.isArray(e)||e.jquery&&!ve.isPlainObject(e))ve.each(e,function(){i(this.name,this.value)});else for(n in e)K(n,e[n],t,i);return r.join("&")},ve.fn.extend({serialize:function(){return ve.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ve.prop(this,"elements");return e?ve.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ve(this).is(":disabled")&&Rt.test(this.nodeName)&&!jt.test(e)&&(this.checked||!Ge.test(e))}).map(function(e,t){var n=ve(this).val();return null==n?null:ve.isArray(n)?ve.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var At=/%20/g,Yt=/#.*$/,It=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ut={},Ft={},$t="*/".concat("*"),qt=se.createElement("a");qt.href=Lt.href,ve.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt.href,type:"GET",isLocal:Ot.test(Lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ve.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ee(ee(e,ve.ajaxSettings),t):ee(ve.ajaxSettings,e)},ajaxPrefilter:Z(Ut),ajaxTransport:Z(Ft),ajax:function(e,t){function r(e,t,r,a){var c,h,f,b,T,k=t;l||(l=!0,u&&n.clearTimeout(u),i=void 0,o=a||"",w.readyState=e>0?4:0,c=e>=200&&e<300||304===e,r&&(b=te(p,w,r)),b=ne(p,b,w,c),c?(p.ifModified&&(T=w.getResponseHeader("Last-Modified"),T&&(ve.lastModified[s]=T),T=w.getResponseHeader("etag"),T&&(ve.etag[s]=T)),204===e||"HEAD"===p.type?k="nocontent":304===e?k="notmodified":(k=b.state,h=b.data,f=b.error,c=!f)):(f=k,!e&&k||(k="error",e<0&&(e=0))),w.status=e,w.statusText=(t||k)+"",c?g.resolveWith(m,[h,k,w]):g.rejectWith(m,[w,k,f]),w.statusCode(y),y=void 0,d&&_.trigger(c?"ajaxSuccess":"ajaxError",[w,p,c?h:f]),v.fireWith(m,[w,k]),d&&(_.trigger("ajaxComplete",[w,p]),--ve.active||ve.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,s,o,a,u,c,l,d,h,f,p=ve.ajaxSetup({},t),m=p.context||p,_=p.context&&(m.nodeType||m.jquery)?ve(m):ve.event,g=ve.Deferred(),v=ve.Callbacks("once memory"),y=p.statusCode||{},b={},T={},k="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a)for(a={};t=Pt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(e,t){return null==l&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)w.always(e[w.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||k;return i&&i.abort(t),r(0,t),this}};if(g.promise(w),p.url=((e||p.url||Lt.href)+"").replace(Ht,Lt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Ae)||[""],null==p.crossDomain){c=se.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=qt.protocol+"//"+qt.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ve.param(p.data,p.traditional)),Q(Ut,p,t,w),l)return w;d=ve.event&&p.global,d&&0===ve.active++&&ve.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nt.test(p.type),s=p.url.replace(Yt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(f=p.url.slice(s.length),p.data&&(s+=(Ct.test(s)?"&":"?")+p.data,delete p.data),p.cache===!1&&(s=s.replace(It,"$1"),f=(Ct.test(s)?"&":"?")+"_="+Et+++f),p.url=s+f),p.ifModified&&(ve.lastModified[s]&&w.setRequestHeader("If-Modified-Since",ve.lastModified[s]),ve.etag[s]&&w.setRequestHeader("If-None-Match",ve.etag[s])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+$t+"; q=0.01":""):p.accepts["*"]);for(h in p.headers)w.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(p.beforeSend.call(m,w,p)===!1||l))return w.abort();if(k="abort",v.add(p.complete),w.done(p.success),w.fail(p.error),i=Q(Ft,p,t,w)){if(w.readyState=1,d&&_.trigger("ajaxSend",[w,p]),l)return w;p.async&&p.timeout>0&&(u=n.setTimeout(function(){w.abort("timeout")},p.timeout));try{l=!1,i.send(b,r)}catch(e){if(l)throw e;r(-1,e)}}else r(-1,"No Transport");return w},getJSON:function(e,t,n){return ve.get(e,t,n,"json")},getScript:function(e,t){return ve.get(e,void 0,t,"script")}}),ve.each(["get","post"],function(e,t){ve[t]=function(e,n,r,i){return ve.isFunction(n)&&(i=i||r,r=n,n=void 0),ve.ajax(ve.extend({url:e,type:t,dataType:i,data:n,success:r},ve.isPlainObject(e)&&e))}}),ve._evalUrl=function(e){return ve.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ve.fn.extend({wrapAll:function(e){var t;return this[0]&&(ve.isFunction(e)&&(e=e.call(this[0])),t=ve(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ve.isFunction(e)?this.each(function(t){ve(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ve(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ve.isFunction(e);return this.each(function(n){ve(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ve(this).replaceWith(this.childNodes)}),this}}),ve.expr.pseudos.hidden=function(e){return!ve.expr.pseudos.visible(e)},ve.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ve.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Wt=ve.ajaxSettings.xhr();_e.cors=!!Wt&&"withCredentials"in Wt,_e.ajax=Wt=!!Wt,ve.ajaxTransport(function(e){var t,r;if(_e.cors||Wt&&!e.crossDomain)return{send:function(i,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)a.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Xt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),r=a.onerror=t("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),ve.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ve.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ve.globalEval(e),e}}}),ve.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ve.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=ve("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),se.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Bt=[],zt=/(=)\?(?=&|$)|\?\?/;ve.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||ve.expando+"_"+Et++;return this[e]=!0,e}}),ve.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,a=e.jsonp!==!1&&(zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=ve.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(zt,"$1"+i):e.jsonp!==!1&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||ve.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=n[i],n[i]=function(){o=arguments},r.always(function(){void 0===s?ve(n).removeProp(i):n[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Bt.push(i)),o&&ve.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),_e.createHTMLDocument=function(){var e=se.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ve.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,s;return t||(_e.createHTMLDocument?(t=se.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=se.location.href,t.head.appendChild(r)):t=se),i=Ee.exec(e),s=!n&&[],i?[t.createElement(i[1])]:(i=w([e],t,s),s&&s.length&&ve(s).remove(),ve.merge([],i.childNodes))},ve.fn.load=function(e,t,n){var r,i,s,o=this,a=e.indexOf(" ");return a>-1&&(r=V(e.slice(a)),e=e.slice(0,a)),ve.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&ve.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?ve("<div>").append(ve.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},ve.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ve.fn[t]=function(e){return this.on(t,e)}}),ve.expr.pseudos.animated=function(e){return ve.grep(ve.timers,function(t){return e===t.elem}).length},ve.offset={setOffset:function(e,t,n){var r,i,s,o,a,u,c,l=ve.css(e,"position"),d=ve(e),h={};"static"===l&&(e.style.position="relative"),a=d.offset(),s=ve.css(e,"top"),u=ve.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(s+u).indexOf("auto")>-1,c?(r=d.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(u)||0),ve.isFunction(t)&&(t=t.call(e,n,ve.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):d.css(h)}},ve.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ve.offset.setOffset(this,e,t)});var t,n,r,i,s=this[0];if(s)return s.getClientRects().length?(r=s.getBoundingClientRect(),r.width||r.height?(i=s.ownerDocument,n=re(i),t=i.documentElement,{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):{top:0,left:0}},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===ve.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ve.nodeName(e[0],"html")||(r=e.offset()),r={top:r.top+ve.css(e[0],"borderTopWidth",!0),left:r.left+ve.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-ve.css(n,"marginTop",!0),left:t.left-r.left-ve.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ve.css(e,"position");)e=e.offsetParent;return e||Qe})}}),ve.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ve.fn[e]=function(r){return Pe(this,function(e,r,i){var s=re(e);if(void 0===i)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i},e,r,arguments.length)}}),ve.each(["top","left"],function(e,t){ve.cssHooks[t]=P(_e.pixelPosition,function(e,n){if(n)return n=I(e,t),ct.test(n)?ve(e).position()[t]+"px":n})}),ve.each({Height:"height",Width:"width"},function(e,t){ve.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ve.fn[r]=function(i,s){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||s===!0?"margin":"border");return Pe(this,function(t,n,i){var s;return ve.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?ve.css(t,n,a):ve.style(t,n,i,a)},t,o?i:void 0,o)}})}),ve.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ve.parseJSON=JSON.parse,r=[],i=function(){return ve}.apply(t,r),void 0!==i&&(e.exports=i);var Gt=n.jQuery,Vt=n.$;return ve.noConflict=function(e){return n.$===ve&&(n.$=Vt),e&&n.jQuery===ve&&(n.jQuery=Gt),ve},s||(n.jQuery=n.$=ve),ve})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){m&&f&&(m=!1,f.length?p=f.concat(p):_=-1,p.length&&a())}function a(){if(!m){var e=i(o);m=!0;for(var t=p.length;t;){for(f=p,p=[];++_<t;)f&&f[_].run();_=-1,t=p.length}f=null,m=!1,s(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,p=[],m=!1,_=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||m||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(145),o=n(144),a=n(154),u=n(0),c=function(){function t(e){r(this,t),this.baseUrl="https://healthkon-video-api.herokuapp.com",this.identity=e.identity,this.room=e.room,this.localVideoContainer=document.getElementById(e.localVideoContainer),this.remoteVideoContainer=document.getElementById(e.remoteVideoContainer),this.presenterIdentity=e.presenterIdentity,this.presenterVideoContainer=document.getElementById(e.presenterVideoContainer),this.checkBrowserSupport()}return i(t,[{key:"authorize",value:function(t){var n=this;return e.ajax({method:"POST",url:this.baseUrl+"/api/conference/authenticate",data:{identity:this.identity},dataType:"json",error:function(e){alert("Error: Check your API key.")},success:function(e){n.videoJwt=e.video_jwt,n.chatJwt=e.chat_jwt,n.userId=e.user_id,n.client=new s.Client(n.videoJwt),n.localMedia=new s.LocalMedia,s.getUserMedia().then(function(e){n.localMedia.addStream(e),n.attachLocalVideo(n.localMedia)})},beforeSend:function(e,n){e.setRequestHeader("Authorization","Bearer: "+t)}})}},{key:"presenterInitiation",value:function(e){this.presenterInitiation=e}},{key:"connect",value:function(){return this.checkBrowserSupport(),this.client.connect({to:this.room,localMedia:this.localMedia})}},{key:"attachLocalVideo",value:function(t){var n=this,r=e(this.localVideoContainer);t.tracks.forEach(function(e){var t=document.createElement("div"),i=document.createElement("video");if("video"==e.kind){t.appendChild(i),i.setAttribute("controls",!0),i.setAttribute("autoplay",!0),i.setAttribute("muted",!0),i.setAttribute("id",e.id),i.srcObject=e.mediaStream,r.html(t);var s=n.localPlayerControls();a.setup(i,{html:s,audio:!1})}})}},{key:"joinRoom",value:function(e){var t=this,n=e.localParticipant;if(this.presenterInitiation&&this.identity!=this.presenterIdentity){var r=!1;if(e.participants.forEach(function(e){e.identity==t.presenterIdentity&&(r=!0)}),!r)return e.disconnect(),{status:!1,message:"Waiting for presenter!"}}return this.logConnection(e,n),e.participants.forEach(function(n){n.on("trackAdded",function(r){t.addVideo(n,r,e)})}),e.on("participantConnected",function(n){n.on("trackAdded",function(r){t.addVideo(n,r,e)})}),e.on("participantDisconnected",function(e){t.removeVideo(e)}),{status:!0,message:"Room connected."}}},{key:"setConferenceTimeout",value:function(e){this.timeout=e}},{key:"addVideo",value:function(e,t,n){var r=this.timeout?this.timeout:0;if("video"==t.kind){var i="";i=e.identity==this.presenterIdentity?this.presenterVideoContainer:this.remoteVideoContainer;var s=document.createElement("div");s.setAttribute("id",e.sid),s.setAttribute("class","remote-video-wrapper");var o=document.createElement("video");s.appendChild(o),o.setAttribute("controls",!0),o.setAttribute("autoplay",!0),o.setAttribute("id",t.id),o.srcObject=t.mediaStream,i.appendChild(s);var c="";c=e.identity==this.presenterIdentity?this.presenterPlayerControls():this.remotePlayerControls(),a.setup(o,{html:c,duration:r});var l=this;o.addEventListener("timeupdate",function(){this._startTime||(this._startTime=this.currentTime);var t=this.currentTime-this._startTime,i=document.querySelector(".player__time"),s=u.duration(1e3*t,"milliseconds"),o=document.querySelector(".player__remaining_time"),a=u.duration(1e3*r-1e3*t,"milliseconds");if(i){var c=s.hours(),d=s.minutes()>9?s.minutes():"0"+s.minutes(),h=s.seconds()>9?s.seconds():"0"+s.seconds(),f=d+":"+h;c>0&&(f=c+":"+f),i.innerHTML=f}if(o){var p=a.hours(),m=s.minutes()>9?s.minutes():"0"+s.minutes(),_=s.seconds()>9?s.seconds():"0"+s.seconds(),g=m+":"+_;p>0&&(g=p+":"+g),o.innerHTML=g}r>0&&t>=r&&(n.disconnect(),l.removeVideo(e))})}}},{key:"localPlayerControls",value:function(){return"<div class='plyr__controls'>\n\t\t\t    <button type='button' data-plyr='play'>\n\t\t\t        <svg><use xlink:href='#plyr-play'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Play</span>\n\t\t\t    </button>\n\t\t\t    <button type='button' data-plyr='pause'>\n\t\t\t        <svg><use xlink:href='#plyr-pause'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Pause</span>\n\t\t\t    </button>\n\t\t\t    <span class='plyr__time'>\n\t\t\t        <span class='plyr__sr-only'>Remaining time</span>\n\t\t\t        <span class='plyr__time player__remaining_time'>00:00</span>\n\t\t\t    </span>\n\t\t\t    <button type='button' data-plyr='fullscreen'>\n\t\t\t        <svg class='icon--exit-fullscreen'><use xlink:href='#plyr-exit-fullscreen'></use></svg>\n\t\t\t        <svg><use xlink:href='#plyr-enter-fullscreen'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Toggle Fullscreen</span>\n\t\t\t    </button>\n\t\t\t</div>"}},{key:"remotePlayerControls",value:function(){return"<div class='plyr__controls'>\n\t\t\t    <button type='button' data-plyr='play'>\n\t\t\t        <svg><use xlink:href='#plyr-play'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Play</span>\n\t\t\t    </button>\n\t\t\t    <button type='button' data-plyr='pause'>\n\t\t\t        <svg><use xlink:href='#plyr-pause'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Pause</span>\n\t\t\t    </button>\n\t\t\t    <button type='button' data-plyr='mute'>\n\t\t\t        <svg class='icon--muted'><use xlink:href='#plyr-muted'></use></svg>\n\t\t\t        <svg><use xlink:href='#plyr-volume'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Toggle Mute</span>\n\t\t\t    </button>\n\t\t\t    <span class='plyr__volume'>\n\t\t\t        <label for='volume{id}' class='plyr__sr-only'>Volume</label>\n\t\t\t        <input id='volume{id}' class='plyr__volume--input' type='range' min='0' max='10' value='5' data-plyr='volume'>\n\t\t\t        <progress class='plyr__volume--display' max='10' value='0' role='presentation'></progress>\n\t\t\t    </span>\n\t\t\t    <button type='button' data-plyr='fullscreen'>\n\t\t\t        <svg class='icon--exit-fullscreen'><use xlink:href='#plyr-exit-fullscreen'></use></svg>\n\t\t\t        <svg><use xlink:href='#plyr-enter-fullscreen'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Toggle Fullscreen</span>\n\t\t\t    </button>\n\t\t\t</div>"}},{key:"presenterPlayerControls",value:function(){return"<div class='plyr__controls'>\n\t\t\t    <button type='button' data-plyr='play'>\n\t\t\t        <svg><use xlink:href='#plyr-play'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Play</span>\n\t\t\t    </button>\n\t\t\t    <button type='button' data-plyr='pause'>\n\t\t\t        <svg><use xlink:href='#plyr-pause'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Pause</span>\n\t\t\t    </button>\n\t\t\t    <span class='plyr__time'>\n\t\t\t        <span class='plyr__sr-only'>Current time</span>\n\t\t\t        <span class='plyr__time player__time'>00:00</span>\n\t\t\t    </span>\n\t\t\t    <span class='plyr__time'>\n\t\t\t        <span class='plyr__sr-only'>Duration</span>\n\t\t\t        <span class='plyr__time--duration'>00:00</span>\n\t\t\t    </span>\n\t\t\t    <button type='button' data-plyr='mute'>\n\t\t\t        <svg class='icon--muted'><use xlink:href='#plyr-muted'></use></svg>\n\t\t\t        <svg><use xlink:href='#plyr-volume'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Toggle Mute</span>\n\t\t\t    </button>\n\t\t\t    <span class='plyr__volume'>\n\t\t\t        <label for='volume{id}' class='plyr__sr-only'>Volume</label>\n\t\t\t        <input id='volume{id}' class='plyr__volume--input' type='range' min='0' max='10' value='5' data-plyr='volume'>\n\t\t\t        <progress class='plyr__volume--display' max='10' value='0' role='presentation'></progress>\n\t\t\t    </span>\n\t\t\t    <button type='button' data-plyr='fullscreen'>\n\t\t\t        <svg class='icon--exit-fullscreen'><use xlink:href='#plyr-exit-fullscreen'></use></svg>\n\t\t\t        <svg><use xlink:href='#plyr-enter-fullscreen'></use></svg>\n\t\t\t        <span class='plyr__sr-only'>Toggle Fullscreen</span>\n\t\t\t    </button>\n\t\t\t</div>"}},{key:"removeVideo",value:function(t){this.logDisconnection(t),e("#"+t.sid).remove()}},{key:"withChat",value:function(e){var t=this;this.chatConfig=e;var n=o.Client;n=new o(this.chatJwt),n.initialize().then(function(e){t.chatConnected(e)})}},{key:"chatConnected",value:function(e){var t=this,n=e.getChannelByUniqueName(this.room);this.pushChatInfo("Connecting.."),n.then(function(e){t.pushChatInfo("Connected"),t.setupChatConversation(e)},function(n){404==n.status&&e.createChannel({uniqueName:t.room,friendlyName:"General Channel"}).then(function(e){t.pushChatInfo("Connected"),t.setupChatConversation(e)})})}},{key:"setupChatConversation",value:function(t){var n=this;t.join().then(function(e){n.pushChatInfo("Joined as "+n.identity)}),t.on("messageAdded",function(e){n.pushChatMessage(e.author,e.body)});var r=e("#"+this.chatConfig.messageInput);r.on("keydown",function(e){13==e.keyCode&&(t.sendMessage(r.val()),r.val(""))})}},{key:"pushChatMessage",value:function(t,n){var r=e("#"+this.chatConfig.messagesContainer),i='<div class="video-chat-message-block">\n\t\t\t\t<div class="video-chat-user"> '+t+': </div>\n\t\t\t\t<div class="video-chat-message"> '+n+" </div>\n\t\t</div>";r.append(i)}},{key:"pushChatInfo",value:function(t){var n=e("#"+this.chatConfig.messagesContainer),r='<div class="video-chat-message-info">'+t+"</div>";n.append(r)}},{key:"logConnection",value:function(t,n){return e.ajax({method:"POST",url:this.baseUrl+"/api/conference/connect",data:{user_id:this.userId,room_sid:t.sid,room_name:t.name,participant:n.identity,participant_sid:n.sid},success:function(e){},error:function(e){}})}},{key:"logDisconnection",value:function(t){return e.ajax({method:"POST",url:this.baseUrl+"/api/conference/disconnect",data:{participant_sid:t.sid},success:function(e){},error:function(e){}})}},{key:"checkBrowserSupport",value:function(){navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||alert("Video conference is not available in your browser. Kindly use Chrome / Firefox / Opera")}}]),t}();t.default=c}).call(t,n(2))},,,,,,function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ar-dz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},i=function(e){return function(t,i,s,o){var a=n(t),u=r[e][n(t)];return 2===a&&(u=u[i?0:1]),u.replace(/%d/i,t)}},s=["","","","","","","","","","","",""];return e.defineLocale("ar-ly",{months:s,monthsShort:s,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(e){return e.replace(/\u200f/g,"").replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},s=function(e){return function(t,n,s,o){var a=r(t),u=i[e][r(t)];return 2===a&&(u=u[n?0:1]),u.replace(/%d/i,t)}},o=["  "," "," "," "," "," "," "," "," ","  ","  ","  "];return e.defineLocale("ar",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:s("s"),m:s("m"),mm:s("m"),h:s("h"),hh:s("h"),d:s("d"),dd:s("d"),M:s("M"),MM:s("M"),y:s("y"),yy:s("y")},preparse:function(e){return e.replace(/\u200f/g,"").replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};return e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var n=e%10,r=e%100-n,i=e>=100?100:null;return e+(t[n]||t[r]||t[i])},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"};return"m"===r?n?"":"":"h"===r?n?"":"":e+" "+t(i[r],+e)}return e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:n,hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!==2&&e%10!==3||e%100===12||e%100===13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n){return e+" "+i({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){switch(r(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function r(e){return e>9?r(e%10):e}function i(e,t){return 2===t?s(e):e}function s(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}return e.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e){return e>1&&e<5&&1!==~~(e/10)}function n(e,n,r,i){var s=e+" ";switch(r){case"s":return n||i?"pr sekund":"pr sekundami";case"m":return n?"minuta":i?"minutu":"minutou";case"mm":return n||i?s+(t(e)?"minuty":"minut"):s+"minutami";case"h":return n?"hodina":i?"hodinu":"hodinou";case"hh":return n||i?s+(t(e)?"hodiny":"hodin"):s+"hodinami";case"d":return n||i?"den":"dnem";case"dd":return n||i?s+(t(e)?"dny":"dn"):s+"dny";case"M":return n||i?"msc":"mscem";case"MM":return n||i?s+(t(e)?"msce":"msc"):s+"msci";case"y":return n||i?"rok":"rokem";case"yy":return n||i?s+(t(e)?"roky":"let"):s+"lety"}}var r="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),i="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");return e.defineLocale("cs",{months:r,monthsShort:i,monthsParse:function(e,t){var n,r=[];for(n=0;n<12;n++)r[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return r}(r,i),shortMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++)n[t]=new RegExp("^"+e[t]+"$","i");return n}(i),longMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++)n[t]=new RegExp("^"+e[t]+"$","i");return n}(r),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/$/i.exec(e)?"":/$/i.exec(e)?"":"")},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t=e,n="",r=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return t>20?n=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(n=r[t]),e+n},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}return e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}return e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];return e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}return e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){return e>11?n?"":"":n?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,n){var r=this._calendarEl[e],i=n&&n.hours();return t(r)&&(r=r.apply(n)),r.replace("{}",i%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[n][2]?i[n][2]:i[n][1]:r?i[n][0]:i[n][1]}return e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,r,i){var s="";switch(r){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"m":return i?"minuutin":"minuutti";case"mm":s=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":s=i?"tunnin":"tuntia";break;case"d":return i?"pivn":"piv";case"dd":s=i?"pivn":"piv";break;case"M":return i?"kuukauden":"kuukausi";case"MM":s=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":s=i?"vuoden":"vuotta"}return s=n(e,i)+" "+s}function n(e,t){return e<10?t?i[e]:r[e]:e}var r="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),i=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",r[7],r[8],r[9]];return e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?"er":"e")}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?"er":"e")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");return e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],n=["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],r=["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],i=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],s=["D","Lu","M","Ci","Ar","Ha","Sa"];return e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:r,weekdaysShort:i,weekdaysMin:s,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10===2?"na":"mh")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10===0&&10!==e?e+" ":e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,n){return e<5?" ":e<10?"":e<12?n?'"':" ":e<18?n?'"':" ":""}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i=e;switch(n){case"s":return r||t?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return i+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" ra":" rja");case"hh":return i+(r||t?" ra":" rja");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return i+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hnap":" hnapja");case"MM":return i+(r||t?" hnap":" hnapja");case"y":return"egy"+(r||t?" v":" ve");case"yy":return i+(r||t?" v":" ve")}return""}function n(e){return(e?"":"[mlt] ")+"["+r[this.day()]+"] LT[-kor]"}var r="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");return e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?n===!0?"de":"DE":n===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return n.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return n.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e){return e%100===11||e%10!==1}function n(e,n,r,i){var s=e+" ";switch(r){case"s":return n||i?"nokkrar sekndur":"nokkrum sekndum";case"m":return n?"mnta":"mntu";case"mm":return t(e)?s+(n||i?"mntur":"mntum"):n?s+"mnta":s+"mntu";case"hh":return t(e)?s+(n||i?"klukkustundir":"klukkustundum"):s+"klukkustund";case"d":return n?"dagur":i?"dag":"degi";case"dd":return t(e)?n?s+"dagar":s+(i?"daga":"dgum"):n?s+"dagur":s+(i?"dag":"degi");case"M":return n?"mnuur":i?"mnu":"mnui";case"MM":return t(e)?n?s+"mnuir":s+(i?"mnui":"mnuum"):n?s+"mnuur":s+(i?"mnu":"mnui");case"y":return n||i?"r":"ri";case"yy":return t(e)?s+(n||i?"r":"rum"):s+(n||i?"r":"ri")}}return e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"Ahms",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhm",LLLL:"YYYYMDAhm dddd"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return/(|||)/.test(e)?e.replace(/$/,""):e+""},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20===0||e%100===0?"-"+e:e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};return e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h m",LLLL:"YYYY MMMM D dddd A h m"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};return e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|||)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function n(e){return i(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function r(e){return i(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function i(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10,n=e/10;return i(0===t?n:t)}if(e<1e4){for(;e>=10;)e/=10;return i(e)}return e/=1e3,i(e)}return e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:r,s:"e puer Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){return t?"kelios sekunds":r?"keli sekundi":"kelias sekundes"}function n(e,t,n,r){return t?i(n)[0]:r?i(n)[1]:i(n)[2]}function r(e){return e%10===0||e>10&&e<20}function i(e){return o[e].split("_")}function s(e,t,s,o){var a=e+" ";return 1===e?a+n(e,t,s[0],o):t?a+(r(e)?i(s)[1]:i(s)[0]):o?a+i(s)[1]:a+(r(e)?i(s)[1]:i(s)[2])}var o={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};return e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:t,m:n,mm:s,h:n,hh:s,d:n,dd:s,M:n,MM:s,y:n,yy:s},ordinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n){return n?t%10===1&&t%100!==11?e[2]:e[3]:t%10===1&&t%100!==11?e[0]:e[1]}function n(e,n,r){return e+" "+t(s[r],e,n)}function r(e,n,r){return t(s[r],e,n)}function i(e,t){return t?"daas sekundes":"dam sekundm"}var s={m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};return e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:i,m:r,mm:n,h:r,hh:n,d:r,dd:n,M:r,MM:n,y:r,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};return e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||" "===t||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?" ":e<20?"":""}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i="";if(t)switch(n){case"s":i=" ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d "}else switch(n){case"s":i=" ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d "}return i.replace(/%d/i,e)}var n={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return n[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;return e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;return e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e){return e%10<5&&e%10>1&&~~(e/10)%10!==1}function n(e,n,r){var i=e+" ";switch(r){case"m":return n?"minuta":"minut";case"mm":return i+(t(e)?"minuty":"minut");case"h":return n?"godzina":"godzin";case"hh":return i+(t(e)?"godziny":"godzin");case"MM":return i+(t(e)?"miesice":"miesicy");case"yy":return i+(t(e)?"lata":"lat")}}var r="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),i="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");return e.defineLocale("pl",{months:function(e,t){return""===t?"("+i[e.month()]+"|"+r[e.month()]+")":/D MMMM/.test(t)?i[e.month()]:r[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:n,mm:n,h:n,hh:n,d:"1 dzie",dd:"%d dni",M:"miesic",MM:n,y:"rok",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n){var r={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},i=" ";return(e%100>=20||e>=100&&e%100===0)&&(i=" de "),e+i+r[n]}return e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===r?n?"":"":e+" "+t(i[r],+e)}var r=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];return e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},ordinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return".."===e||" "===e},meridiem:function(e,t,n){return e>11?n?"..":" ":n?"..":" "}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e){return e>1&&e<5}function n(e,n,r,i){var s=e+" ";switch(r){case"s":return n||i?"pr seknd":"pr sekundami";case"m":return n?"minta":i?"mintu":"mintou";case"mm":return n||i?s+(t(e)?"minty":"mint"):s+"mintami";case"h":return n?"hodina":i?"hodinu":"hodinou";case"hh":return n||i?s+(t(e)?"hodiny":"hodn"):s+"hodinami";case"d":return n||i?"de":"dom";case"dd":return n||i?s+(t(e)?"dni":"dn"):s+"dami";case"M":return n||i?"mesiac":"mesiacom";case"MM":return n||i?s+(t(e)?"mesiace":"mesiacov"):s+"mesiacmi";case"y":return n||i?"rok":"rokom";case"yy":return n||i?s+(t(e)?"roky":"rokov"):s+"rokmi"}}var r="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),i="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");return e.defineLocale("sk",{months:r,monthsShort:i,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?t?"minuta":"minuto":2===e?t||r?"minuti":"minutama":e<5?t||r?"minute":"minutami":t||r?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?t?"ura":"uro":2===e?t||r?"uri":"urama":e<5?t||r?"ure":"urami":t||r?"ur":"urami";case"d":return t||r?"en dan":"enim dnem";case"dd":return i+=1===e?t||r?"dan":"dnem":2===e?t||r?"dni":"dnevoma":t||r?"dni":"dnevi";case"M":return t||r?"en mesec":"enim mesecem";case"MM":return i+=1===e?t||r?"mesec":"mesecem":2===e?t||r?"meseca":"mesecema":e<5?t||r?"mesece":"meseci":t||r?"mesecev":"meseci";case"y":return t||r?"eno leto":"enim letom";case"yy":return i+=1===e?t||r?"leto":"letom":2===e?t||r?"leti":"letoma":e<5?t||r?"leta":"leti":t||r?"let":"leti"}}return e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};return e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"",dd:t.translate,M:"",MM:t.translate,y:"",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};return e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||||/,meridiem:function(e,t,n){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t?e:""===t&&e>=10?e:e+12},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juniu_Juliu_Augustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Aug_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sexta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sext_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Sex_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",m:"minutu ida",mm:"minutus %d",h:"horas ida",hh:"horas %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e){var t=e;return t=e.indexOf("jaj")!==-1?t.slice(0,-3)+"leS":e.indexOf("jar")!==-1?t.slice(0,-3)+"waQ":e.indexOf("DIS")!==-1?t.slice(0,-3)+"nem":t+" pIq"}function n(e){var t=e;return t=e.indexOf("jaj")!==-1?t.slice(0,-3)+"Hu":e.indexOf("jar")!==-1?t.slice(0,-3)+"wen":e.indexOf("DIS")!==-1?t.slice(0,-3)+"ben":t+" ret"}function r(e,t,n,r){var s=i(e);switch(n){case"mm":return s+" tup";case"hh":return s+" rep";case"dd":return s+" jaj";case"MM":return s+" jar";case"yy":return s+" DIS"}}function i(e){var t=Math.floor(e%1e3/100),n=Math.floor(e%100/10),r=e%10,i="";return t>0&&(i+=s[t]+"vatlh"),n>0&&(i+=(""!==i?" ":"")+s[n]+"maH"),r>0&&(i+=(""!==i?" ":"")+s[r]),""===i?"pagh":i}var s="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");return e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:t,past:n,s:"puS lup",m:"wa tup",mm:r,h:"wa rep",hh:r,d:"wa jaj",dd:r,M:"wa jar",MM:r,y:"wa DIS",yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};return e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(e){if(0===e)return e+"'nc";var n=e%10,r=e%100-n,i=e>=100?100:null;return e+(t[n]||t[r]||t[i])},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t,n,r){var i={s:["viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return r?i[n][0]:t?i[n][0]:i[n][1]}return e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"};return"m"===r?n?"":"":"h"===r?n?"":"":e+" "+t(i[r],+e)}function r(e,t){return{nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")}[/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]}function i(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}return e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:r,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:i("[ "),nextDay:i("[ "),lastDay:i("[ "),nextWeek:i("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return i("[] dddd [").call(this);case 1:case 2:case 4:return i("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},ordinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.diff(t,"days")>=7?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})})},function(e,t,n){!function(e,t){t(n(0))}(this,function(e){"use strict";return e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);window.Video=r.default},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(n,r){var i,s,o,a,a,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){if("object"===u(t)&&void 0!==e)e.exports=n();else{s=[],i=n,o="function"==typeof i?i.apply(t,s):i,void 0!==o&&(e.exports=o)}}(function(){var e,t,i;return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var c="function"==typeof a&&a;if(!u&&c)return a(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return i(n?n:e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof a&&a,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":41}],2:[function(e,t,n){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":42}],3:[function(e,t,n){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":43}],4:[function(e,t,n){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":44}],5:[function(e,t,n){t.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":45}],6:[function(e,t,n){t.exports={default:e("core-js/library/fn/number/is-integer"),__esModule:!0}},{"core-js/library/fn/number/is-integer":46}],7:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":47}],8:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":48}],9:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/define-properties"),__esModule:!0}},{"core-js/library/fn/object/define-properties":49}],10:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":50}],11:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":51}],12:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":52}],13:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":53}],14:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":54}],15:[function(e,t,n){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":55}],16:[function(e,t,n){t.exports={default:e("core-js/library/fn/reflect/construct"),__esModule:!0}},{"core-js/library/fn/reflect/construct":56}],17:[function(e,t,n){t.exports={default:e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":57}],18:[function(e,t,n){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":58}],19:[function(e,t,n){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":59}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/promise"),s=r(i);n.default=function(e){return function(){var t=e.apply(this,arguments);return new s.default(function(e,n){function r(i,o){try{var a=t[i](o),u=a.value}catch(e){return void n(e)}if(!a.done)return s.default.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}},{"../core-js/promise":15}],21:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],22:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/object/define-property"),s=r(i);n.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,s.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":10}],23:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/object/assign"),s=r(i);n.default=s.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},{"../core-js/object/assign":7}],24:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/object/set-prototype-of"),s=r(i),o=e("../core-js/object/create"),a=r(o),u=e("../helpers/typeof"),c=r(u);n.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":8,"../core-js/object/set-prototype-of":14,"../helpers/typeof":27}],25:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../helpers/typeof"),s=r(i);n.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,s.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":27}],26:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/is-iterable"),s=r(i),o=e("../core-js/get-iterator"),a=r(o);n.default=function(){function e(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,u=(0,a.default)(e);!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,s.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":2,"../core-js/is-iterable":3}],27:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/symbol/iterator"),s=r(i),o=e("../core-js/symbol"),a=r(o),c="function"==typeof a.default&&"symbol"===u(s.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":u(e)};n.default="function"==typeof a.default&&"symbol"===c(s.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":c(e)}},{"../core-js/symbol":18,"../core-js/symbol/iterator":19}],28:[function(e,t,n){t.exports=e("regenerator-runtime")},{"regenerator-runtime":179}],29:[function(e,t,n){var r=e("./lib/backoff"),i=e("./lib/strategy/exponential"),s=e("./lib/strategy/fibonacci"),o=e("./lib/function_call.js");t.exports.Backoff=r,t.exports.FunctionCall=o,t.exports.FibonacciStrategy=s,t.exports.ExponentialStrategy=i,t.exports.fibonacci=function(e){return new r(new s(e))},t.exports.exponential=function(e){return new r(new i(e))},t.exports.call=function(e,t,n){var r=Array.prototype.slice.call(arguments);return e=r[0],t=r.slice(1,r.length-1),n=r[r.length-1],new o(e,t,n)}},{"./lib/backoff":30,"./lib/function_call.js":31,"./lib/strategy/exponential":32,"./lib/strategy/fibonacci":33}],30:[function(e,t,n){function r(e){i.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}var i=e("events"),s=e("precond");e("util").inherits(r,i.EventEmitter),r.prototype.failAfter=function(e){s.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},r.prototype.backoff=function(e){s.checkState(this.timeoutID_===-1,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},r.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},r.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},t.exports=r},{events:169,precond:175,util:223}],31:[function(e,t,n){function r(e,t,n){i.EventEmitter.call(this),s.checkIsFunction(e,"Expected fn to be a function."),s.checkIsArray(t,"Expected args to be an array."),s.checkIsFunction(n,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=n,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=r.DEFAULT_RETRY_PREDICATE_,this.state_=r.State_.PENDING}var i=e("events"),s=e("precond"),o=e("util"),a=e("./backoff"),u=e("./strategy/fibonacci");o.inherits(r,i.EventEmitter),r.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},r.DEFAULT_RETRY_PREDICATE_=function(e){return!0},r.prototype.isPending=function(){return this.state_==r.State_.PENDING},r.prototype.isRunning=function(){return this.state_==r.State_.RUNNING},r.prototype.isCompleted=function(){return this.state_==r.State_.COMPLETED},r.prototype.isAborted=function(){return this.state_==r.State_.ABORTED},r.prototype.setStrategy=function(e){return s.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},r.prototype.retryIf=function(e){return s.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},r.prototype.getLastResult=function(){return this.lastResult_.concat()},r.prototype.getNumRetries=function(){return this.numRetries_},r.prototype.failAfter=function(e){return s.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},r.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=r.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},r.prototype.start=function(e){s.checkState(!this.isAborted(),"FunctionCall is aborted."),s.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new u;this.backoff_=e?e(t):new a(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=r.State_.RUNNING,this.doCall_(!1)},r.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);i.EventEmitter.prototype.emit.apply(this,t);var n=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(n))},r.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},r.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,i.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=r.State_.COMPLETED,this.doCallback_())}},r.prototype.handleBackoff_=function(e,t,n){this.emit("backoff",e,t,n)},t.exports=r},{"./backoff":30,"./strategy/fibonacci":33,events:169,precond:175,util:223}],32:[function(e,t,n){function r(e){o.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=r.DEFAULT_FACTOR,e&&void 0!==e.factor&&(s.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}var i=e("util"),s=e("precond"),o=e("./strategy");i.inherits(r,o),r.DEFAULT_FACTOR=2,r.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},r.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},t.exports=r},{"./strategy":34,precond:175,util:223}],33:[function(e,t,n){function r(e){s.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}var i=e("util"),s=e("./strategy");i.inherits(r,s),r.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},r.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},t.exports=r},{"./strategy":34,util:223}],34:[function(e,t,n){function r(e){return void 0!==e&&null!==e}function i(e){if(e=e||{},r(e.initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(r(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(r(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}e("events"),e("util");i.prototype.getMaxDelay=function(){return this.maxDelay_},i.prototype.getInitialDelay=function(){return this.initialDelay_},i.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},i.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},i.prototype.reset=function(){this.reset_()},i.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},t.exports=i},{events:169,util:223}],35:[function(t,i,s){(function(n,o){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2015 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(t){if("object"==(void 0===s?"undefined":u(s))&&void 0!==i)i.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var n;"undefined"!=typeof window?n=window:void 0!==o?n=o:"undefined"!=typeof self&&(n=self),n.Promise=t()}}(function(){var e,i,s;return function e(n,r,i){function s(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof t&&t;if(!u&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[a]={exports:{}};n[a][0].call(d.exports,function(e){var t=n[a][1][e];return s(t?t:e)},d,d.exports,e,n,r,i)}return r[a].exports}for(var o="function"==typeof t&&t,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=c}function s(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function o(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}var u;try{throw new Error}catch(e){u=e}var c=e("./schedule"),l=e("./queue"),d=e("./util");i.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(e,t){t?(n.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),n.exit(2)):this.throwLater(e)},i.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},d.hasDevTools?(i.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?s.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},i.prototype.invoke=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},i.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(i.prototype.invokeLater=s,i.prototype.invoke=o,i.prototype.settlePromises=a),i.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},t.exports=i,t.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,s=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(s,s,null,this,e)},a=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(s){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(s),l=new e(t);l._propagateFrom(this,1);var d=this._target();if(l._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:d,bindingPromise:c};d._then(t,o,void 0,l,h),c._then(a,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(d);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function r(){try{Promise===s&&(Promise=i)}catch(e){}return s}var i;"undefined"!=typeof Promise&&(i=Promise);var s=e("./promise")();s.noConflict=r,t.exports=s},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),s=r(null);i[" size"]=s[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+a.classString(e)+" has no method '"+a.toString(n)+"'";throw new t.TypeError(i)}return r}function r(e){return n(e,this.pop()).apply(e,this)}function i(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var o,a=e("./util"),u=a.canEvaluate;a.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=s;else if(u){var r=o(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var s=e("./util"),o=s.tryCatch,a=s.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(s.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=o(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,n,a){return function(u){var c=a._boundValue();e:for(var l=0;l<e.length;++l){var d=e[l];if(d===Error||null!=d&&d.prototype instanceof Error){if(u instanceof d)return s(n).call(c,u)}else if("function"==typeof d){var h=s(d).call(c,u);if(h===o)return h;if(h)return s(n).call(c,u)}else if(r.isObject(u)){for(var f=i(d),p=0;p<f.length;++p){var m=f[p];if(d[m]!=u[m])continue e}return s(n).call(c,u)}}return t}}var r=e("./util"),i=e("./es5").keys,s=r.tryCatch,o=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){if(i)return new t}function r(){var e=s.length-1;if(e>=0)return s[e]}var i=!1,s=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,s.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=s.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,s=e.prototype._popContext,o=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=s,e._peekContext=o,e.prototype._peekContext=a,e.prototype._promiseCreated=u,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,t,r){"use strict";t.exports=function(t,r){function i(e,t){return{promise:t}}function s(){return!1}function o(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+U.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function a(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?U.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function c(){return this._onCancelField}function l(e){this._onCancelField=e}function d(){this._cancellationParent=void 0,this._onCancelField=void 0}function h(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function f(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function m(){this._trace=new A(this._peekContext())}function _(e,t){if(F(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=S(e);U.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),U.notEnumerableProp(e,"__stackCleaned__",!0)}}}function g(e,t,n,r,i){if(void 0===e&&null!==t&&K){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var s="",o="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=w(a),c=u.length-1;c>=0;--c){var l=u[c];if(!q.test(l)){var d=l.match(X);d&&(s="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(u.length>0)for(var h=u[0],c=0;c<a.length;++c)if(a[c]===h){c>0&&(o="\n"+a[c-1]);break}}var f="a promise was created in a "+n+"handler "+s+"but was not returned from it, see http://goo.gl/rRqMUw"+o;r._warn(f,!0,t)}}function v(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),y(n)}function y(e,n,r){if(ae.warnings){var i,s=new H(e);if(n)r._attachExtraTrace(s);else if(ae.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(s);else{var o=S(s);s.stack=o.message+"\n"+o.stack.join("\n")}ne("warning",s)||L(s,"",!0)}}function b(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function T(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function k(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,s=t[i],o=-1,a=r.length-1;a>=0;--a)if(r[a]===s){o=a;break}for(var a=o;a>=0;--a){var u=r[a];if(t[i]!==u)break;t.pop(),i--}t=r}}function w(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||W.test(r),s=i&&ie(r);i&&!s&&(z&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function M(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||W.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function S(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?M(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:w(t)}}function L(e,t,n){if("undefined"!=typeof console){var r;if(U.isObject(e)){r=t+B(e.stack,e)}else r=t+String(e);"function"==typeof P?P(r,n):"function"==typeof console.log||u(console.log)}}function E(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){N.throwLater(e)}"unhandledRejection"===e?ne(e,n,r)||i||L(n,"Unhandled rejection "):ne(e,r)}function C(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():U.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+x(t)+">, no stack trace)"}function x(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function D(){return"function"==typeof oe}function j(e){var t=e.match(se);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function R(e,t){if(D()){for(var n,r,i=e.stack.split("\n"),s=t.stack.split("\n"),o=-1,a=-1,u=0;u<i.length;++u){var c=j(i[u]);if(c){n=c.fileName,o=c.line;break}}for(var u=0;u<s.length;++u){var c=j(s[u]);if(c){r=c.fileName,a=c.line;break}}o<0||a<0||!n||!r||n!==r||o>=a||(ie=function(e){if($.test(e))return!0;var t=j(e);return!!(t&&t.fileName===n&&o<=t.line&&t.line<=a)})}}function A(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);oe(this,A),t>32&&this.uncycle()}var Y,I,P,O=t._getDomain,N=t._async,H=e("./errors").Warning,U=e("./util"),F=U.canAttachTrace,$=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,X=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,W=null,B=null,z=!1,G=!(0==U.env("BLUEBIRD_DEBUG")),V=!(0==U.env("BLUEBIRD_WARNINGS")||!G&&!U.env("BLUEBIRD_WARNINGS")),J=!(0==U.env("BLUEBIRD_LONG_STACK_TRACES")||!G&&!U.env("BLUEBIRD_LONG_STACK_TRACES")),K=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(V||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&-1048577|524288},t.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),N.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){E("rejectionHandled",Y,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),E("unhandledRejection",I,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,n){return y(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var t=O();I="function"==typeof e?null===t?e:U.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=O();Y="function"==typeof e?null===t?e:U.domainBind(t,e):void 0};var Z=function(){};t.longStackTraces=function(){if(N.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ae.longStackTraces&&D()){var e=t.prototype._captureStackTrace,n=t.prototype._attachExtraTrace;ae.longStackTraces=!0,Z=function(){if(N.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=n,r.deactivateLongStackTraces(),N.enableTrampoline(),ae.longStackTraces=!1},t.prototype._captureStackTrace=m,t.prototype._attachExtraTrace=_,r.activateLongStackTraces(),N.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return ae.longStackTraces&&D()};var Q=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return U.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!U.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");return U.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!U.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),U.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!U.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),ee=function(){return U.isNode?function(){return n.emit.apply(n,arguments)}:U.global?function(e){var t="on"+e.toLowerCase(),n=U.global[t];return!!n&&(n.apply(U.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),te={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:i},ne=function(e){var t=!1;try{t=ee.apply(null,arguments)}catch(e){N.throwLater(e),t=!0}var n=!1;try{n=Q(e,te[e].apply(null,arguments))}catch(e){N.throwLater(e),n=!0}return n||t};t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&Z()),"warnings"in e){var n=e.warnings;ae.warnings=!!n,K=ae.warnings,U.isObject(n)&&"wForgottenReturn"in n&&(K=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ae.cancellation){if(N.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=d,t.prototype._propagateFrom=h,t.prototype._onCancel=c,t.prototype._setOnCancel=l,t.prototype._attachCancellationCallback=a,t.prototype._execute=o,re=h,ae.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!ae.monitoring?(ae.monitoring=!0,t.prototype._fireEvent=ne):!e.monitoring&&ae.monitoring&&(ae.monitoring=!1,t.prototype._fireEvent=s)),t},t.prototype._fireEvent=s,t.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var re=f,ie=function(){return!1},se=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;U.inherits(A,Error),r.CapturedTrace=A,A.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var s=t[r].stack;void 0===n[s]&&(n[s]=r)}for(var r=0;r<e;++r){var o=t[r].stack,a=n[o];if(void 0!==a&&a!==r){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var u=r>0?t[r-1]:this;a<e-1?(u._parent=t[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)t[l]._length=c,c++;return}}}},A.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=S(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(w(i.stack.split("\n"))),i=i._parent;k(r),T(r),U.notEnumerableProp(e,"stack",b(n,r)),U.notEnumerableProp(e,"__stackCleaned__",!0)}};var oe=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():C(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,W=e,B=t;var n=Error.captureStackTrace;return ie=function(e){return $.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return W=/@/,B=t,z=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(e){i="stack"in e}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(B=function(e,t){return"string"==typeof e?e:"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t||void 0===t.name||void 0===t.message?C(t):t.toString()},null):(W=e,B=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(P=function(e){},U.isNode&&n.stderr.isTTY?P=function(e,t){}:U.isNode||"string"!=typeof(new Error).stack||(P=function(e,t){}));var ae={warnings:V,longStackTraces:!1,cancellation:!1,monitoring:!1};return J&&t.longStackTraces(),{longStackTraces:function(){return ae.longStackTraces},warnings:function(){return ae.warnings},cancellation:function(){return ae.cancellation},monitoring:function(){return ae.monitoring},propagateFromFunction:function(){return re},boundValueFunction:function(){return p},checkForgottenReturns:g,setBounds:R,warn:y,deprecated:v,CapturedTrace:A,fireDomEvent:Q,fireGlobalEvent:ee}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return s(this)}function r(e,n){return i(e,n,t,t)}var i=e.reduce,s=e.all;e.prototype.each=function(e){return i(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return i(this,e,t,t)},e.each=function(e,r){return i(e,r,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}},{}],12:[function(e,t,n){"use strict";function r(e,t){function n(r){if(!(this instanceof n))return new n(r);d(this,"message","string"==typeof r?r:t),d(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}function i(e){if(!(this instanceof i))return new i(e);d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var s,o,a=e("./es5"),u=a.freeze,c=e("./util"),l=c.inherits,d=c.notEnumerableProp,h=r("Warning","warning"),f=r("CancellationError","cancellation error"),p=r("TimeoutError","timeout error"),m=r("AggregateError","aggregate error");try{s=TypeError,o=RangeError}catch(e){s=r("TypeError","type error"),o=r("RangeError","range error")}for(var _="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<_.length;++g)"function"==typeof Array.prototype[_[g]]&&(m.prototype[_[g]]=Array.prototype[_[g]]);a.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var v=0;m.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),s=0;s<i.length;++s)i[s]=e+i[s];r=i.join("\n"),t+=r+"\n"}return v--,t},l(i,Error);var y=Error.__BluebirdErrorTypes__;y||(y=u({CancellationError:f,TimeoutError:p,OperationalError:i,RejectionError:i,AggregateError:m}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:s,RangeError:o,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,s={}.toString,o={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},u=function(e,t){return{value:e[t]}},c=function(e,t,n){return e[t]=n.value,e},l=function(e){return e},d=function(e){try{return Object(e).constructor.prototype}catch(e){return o}},h=function(e){try{return"[object Array]"===s.call(e)}catch(e){return!1}};t.exports={isArray:h,keys:a,names:a,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:d,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function i(e){this.finallyHandler=e}function s(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function o(){return u.call(this,this.promise._target()._settledValue())}function a(e){if(!s(this,e))return d.e=e,d}function u(e){var r=this.promise,u=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?u.call(r._boundValue()):u.call(r._boundValue(),e);if(void 0!==c){r._setReturnedNonUndefined();var h=n(c,r);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var f=new l("late cancellation observer");return r._attachExtraTrace(f),d.e=f,d}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(o,a,void 0,this,void 0)}}}return r.isRejected()?(s(this),d.e=e,d):(s(this),e)}var c=e("./util"),l=t.CancellationError,d=c.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){s(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,i){return"function"!=typeof e?this.then():this._then(n,i,void 0,new r(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,u,u)},t.prototype.tap=function(e){return this._passThrough(e,1,u)},r}},{"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function a(e,n,r){for(var s=0;s<n.length;++s){r._pushContext();var o=f(n[s])(e);if(r._popContext(),o===h){r._pushContext();var a=t.reject(h.e);return r._popContext(),a}var u=i(o,r);if(u instanceof t)return u}return null}function u(e,n,i,s){if(o.cancellation()){var a=new t(r),u=this._finallyPromise=new t(r);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(r))._captureStackTrace()}this._stack=s,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}var c=e("./errors"),l=c.TypeError,d=e("./util"),h=d.errorObj,f=d.tryCatch,p=[];d.inherits(u,s),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),e=f(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=f(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},u.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=f(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(e){var n=this._promise;if(e===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var s=i(r,this._promise);if(!(s instanceof t)&&(s=a(s,this._yieldHandlers,this._promise),null===s))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));s=s._target();var o=s._bitField;0===(50397184&o)?(this._yieldedPromise=s,s._proxy(this,null)):0!==(33554432&o)?t._async.invoke(this._promiseFulfilled,this,s._value()):0!==(16777216&o)?t._async.invoke(this._promiseRejected,this,s._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=u,i=(new Error).stack;return function(){var t=e.apply(this,arguments),s=new r(void 0,void 0,n,i),o=s.promise();return s._generator=t,s._promiseFulfilled(void 0),o}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+d.classString(e));p.push(e)},t.spawn=function(e){if(o.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var r}var i=[].slice.call(arguments);e&&i.pop();var r=new n(i).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function a(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=l();this._callback=null===i?t:d.domainBind(i,t),this._preservedValues=r===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function c(e,n,i,s){if("function"!=typeof n)return r("expecting a function but got "+d.classString(n));var o=0;if(void 0!==i){if("object"!==(void 0===i?"undefined":u(i))||null===i)return t.reject(new TypeError("options argument must be an object but it is "+d.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+d.classString(i.concurrency)));o=i.concurrency}return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new a(e,n,o,s).promise()}var l=t._getDomain,d=e("./util"),h=d.tryCatch,f=d.errorObj,p=t._async;d.inherits(a,n),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,n){var r=this._values,s=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(n=n*-1-1,r[n]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var c=this._promise,l=this._callback,d=c._boundValue();c._pushContext();var p=h(l).call(d,e,n,s),m=c._popContext();if(o.checkForgottenReturns(p,m,null!==a?"Promise.filter":"Promise.map",c),p===f)return this._reject(p.e),!0;var _=i(p,this._promise);if(_ instanceof t){_=_._target();var g=_._bitField;if(0===(50397184&g))return u>=1&&this._inFlight++,r[n]=_,_._proxy(this,(n+1)*-1),!1;if(0===(33554432&g))return 0!==(16777216&g)?(this._reject(_._reason()),!0):(this._cancel(),!0);p=_._value()}r[n]=p}return++this._totalResolved>=s&&(null!==a?this._filter(r,a):this._resolve(r),!0)},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,s=0;s<n;++s)e[s]&&(r[i++]=t[s]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return c(this,e,t,null)},t.map=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s){var o=e("./util"),a=o.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+o.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=a(e).apply(this,arguments),o=r._popContext();return s.checkForgottenReturns(i,o,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+o.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){s.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];u=o.isArray(c)?a(e).apply(l,c):a(e).call(l,c)}else u=a(e)();var d=r._popContext();return s.checkForgottenReturns(u,d,"Promise.try",r),r._resolveFromSyncValue(u),r},t.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(r(e)){t=new c(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=l.keys(e),i=0;i<n.length;++i){var s=n[i];d.test(s)||(t[s]=e[s])}return t}return o.markAsOriginatingFromRejection(e),e}function s(e,t){return function(n,r){if(null!==e){if(n){var s=i(a(n));e._attachExtraTrace(s),e._reject(s)}else if(t){var o=[].slice.call(arguments,1);e._fulfill(o)}else e._fulfill(r);e=null}}}var o=e("./util"),a=o.maybeWrapAsError,u=e("./errors"),c=u.OperationalError,l=e("./es5"),d=/^(?:name|message|stack|cause)$/;t.exports=s},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!s.isArray(e))return r.call(n,e,t);var i=a(t).apply(n._boundValue(),[null].concat(e));i===u&&o.throwLater(i.e)}function r(e,t){var n=this,r=n._boundValue(),i=void 0===e?a(t).call(r,null):a(t).call(r,null,e);i===u&&o.throwLater(i.e)}function i(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var i=a(t).call(n._boundValue(),e);i===u&&o.throwLater(i.e)}var s=e("./util"),o=t._async,a=s.tryCatch,u=s.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var s=r;void 0!==t&&Object(t).spread&&(s=n),this._then(s,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,r){"use strict";t.exports=function(){function r(){}function i(e,t){if("function"!=typeof t)throw new y("expecting a function but got "+p.classString(t));if(e.constructor!==s)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function s(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==T&&(i(this,e),this._resolveFromExecutor(e)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function u(e){var t=new s(T);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var c,l=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},d=function(){return new s.PromiseInspection(this._target())},h=function(e){return s.reject(new y(e))},f={},p=e("./util");c=p.isNode?function(){var e=n.domain;return void 0===e&&(e=null),e}:function(){return null},p.notEnumerableProp(s,"_getDomain",c);var m=e("./es5"),_=e("./async"),g=new _;m.defineProperty(s,"_async",{value:g});var v=e("./errors"),y=s.TypeError=v.TypeError;s.RangeError=v.RangeError;var b=s.CancellationError=v.CancellationError;s.TimeoutError=v.TimeoutError,s.OperationalError=v.OperationalError,s.RejectionError=v.OperationalError,s.AggregateError=v.AggregateError;var T=function(){},k={},w={},M=e("./thenables")(s,T),S=e("./promise_array")(s,T,M,h,r),L=e("./context")(s),E=L.create,C=e("./debuggability")(s,L),x=(C.CapturedTrace,e("./finally")(s,M)),D=e("./catch_filter")(w),j=e("./nodeback"),R=p.errorObj,A=p.tryCatch;return s.prototype.toString=function(){return"[object Promise]"},s.prototype.caught=s.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var s=arguments[n];if(!p.isObject(s))return h("expecting an object but got A catch statement predicate "+p.classString(s));r[i++]=s}return r.length=i,e=arguments[n],this.then(void 0,D(r,e,this))}return this.then(void 0,e)},s.prototype.reflect=function(){return this._then(d,d,void 0,this,void 0)},s.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+p.classString(e);arguments.length>1&&(n+=", "+p.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},s.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},s.prototype.spread=function(e){return"function"!=typeof e?h("expecting a function but got "+p.classString(e)):this.all()._then(e,void 0,void 0,k,void 0)},s.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},s.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new S(this).promise()},s.prototype.error=function(e){return this.caught(p.originatesFromRejection,e)},s.getNewLibraryCopy=t.exports,s.is=function(e){return e instanceof s},s.fromNode=s.fromCallback=function(e){var t=new s(T);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=A(e)(j(t,n));return r===R&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},s.all=function(e){return new S(e).promise()},s.cast=function(e){var t=M(e);return t instanceof s||(t=new s(T),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},s.resolve=s.fulfilled=s.cast,s.reject=s.rejected=function(e){var t=new s(T);return t._captureStackTrace(),t._rejectCallback(e,!0),t},s.setScheduler=function(e){if("function"!=typeof e)throw new y("expecting a function but got "+p.classString(e));return g.setScheduler(e)},s.prototype._then=function(e,t,n,r,i){var o=void 0!==i,a=o?i:new s(T),u=this._target(),l=u._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var d=c();if(0!==(50397184&l)){var h,f,m=u._settlePromiseCtx;0!==(33554432&l)?(f=u._rejectionHandler0,h=e):0!==(16777216&l)?(f=u._fulfillmentHandler0,h=t,u._unsetRejectionIsUnhandled()):(m=u._settlePromiseLateCancellationObserver,f=new b("late cancellation observer"),u._attachExtraTrace(f),h=t),g.invoke(m,u,{handler:null===d?h:"function"==typeof h&&p.domainBind(d,h),promise:a,receiver:r,value:f})}else u._addCallbacks(e,t,a,r,d);return a},s.prototype._length=function(){return 65535&this._bitField},s.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},s.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},s.prototype._setLength=function(e){this._bitField=this._bitField&-65536|65535&e},s.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},s.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},s.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},s.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},s.prototype._isFinal=function(){return(4194304&this._bitField)>0},s.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},s.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},s.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},s.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},s.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==f)return void 0===t&&this._isBound()?this._boundValue():t},s.prototype._promiseAt=function(e){return this[4*e-4+2]},s.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},s.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},s.prototype._boundValue=function(){},s.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=f),this._addCallbacks(t,n,r,i,null)},s.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),s=e._receiverAt(t);void 0===s&&(s=f),this._addCallbacks(n,r,i,s,null)},s.prototype._addCallbacks=function(e,t,n,r,i){var s=this._length();if(s>=65531&&(s=0,this._setLength(0)),0===s)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:p.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:p.domainBind(i,t));else{var o=4*s-4;this[o+2]=n,this[o+3]=r,"function"==typeof e&&(this[o+0]=null===i?e:p.domainBind(i,e)),"function"==typeof t&&(this[o+1]=null===i?t:p.domainBind(i,t))}return this._setLength(s+1),s},s.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},s.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var n=M(e,this);if(!(n instanceof s))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0===(50397184&i)){var o=this._length();o>0&&r._migrateCallback0(this);for(var a=1;a<o;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&i))this._fulfill(r._value());else if(0!==(16777216&i))this._reject(r._reason());else{var u=new b("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},s.prototype._rejectCallback=function(e,t,n){var r=p.ensureErrorObject(e),i=r===e;if(!i&&!n&&C.warnings()){var s="a promise was rejected with a non-error: "+p.classString(e);this._warn(s,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},s.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)},s.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var s;t===k?n&&"number"==typeof n.length?s=A(e).apply(this._boundValue(),n):(s=R,s.e=new y("cannot .spread() a non-array: "+p.classString(n))):s=A(e).call(t,n);var o=r._popContext();i=r._bitField,0===(65536&i)&&(s===w?r._reject(n):s===R?r._rejectCallback(s.e,!1):(C.checkForgottenReturns(s,o,"",r,this),r._resolveCallback(s)))}},s.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},s.prototype._followee=function(){return this._rejectionHandler0},s.prototype._setFollowee=function(e){this._rejectionHandler0=e},s.prototype._settlePromise=function(e,t,n,i){var o=e instanceof s,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(o&&e._invokeInternalOnCancel(),n instanceof x&&n.isFinallyHandler()?(n.cancelPromise=e,A(t).call(n,i)===R&&e._reject(R.e)):t===d?e._fulfill(d.call(n)):n instanceof r?n._promiseCancelled(e):o||e instanceof S?e._cancel():n.cancel()):"function"==typeof t?o?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,i,e)):t.call(n,i,e):n instanceof r?n._isResolved()||(0!==(33554432&a)?n._promiseFulfilled(i,e):n._promiseRejected(i,e)):o&&(u&&e._setAsyncGuaranteed(),0!==(33554432&a)?e._fulfill(i):e._reject(i))},s.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof s?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof s&&n._reject(i)},s.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},s.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},s.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},s.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():g.settlePromises(this))}},s.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return g.fatalError(e,p.isNode);(65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},s.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),s=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,s,t)}},s.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),s=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,s,t)}},s.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},s.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},s.defer=s.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new s(T),resolve:o,reject:a}},p.notEnumerableProp(s,"_makeSelfResolutionError",l),e("./method")(s,T,M,h,C),e("./bind")(s,T,M,C),e("./cancel")(s,S,h,C),e("./direct_resolve")(s),e("./synchronous_inspection")(s),e("./join")(s,S,M,T,g,c),s.Promise=s,s.version="3.4.7",e("./map.js")(s,S,h,M,T,C),e("./call_get.js")(s),e("./using.js")(s,h,M,E,T,C),e("./timers.js")(s,T,C),e("./generators.js")(s,h,T,M,r,C),e("./nodeify.js")(s),e("./promisify.js")(s,T),e("./props.js")(s,S,M,h),e("./race.js")(s,T,M,h),e("./reduce.js")(s,S,h,M,T,C),e("./settle.js")(s,S,C),e("./some.js")(s,S,h),e("./filter.js")(s,T),e("./each.js")(s,T),e("./any.js")(s),p.toFastProperties(s),p.toFastProperties(s.prototype),u({a:1}),u({b:2}),u({c:3}),u(1),u(function(){}),u(void 0),u(!1),u(new s(T)),C.setBounds(_.firstLineError,p.lastLineError),s}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s){function o(e){switch(e){case-2:return[];case-3:return{}}}function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=e("./util");u.isArray;return u.inherits(a,s),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,s){var a=r(this._values,this._promise);if(a instanceof t){a=a._target();var c=a._bitField;if(this._values=a,0===(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,s);if(0===(33554432&c))return 0!==(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(a=u.asArray(a),null===a){var l=i("expecting an array or an iterable object but got "+u.classString(a)).reason();return void this._promise._rejectCallback(l,!1)}if(0===a.length)return void(s===-5?this._resolveEmptyArray():this._resolve(o(s)));this._iterate(a)},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,s=!1,o=null,a=0;a<n;++a){var u=r(e[a],i);u instanceof t?(u=u._target(),o=u._bitField):o=null,s?null!==o&&u.suppressUnhandledRejections():null!==o?0===(50397184&o)?(u._proxy(this,a),this._values[a]=u):s=0!==(33554432&o)?this._promiseFulfilled(u._value(),a):0!==(16777216&o)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):s=this._promiseFulfilled(u,a)}s||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return!w.test(e)}function i(e){try{return e.__isPromisified__===!0}catch(e){return!1}}function s(e,t,n){var r=p.getDataPropertyOrDefault(e,t+n,T);return!!r&&i(r)}function o(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var s=i.replace(n,""),o=0;o<e.length;o+=2)if(e[o]===s)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function a(e,t,n,r){for(var a=p.inheritedDataKeys(e),u=[],c=0;c<a.length;++c){var l=a[c],d=e[l],h=r===M||M(l,d,e);"function"!=typeof d||i(d)||s(e,l,t)||!r(l,d,e,h)||u.push(l,d)}return o(u,t,n),u}function c(e,r,i,s,o,a){function u(){var i=r;r===f&&(i=this);var s=new t(n);s._captureStackTrace();var o="string"==typeof l&&this!==c?this[l]:e,u=m(s,a);try{o.apply(i,_(arguments,u))}catch(e){s._rejectCallback(g(e),!0,!0)}return s._isFateSealed()||s._setAsyncGuaranteed(),s}var c=function(){return this}(),l=e;return"string"==typeof l&&(e=s),p.notEnumerableProp(u,"__isPromisified__",!0),u}function l(e,t,n,r,i){for(var s=new RegExp(S(t)+"$"),o=a(e,t,s,n),u=0,c=o.length;u<c;u+=2){var l=o[u],d=o[u+1],h=l+t;if(r===L)e[h]=L(l,f,l,d,t,i);else{var m=r(d,function(){return L(l,f,l,d,t,i)});p.notEnumerableProp(m,"__isPromisified__",!0),e[h]=m}}return p.toFastProperties(e),e}function d(e,t,n){return L(e,t,void 0,e,null,n)}var h,f={},p=e("./util"),m=e("./nodeback"),_=p.withAppended,g=p.maybeWrapAsError,v=p.canEvaluate,y=e("./errors").TypeError,b="Async",T={__isPromisified__:!0},k=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+k.join("|")+")$"),M=function(e){return p.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},S=function(e){return e.replace(/([$])/,"\\$")},L=v?h:c;t.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+p.classString(e));if(i(e))return e;t=Object(t);var n=void 0===t.context?f:t.context,s=!!t.multiArgs,o=d(e,n,s);return p.copyDescriptors(e,o,r),o},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!==(void 0===e?"undefined":u(e)))throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r=b);var i=t.filter;"function"!=typeof i&&(i=M);var s=t.promisifier;if("function"!=typeof s&&(s=L),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var o=p.inheritedDataKeys(e),a=0;a<o.length;++a){var c=e[o[a]];"constructor"!==o[a]&&p.isClass(c)&&(l(c.prototype,r,i,s,n),l(c,r,i,s,n))}return l(e,r,i,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function s(e){var t,n=!1;if(void 0!==a&&e instanceof a)t=d(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var s=0;s<i;++s){var o=r[s];t[s]=e[o],t[s+i]=o}}this.constructor$(t),this._isMap=n,this._init$(void 0,-3)}function o(e){var n,o=r(e);return c(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new s(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,u=e("./util"),c=u.isObject,l=e("./es5");"function"==typeof Map&&(a=Map);var d=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}}(),h=function(e){for(var t=new a,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],s=e[r];t.set(i,s)}return t};u.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=h(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},s.prototype.shouldCopyValues=function(){return!1},s.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return o(this)},t.props=function(e){return o(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var s=0;s<i;++s)n[s+r]=e[s+t],e[s+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var s=this._capacity-1;this[i+0&s]=e,this[i+1&s]=t,this[i+2&s]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,r(this,0,this,t,this._front+this._length&t-1)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function s(e,s){var u=r(e);if(u instanceof t)return a(u);if(e=o.asArray(e),null===e)return i("expecting an array or an iterable object but got "+o.classString(e));var c=new t(n);void 0!==s&&c._propagateFrom(s,3);for(var l=c._fulfill,d=c._reject,h=0,f=e.length;h<f;++h){var p=e[h];(void 0!==p||h in e)&&t.cast(p)._then(l,d,void 0,c,null)}return c}var o=e("./util"),a=function(e){return e.then(function(t){return s(t,e)})};t.race=function(e){return s(e,void 0)},t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function a(e,n,r,i){this.constructor$(e);var o=h();this._fn=null===o?n:f.domainBind(o,n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===s?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+f.classString(t)):new a(e,t,n,i).promise()}function l(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(e){var n=this.array,r=n._promise,i=p(n._fn);r._pushContext();var s;s=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length),s instanceof t&&(n._currentCancellable=s);var a=r._popContext();return o.checkForgottenReturns(s,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),s}var h=t._getDomain,f=e("./util"),p=f.tryCatch;f.inherits(a,n),a.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==s&&this._eachValues.push(e)},a.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},a.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},a.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var s={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,s,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},t.prototype.reduce=function(e,t){return c(this,e,t,null)},t.reduce=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],29:[function(e,t,i){"use strict";var s,a=e("./util"),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var l=o.setImmediate,d=n.nextTick;s=a.isRecentNode?function(e){l.call(o,e)}:function(e){d.call(n,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var h=c.resolve();s=function(e){h.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(e){r(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:u:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(r,t);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),i()}}();t.exports=s},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e)}var s=t.PromiseInspection;e("./util").inherits(i,n),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new s;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new s;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function s(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),s=n.promise();return n.setHowMany(t),n.init(),s}var o=e("./util"),a=e("./errors").RangeError,u=e("./errors").AggregateError,c=o.isArray,l={};o.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new u,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){return new a("Input array must contain at least "+this._howMany+" items but contains only "+e+" items")},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return s(e,t)},t.prototype.some=function(e){return s(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},s=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return s.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,r){if(l(e)){if(e instanceof t)return e;var i=s(e);if(i===c){r&&r._pushContext();var u=t.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(o(e)){var u=new t(n);return e._then(u._fulfill,u._reject,void 0,u,null),u}return a(e,i,r)}}return e}function i(e){return e.then}function s(e){try{return i(e)}catch(e){return c.e=e,c}}function o(e){try{return d.call(e,"_promise0")}catch(e){return!1}}function a(e,r,i){function s(e){a&&(a._resolveCallback(e),a=null)}function o(e){a&&(a._rejectCallback(e,d,!0),a=null)}var a=new t(n),l=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var d=!0,h=u.tryCatch(r).call(e,s,o);return d=!1,a&&h===c&&(a._rejectCallback(h.e,!0,!0),a=null),l}var u=e("./util"),c=u.errorObj,l=u.isObject,d={}.hasOwnProperty;return r}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.handle=e}function s(e){return clearTimeout(this.handle),e}function o(e){throw clearTimeout(this.handle),e}var a=e("./util"),u=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,s){var o,a;return void 0!==s?(o=t.resolve(s)._then(c,null,null,e,void 0),r.cancellation()&&s instanceof t&&o._setOnCancel(s)):(o=new t(n),a=setTimeout(function(){o._fulfill()},+e),r.cancellation()&&o._setOnCancel(new i(a)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(e){return l(e,this)};var d=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new u("operation timed out"):new u(t),a.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,a,u=new i(setTimeout(function(){n.isPending()&&d(n,t,a)},e));return r.cancellation()?(a=this.then(),n=a._then(s,o,void 0,u,void 0),n._setOnCancel(u)):n=this._then(s,o,void 0,u,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function a(e){setTimeout(function(){throw e},0)}function u(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function c(e,n){function i(){if(o>=c)return l._fulfill();var s=u(e[o++]);if(s instanceof t&&s._isDisposable()){try{s=r(s._getDisposer().tryDispose(n),e.promise)}catch(e){return a(e)}if(s instanceof t)return s._then(i,a,null,null,null)}i()}var o=0,c=e.length,l=new t(s);return i(),l}function l(e,t,n){this._data=e,this._promise=t,this._context=n}function d(e,t,n){this.constructor$(e,t,n)}function h(e){return l.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function f(e){this.length=e,this.promise=null,this[e-1]=null}var p=e("./util"),m=e("./errors").TypeError,_=e("./util").inherits,g=p.errorObj,v=p.tryCatch,y={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},l.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==y?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},_(d,l),d.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},f.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+p.classString(i));var s,a=!0;2===e&&Array.isArray(arguments[0])?(s=arguments[0],e=s.length,a=!1):(s=arguments,e--);for(var u=new f(e),d=0;d<e;++d){var m=s[d];if(l.isDisposer(m)){var _=m;m=m.promise(),m._setDisposable(_)}else{var y=r(m);y instanceof t&&(m=y._then(h,null,null,{resources:u,index:d},void 0))}u[d]=m}for(var b=new Array(u.length),d=0;d<b.length;++d)b[d]=t.resolve(u[d]).reflect();var T=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return g.e=n.error(),g;if(!n.isFulfilled())return void T.cancel();e[t]=n.value()}k._pushContext(),i=v(i);var r=a?i.apply(void 0,e):i(e),s=k._popContext();return o.checkForgottenReturns(r,s,"Promise.using",k),r}),k=T.lastly(function(){return c(u,new t.PromiseInspection(T))});return u.promise=k,k._setOnCancel(u),k},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new d(e,this,i());throw new m}}},{"./errors":12,"./util":36}],36:[function(e,t,r){"use strict";function i(){try{var e=R;return R=null,e.apply(this,arguments)}catch(e){return j.e=e,j}}function s(e){return R=e,i}function a(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function c(e){return"function"==typeof e||"object"===(void 0===e?"undefined":u(e))&&null!==e}function l(e){return a(e)?new Error(y(e)):e}function d(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i}function h(e,t,n){if(!x.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function f(e,t,n){if(a(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return x.defineProperty(e,t,r),e}function p(e){throw e}function m(e){try{if("function"==typeof e){var t=x.names(e.prototype),n=x.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=P.test(e+"")&&x.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}}function _(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function g(e){return O.test(e)}function v(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r}function y(e){try{return e+""}catch(e){return"[no string representation]"}}function b(e){return null!==e&&"object"===(void 0===e?"undefined":u(e))&&"string"==typeof e.message&&"string"==typeof e.name}function T(e){try{f(e,"isOperational",!0)}catch(e){}}function k(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function w(e){return b(e)&&x.propertyIsWritable(e,"stack")}function M(e){return{}.toString.call(e)}function S(e,t,n){for(var r=x.names(e),i=0;i<r.length;++i){var s=r[i];if(n(s))try{x.defineProperty(t,s,x.getDescriptor(e,s))}catch(e){}}}function L(e){return $?n.env[e]:void 0}function E(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function C(e,t){return e.bind(t)}var x=e("./es5"),D="undefined"==typeof navigator,j={e:{}},R,A="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:void 0!==this?this:null,Y=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},I=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(x.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var s;try{s=n(e)}catch(e){return r}for(var o=0;o<s.length;++o){var a=s[o];if(!i[a]){i[a]=!0;var u=Object.getOwnPropertyDescriptor(e,a);null!=u&&null==u.get&&null==u.set&&r.push(a)}}e=x.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var s in n)if(r.call(n,s))i.push(s);else{for(var o=0;o<e.length;++o)if(r.call(e[o],s))continue e;i.push(s)}return i}}(),P=/this\s*\.\s*\S+\s*=/,O=/^[a-z$_][a-z$_0-9]*$/i,N=function(){return"stack"in new Error?function(e){return w(e)?e:new Error(y(e))}:function(e){if(w(e))return e;try{throw new Error(y(e))}catch(e){return e}}}(),H=function(e){return x.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};H=function(e){return x.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?U(e):null}}var F=void 0!==n&&"[object process]"===M(n).toLowerCase(),$=void 0!==n&&void 0!==n.env,q={isClass:m,isIdentifier:g,inheritedDataKeys:I,getDataPropertyOrDefault:h,thrower:p,isArray:x.isArray,asArray:H,notEnumerableProp:f,isPrimitive:a,isObject:c,isError:b,canEvaluate:D,errorObj:j,tryCatch:s,inherits:Y,withAppended:d,maybeWrapAsError:l,toFastProperties:_,filledRange:v,toString:y,canAttachTrace:w,ensureErrorObject:N,originatesFromRejection:k,markAsOriginatingFromRejection:T,classString:M,copyDescriptors:S,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:F,hasEnvVariables:$,env:L,global:A,getNativePromise:E,domainBind:C};q.isRecentNode=q.isNode&&function(){var e=n.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),q.isNode&&q.toFastProperties(n);try{throw new Error}catch(e){q.lastLineError=e}t.exports=q},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:178}],36:[function(e,t,n){(function(){var n,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o=[].slice;i=10,r=5,n=function(){function t(e,n,r,i,o){this.maxNb=null!=e?e:0,this.minTime=null!=n?n:0,this.highWater=null!=r?r:-1,this.strategy=null!=i?i:t.prototype.strategy.LEAK,this.rejectOnDrop=null!=o&&o,this.schedulePriority=s(this.schedulePriority,this),this.submitPriority=s(this.submitPriority,this),this.submit=s(this.submit,this),this._nextRequest=Date.now(),this._nbRunning=0,this._queues=this._makeQueues(),this._running={},this._nextIndex=0,this._unblockTime=0,this.penalty=15*this.minTime||5e3,this.interrupt=!1,this.reservoir=null,this.limiter=null,this.events={}}var n;return t.strategy=t.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},t.Cluster=t.prototype.Cluster=e("./Cluster"),t.DLList=t.prototype.DLList=e("./DLList"),t.Promise=t.prototype.Promise=function(){try{return e("bluebird")}catch(e){return n=e,"undefined"!=typeof Promise&&null!==Promise?Promise:function(){throw new Error("Bottleneck: install 'bluebird' or use Node 0.12 or higher for Promise support")}}}(),t.prototype._trigger=function(e,t){return this.rejectOnDrop&&"dropped"===e&&t[0].cb.apply({},[new Error("This job has been dropped by Bottleneck")]),setTimeout(function(n){return function(){var r;return null!=(r=n.events[e])?r.forEach(function(e){return e.apply({},t)}):void 0}}(this),0)},t.prototype._makeQueues=function(){var e,n,r;for(r=[],e=1,n=i;1<=n?e<=n:e>=n;1<=n?++e:--e)r.push(new t.prototype.DLList);return r},t.prototype.chain=function(e){return this.limiter=e,this},t.prototype.isBlocked=function(){return this._unblockTime>=Date.now()},t.prototype._sanitizePriority=function(e){var t;return t=~~e!==e?r:e,t<0?0:t>i-1?i-1:t},t.prototype._find=function(e,t){var n,r,i,s;for(n=r=0,i=e.length;r<i;n=++r)if(s=e[n],t(s))return s;return[]},t.prototype.nbQueued=function(e){return null!=e?this._queues[this._sanitizePriority(e)].length:this._queues.reduce(function(e,t){return e+t.length},0)},t.prototype.nbRunning=function(){return this._nbRunning},t.prototype._getFirst=function(e){return this._find(e,function(e){return e.length>0})},t.prototype._conditionsCheck=function(){return(this.nbRunning()<this.maxNb||this.maxNb<=0)&&(null==this.reservoir||this.reservoir>0)},t.prototype.check=function(){return this._conditionsCheck()&&this._nextRequest-Date.now()<=0},t.prototype._tryToRun=function(){var e,t,n,r,i;return!!(this._conditionsCheck()&&(r=this.nbQueued())>0)&&(this._nbRunning++,null!=this.reservoir&&this.reservoir--,i=Math.max(this._nextRequest-Date.now(),0),this._nextRequest=Date.now()+i+this.minTime,n=this._getFirst(this._queues).shift(),1===r&&this._trigger("empty",[]),e=!1,t=this._nextIndex++,this._running[t]={timeout:setTimeout(function(r){return function(){var i;return i=function(){var i;if(!e&&(e=!0,delete r._running[t],r._nbRunning--,r._tryToRun(),0===r.nbRunning()&&0===r.nbQueued()&&r._trigger("idle",[]),!r.interrupt))return null!=(i=n.cb)?i.apply({},Array.prototype.slice.call(arguments,0)):void 0},null!=r.limiter?r.limiter.submit.apply(r.limiter,Array.prototype.concat(n.task,n.args,i)):n.task.apply({},n.args.concat(i))}}(this),i),job:n},!0)},t.prototype.submit=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],this.submitPriority.apply({},Array.prototype.concat(r,e))},t.prototype.submitPriority=function(){var e,n,r,i,s,a,u,c;return s=arguments[0],c=arguments[1],e=4<=arguments.length?o.call(arguments,2,r=arguments.length-1):(r=2,[]),n=arguments[r++],i={task:c,args:e,cb:n},s=this._sanitizePriority(s),a=this.highWater>=0&&this.nbQueued()===this.highWater&&!this.check(),this.strategy===t.prototype.strategy.BLOCK&&(a||this.isBlocked())?(this._unblockTime=Date.now()+this.penalty,this._nextRequest=this._unblockTime+this.minTime,this._queues=this._makeQueues(),this._trigger("dropped",[i]),!0):a&&(u=this.strategy===t.prototype.strategy.LEAK?this._getFirst(this._queues.slice(s).reverse()).shift():this.strategy===t.prototype.strategy.OVERFLOW_PRIORITY?this._getFirst(this._queues.slice(s+1).reverse()).shift():this.strategy===t.prototype.strategy.OVERFLOW?i:void 0,null!=u&&this._trigger("dropped",[u]),null==u||this.strategy===t.prototype.strategy.OVERFLOW)?a:(this._queues[s].push(i),this._tryToRun(),a)},t.prototype.schedule=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],this.schedulePriority.apply({},Array.prototype.concat(r,e))},t.prototype.schedulePriority=function(){var e,n,r,i;return n=arguments[0],r=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],i=function(){var e,t,n;return e=2<=arguments.length?o.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],r.apply({},e).then(function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],t.apply({},Array.prototype.concat(null,e))}).catch(function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],t.apply({},e)})},new t.prototype.Promise(function(t){return function(r,s){return t.submitPriority.apply({},Array.prototype.concat(n,i,e,function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],(null!=e[0]?s:(e.shift(),r)).apply({},e)}))}}(this))},t.prototype.changeSettings=function(e,t,n,r,i){for(this.maxNb=null!=e?e:this.maxNb,this.minTime=null!=t?t:this.minTime,this.highWater=null!=n?n:this.highWater,this.strategy=null!=r?r:this.strategy,this.rejectOnDrop=null!=i?i:this.rejectOnDrop;this._tryToRun(););return this},t.prototype.changePenalty=function(e){return this.penalty=null!=e?e:this.penalty,this},t.prototype.changeReservoir=function(e){for(this.reservoir=e;this._tryToRun(););return this},t.prototype.incrementReservoir=function(e){return null==e&&(e=0),this.changeReservoir(this.reservoir+e),this},t.prototype.on=function(e,t){return null!=this.events[e]?this.events[e].push(t):this.events[e]=[t],this},t.prototype.removeAllListeners=function(e){return null==e&&(e=null),null!=e?delete this.events[e]:this.events={},this},t.prototype.stopAll=function(e){var t,n,r,i,s,a,u;for(this.interrupt=null!=e?e:this.interrupt,i=Object.keys(this._running),t=0,a=i.length;t<a;t++)r=i[t],clearTimeout(this._running[r].timeout);if(this._tryToRun=function(){},this.check=function(){return!1},this.submit=this.submitPriority=function(){var e;return 2<=arguments.length?o.call(arguments,0,e=arguments.length-1):(e=0,[]),arguments[e++](new Error("This limiter is stopped"))},this.schedule=this.schedulePriority=function(){return Promise.reject(new Error("This limiter is stopped"))},this.interrupt)for(s=0,u=i.length;s<u;s++)r=i[s],this._trigger("dropped",[this._running[r].job]);for(;n=this._getFirst(this._queues).shift();)this._trigger("dropped",[n]);return this._trigger("empty",[]),0===this.nbRunning()&&this._trigger("idle",[]),this},t}(),t.exports=n}).call(this)},{"./Cluster":37,"./DLList":38,bluebird:35}],37:[function(e,t,n){(function(){var n,r={}.hasOwnProperty;n=function(){function t(t,n,r,i,s){this.maxNb=t,this.minTime=n,this.highWater=r,this.strategy=i,this.rejectOnDrop=s,this.limiters={},this.Bottleneck=e("./Bottleneck"),this.startAutoCleanup()}return t.prototype.key=function(e){var t;return null==e&&(e=""),null!=(t=this.limiters[e])?t:this.limiters[e]=new this.Bottleneck(this.maxNb,this.minTime,this.highWater,this.strategy,this.rejectOnDrop)},t.prototype.deleteKey=function(e){return null==e&&(e=""),delete this.limiters[e]},t.prototype.all=function(e){var t,n,i,s;n=this.limiters,i=[];for(t in n)r.call(n,t)&&(s=n[t],i.push(e(s)));return i},t.prototype.keys=function(){return Object.keys(this.limiters)},t.prototype.startAutoCleanup=function(){var e;return this.stopAutoCleanup(),"function"==typeof(e=this.interval=setInterval(function(e){return function(){var t,n,r,i,s;i=Date.now(),n=e.limiters,r=[];for(t in n)s=n[t],s._nextRequest+3e5<i?r.push(e.deleteKey(t)):r.push(void 0);return r}}(this),3e4)).unref?e.unref():void 0},t.prototype.stopAutoCleanup=function(){return clearInterval(this.interval)},t}(),t.exports=n}).call(this)},{"./Bottleneck":36}],38:[function(e,t,n){(function(){var e;e=function(){function e(){this._first=null,this._last=null,this.length=0}return e.prototype.push=function(e){var t;this.length++,t={value:e,next:null},null!=this._last?(this._last.next=t,this._last=t):this._first=this._last=t},e.prototype.shift=function(){var e,t;if(null!=this._first)return this.length--,t=this._first.value,this._first=null!=(e=this._first.next)?e:this._last=null,t},e.prototype.getArray=function(){var e,t,n;for(e=this._first,n=[];null!=e;)n.push((t=e,e=e.next,t.value));return n},e}(),t.exports=e}).call(this)},{}],39:[function(e,t,r){(function(n){(function(){t.exports=e("./Bottleneck"),null!=n.window&&(n.window.Bottleneck=t.exports)}).call(this)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Bottleneck":36}],40:[function(e,t,n){},{}],41:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":75,"../../modules/es6.array.from":144,"../../modules/es6.string.iterator":160}],42:[function(e,t,n){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":142,"../modules/es6.string.iterator":160,"../modules/web.dom.iterable":166}],43:[function(e,t,n){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":143,"../modules/es6.string.iterator":160,"../modules/web.dom.iterable":166}],44:[function(e,t,n){var r=e("../../modules/_core"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(e){return i.stringify.apply(i,arguments)}},{"../../modules/_core":75}],45:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/_core").Map},{"../modules/_core":75,"../modules/es6.map":146,"../modules/es6.object.to-string":156,"../modules/es6.string.iterator":160,"../modules/es7.map.to-json":162,"../modules/web.dom.iterable":166}],46:[function(e,t,n){e("../../modules/es6.number.is-integer"),t.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":75,"../../modules/es6.number.is-integer":147}],47:[function(e,t,n){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":75,"../../modules/es6.object.assign":148}],48:[function(e,t,n){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.create(e,t)}},{"../../modules/_core":75,"../../modules/es6.object.create":149}],49:[function(e,t,n){e("../../modules/es6.object.define-properties");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.defineProperties(e,t)}},{"../../modules/_core":75,"../../modules/es6.object.define-properties":150}],50:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":75,"../../modules/es6.object.define-property":151}],51:[function(e,t,n){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":75,"../../modules/es6.object.freeze":152}],52:[function(e,t,n){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":75,"../../modules/es6.object.get-prototype-of":153}],53:[function(e,t,n){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":75,"../../modules/es6.object.keys":154}],54:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":75,"../../modules/es6.object.set-prototype-of":155}],55:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":75,"../modules/es6.object.to-string":156,"../modules/es6.promise":157,"../modules/es6.string.iterator":160,"../modules/web.dom.iterable":166}],56:[function(e,t,n){e("../../modules/es6.reflect.construct"),t.exports=e("../../modules/_core").Reflect.construct},{"../../modules/_core":75,"../../modules/es6.reflect.construct":158}],57:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),t.exports=e("../modules/_core").Set},{"../modules/_core":75,"../modules/es6.object.to-string":156,"../modules/es6.set":159,"../modules/es6.string.iterator":160,"../modules/es7.set.to-json":163,"../modules/web.dom.iterable":166}],58:[function(e,t,n){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":75,"../../modules/es6.object.to-string":156,"../../modules/es6.symbol":161,"../../modules/es7.symbol.async-iterator":164,"../../modules/es7.symbol.observable":165}],59:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":139,"../../modules/es6.string.iterator":160,"../../modules/web.dom.iterable":166}],60:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],61:[function(e,t,n){t.exports=function(){}},{}],62:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],63:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":96}],64:[function(e,t,n){var r=e("./_for-of");t.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},{"./_for-of":85}],65:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_to-length"),s=e("./_to-index");t.exports=function(e){return function(t,n,o){var a,u=r(t),c=i(u.length),l=s(o,c);if(e&&n!=n){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":131,"./_to-iobject":133,"./_to-length":134}],66:[function(e,t,n){var r=e("./_ctx"),i=e("./_iobject"),s=e("./_to-object"),o=e("./_to-length"),a=e("./_array-species-create");t.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,d=6==e,h=5==e||d,f=t||a;return function(t,a,p){for(var m,_,g=s(t),v=i(g),y=r(a,p,3),b=o(v.length),T=0,k=n?f(t,b):u?f(t,0):void 0;b>T;T++)if((h||T in v)&&(m=v[T],_=y(m,T,g),e))if(n)k[T]=_;else if(_)switch(e){case 3:return!0;case 5:return m;case 6:return T;case 2:k.push(m)}else if(l)return!1;return d?-1:c||l?l:k}}},{"./_array-species-create":68,"./_ctx":77,"./_iobject":92,"./_to-length":134,"./_to-object":135}],67:[function(e,t,n){var r=e("./_is-object"),i=e("./_is-array"),s=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[s],null===t&&(t=void 0))),void 0===t?Array:t}},{"./_is-array":94,"./_is-object":96,"./_wks":140}],68:[function(e,t,n){var r=e("./_array-species-constructor");t.exports=function(e,t){return new(r(e))(t)}},{"./_array-species-constructor":67}],69:[function(e,t,n){"use strict";var r=e("./_a-function"),i=e("./_is-object"),s=e("./_invoke"),o=[].slice,a={},u=function(e,t,n){if(!(t in a)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";a[t]=Function("F,a","return new F("+r.join(",")+")")}return a[t](e,n)};t.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),a=function r(){var i=n.concat(o.call(arguments));return this instanceof r?u(t,i.length,i):s(t,i,e)};return i(t.prototype)&&(a.prototype=t.prototype),a}},{"./_a-function":60,"./_invoke":91,"./_is-object":96}],70:[function(e,t,n){var r=e("./_cof"),i=e("./_wks")("toStringTag"),s="Arguments"==r(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),i))?n:s?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":71,"./_wks":140}],71:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],72:[function(e,t,n){"use strict";var r=e("./_object-dp").f,i=e("./_object-create"),s=e("./_redefine-all"),o=e("./_ctx"),a=e("./_an-instance"),u=e("./_defined"),c=e("./_for-of"),l=e("./_iter-define"),d=e("./_iter-step"),h=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,m=f?"_s":"size",_=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};t.exports={getConstructor:function(e,t,n,l){var d=e(function(e,r){a(e,d,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[l],e)});return s(d.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var t=this,n=_(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[m]--}return!!n},forEach:function(e){a(this,d,"forEach");for(var t,n=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!_(this,e)}}),f&&r(d.prototype,"size",{get:function(){return u(this[m])}}),d},def:function(e,t,n){var r,i,s=_(e,t);return s?s.v=n:(e._l=s={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=s),r&&(r.n=s),e[m]++,"F"!==i&&(e._i[i]=s)),e},getEntry:_,setStrong:function(e,t,n){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?d(0,n.k):"values"==t?d(0,n.v):d(0,[n.k,n.v]):(e._t=void 0,d(1))},n?"entries":"values",!n,!0),h(t)}}},{"./_an-instance":62,"./_ctx":77,"./_defined":78,"./_descriptors":79,"./_for-of":85,"./_iter-define":99,"./_iter-step":101,"./_meta":105,"./_object-create":108,"./_object-dp":109,"./_redefine-all":121,"./_set-species":124}],73:[function(e,t,n){var r=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":64,"./_classof":70}],74:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_export"),s=e("./_meta"),o=e("./_fails"),a=e("./_hide"),u=e("./_redefine-all"),c=e("./_for-of"),l=e("./_an-instance"),d=e("./_is-object"),h=e("./_set-to-string-tag"),f=e("./_object-dp").f,p=e("./_array-methods")(0),m=e("./_descriptors");t.exports=function(e,t,n,_,g,v){var y=r[e],b=y,T=g?"set":"add",k=b&&b.prototype,w={};return m&&"function"==typeof b&&(v||k.forEach&&!o(function(){(new b).entries().next()}))?(b=t(function(t,n){l(t,b,e,"_c"),t._c=new y,void 0!=n&&c(n,g,t[T],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!v||"clear"!=e)&&a(b.prototype,e,function(n,r){if(l(this,b,e),!t&&v&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),"size"in k&&f(b.prototype,"size",{get:function(){return this._c.size}})):(b=_.getConstructor(t,e,g,T),u(b.prototype,n),s.NEED=!0),h(b,e),w[e]=b,i(i.G+i.W+i.F,w),v||_.setStrong(b,e,g),b}},{"./_an-instance":62,"./_array-methods":66,"./_descriptors":79,"./_export":83,"./_fails":84,"./_for-of":85,"./_global":86,"./_hide":88,"./_is-object":96,"./_meta":105,"./_object-dp":109,"./_redefine-all":121,"./_set-to-string-tag":125}],75:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],76:[function(e,t,n){"use strict";var r=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},{"./_object-dp":109,"./_property-desc":120}],77:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":60}],78:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],79:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":84}],80:[function(e,t,n){var r=e("./_is-object"),i=e("./_global").document,s=r(i)&&r(i.createElement);t.exports=function(e){return s?i.createElement(e):{}}},{"./_global":86,"./_is-object":96}],81:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],82:[function(e,t,n){var r=e("./_object-keys"),i=e("./_object-gops"),s=e("./_object-pie");t.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,a=n(e),u=s.f,c=0;a.length>c;)u.call(e,o=a[c++])&&t.push(o);return t}},{"./_object-gops":114,"./_object-keys":117,"./_object-pie":118}],83:[function(e,t,n){var r=e("./_global"),i=e("./_core"),s=e("./_ctx"),o=e("./_hide"),a="prototype",u=function e(t,n,u){var c,l,d,h=t&e.F,f=t&e.G,p=t&e.S,m=t&e.P,_=t&e.B,g=t&e.W,v=f?i:i[n]||(i[n]={}),y=v[a],b=f?r:p?r[n]:(r[n]||{})[a];f&&(u=n);for(c in u)l=!h&&b&&void 0!==b[c],l&&c in v||(d=l?b[c]:u[c],v[c]=f&&"function"!=typeof b[c]?u[c]:_&&l?s(d,r):g&&b[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(d):m&&"function"==typeof d?s(Function.call,d):d,m&&((v.virtual||(v.virtual={}))[c]=d,t&e.R&&y&&!y[c]&&o(y,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":75,"./_ctx":77,"./_global":86,"./_hide":88}],84:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],85:[function(e,t,n){var r=e("./_ctx"),i=e("./_iter-call"),s=e("./_is-array-iter"),o=e("./_an-object"),a=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={},n=t.exports=function(e,t,n,d,h){var f,p,m,_,g=h?function(){return e}:u(e),v=r(n,d,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(s(g)){for(f=a(e.length);f>y;y++)if(_=t?v(o(p=e[y])[0],p[1]):v(e[y]),_===c||_===l)return _}else for(m=g.call(e);!(p=m.next()).done;)if(_=i(m,v,p.value,t),_===c||_===l)return _};n.BREAK=c,n.RETURN=l},{"./_an-object":63,"./_ctx":77,"./_is-array-iter":93,"./_iter-call":97,"./_to-length":134,"./core.get-iterator-method":141}],86:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],87:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],88:[function(e,t,n){var r=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":79,"./_object-dp":109,"./_property-desc":120}],89:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":86}],90:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":79,"./_dom-create":80,"./_fails":84}],91:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],92:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":71}],93:[function(e,t,n){var r=e("./_iterators"),i=e("./_wks")("iterator"),s=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||s[i]===e)}},{"./_iterators":102,"./_wks":140}],94:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":71}],95:[function(e,t,n){var r=e("./_is-object"),i=Math.floor;t.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":96}],96:[function(e,t,n){t.exports=function(e){return"object"===(void 0===e?"undefined":u(e))?null!==e:"function"==typeof e}},{}],97:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var s=e.return;throw void 0!==s&&r(s.call(e)),t}}},{"./_an-object":63}],98:[function(e,t,n){"use strict";var r=e("./_object-create"),i=e("./_property-desc"),s=e("./_set-to-string-tag"),o={};e("./_hide")(o,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),s(e,t+" Iterator")}},{"./_hide":88,"./_object-create":108,"./_property-desc":120,"./_set-to-string-tag":125,"./_wks":140}],99:[function(e,t,n){"use strict";var r=e("./_library"),i=e("./_export"),s=e("./_redefine"),o=e("./_hide"),a=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),d=e("./_object-gpo"),h=e("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),p="keys",m="values",_=function(){return this};t.exports=function(e,t,n,g,v,y,b){c(n,t,g);var T,k,w,M=function(e){if(!f&&e in C)return C[e];switch(e){case p:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",L=v==m,E=!1,C=e.prototype,x=C[h]||C["@@iterator"]||v&&C[v],D=x||M(v),j=v?L?M("entries"):D:void 0,R="Array"==t?C.entries||x:x;if(R&&(w=d(R.call(new e)),w!==Object.prototype&&(l(w,S,!0),r||a(w,h)||o(w,h,_))),L&&x&&x.name!==m&&(E=!0,D=function(){return x.call(this)}),r&&!b||!f&&!E&&C[h]||o(C,h,D),u[t]=D,u[S]=_,v)if(T={values:L?D:M(m),keys:y?D:M(p),entries:j},b)for(k in T)k in C||s(C,k,T[k]);else i(i.P+i.F*(f||E),t,T);return T}},{"./_export":83,"./_has":87,"./_hide":88,"./_iter-create":98,"./_iterators":102,"./_library":104,"./_object-gpo":115,"./_redefine":122,"./_set-to-string-tag":125,"./_wks":140}],100:[function(e,t,n){var r=e("./_wks")("iterator"),i=!1;try{var s=[7][r]();s.return=function(){i=!0},Array.from(s,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var s=[7],o=s[r]();o.next=function(){return{done:n=!0}},s[r]=function(){return o},e(s)}catch(e){}return n}},{"./_wks":140}],101:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],102:[function(e,t,n){t.exports={}},{}],103:[function(e,t,n){var r=e("./_object-keys"),i=e("./_to-iobject");t.exports=function(e,t){for(var n,s=i(e),o=r(s),a=o.length,u=0;a>u;)if(s[n=o[u++]]===t)return n}},{"./_object-keys":117,"./_to-iobject":133}],104:[function(e,t,n){t.exports=!0},{}],105:[function(e,t,n){var r=e("./_uid")("meta"),i=e("./_is-object"),s=e("./_has"),o=e("./_object-dp").f,a=0,c=Object.isExtensible||function(){return!0},l=!e("./_fails")(function(){return c(Object.preventExtensions({}))}),d=function(e){o(e,r,{value:{i:"O"+ ++a,w:{}}})},h=function(e,t){if(!i(e))return"symbol"==(void 0===e?"undefined":u(e))?e:("string"==typeof e?"S":"P")+e;if(!s(e,r)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[r].i},f=function(e,t){if(!s(e,r)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[r].w},p=function(e){return l&&m.NEED&&c(e)&&!s(e,r)&&d(e),e},m=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:f,onFreeze:p}},{"./_fails":84,"./_has":87,"./_is-object":96,"./_object-dp":109,"./_uid":137}],106:[function(e,t,n){var r=e("./_global"),i=e("./_task").set,s=r.MutationObserver||r.WebKitMutationObserver,o=r.process,a=r.Promise,u="process"==e("./_cof")(o);t.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=o.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){o.nextTick(c)};else if(s){var l=!0,d=document.createTextNode("");new s(c).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}else if(a&&a.resolve){var h=a.resolve();n=function(){h.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},{"./_cof":71,"./_global":86,"./_task":130}],107:[function(e,t,n){"use strict";var r=e("./_object-keys"),i=e("./_object-gops"),s=e("./_object-pie"),o=e("./_to-object"),a=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=o(e),u=arguments.length,c=1,l=i.f,d=s.f;u>c;)for(var h,f=a(arguments[c++]),p=l?r(f).concat(l(f)):r(f),m=p.length,_=0;m>_;)d.call(f,h=p[_++])&&(n[h]=f[h]);return n}:u},{"./_fails":84,"./_iobject":92,"./_object-gops":114,"./_object-keys":117,"./_object-pie":118,"./_to-object":135}],108:[function(e,t,n){var r=e("./_an-object"),i=e("./_object-dps"),s=e("./_enum-bug-keys"),o=e("./_shared-key")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,n=e("./_dom-create")("iframe"),r=s.length,i="<",o=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(i+"script"+o+"document.F=Object"+i+"/script"+o),t.close(),c=t.F;r--;)delete c[u][s[r]];return c()};t.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=r(e),n=new a,a[u]=null,n[o]=e):n=c(),void 0===t?n:i(n,t)}},{"./_an-object":63,"./_dom-create":80,"./_enum-bug-keys":81,"./_html":89,"./_object-dps":110,"./_shared-key":126}],109:[function(e,t,n){var r=e("./_an-object"),i=e("./_ie8-dom-define"),s=e("./_to-primitive"),o=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=s(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":63,"./_descriptors":79,"./_ie8-dom-define":90,"./_to-primitive":136}],110:[function(e,t,n){var r=e("./_object-dp"),i=e("./_an-object"),s=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){i(e);for(var n,o=s(t),a=o.length,u=0;a>u;)r.f(e,n=o[u++],t[n]);return e}},{"./_an-object":63,"./_descriptors":79,"./_object-dp":109,"./_object-keys":117}],111:[function(e,t,n){var r=e("./_object-pie"),i=e("./_property-desc"),s=e("./_to-iobject"),o=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?c:function(e,t){if(e=s(e),t=o(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},{"./_descriptors":79,"./_has":87,"./_ie8-dom-define":90,"./_object-pie":118,"./_property-desc":120,"./_to-iobject":133,"./_to-primitive":136}],112:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_object-gopn").f,s={}.toString,o="object"==("undefined"==typeof window?"undefined":u(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(e){return o.slice()}};t.exports.f=function(e){return o&&"[object Window]"==s.call(e)?a(e):i(r(e))}},{"./_object-gopn":113,"./_to-iobject":133}],113:[function(e,t,n){var r=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},{"./_enum-bug-keys":81,"./_object-keys-internal":116}],114:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],115:[function(e,t,n){var r=e("./_has"),i=e("./_to-object"),s=e("./_shared-key")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},{"./_has":87,"./_shared-key":126,"./_to-object":135}],116:[function(e,t,n){var r=e("./_has"),i=e("./_to-iobject"),s=e("./_array-includes")(!1),o=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,a=i(e),u=0,c=[];for(n in a)n!=o&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~s(c,n)||c.push(n));return c}},{"./_array-includes":65,"./_has":87,"./_shared-key":126,"./_to-iobject":133}],117:[function(e,t,n){var r=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,i)}},{"./_enum-bug-keys":81,"./_object-keys-internal":116}],118:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],119:[function(e,t,n){var r=e("./_export"),i=e("./_core"),s=e("./_fails");t.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*s(function(){n(1)}),"Object",o)}},{"./_core":75,"./_export":83,"./_fails":84}],120:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],121:[function(e,t,n){var r=e("./_hide");t.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},{"./_hide":88}],122:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":88}],123:[function(e,t,n){var r=e("./_is-object"),i=e("./_an-object"),s=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(e){n=!0}return function(e,t){return s(e,t),n?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:s}},{"./_an-object":63,"./_ctx":77,"./_is-object":96,"./_object-gopd":111}],124:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_core"),s=e("./_object-dp"),o=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];o&&t&&!t[a]&&s.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":75,"./_descriptors":79,"./_global":86,"./_object-dp":109,"./_wks":140}],125:[function(e,t,n){var r=e("./_object-dp").f,i=e("./_has"),s=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},{"./_has":87,"./_object-dp":109,"./_wks":140}],126:[function(e,t,n){var r=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return r[e]||(r[e]=i(e))}},{"./_shared":127,"./_uid":137}],127:[function(e,t,n){var r=e("./_global"),i="__core-js_shared__",s=r[i]||(r[i]={});t.exports=function(e){return s[e]||(s[e]={})}},{"./_global":86}],128:[function(e,t,n){var r=e("./_an-object"),i=e("./_a-function"),s=e("./_wks")("species");t.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[s])?t:i(n)}},{"./_a-function":60,"./_an-object":63,"./_wks":140}],129:[function(e,t,n){var r=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,n){var s,o,a=String(i(t)),u=r(n),c=a.length;return u<0||u>=c?e?"":void 0:(s=a.charCodeAt(u),s<55296||s>56319||u+1===c||(o=a.charCodeAt(u+1))<56320||o>57343?e?a.charAt(u):s:e?a.slice(u,u+2):(s-55296<<10)+(o-56320)+65536)}}},{"./_defined":78,"./_to-integer":132}],130:[function(e,t,n){var r,i,s,o=e("./_ctx"),a=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),l=e("./_global"),d=l.process,h=l.setImmediate,f=l.clearImmediate,p=l.MessageChannel,m=0,_={},g="onreadystatechange",v=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},y=function(e){v.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++m]=function(){a("function"==typeof e?e:Function(e),t)},r(m),m},f=function(e){delete _[e]},"process"==e("./_cof")(d)?r=function(e){d.nextTick(o(v,e,1))}:p?(i=new p,s=i.port2,i.port1.onmessage=y,r=o(s.postMessage,s,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",y,!1)):r=g in c("script")?function(e){u.appendChild(c("script"))[g]=function(){u.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),t.exports={set:h,clear:f}},{"./_cof":71,"./_ctx":77,"./_dom-create":80,"./_global":86,"./_html":89,"./_invoke":91}],131:[function(e,t,n){var r=e("./_to-integer"),i=Math.max,s=Math.min;t.exports=function(e,t){return e=r(e),e<0?i(e+t,0):s(e,t)}},{"./_to-integer":132}],132:[function(e,t,n){var r=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)}},{}],133:[function(e,t,n){var r=e("./_iobject"),i=e("./_defined");t.exports=function(e){return r(i(e))}},{"./_defined":78,"./_iobject":92}],134:[function(e,t,n){var r=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(r(e),9007199254740991):0}},{"./_to-integer":132}],135:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":78}],136:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":96}],137:[function(e,t,n){var r=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+i).toString(36))}},{}],138:[function(e,t,n){var r=e("./_global"),i=e("./_core"),s=e("./_library"),o=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=s?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},{"./_core":75,"./_global":86,"./_library":104,"./_object-dp":109,"./_wks-ext":139}],139:[function(e,t,n){n.f=e("./_wks")},{"./_wks":140}],140:[function(e,t,n){var r=e("./_shared")("wks"),i=e("./_uid"),s=e("./_global").Symbol,o="function"==typeof s;(t.exports=function(e){return r[e]||(r[e]=o&&s[e]||(o?s:i)("Symbol."+e))}).store=r},{"./_global":86,"./_shared":127,"./_uid":137}],141:[function(e,t,n){var r=e("./_classof"),i=e("./_wks")("iterator"),s=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||s[r(e)]}},{"./_classof":70,"./_core":75,"./_iterators":102,"./_wks":140}],142:[function(e,t,n){var r=e("./_an-object"),i=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},{"./_an-object":63,"./_core":75,"./core.get-iterator-method":141}],143:[function(e,t,n){var r=e("./_classof"),i=e("./_wks")("iterator"),s=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||s.hasOwnProperty(r(t))}},{"./_classof":70,"./_core":75,"./_iterators":102,"./_wks":140}],144:[function(e,t,n){"use strict";var r=e("./_ctx"),i=e("./_export"),s=e("./_to-object"),o=e("./_iter-call"),a=e("./_is-array-iter"),u=e("./_to-length"),c=e("./_create-property"),l=e("./core.get-iterator-method");i(i.S+i.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,h=s(e),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,_=void 0!==m,g=0,v=l(h);if(_&&(m=r(m,p>2?arguments[2]:void 0,2)),void 0==v||f==Array&&a(v))for(t=u(h.length),n=new f(t);t>g;g++)c(n,g,_?m(h[g],g):h[g]);else for(d=v.call(h),n=new f;!(i=d.next()).done;g++)c(n,g,_?o(d,m,[i.value,g],!0):i.value);return n.length=g,n}})},{"./_create-property":76,"./_ctx":77,"./_export":83,"./_is-array-iter":93,"./_iter-call":97,"./_iter-detect":100,"./_to-length":134,"./_to-object":135,"./core.get-iterator-method":141}],145:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),i=e("./_iter-step"),s=e("./_iterators"),o=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":61,"./_iter-define":99,"./_iter-step":101,"./_iterators":102,"./_to-iobject":133}],146:[function(e,t,n){"use strict";var r=e("./_collection-strong");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},{"./_collection":74,"./_collection-strong":72}],147:[function(e,t,n){var r=e("./_export");r(r.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":83,"./_is-integer":95}],148:[function(e,t,n){var r=e("./_export");r(r.S+r.F,"Object",{assign:e("./_object-assign")})},{"./_export":83,"./_object-assign":107}],149:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":83,"./_object-create":108}],150:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":79,"./_export":83,"./_object-dps":110}],151:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":79,"./_export":83,"./_object-dp":109}],152:[function(e,t,n){var r=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},{"./_is-object":96,"./_meta":105,"./_object-sap":119}],153:[function(e,t,n){var r=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(r(e))}})},{"./_object-gpo":115,"./_object-sap":119,"./_to-object":135}],154:[function(e,t,n){var r=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(r(e))}})},{"./_object-keys":117,"./_object-sap":119,"./_to-object":135}],155:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":83,"./_set-proto":123}],156:[function(e,t,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],157:[function(e,t,n){"use strict";var r,i,s,o=e("./_library"),a=e("./_global"),u=e("./_ctx"),c=e("./_classof"),l=e("./_export"),d=e("./_is-object"),h=e("./_a-function"),f=e("./_an-instance"),p=e("./_for-of"),m=e("./_species-constructor"),_=e("./_task").set,g=e("./_microtask")(),v="Promise",y=a.TypeError,b=a.process,T=a[v],b=a.process,k="process"==c(b),w=function(){},M=!!function(){try{var t=T.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(w,w)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof n}catch(e){}}(),S=function(e,t){return e===t||e===T&&t===s},L=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},E=function(e){return S(T,e)?new C(e):new i(e)},C=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw y("Bad Promise constructor");t=e,n=r}),this.resolve=h(t),this.reject=h(n)},x=function(e){try{e()}catch(e){return{error:e}}},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,i=1==e._s,s=0,o=function(t){var n,s,o=i?t.ok:t.fail,a=t.resolve,u=t.reject,c=t.domain;try{o?(i||(2==e._h&&A(e),e._h=1),o===!0?n=r:(c&&c.enter(),n=o(r),c&&c.exit()),n===t.promise?u(y("Promise-chain cycle")):(s=L(n))?s.call(n,a,u):a(n)):u(r)}catch(e){u(e)}};n.length>s;)o(n[s++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){_.call(a,function(){var t,n,r,i=e._v;if(R(e)&&(t=x(function(){k?b.emit("unhandledRejection",i,e):(n=a.onunhandledrejection)?n({promise:e,reason:i}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=k||R(e)?2:1),e._a=void 0,t)throw t.error})},R=function e(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,i=0;r.length>i;)if(n=r[i++],n.fail||!e(n.promise))return!1;return!0},A=function(e){_.call(a,function(){var t;k?b.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},Y=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},I=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw y("Promise can't be resolved itself");(n=L(t))?g(function(){var i={_w:r,_d:!1};try{n.call(t,u(e,i,1),u(Y,i,1))}catch(e){Y.call(i,e)}}):(r._v=t,r._s=1,D(r,!1))}catch(e){Y.call({_w:r,_d:!1},e)}}};M||(T=function(e){f(this,T,v,"_h"),h(e),r.call(this);try{e(u(I,this,1),u(Y,this,1))}catch(e){Y.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e("./_redefine-all")(T.prototype,{then:function(e,t){var n=E(m(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),C=function(){var e=new r;this.promise=e,this.resolve=u(I,e,1),this.reject=u(Y,e,1)}),l(l.G+l.W+l.F*!M,{Promise:T}),e("./_set-to-string-tag")(T,v),e("./_set-species")(v),s=e("./_core")[v],l(l.S+l.F*!M,v,{reject:function(e){var t=E(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(o||!M),v,{resolve:function(e){if(e instanceof T&&S(e.constructor,this))return e;var t=E(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(M&&e("./_iter-detect")(function(e){T.all(e).catch(w)})),v,{all:function(e){var t=this,n=E(t),r=n.resolve,i=n.reject,s=x(function(){var n=[],s=0,o=1;p(e,!1,function(e){var a=s++,u=!1;n.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,n[a]=e,--o||r(n))},i)}),--o||r(n)});return s&&i(s.error),n.promise},race:function(e){var t=this,n=E(t),r=n.reject,i=x(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},{"./_a-function":60,"./_an-instance":62,"./_classof":70,"./_core":75,"./_ctx":77,"./_export":83,"./_for-of":85,"./_global":86,"./_is-object":96,"./_iter-detect":100,"./_library":104,"./_microtask":106,"./_redefine-all":121,"./_set-species":124,"./_set-to-string-tag":125,"./_species-constructor":128,"./_task":130,"./_wks":140}],158:[function(e,t,n){var r=e("./_export"),i=e("./_object-create"),s=e("./_a-function"),o=e("./_an-object"),a=e("./_is-object"),u=e("./_fails"),c=e("./_bind"),l=(e("./_global").Reflect||{}).construct,d=u(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),h=!u(function(){l(function(){})});r(r.S+r.F*(d||h),"Reflect",{construct:function(e,t){s(e),o(t);var n=arguments.length<3?e:s(arguments[2]);if(h&&!d)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var u=n.prototype,f=i(a(u)?u:Object.prototype),p=Function.apply.call(e,f,t);return a(p)?p:f}})},{"./_a-function":60,"./_an-object":63,"./_bind":69,"./_export":83,"./_fails":84,"./_global":86,"./_is-object":96,"./_object-create":108}],159:[function(e,t,n){"use strict";var r=e("./_collection-strong");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},{"./_collection":74,"./_collection-strong":72}],160:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":99,"./_string-at":129}],161:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_has"),s=e("./_descriptors"),o=e("./_export"),a=e("./_redefine"),c=e("./_meta").KEY,l=e("./_fails"),d=e("./_shared"),h=e("./_set-to-string-tag"),f=e("./_uid"),p=e("./_wks"),m=e("./_wks-ext"),_=e("./_wks-define"),g=e("./_keyof"),v=e("./_enum-keys"),y=e("./_is-array"),b=e("./_an-object"),T=e("./_to-iobject"),k=e("./_to-primitive"),w=e("./_property-desc"),M=e("./_object-create"),S=e("./_object-gopn-ext"),L=e("./_object-gopd"),E=e("./_object-dp"),C=e("./_object-keys"),x=L.f,D=E.f,j=S.f,R=r.Symbol,A=r.JSON,Y=A&&A.stringify,I="prototype",P=p("_hidden"),O=p("toPrimitive"),N={}.propertyIsEnumerable,H=d("symbol-registry"),U=d("symbols"),F=d("op-symbols"),$=Object[I],q="function"==typeof R,X=r.QObject,W=!X||!X[I]||!X[I].findChild,B=s&&l(function(){return 7!=M(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=x($,t);r&&delete $[t],D(e,t,n),r&&e!==$&&D($,t,r)}:D,z=function(e){var t=U[e]=M(R[I]);return t._k=e,t},G=q&&"symbol"==u(R.iterator)?function(e){return"symbol"==(void 0===e?"undefined":u(e))}:function(e){return e instanceof R},V=function(e,t,n){return e===$&&V(F,t,n),b(e),t=k(t,!0),b(n),i(U,t)?(n.enumerable?(i(e,P)&&e[P][t]&&(e[P][t]=!1),n=M(n,{enumerable:w(0,!1)})):(i(e,P)||D(e,P,w(1,{})),e[P][t]=!0),B(e,t,n)):D(e,t,n)},J=function(e,t){b(e);for(var n,r=v(t=T(t)),i=0,s=r.length;s>i;)V(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?M(e):J(M(e),t)},Z=function(e){var t=N.call(this,e=k(e,!0));return!(this===$&&i(U,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,P)&&this[P][e])||t)},Q=function(e,t){if(e=T(e),t=k(t,!0),e!==$||!i(U,t)||i(F,t)){var n=x(e,t);return!n||!i(U,t)||i(e,P)&&e[P][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=j(T(e)),r=[],s=0;n.length>s;)i(U,t=n[s++])||t==P||t==c||r.push(t);return r},te=function(e){for(var t,n=e===$,r=j(n?F:T(e)),s=[],o=0;r.length>o;)!i(U,t=r[o++])||n&&!i($,t)||s.push(U[t]);return s};q||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function t(n){this===$&&t.call(F,n),i(this,P)&&i(this[P],e)&&(this[P][e]=!1),B(this,e,w(1,n))};return s&&W&&B($,e,{configurable:!0,set:t}),z(e)},a(R[I],"toString",function(){return this._k}),L.f=Q,E.f=V,e("./_object-gopn").f=S.f=ee,e("./_object-pie").f=Z,e("./_object-gops").f=te,s&&!e("./_library")&&a($,"propertyIsEnumerable",Z,!0),m.f=function(e){return z(p(e))}),o(o.G+o.W+o.F*!q,{Symbol:R});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)p(ne[re++]);for(var ne=C(p.store),re=0;ne.length>re;)_(ne[re++]);o(o.S+o.F*!q,"Symbol",{for:function(e){return i(H,e+="")?H[e]:H[e]=R(e)},keyFor:function(e){if(G(e))return g(H,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!q,"Object",{create:K,defineProperty:V,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),A&&o(o.S+o.F*(!q||l(function(){var e=R();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!G(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!G(t))return t}),r[1]=t,Y.apply(A,r)}}}),R[I][O]||e("./_hide")(R[I],O,R[I].valueOf),h(R,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},{"./_an-object":63,"./_descriptors":79,"./_enum-keys":82,"./_export":83,"./_fails":84,"./_global":86,"./_has":87,"./_hide":88,"./_is-array":94,"./_keyof":103,"./_library":104,"./_meta":105,"./_object-create":108,"./_object-dp":109,"./_object-gopd":111,"./_object-gopn":113,"./_object-gopn-ext":112,"./_object-gops":114,"./_object-keys":117,"./_object-pie":118,"./_property-desc":120,"./_redefine":122,"./_set-to-string-tag":125,"./_shared":127,"./_to-iobject":133,"./_to-primitive":136,"./_uid":137,"./_wks":140,"./_wks-define":138,"./_wks-ext":139}],162:[function(e,t,n){var r=e("./_export");r(r.P+r.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":73,"./_export":83}],163:[function(e,t,n){var r=e("./_export");r(r.P+r.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":73,"./_export":83}],164:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":138}],165:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":138}],166:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),i=e("./_hide"),s=e("./_iterators"),o=e("./_wks")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],d=l&&l.prototype;d&&!d[o]&&i(d,o,c),s[c]=s.Array}},{"./_global":86,"./_hide":88,"./_iterators":102,"./_wks":140,"./es6.array.iterator":145}],167:[function(e,t,n){t.exports=e("./lib")},{"./lib":168}],168:[function(e,t,n){function r(e){return void 0===e?0:parseInt(e,10)}var i=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;n.fromSeconds=function(e){if("number"!=typeof e)throw new TypeError("Argument `seconds` must be a number");var t=e%60,n=(e-t)%3600;return{hours:(e-t-n)/3600,minutes:n/60,seconds:t}},n.fromString=function(e){if("string"!=typeof e)throw new TypeError("Argument `string` must be a string");var t=e.match(i);if(null===t||void 0===t[1]&&void 0===t[2]&&void 0===t[3])throw new Error('Could not parse "'+e+'" as a duration.');return{hours:r(t[1]),minutes:r(t[2]),seconds:r(t[3])}},n.toString=function(e){"number"==typeof e&&(e=n.fromSeconds(e));var t="PT";return e.hours>0&&(t+=e.hours+"H"),e.minutes>0&&(t+=e.minutes+"M"),e.seconds>0&&(t+=e.seconds+"S"),"PT"===t&&(t+="0S"),t},n.toSeconds=function(e){var t=e;return"string"==typeof e&&(t=n.fromString(e)),3600*t.hours+60*t.minutes+t.seconds}},{}],169:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.trace)),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],170:[function(t,n,r){!function(){var t={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,n){var r="string"==typeof e.initial?{state:e.initial}:e.initial,i=e.terminal||e.final,s=n||e.target||{},o=e.events||[],a=e.callbacks||{},u={},c={},l=function(e){var n=Array.isArray(e.from)?e.from:e.from?[e.from]:[t.WILDCARD];u[e.name]=u[e.name]||{};for(var r=0;r<n.length;r++)c[n[r]]=c[n[r]]||[],c[n[r]].push(e.name),u[e.name][n[r]]=e.to||n[r];e.to&&(c[e.to]=c[e.to]||[])};r&&(r.event=r.event||"startup",l({name:r.event,from:"none",to:r.state}));for(var d=0;d<o.length;d++)l(o[d]);for(var h in u)u.hasOwnProperty(h)&&(s[h]=t.buildEvent(h,u[h]));for(var h in a)a.hasOwnProperty(h)&&(s[h]=a[h]);return s.current="none",s.is=function(e){return Array.isArray(e)?e.indexOf(this.current)>=0:this.current===e},s.can=function(e){return!this.transition&&void 0!==u[e]&&(u[e].hasOwnProperty(this.current)||u[e].hasOwnProperty(t.WILDCARD))},s.cannot=function(e){return!this.can(e)},s.transitions=function(){return(c[this.current]||[]).concat(c[t.WILDCARD]||[])},s.isFinished=function(){return this.is(i)},s.error=e.error||function(e,t,n,r,i,s,o){throw o||s},s.states=function(){return Object.keys(c).sort()},r&&!r.defer&&s[r.event](),s},doCallback:function(e,n,r,i,s,o){if(n)try{return n.apply(e,[r,i,s].concat(o))}catch(n){return e.error(r,i,s,o,t.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",n)}},beforeAnyEvent:function(e,n,r,i,s){return t.doCallback(e,e.onbeforeevent,n,r,i,s)},afterAnyEvent:function(e,n,r,i,s){return t.doCallback(e,e.onafterevent||e.onevent,n,r,i,s)},leaveAnyState:function(e,n,r,i,s){return t.doCallback(e,e.onleavestate,n,r,i,s)},enterAnyState:function(e,n,r,i,s){return t.doCallback(e,e.onenterstate||e.onstate,n,r,i,s)},changeState:function(e,n,r,i,s){return t.doCallback(e,e.onchangestate,n,r,i,s)},beforeThisEvent:function(e,n,r,i,s){return t.doCallback(e,e["onbefore"+n],n,r,i,s)},afterThisEvent:function(e,n,r,i,s){return t.doCallback(e,e["onafter"+n]||e["on"+n],n,r,i,s)},leaveThisState:function(e,n,r,i,s){return t.doCallback(e,e["onleave"+r],n,r,i,s)},enterThisState:function(e,n,r,i,s){return t.doCallback(e,e["onenter"+i]||e["on"+i],n,r,i,s)},beforeEvent:function(e,n,r,i,s){if(!1===t.beforeThisEvent(e,n,r,i,s)||!1===t.beforeAnyEvent(e,n,r,i,s))return!1},afterEvent:function(e,n,r,i,s){t.afterThisEvent(e,n,r,i,s),t.afterAnyEvent(e,n,r,i,s)},leaveState:function(e,n,r,i,s){var o=t.leaveThisState(e,n,r,i,s),a=t.leaveAnyState(e,n,r,i,s);return!1!==o&&!1!==a&&(t.ASYNC===o||t.ASYNC===a?t.ASYNC:void 0)},enterState:function(e,n,r,i,s){t.enterThisState(e,n,r,i,s),t.enterAnyState(e,n,r,i,s)},buildEvent:function(e,n){return function(){var r=this.current,i=n[r]||(n[t.WILDCARD]!=t.WILDCARD?n[t.WILDCARD]:r)||r,s=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,r,i,s,t.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,r,i,s,t.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===t.beforeEvent(this,e,r,i,s))return t.Result.CANCELLED;if(r===i)return t.afterEvent(this,e,r,i,s),t.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=i,t.enterState(o,e,r,i,s),t.changeState(o,e,r,i,s),t.afterEvent(o,e,r,i,s),t.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,t.afterEvent(o,e,r,i,s)};var a=t.leaveState(this,e,r,i,s);return!1===a?(this.transition=null,t.Result.CANCELLED):t.ASYNC===a?t.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==r?(void 0!==n&&n.exports&&(r=n.exports=t),r.StateMachine=t):"function"==typeof e&&e.amd?e(function(e){return t}):"undefined"!=typeof window?window.StateMachine=t:"undefined"!=typeof self&&(self.StateMachine=t)}()},{}],171:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/regenerator"),s=r(i),o=e("babel-runtime/core-js/symbol/iterator"),a=r(o),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),d=r(l),h=function(){function e(t,n){(0,c.default)(this,e),this.balanceFactor=0,this.key=t,this.value=n,this.parent=null,this.left=null,this.right=null}return(0,d.default)(e,[{key:"update",value:function(e){this.value=e}},{key:"replace",value:function(e,t){e&&(this.left===t?this.left=t:this.right===t&&(this.right=t))}},{key:"isRoot",get:function(){return null===this.parent}},{key:"isLeaf",get:function(){return null===this.left&&null===this.right}},{key:"isLeftChild",get:function(){return this.parent.left===this}}]),e}(),f=function(){function e(t,n){(0,c.default)(this,e),this.isLessThan=t||function(e,t){return e<t},this.isEqual=n||function(e,t){return e===t},this.root=null,this.count=null}return(0,d.default)(e,[{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(e,t){var n=this.getNode(e);n?n.update(t):this.insert(e,t)}},{key:"insert",value:function(e,t){var n=new h(e,t);if(this.count++,!this.root)return void(this.root=n);for(var r=this.root;;)if(this.isLessThan(e,r.key)){if(!r.left){r.left=n;break}r=r.left}else{if(!r.right){r.right=n;break}r=r.right}for(n.parent=r,r=n;r.parent;){var i=r.parent,s=i.balanceFactor;if(r.isLeftChild?i.balanceFactor++:i.balanceFactor--,Math.abs(i.balanceFactor)<Math.abs(s))break;if(i.balanceFactor<-1||i.balanceFactor>1){this.rebalance(i);break}r=i}}},{key:"get",value:function(e){for(var t=this.root;t;){if(this.isEqual(e,t.key))return t.value;t=this.isLessThan(e,t.key)?t.left:t.right}return null}},{key:"delete",value:function(e){var t=this.getNode(e);if(!t||t.key!==e)return null;var n=t.parent,r=t.left,i=t.right;if(!!r!=!!i){var s=r||i;n||s?n&&!s?this.root=s:(n.replace(t,null),this.rebalance(n)):this.root=null}else{for(var o=t.left;o.right;)o=o.right;if(t.left===o)t.isRoot?(this.root=o,o.parent=null):(t.isLeftChild?t.parent.left=o:t.parent.right=o,o.parent=t.parent),o.right=t.right,o.right.parent=o,o.balanceFactor=t.balanceFactor,t={parent:o,isLeftChild:!0};else{var a=o.parent,u=o.left;a.right=u,u&&(u.parent=a),t.isRoot?(this.root=o,o.parent=null):(t.isLeftChild?t.parent.left=o:t.parent.right=o,o.parent=t.parent),o.right=t.right,o.right.parent=o,o.left=t.left,o.left.parent=o,o.balanceFactor=t.balanceFactor,t={parent:a,isLeftChild:!1}}}for(this.count--;t.parent;){var c=t.parent,l=c.balanceFactor;if(t.isLeftChild?c.balanceFactor-=1:c.balanceFactor+=1,Math.abs(c.balanceFactor)>Math.abs(l)){if(!(c.balanceFactor<-1||c.balanceFactor>1))break;if(this.rebalance(c),0!==c.parent.balanceFactor)break;t=c.parent}else t=c}return null}},{key:"getNode",value:function(e){for(var t=this.root;t;){if(this.isEqual(e,t.key))return t;t=this.isLessThan(e,t.key)?t.left:t.right}return null}},{key:"rebalance",value:function(e){e.balanceFactor<0?e.right.balanceFactor>0?(this.rotateRight(e.right),this.rotateLeft(e)):this.rotateLeft(e):e.balanceFactor>0&&(e.left.balanceFactor<0?(this.rotateLeft(e.left),this.rotateRight(e)):this.rotateRight(e))}},{key:"rotateLeft",value:function(e){var t=e.right;e.right=t.left,null!==t.left&&(t.left.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.left=e,e.parent=t,e.balanceFactor=e.balanceFactor+1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor+1-Math.max(e.balanceFactor,0)}},{key:"rotateRight",value:function(e){var t=e.left;e.left=t.right,null!==t.right&&(t.right.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.right=e,e.parent=t,e.balanceFactor=e.balanceFactor-1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor-1-Math.max(e.balanceFactor,0)}},{key:a.default,value:s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.root){e.next=2;break}return e.abrupt("return",null);case 2:for(t=!0,n=this.root;n.left;)n=n.left;case 5:if(!t){e.next=23;break}return e.next=8,[n.key,n.value];case 8:if(t=!1,!n.right){e.next=15;break}for(n=n.right;n.left;)n=n.left;t=!0,e.next=21;break;case 15:if(!n.parent){e.next=20;break}t=n.parent.left===n,n=n.parent,e.next=21;break;case 20:return e.abrupt("break",31);case 21:e.next=29;break;case 23:if(!n.parent){e.next=28;break}t=n.parent.left===n,n=n.parent,e.next=29;break;case 28:return e.abrupt("break",31);case 29:e.next=5;break;case 31:return e.abrupt("return",null);case 32:case"end":return e.stop()}},e,this)})},{key:"getIterator",value:s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.root;case 1:if(!n){e.next=7;break}if(!this.isEqual(t,n.key)){e.next=4;break}return e.abrupt("break",7);case 4:n=this.isLessThan(t,n.key)?n.left:n.right,e.next=1;break;case 7:r=!0;case 8:if(!r){e.next=26;break}return e.next=11,[n.key,n.value];case 11:if(r=!1,!n.right){e.next=18;break}for(n=n.right;n.left;)n=n.left;r=!0,e.next=24;break;case 18:if(!n.parent){e.next=23;break}r=n.parent.left===n,n=n.parent,e.next=24;break;case 23:return e.abrupt("break",34);case 24:e.next=32;break;case 26:if(!n.parent){e.next=31;break}r=n.parent.left===n,n=n.parent,e.next=32;break;case 31:return e.abrupt("break",34);case 32:e.next=8;break;case 34:return e.abrupt("return",null);case 35:case"end":return e.stop()}},e,this)})},{key:"getReverseIterator",value:s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.root;case 1:if(!n){e.next=7;break}if(!this.isEqual(t,n.key)){e.next=4;break}return e.abrupt("break",7);case 4:n=this.isLessThan(t,n.key)?n.right:n.left,e.next=1;break;case 7:r=!0;case 8:if(!r){e.next=26;break}return e.next=11,[n.key,n.value];case 11:if(r=!1,!n.left){e.next=18;break}for(n=n.left;n.right;)n=n.right;r=!0,e.next=24;break;case 18:if(!n.parent){e.next=23;break}r=n.parent.right===n,n=n.parent,e.next=24;break;case 23:return e.abrupt("break",34);case 24:e.next=32;break;case 26:if(!n.parent){e.next=31;break}r=n.parent.right===n,n=n.parent,e.next=32;break;case 31:return e.abrupt("break",34);case 32:e.next=8;break;case 34:return e.abrupt("return",null);case 35:case"end":return e.stop()}},e,this)})},{key:"size",get:function(){return this.count}}]),e}();n.TreeMap=f},{"babel-runtime/core-js/symbol/iterator":19,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/regenerator":28}],172:[function(t,n,r){!function(t,r){"use strict";"function"==typeof e&&e.amd?e(r):"object"===(void 0===n?"undefined":u(n))&&n.exports?n.exports=r():t.log=r()}(this,function(){"use strict";function e(e){return("undefined"==typeof console?"undefined":u(console))!==a&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):o)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){("undefined"==typeof console?"undefined":u(console))!==a&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=0;n<c.length;n++){var r=c[n];this[r]=n<e?o:this.methodFactory(r,e,t)}}function i(t,r,i){return e(t)||n.apply(this,arguments)}function s(e,t,n){function s(e){var t=(c[e]||"silent").toUpperCase();try{return void(window.localStorage[h]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"="+t+";"}catch(e){}}function o(){var e;try{e=window.localStorage[h]}catch(e){}if((void 0===e?"undefined":u(e))===a)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(h)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}var l,d=this,h="loglevel";e&&(h+=":"+e),d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||i,d.getLevel=function(){return l},d.setLevel=function(t,n){if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=d.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(l=t,n!==!1&&s(t),r.call(d,t,e),("undefined"==typeof console?"undefined":u(console))===a&&t<d.levels.SILENT)return"No console available for logging"},d.setDefaultLevel=function(e){o()||d.setLevel(e,!1)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)};var f=o();null==f&&(f=null==t?"WARN":t),d.setLevel(f,!1)}var o=function(){},a="undefined",c=["trace","debug","info","warn","error"],l=new s,d={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new s(e,l.getLevel(),l.methodFactory)),t};var h=("undefined"==typeof window?"undefined":u(window))!==a?window.log:void 0;return l.noConflict=function(){return("undefined"==typeof window?"undefined":u(window))!==a&&window.log===l&&(window.log=h),l},l})},{}],173:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("events"),s=function(e){function t(t){var n=e.call(this)||this;return n.minDelay=t.min,n.maxDelay=t.max,n.initialDelay=t.initial||0,n.maxAttemptsCount=t.maxAttemptsCount||0,n.maxAttemptsTime=t.maxAttemptsTime||0,n.inProgress=!1,n.attemptNum=0,n.prevDelay=0,n.currDelay=0,n}return r(t,e),t.prototype.attempt=function(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt")},t.prototype.nextDelay=function(){if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;var e=this.currDelay+this.prevDelay;return this.prevDelay=this.currDelay,this.currDelay=e,e},t.prototype.scheduleAttempt=function(){var e=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));var t=this.nextDelay();this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+t&&(this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),this.reject(new Error("Maximum attempt time limit reached"))),this.timeout=setTimeout(function(){return e.attempt()},t)},t.prototype.cleanup=function(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0},t.prototype.start=function(){var e=this;if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise(function(t,n){e.resolve=t,e.reject=n,e.startTimestamp=Date.now(),e.scheduleAttempt()})},t.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))},t.prototype.succeeded=function(e){this.emit("succeeded",e),this.resolve(e)},t.prototype.failed=function(e){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt()},t.prototype.run=function(e){var t=this;return this.on("attempt",function(){e().then(function(e){return t.succeeded(e)}).catch(function(e){return t.failed(e)})}),this.start()},t}(i.EventEmitter);Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{events:169}],174:[function(t,r,i){(function(t){(function(){"use strict";function n(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=a(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function o(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=k)for(;++n<r;)t(e[n],n,e);else c(e,t)}function a(e){return e=p(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:n(e)}function c(e,t){for(var n in e)L.call(e,n)&&t(e[n],n,e)}function l(e){return null==e?n(e):E.call(e).slice(8,-1)}function d(e,t){var n=null!=e?u(e[t]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function h(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function f(e,t){var n=null;return o(e,function(r,i){n=t(n,r,i,e)}),n}function p(e){return String(e).replace(/^ +| +$/g,"")}function m(e){function t(t){return f(t,function(t,n){return t||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(e)&&(n.label||n)})}function n(t){return f(t,function(t,n,r){return t||(n[J]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(J)]||RegExp("\\b"+h(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})}function r(t){return f(t,function(t,n){return t||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(e)&&(n.label||n)})}function i(t){return f(t,function(t,n){var r=n.pattern||h(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=s(t,r,n.label||n)),t})}function o(t){return f(t,function(t,n){var r=n.pattern||h(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=a(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function _(t){return f(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function y(){return this.description||""}var b=g,T=e&&"object"==(void 0===e?"undefined":u(e))&&"String"!=l(e);T&&(b=e,e=null);var k=b.navigator||{},S=k.userAgent||"";e||(e=S);var L,C,x=T||M==v,D=T?!!k.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(E.toString()),j="Object",R=T?j:"ScriptBridgingProxyObject",A=T?j:"Environment",Y=T&&b.java?"JavaPackage":l(b.java),I=T?j:"RuntimeObject",P=/\bJava/.test(Y)&&b.java,O=P&&l(b.environment)==A,N=P?"a":"",H=P?"b":"",U=b.document||{},F=b.operamini||b.opera,$=w.test($=T&&F?F["[[Class]]"]:l(F))?$:F=null,q=e,X=[],W=null,B=e==S,z=B&&F&&"function"==typeof F.version&&F.version(),G=t([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),V=r(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),J=o([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),K=n({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Z=i(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(G&&(G=[G]),K&&!J&&(J=o([K])),(L=/\bGoogle TV\b/.exec(J))&&(J=L[0]),/\bSimulator\b/i.test(e)&&(J=(J?J+" ":"")+"Simulator"),"Opera Mini"==V&&/\bOPiOS\b/.test(e)&&X.push("running in Turbo/Uncompressed mode"),"IE"==V&&/\blike iPhone OS\b/.test(e)?(L=m(e.replace(/like iPhone OS/,"")),K=L.manufacturer,J=L.product):/^iP/.test(J)?(V||(V="Safari"),Z="iOS"+((L=/ OS ([\d_]+)/i.exec(e))?" "+L[1].replace(/_/g,"."):"")):"Konqueror"!=V||/buntu/i.test(Z)?K&&"Google"!=K&&(/Chrome/.test(V)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(J))||/\bAndroid\b/.test(Z)&&/^Chrome/.test(V)&&/\bVersion\//i.test(e)?(V="Android Browser",Z=/\bAndroid\b/.test(Z)?Z:"Android"):"Silk"==V?(/\bMobi/i.test(e)||(Z="Android",X.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&X.unshift("accelerated")):"PaleMoon"==V&&(L=/\bFirefox\/([\d.]+)\b/.exec(e))?X.push("identifying as Firefox "+L[1]):"Firefox"==V&&(L=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(Z||(Z="Firefox OS"),J||(J=L[1])):V&&!(L=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(V))||(V&&!J&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(L+"/")+8))&&(V=null),(L=J||K||Z)&&(J||K||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Z))&&(V=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Z)?Z:L)+" Browser")):Z="Kubuntu",z||(z=_(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",h(V),"(?:Firefox|Minefield|NetFront)"])),(L="iCab"==G&&parseFloat(z)>3&&"WebKit"||/\bOpera\b/.test(V)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(G)&&"WebKit"||!G&&/\bMSIE\b/i.test(e)&&("Mac OS"==Z?"Tasman":"Trident")||"WebKit"==G&&/\bPlayStation\b(?! Vita\b)/i.test(V)&&"NetFront")&&(G=[L]),"IE"==V&&(L=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(V+=" Mobile",Z="Windows Phone "+(/\+$/.test(L)?L:L+".x"),X.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(V="IE Mobile",Z="Windows Phone 8.x",X.unshift("desktop mode"),z||(z=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=V&&"Trident"==G&&(L=/\brv:([\d.]+)/.exec(e))&&(V&&X.push("identifying as "+V+(z?" "+z:"")),V="IE",z=L[1]),B){if(d(b,"global"))if(P&&(L=P.lang.System,q=L.getProperty("os.arch"),Z=Z||L.getProperty("os.name")+" "+L.getProperty("os.version")),x&&d(b,"system")&&(L=[b.system])[0]){Z||(Z=L[0].os||null);try{L[1]=b.require("ringo/engine").version,z=L[1].join("."),V="RingoJS"}catch(e){L[0].global.system==b.system&&(V="Narwhal")}}else"object"==u(b.process)&&!b.process.browser&&(L=b.process)?(V="Node.js",q=L.arch,Z=L.platform,z=/[\d.]+/.exec(L.version)[0]):O&&(V="Rhino");else l(L=b.runtime)==R?(V="Adobe AIR",Z=L.flash.system.Capabilities.os):l(L=b.phantom)==I?(V="PhantomJS",z=(L=L.version||null)&&L.major+"."+L.minor+"."+L.patch):"number"==typeof U.documentMode&&(L=/\bTrident\/(\d+)/i.exec(e))&&(z=[z,U.documentMode],(L=+L[1]+4)!=z[1]&&(X.push("IE "+z[1]+" mode"),G&&(G[1]=""),z[1]=L),z="IE"==V?String(z[1].toFixed(1)):z[0]);Z=Z&&a(Z)}z&&(L=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(z)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(B&&k.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(W=/b/i.test(L)?"beta":"alpha",z=z.replace(RegExp(L+"\\+?$"),"")+("beta"==W?H:N)+(/\d+\+?/.exec(L)||"")),"Fennec"==V||"Firefox"==V&&/\b(?:Android|Firefox OS)\b/.test(Z)?V="Firefox Mobile":"Maxthon"==V&&z?z=z.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(J)?(Z=null,"Xbox 360"==J&&/\bIEMobile\b/.test(e)&&X.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(V)&&(!V||J||/Browser|Mobi/.test(V))||"Windows CE"!=Z&&!/Mobi/i.test(e)?"IE"==V&&B&&null===b.external?X.unshift("platform preview"):(/\bBlackBerry\b/.test(J)||/\bBB10\b/.test(e))&&(L=(RegExp(J.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||z)?(L=[L,/BB10/.test(e)],Z=(L[1]?(J=null,K="BlackBerry"):"Device Software")+" "+L[0],z=null):this!=c&&"Wii"!=J&&(B&&F||/Opera/.test(V)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==V&&/\bOS X (?:\d+\.){2,}/.test(Z)||"IE"==V&&(Z&&!/^Win/.test(Z)&&z>5.5||/\bWindows XP\b/.test(Z)&&z>8||8==z&&!/\bTrident\b/.test(e)))&&!w.test(L=m.call(c,e.replace(w,"")+";"))&&L.name&&(L="ing as "+L.name+((L=L.version)?" "+L:""),w.test(V)?(/\bIE\b/.test(L)&&"Mac OS"==Z&&(Z=null),L="identify"+L):(L="mask"+L,V=$?a($.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(L)&&(Z=null),B||(z=null)),G=["Presto"],X.push(L)):V+=" Mobile",(L=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(L=[parseFloat(L.replace(/\.(\d)$/,".0$1")),L],"Safari"==V&&"+"==L[1].slice(-1)?(V="WebKit Nightly",W="alpha",z=L[1].slice(0,-1)):z!=L[1]&&z!=(L[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(z=null),L[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==L[0]&&537.36==L[2]&&parseFloat(L[1])>=28&&"WebKit"==G&&(G=["Blink"]),B&&(D||L[1])?(G&&(G[1]="like Chrome"),L=L[1]||(L=L[0],L<530?1:L<532?2:L<532.05?3:L<533?4:L<534.03?5:L<534.07?6:L<534.1?7:L<534.13?8:L<534.16?9:L<534.24?10:L<534.3?11:L<535.01?12:L<535.02?"13+":L<535.07?15:L<535.11?16:L<535.19?17:L<536.05?18:L<536.1?19:L<537.01?20:L<537.11?"21+":L<537.13?23:L<537.18?24:L<537.24?25:L<537.36?26:"Blink"!=G?"27":"28")):(G&&(G[1]="like Safari"),L=L[0],L=L<400?1:L<500?2:L<526?3:L<533?4:L<534?"4+":L<535?5:L<537?6:L<538?7:L<601?8:"8"),G&&(G[1]+=" "+(L+="number"==typeof L?".x":/[.+]/.test(L)?"":"+")),"Safari"==V&&(!z||parseInt(z)>45)&&(z=L)),"Opera"==V&&(L=/\bzbov|zvav$/.exec(Z))?(V+=" ",X.unshift("desktop mode"),"zvav"==L?(V+="Mini",z=null):V+="Mobile",Z=Z.replace(RegExp(" *"+L+"$"),"")):"Safari"==V&&/\bChrome\b/.exec(G&&G[1])&&(X.unshift("desktop mode"),V="Chrome Mobile",z=null,/\bOS X\b/.test(Z)?(K="Apple",Z="iOS 4.3+"):Z=null),z&&0==z.indexOf(L=/[\d.]+$/.exec(Z))&&e.indexOf("/"+L+"-")>-1&&(Z=p(Z.replace(L,""))),G&&!/\b(?:Avant|Nook)\b/.test(V)&&(/Browser|Lunascape|Maxthon/.test(V)||"Safari"!=V&&/^iOS/.test(Z)&&/\bSafari\b/.test(G[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(V)&&G[1])&&(L=G[G.length-1])&&X.push(L),X.length&&(X=["("+X.join("; ")+")"]),K&&J&&J.indexOf(K)<0&&X.push("on "+K),J&&X.push((/^on /.test(X[X.length-1])?"":"on ")+J),Z&&(L=/ ([\d.+]+)$/.exec(Z),C=L&&"/"==Z.charAt(Z.length-L[0].length-1),Z={architecture:32,family:L&&!C?Z.replace(L[0],""):Z,version:L?L[1]:null,toString:function(){var e=this.version;return this.family+(e&&!C?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(L=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(q))&&!/\bi686\b/i.test(q)?(Z&&(Z.architecture=64,Z.family=Z.family.replace(RegExp(" *"+L),"")),V&&(/\bWOW64\b/i.test(e)||B&&/\w(?:86|32)$/.test(k.cpuClass||k.platform)&&!/\bWin64; x64\b/i.test(e))&&X.unshift("32-bit")):Z&&/^OS X/.test(Z.family)&&"Chrome"==V&&parseFloat(z)>=39&&(Z.architecture=64),e||(e=null);var Q={};return Q.description=e,Q.layout=G&&G[0],Q.manufacturer=K,Q.name=V,Q.prerelease=W,Q.product=J,Q.ua=e,Q.version=V&&z,Q.os=Z||{architecture:null,family:null,version:null,toString:function(){return"null"}},Q.parse=m,Q.toString=y,Q.version&&X.unshift(z),Q.name&&X.unshift(V),Z&&V&&(Z!=String(Z).split(" ")[0]||Z!=V.split(" ")[0]&&!J)&&X.push(J?"("+Z+")":"on "+Z),X.length&&(Q.description=X.join(" ")),Q}var _={function:!0,object:!0},g=_["undefined"==typeof window?"undefined":u(window)]&&window||this,v=g,y=_[void 0===i?"undefined":u(i)]&&i,b=_[void 0===r?"undefined":u(r)]&&r&&!r.nodeType&&r,T=y&&b&&"object"==(void 0===t?"undefined":u(t))&&t;!T||T.global!==T&&T.window!==T&&T.self!==T||(g=T);var k=Math.pow(2,53)-1,w=/\bOpera/,M=this,S=Object.prototype,L=S.hasOwnProperty,E=S.toString,C=m();"function"==typeof e&&"object"==u(e.amd)&&e.amd?(g.platform=C,e(function(){return C})):y&&b?c(C,function(e,t){y[t]=e}):g.platform=C}).call(this)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],175:[function(e,t,n){t.exports=e("./lib/checks")},{"./lib/checks":176}],176:[function(e,t,n){function r(e,t,n,r){n=n||"";var i=c.format.apply(this,[n].concat(r)),s=new e(i);throw Error.captureStackTrace(s,t),s}function i(e,t,n){r(l.IllegalArgumentError,e,t,n)}function s(e,t,n){r(l.IllegalStateError,e,t,n)}function o(e){var t=void 0===e?"undefined":u(e);if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function a(e){return function(t,n){var r=o(t);if(r==e)return t;i(arguments.callee,n||'Expected "'+e+'" but got "'+r+'".',Array.prototype.slice.call(arguments,2))}}var c=e("util"),l=t.exports=e("./errors");t.exports.checkArgument=function(e,t){e||i(arguments.callee,t,Array.prototype.slice.call(arguments,2))},t.exports.checkState=function(e,t){e||s(arguments.callee,t,Array.prototype.slice.call(arguments,2))},t.exports.checkIsDef=function(e,t){if(void 0!==e)return e;i(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},t.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;i(arguments.callee,t||'Expected value to be defined and not null but got "'+o(e)+'".',Array.prototype.slice.call(arguments,2))},t.exports.checkIsString=a("string"),t.exports.checkIsArray=a("array"),t.exports.checkIsNumber=a("number"),t.exports.checkIsBoolean=a("boolean"),t.exports.checkIsFunction=a("function"),t.exports.checkIsObject=a("object")},{"./errors":177,util:223}],177:[function(e,t,n){function r(e){Error.call(this,e),this.message=e}function i(e){Error.call(this,e),this.message=e}var s=e("util");s.inherits(r,Error),r.prototype.name="IllegalArgumentError",s.inherits(i,Error),i.prototype.name="IllegalStateError",t.exports.IllegalStateError=i,t.exports.IllegalArgumentError=r},{util:223}],178:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){_&&p&&(_=!1,p.length?m=p.concat(m):g=-1,m.length&&u())}function u(){if(!_){var e=s(a);_=!0;for(var t=m.length;t;){for(p=m,m=[];++g<t;)p&&p[g].run();g=-1,t=m.length}p=null,_=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var d,h,f=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,m=[],_=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||_||s(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],179:[function(e,t,r){(function(n){var r="object"===(void 0===n?"undefined":u(n))?n:"object"===("undefined"==typeof window?"undefined":u(window))?window:"object"===("undefined"==typeof self?"undefined":u(self))?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,s=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=e("./runtime"),i)r.regeneratorRuntime=s;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./runtime":180}],180:[function(e,t,r){(function(e,n){!function(n){"use strict";function r(e,t,n,r){var i=t&&t.prototype instanceof s?t:s,o=Object.create(i.prototype),a=new m(r||[]);return o._invoke=d(e,n,a),o}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function s(){}function o(){}function a(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(t){function n(e,r,s,o){var a=i(t[e],t,r);if("throw"!==a.type){var c=a.arg,l=c.value;return l&&"object"===(void 0===l?"undefined":u(l))&&b.call(l,"__await")?Promise.resolve(l.__await).then(function(e){n("next",e,s,o)},function(e){n("throw",e,s,o)}):Promise.resolve(l).then(function(e){c.value=e,s(c)},o)}o(a.arg)}function r(e,t){function r(){return new Promise(function(r,i){n(e,t,r,i)})}return s=s?s.then(r,r):r()}"object"===(void 0===e?"undefined":u(e))&&e.domain&&(n=e.domain.bind(n));var s;this._invoke=r}function d(e,t,n){var r=L;return function(s,o){if(r===C)throw new Error("Generator is already running");if(r===x){if("throw"===s)throw o;return g()}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var u=h(a,n);if(u){if(u===D)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===L)throw r=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=C;var c=i(e,t,n);if("normal"===c.type){if(r=n.done?x:E,c.arg===D)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=x,n.method="throw",n.arg=c.arg)}}}function h(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,h(e,t),"throw"===t.method))return D;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var r=i(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,D;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,D):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,D)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function _(e){if(e){var t=e[k];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:v,done:!0}}var v,y=Object.prototype,b=y.hasOwnProperty,T="function"==typeof Symbol?Symbol:{},k=T.iterator||"@@iterator",w=T.toStringTag||"@@toStringTag",M="object"===(void 0===t?"undefined":u(t)),S=n.regeneratorRuntime;if(S)return void(M&&(t.exports=S));S=n.regeneratorRuntime=M?t.exports:{},S.wrap=r;var L="suspendedStart",E="suspendedYield",C="executing",x="completed",D={},j={};j[k]=function(){return this};var R=Object.getPrototypeOf,A=R&&R(R(_([])));A&&A!==y&&b.call(A,k)&&(j=A);var Y=a.prototype=s.prototype=Object.create(j);o.prototype=Y.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(Y),e},S.awrap=function(e){return{__await:e}},c(l.prototype),S.AsyncIterator=l,S.async=function(e,t,n,i){var s=new l(r(e,t,n,i));return S.isGeneratorFunction(t)?s:s.next().then(function(e){return e.done?e.value:s.next()})},c(Y),Y[w]="Generator",Y.toString=function(){return"[object Generator]"},S.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=_,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return s.type="throw",s.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=b.call(i,"catchLoc"),a=b.call(i,"finallyLoc");if(o&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,D):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),D},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),D}}}("object"===(void 0===n?"undefined":u(n))?n:"object"===("undefined"==typeof window?"undefined":u(window))?window:"object"===("undefined"==typeof self?"undefined":u(self))?self:this)}).call(this,e("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:178}],181:[function(t,r,i){(function(n){!function(t){if("object"===(void 0===i?"undefined":u(i))&&void 0!==r)r.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var s;s="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this,s.rfc6902=t()}}(function(){return function e(n,r,i){function s(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof t&&t;if(!u&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[a]={exports:{}};n[a][0].call(d.exports,function(e){var t=n[a][1][e];return s(t?t:e)},d,d.exports,e,n,r,i)}return r[a].exports}for(var o="function"==typeof t&&t,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(e,t,n){"use strict";function r(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t}function i(e,t){var n={};for(var r in e)n[r]=1;for(var i in t)delete n[i];return Object.keys(n)}function s(e){var t={};e.forEach(function(e){for(var n in e)t[n]=(t[n]||0)+1});var n=e.length;for(var r in t)t[r]<n&&delete t[r];return Object.keys(t)}function o(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":void 0===e?"undefined":u(e)}function a(e){return"add"===e.op}function c(e){return"remove"===e.op}function l(e,t,n){function r(n,s){var o=i[n+","+s];if(void 0===o){if(_(e[n-1],t[s-1]))o=r(n-1,s-1);else{var a=[];if(n>0){var u=r(n-1,s);a.push({operations:u.operations.concat({op:"remove",index:n-1}),cost:u.cost+1})}if(s>0){var c=r(n,s-1);a.push({operations:c.operations.concat({op:"add",index:n-1,value:t[s-1]}),cost:c.cost+1})}if(n>0&&s>0){var l=r(n-1,s-1);a.push({operations:l.operations.concat({op:"replace",index:n-1,original:e[n-1],value:t[s-1]}),cost:l.cost+1})}o=a.sort(function(e,t){return e.cost-t.cost})[0]}i[n+","+s]=o}return o}var i={"0,0":{operations:[],cost:0}},s=isNaN(e.length)||e.length<=0?0:e.length,o=isNaN(t.length)||t.length<=0?0:t.length,u=r(s,o).operations,l=u.reduce(function(e,t){var r=p(e,2),i=r[0],o=r[1];if(a(t)){var u=t.index+1+o,l=u<s+o?String(u):"-",d={op:t.op,path:n.add(l).toString(),value:t.value};return[i.concat(d),o+1]}if(c(t)){var d={op:t.op,path:n.add(String(t.index+o)).toString()};return[i.concat(d),o-1]}var h=n.add(String(t.index+o)),_=f(t.original,t.value,h);return[i.concat.apply(i,m(_)),o]},[[],0]),d=p(l,2),h=d[0];d[1];return h}function d(e,t,n){var r=[];return i(e,t).forEach(function(e){r.push({op:"remove",path:n.add(e).toString()})}),i(t,e).forEach(function(e){r.push({op:"add",path:n.add(e).toString(),value:t[e]})}),s([e,t]).forEach(function(i){r.push.apply(r,m(f(e[i],t[i],n.add(i))))}),r}function h(e,t,n){return _(e,t)?[]:[{op:"replace",path:n.toString(),value:t}]}function f(e,t,n){var r=o(e),i=o(t);return"array"==r&&"array"==i?l(e,t,n):"object"==r&&"object"==i?d(e,t,n):h(e,t,n)}var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},m=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};n.isDestructive=r,n.subtract=i,n.intersection=s,n.objectType=o,n.diffArrays=l,n.diffObjects=d,n.diffValues=h,n.diffAny=f,Object.defineProperty(n,"__esModule",{value:!0});var _=e("./equal").compare},{"./equal":2}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push([e[r],t[r]]);return n}function i(e,t){return e.length===t.length&&r(e,t).every(function(e){return o(e[0],e[1])})}function s(e,t){var n=Object.keys(e);return!!i(n,Object.keys(t))&&n.every(function(n){return o(e[n],t[n])})}function o(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?i(e,t):Object(e)===e&&Object(t)===t&&s(e,t))}n.compare=o,Object.defineProperty(n,"__esModule",{value:!0})},{}],3:[function(e,t,n){"use strict";var r=function e(t,n,r){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i&&i.writable)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});n.MissingError=function(e){function t(e){s(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Value required at path: "+e),this.path=e,this.name=this.constructor.name}return i(t,e),t}(Error),n.InvalidOperationError=function(e){function t(e){s(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Invalid operation: "+e),this.op=e,this.name=this.constructor.name}return i(t,e),t}(Error),n.TestError=function(e){function t(e,n){s(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Test failed: "+e+" != "+n),this.actual=e,this.expected=n,this.name=this.constructor.name,this.actual=e,this.expected=n}return i(t,e),t}(Error)},{}],4:[function(e,t,n){"use strict";function r(e,t){return t.map(function(t){var n=l[t.op];return void 0===n?new u(t.op):n(e,t)})}function i(e,t){return h(e,t,new c)}function s(e,t){var n=c.fromJSON(t).evaluate(e);if(void 0!==n)return{op:"test",path:t,value:n.value}}function o(e,t){var n=new Array;return t.filter(f).forEach(function(t){var r=s(e,t.path);if(r&&n.push(r),"from"in t){var i=s(e,t.from);i&&n.push(i)}}),n}var a=function(e){return e&&e.__esModule?e:{default:e}};n.applyPatch=r,n.createPatch=i,n.createTests=o,Object.defineProperty(n,"__esModule",{value:!0});var u=e("./errors").InvalidOperationError,c=e("./pointer").Pointer,l=a(e("./patch")),d=e("./diff"),h=d.diffAny,f=d.isDestructive},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(e,t,n){"use strict";function r(e,t,n){Array.isArray(e)?"-"==t?e.push(n):e.splice(t,0,n):e[t]=n}function i(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}function s(e,t){var n=d.fromJSON(t.path).evaluate(e);return void 0===n.parent?new p(t.path):(r(n.parent,n.key,t.value),null)}function o(e,t){var n=d.fromJSON(t.path).evaluate(e);return void 0===n.value?new p(t.path):(i(n.parent,n.key),null)}function a(e,t){var n=d.fromJSON(t.path).evaluate(e);return void 0===n.value?new p(t.path):(n.parent[n.key]=t.value,null)}function u(e,t){var n=d.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new p(t.from);var s=d.fromJSON(t.path).evaluate(e);return void 0===s.parent?new p(t.path):(i(n.parent,n.key),r(s.parent,s.key,n.value),null)}function c(e,t){var n=d.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new p(t.from);var s=d.fromJSON(t.path).evaluate(e);return void 0===s.parent?new p(t.path):(i(n.parent,n.key),r(s.parent,s.key,n.value),null)}function l(e,t){var n=d.fromJSON(t.path).evaluate(e);return h(n.value,t.value)?null:new m(n.value,t.value)}n.add=s,n.remove=o,n.replace=a,n.move=u,n.copy=c,n.test=l,Object.defineProperty(n,"__esModule",{value:!0});var d=e("./pointer").Pointer,h=e("./equal").compare,f=e("./errors"),p=f.MissingError,m=f.TestError},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(e,t,n){"use strict";function r(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var s=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});n.Pointer=function(){function e(){var t=void 0===arguments[0]?[""]:arguments[0];o(this,e),this.tokens=t}return s(e,{toString:{value:function(){return this.tokens.map(i).join("/")}},evaluate:{value:function(e){for(var t=null,n=null,r=1,i=this.tokens.length;r<i;r++)t=e,n=this.tokens[r],e=(t||{})[n];return{parent:t,key:n,value:e}}},push:{value:function(e){this.tokens.push(e)}},add:{value:function(t){return new e(this.tokens.concat(String(t)))}}},{fromJSON:{value:function(t){var n=t.split("/").map(r);if(""!==n[0])throw new Error("Invalid JSON Pointer: "+t);return new e(n)}}}),e}()},{}]},{},[4])(4)})}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],182:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/regenerator"),s=r(i),o=e("babel-runtime/core-js/object/get-prototype-of"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),d=r(l),h=e("babel-runtime/helpers/inherits"),f=r(h),p=e("babel-runtime/helpers/classCallCheck"),m=r(p),_=e("babel-runtime/core-js/promise"),g=r(_),v=function(e,t,n,r){return new(n||(n=g.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},y=e("events"),b=e("operation-retrier"),T=e("./configuration"),k=e("./logger"),w=e("twilio-transport"),M="Twilio::RTD::EndpointId",S=function e(){(0,m.default)(this,e)},L=function(e){function t(e){(0,m.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return n.myInstanceNumber=t.instancesCounter++,e=e||{},e.transport=e.transport||new w.Transport(e.twilsockClient||null),n.config=new T.default(e),n.twilsock=e.twilsockClient,n.transport=e.transport,n.cachedContinuationToken=null,n}return(0,f.default)(t,e),(0,c.default)(t,[{key:"setToken",value:function(e){return v(this,void 0,void 0,s.default.mark(function t(){var n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.currentFpaToken!==e&&(this.currentFpaToken=e,n=this.currentTokenRequest,this.currentTokenRequest=this.establishToken(e),this.notifyRejected(n)),t.abrupt("return",this.currentTokenRequest.promise);case 2:case"end":return t.stop()}},t,this)}))}},{key:"notifyRejected",value:function(e){e&&setTimeout(function(){return e.reject(new Error("Operation has been cancelled by next token"))},0)}},{key:"establishToken",value:function(e){var t=this,n=new S,r=new g.default(function(r,i){t.establishTokenImpl(e).then(r).catch(i),n.resolve=r,n.reject=i});return n.promise=r,n}},{key:"establishTokenImpl",value:function(e){return v(this,void 0,void 0,s.default.mark(function t(){var n=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new b.default({min:500,max:2e3}).run(function(){return n.requestRtdToken(e)}).then(function(t){if("ok"!=t.status)throw t.exception;if(n.currentFpaToken===e){n.continuationToken=t.response.continuation_token;var r=t.response.twilio_rtd_token;return"NEW"===t.response.status.status?n.emit("tokenCreated",r):n.emit("tokenUpdated",r),n.emit("token",r),{token:t.response.twilio_rtd_token,ttl:t.response.ttl,status:t.response.status.status,reason:t.response.status.reason||null,identity:t.response.identity||null,accountSid:t.response.account_sid,serviceSids:t.response.instance_sids}}}).catch(function(e){throw k.default.error(e),e}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"requestRtdToken",value:function(e){return v(this,void 0,void 0,s.default.mark(function t(){var n,r,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={"Content-Type":"application/json"},r={fpa_token:e,continuation_token:this.continuationToken},k.default.debug("Token request",r),t.prev=3,t.next=6,this.transport.post(this.config.url,n,r);case 6:return i=t.sent,k.default.debug("Token response:",i),t.abrupt("return",{status:"ok",token:e,response:i.body});case 11:if(t.prev=11,t.t0=t.catch(3),401!==t.t0.status&&403!==t.t0.status){t.next=15;break}return t.abrupt("return",{status:"denied",exeception:t.t0,token:null,response:null});case 15:throw t.t0;case 16:case"end":return t.stop()}},t,this,[[3,11]])}))}},{key:"shouldUsePersistentToken",get:function(){return 0===this.myInstanceNumber}},{key:"continuationToken",get:function(){if(this.cachedContinuationToken)return this.cachedContinuationToken;try{if(this.shouldUsePersistentToken&&sessionStorage)return this.cachedContinuationToken=sessionStorage.getItem(M),this.cachedContinuationToken}catch(e){k.default.warn("Can't access persistent storage",e)}return null},set:function(e){this.cachedContinuationToken=e;try{this.shouldUsePersistentToken&&sessionStorage&&sessionStorage.setItem(M,e)}catch(e){k.default.warn("Can't access persistent storage",e)}}}]),t}(y.EventEmitter);L.instancesCounter=0,n.EmsClient=L;var E=L;n.EMSClient=E,Object.defineProperty(n,"__esModule",{value:!0}),n.default=E},{"./configuration":183,"./logger":184,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":28,events:169,"operation-retrier":173,"twilio-transport":214}],183:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/classCallCheck"),s=r(i),o="https://ems.us1.twilio.com",a="/v1/token",u=function e(t){(0,s.default)(this,e);var n=t.host||o;this.url=n+a};Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"babel-runtime/helpers/classCallCheck":21}],184:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return[e].concat((0,o.default)(t))}var s=e("babel-runtime/core-js/array/from"),o=r(s),a=e("loglevel");Object.defineProperty(n,"__esModule",{value:!0}),n.default={setLevel:function(e){a.setLevel(e)},trace:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.trace.apply(null,i("EMS T:",t))},debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.debug.apply(null,i("EMS D:",t))},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.info.apply(null,i("EMS I:",t))},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.warn.apply(null,i("EMS W:",t))},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.error.apply(null,i("EMS E:",t))}}},{"babel-runtime/core-js/array/from":1,loglevel:172}],185:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=new L.default(t,n,1,L.default.strategy.LEAK);return function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(e),r.schedule.apply(r,t)}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("babel-runtime/core-js/promise"),o=r(s),a=e("babel-runtime/core-js/object/define-properties"),u=r(a),c=e("babel-runtime/core-js/object/get-prototype-of"),l=r(c),d=e("babel-runtime/helpers/classCallCheck"),h=r(d),f=e("babel-runtime/helpers/createClass"),p=r(f),m=e("babel-runtime/helpers/possibleConstructorReturn"),_=r(m),g=e("babel-runtime/helpers/inherits"),v=r(g),y=e("./configuration"),b=r(y),T=e("events"),k=r(T),w=e("./logger"),M=r(w),S=e("bottleneck"),L=r(S),E=e("./registrar"),C=r(E),x=e("twilsock"),D=r(x),j=e("twilio-transport"),R=r(j),A=e("twilio-ems-client"),Y=function(e){function t(e,n){(0,h.default)(this,t);var r=(0,_.default)(this,(t.__proto__||(0,l.default)(t)).call(this));if(!e)throw new Error("Token is required for Notifications client");n=n||{},n.logLevel=n.logLevel||"error",M.default.setLevel(n.logLevel);var s=n.minTokenRefreshInterval||1e4,o=n.productId||"notifications";n.twilsockClient=n.twilsockClient||new D.default(e,n),n.transport=n.transport||new R.default(n.twilsockClient),n.emsClient=n.emsClient||new A.EMSClient(n);var a=n.twilsockClient,c=n.transport,d={overall:!1,transport:!1,registration:!1},f=new b.default(null,n);return(0,u.default)(r,{_config:{value:f},_emsClient:{value:n.emsClient},_registrar:{value:new C.default(o,c,a,f)},_twilsock:{value:a},_reliableTransportState:{value:d},updateToken:{value:i(r._updateToken.bind(r),1,s),enumerable:!0},connectionState:{get:function(){return"disconnected"===r._twilsock.state?"disconnected":"disconnecting"===r._twilsock.state?"disconnecting":"connected"===r._twilsock.state&&r._reliableTransportState.registration?"connected":"rejected"===r._twilsock.state?"denied":"connecting"}}}),r._emsClient.setToken(e).then(function(e){return e.token}).then(function(e){r._config.updateToken(e),r._registrar.updateToken()}),r._onTransportStateChange(r._twilsock.connected),r._registrar.on("transportReady",function(e){r._onRegistrationStateChange(e?"registered":"")}),r._registrar.on("stateChanged",function(e){r._onRegistrationStateChange(e)}),r._registrar.on("needReliableTransport",r._onNeedReliableTransport.bind(r)),r._twilsock.on("message",function(e,t){return r._routeMessage(e,t)}),r._twilsock.on("connected",function(e){r._onTransportStateChange(!0),r._registrar.setNotificationId("twilsock",e)}),r._twilsock.on("disconnected",function(){r._onTransportStateChange(!1)}),r}return(0,v.default)(t,e),(0,p.default)(t,[{key:"_routeMessage",value:function(e,t){M.default.trace("Message arrived: ",e,t),this.emit("message",e,t)}},{key:"_onNeedReliableTransport",value:function(e){e?this._twilsock.connect():this._twilsock.disconnect()}},{key:"_onRegistrationStateChange",value:function(e){this._reliableTransportState.registration="registered"===e,this._updateTransportState()}},{key:"_onTransportStateChange",value:function(e){this._reliableTransportState.transport=e,this._updateTransportState()}},{key:"_updateTransportState",value:function(){var e=this._reliableTransportState.transport&&this._reliableTransportState.registration;this._reliableTransportState.overall!==e&&(this._reliableTransportState.overall=e,M.default.info("Transport ready "+e),this.emit("transportReady",e),this.emit("connectionStateChanged",this.connectionState))}},{key:"subscribe",value:function(e,t){return t=t||"twilsock",M.default.trace("Add subscriptions for message type: ",e,t),this._registrar.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){return t=t||"twilsock",M.default.trace("Remove subscriptions for message type: ",e,t),this._registrar.unsubscribe(e,t)}},{key:"handlePushNotification",value:function(e){M.default.warn("Push message passed, but no functionality implemented yet: "+e)}},{key:"setPushRegistrationId",value:function(e,t){this._registrar.setNotificationId(t||"gcm",e)}},{key:"_updateToken",value:function(e){var t=this;return M.default.info("authTokenUpdated"),this._fpaToken===e?o.default.resolve():(this._twilsock.updateToken(e),this._emsClient.setToken(e).then(function(e){return e.token}).then(function(e){t._config.updateToken(e),t._registrar.updateToken()}))}}]),t}(k.default);n.default=Y,t.exports=n.default},{"./configuration":186,"./logger":188,"./registrar":190,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,bottleneck:39,events:169,"twilio-ems-client":182,"twilio-transport":214,twilsock:217}],186:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/core-js/object/define-properties"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l="https://ers.twilio.com",d="/v1/registrations",h=function(){function e(t,n){var r=this;(0,a.default)(this,e),n=(n||{}).Notification||{};var i=n.ersUri||l;(0,s.default)(this,{_registrarUri:{value:i+d},_token:{value:t,writable:!0},registrarUri:{get:function(){return r._registrarUri}},token:{get:function(){return r._token}}})}return(0,c.default)(e,[{key:"updateToken",value:function(e){this._token=e}}]),e}();n.default=h,t.exports=n.default},{"babel-runtime/core-js/object/define-properties":9,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],187:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./client"),s=r(i);n.default=s.default,t.exports=n.default},{"./client":185}],188:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return[e].concat((0,o.default)(t))}Object.defineProperty(n,"__esModule",{value:!0});var s=e("babel-runtime/core-js/array/from"),o=r(s),a=e("loglevel"),u=r(a);n.default={setLevel:function(e){u.default.setLevel(e)},trace:function(){u.default.trace.apply(null,i("Notify T:",arguments))},debug:function(){u.default.debug.apply(null,i("Notify D:",arguments))},info:function(){u.default.info.apply(null,i("Notify I:",arguments))},warn:function(){u.default.warn.apply(null,i("Notify W:",arguments))},error:function(){u.default.error.apply(null,i("Notify E:",arguments))}},t.exports=n.default},{"babel-runtime/core-js/array/from":1,loglevel:172}],189:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=[];return e.forEach(function(e){return t.push(e)}),t}Object.defineProperty(n,"__esModule",{value:!0});var s=e("babel-runtime/core-js/object/freeze"),o=r(s),a=e("babel-runtime/core-js/promise"),u=r(a),c=e("babel-runtime/core-js/set"),l=r(c),d=e("babel-runtime/core-js/object/define-properties"),h=r(d),f=e("babel-runtime/core-js/object/get-prototype-of"),p=r(f),m=e("babel-runtime/helpers/classCallCheck"),_=r(m),g=e("babel-runtime/helpers/createClass"),v=r(g),y=e("babel-runtime/helpers/possibleConstructorReturn"),b=r(y),T=e("babel-runtime/helpers/inherits"),k=r(T),w=e("events"),M=r(w),S=e("./logger"),L=r(S),E=e("javascript-state-machine"),C=r(E),x=e("backoff"),D=r(x),j=function(e){function t(e,n,r,i){(0,_.default)(this,t);var s=(0,b.default)(this,(t.__proto__||(0,p.default)(t)).call(this)),o=C.default.create({initial:{state:"unregistered",event:"init",defer:!0},events:[{name:"userUpdate",from:["unregistered"],to:"registering"},{name:"userUpdate",from:["registered"],to:"unregistering"},{name:"registered",from:["registering","retrying"],to:"registered"},{name:"unregistered",from:["unregistering"],to:"unregistered"},{name:"retry",from:["retrying"],to:"retrying"},{name:"failure",from:["registering"],to:"retrying"},{name:"failure",from:["retrying"],to:"retrying"},{name:"failure",from:["unregistering"],to:"unregistered"}],callbacks:{onregistering:function(e,t,n,r){return s._register(r)},onunregistering:function(){return s._unregister()},onregistered:function(){return s._onRegistered()},onunregistered:function(){return s._onUnregistered()},onretrying:function(e,t,n,r){return s._initRetry(r)},onfailure:function(e,t,n,r){"retrying"===t&&s._initRetry(r)}}}),a=D.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return a.on("ready",function(){s._retry()}),(0,h.default)(s,{_transport:{value:n},_context:{value:e},_url:{value:r.registrarUri,writable:!1},_config:{value:r},_fsm:{value:o},_backoff:{value:a},_channelType:{value:i},_registrationId:{value:!1,writable:!0},_notificationId:{value:!1,writable:!0},_messageTypes:{value:new l.default,writable:!0},_pendingUpdate:{value:null,writable:!0}}),o.init(),s}return(0,k.default)(t,e),(0,v.default)(t,[{key:"setNotificationId",value:function(e){this._notificationId!==e&&(this._notificationId=e,this._updateRegistration())}},{key:"updateToken",value:function(){return this._updateRegistration()}},{key:"has",value:function(e){return this._messageTypes.has(e)}},{key:"subscribe",value:function(e){return this._messageTypes.has(e)?(L.default.debug("Message type already registered ",e),!1):(this._messageTypes.add(e),this._updateRegistration(),!0)}},{key:"unsubscribe",value:function(e){return!!this._messageTypes.has(e)&&(this._messageTypes.delete(e),this._messageTypes.size>0?this._updateRegistration():this._removeRegistration(),!0)}},{key:"_updateRegistration",value:function(){this._notificationId&&this._update(this._notificationId,i(this._messageTypes))}},{key:"_removeRegistration",value:function(){this._notificationId&&this._update(this._notificationId,i(this._messageTypes))}},{key:"_update",value:function(e,t){var n={notificationId:e,messageTypes:t};this._fsm.is("unregistered")?n.notificationId&&n.messageTypes.length>0&&this._fsm.userUpdate(n):this._fsm.is("registered")?(this._fsm.userUpdate(n),this._setPendingUpdate(n)):this._setPendingUpdate(n)}},{key:"_setPendingUpdate",value:function(e){this._pendingUpdate=e}},{key:"_checkPendingUpdate",value:function(){if(this._pendingUpdate){var e=this._pendingUpdate;this._pendingUpdate=null,this._updateRegistration(e.notificationId,e.messageTypes)}}},{key:"_initRetry",value:function(e){this._pendingUpdate||this._setPendingUpdate(e),this._backoff.backoff()}},{key:"_retry",value:function(){if(this._pendingUpdate){var e=this._pendingUpdate;this._pendingUpdate=null,this._register(e)}}},{key:"_onRegistered",value:function(){this._backoff.reset(),this.emit("stateChanged","registered"),this._checkPendingUpdate()}},{key:"_onUnregistered",value:function(){this._backoff.reset(),this.emit("stateChanged","unregistered"),this._checkPendingUpdate()}},{key:"_register",value:function(e){var t=this,n={endpoint_platform:this._context.platform,channel_type:this._channelType,version:"2",message_types:e.messageTypes,data:{},ttl:"PT24H"};"twilsock"===this._channelType?n.data.url=e.notificationId:n.data.registration_id=e.notificationId;var r=this._url+"?productId="+this._context.productId,i={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return L.default.trace("Creating registration for channel ",this._channelType),this._transport.post(r,i,n).then(function(n){t._registrationId=n.body.id,t._registrationData=e,L.default.debug("Registration created: ",n),t._fsm.registered()}).catch(function(n){return L.default.error("Registration failed: ",n),t._fsm.failure(e),n})}},{key:"_unregister",value:function(){var e=this;if(!this._registrationId)return u.default.resolve();var t=this._url+"/"+this._registrationId+"?productId="+this._context.productId,n={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return L.default.trace("Removing registration for ",this._channelType),this._transport.delete(t,n).then(function(){L.default.debug("Registration removed for ",e._channelType),e._registrationId=!1,e._fsm.unregistered()}).catch(function(t){return L.default.error("Failed to remove of registration ",e.channelType,t),e._fsm.failure(),t})}}]),t}(M.default);n.default=j,(0,o.default)(j),t.exports=n.default},{"./logger":188,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/core-js/set":17,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,backoff:29,events:169,"javascript-state-machine":170}],190:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/core-js/object/freeze"),s=r(i),o=e("babel-runtime/core-js/map"),a=r(o),u=e("babel-runtime/core-js/object/define-properties"),c=r(u),l=e("babel-runtime/core-js/object/get-prototype-of"),d=r(l),h=e("babel-runtime/helpers/classCallCheck"),f=r(h),p=e("babel-runtime/helpers/createClass"),m=r(p),_=e("babel-runtime/helpers/possibleConstructorReturn"),g=r(_),v=e("babel-runtime/helpers/inherits"),y=r(v),b=e("events"),T=r(b),k=e("./registrar.connector"),w=r(k),M=e("./twilsock.connector"),S=r(M),L=function(e){function t(e,n,r,i){(0,f.default)(this,t);var s=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this));(0,c.default)(s,{_conf:{value:i},_connectors:{value:new a.default}});var o=("undefined"!=typeof navigator?navigator.userAgent:"web").substring(0,128);return s._connectors.set("twilsock",new S.default({productId:e,platform:o},r,i)),s._connectors.set("gcm",new w.default({productId:e,platform:o},n,i,"gcm")),s._connectors.set("fcm",new w.default({productId:e,platform:o},n,i,"fcm")),s._connectors.set("apn",new w.default({productId:e,platform:o},n,i,"apn")),s._connectors.get("twilsock").on("transportReady",function(e){return s.emit("transportReady",e)}),s}return(0,y.default)(t,e),(0,m.default)(t,[{key:"setNotificationId",value:function(e,t){this._connector(e).setNotificationId(t)}},{key:"hasSubscription",value:function(e,t){this._connector(t).has(e)}},{key:"subscribe",value:function(e,t){this._connector(t).subscribe(e)}},{key:"unsubscribe",value:function(e,t){this._connector(t).unsubscribe(e)}},{key:"updateToken",value:function(){this._connectors.forEach(function(e){return e.updateToken()})}},{key:"_connector",value:function(e){var t=this._connectors.get(e);if(!t)throw new Error("Unknown channel type: "+e);return t}}]),t}(T.default);n.default=L,(0,s.default)(L),t.exports=n.default},{"./registrar.connector":189,"./twilsock.connector":191,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],191:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=[];return e.forEach(function(e){return t.push(e)}),t}Object.defineProperty(n,"__esModule",{value:!0});var s=e("babel-runtime/core-js/object/freeze"),o=r(s),a=e("babel-runtime/core-js/set"),u=r(a),c=e("babel-runtime/core-js/object/define-properties"),l=r(c),d=e("babel-runtime/core-js/object/get-prototype-of"),h=r(d),f=e("babel-runtime/helpers/classCallCheck"),p=r(f),m=e("babel-runtime/helpers/createClass"),_=r(m),g=e("babel-runtime/helpers/possibleConstructorReturn"),v=r(g),y=e("babel-runtime/helpers/inherits"),b=r(y),T=e("uuid"),k=r(T),w=e("./logger"),M=r(w),S=e("events"),L=r(S),E=172800,C=function(e){function t(e,n,r){(0,p.default)(this,t);var i=(0,v.default)(this,(t.__proto__||(0,h.default)(t)).call(this));return e.id=k.default.v4(),(0,l.default)(i,{_twilsock:{value:n},_messageTypes:{value:new u.default},config:{value:r},context:{value:e}}),n.on("stateChanged",function(e){"connected"!==e&&i.emit("transportReady",!1)}),n.on("registered",function(t){e&&t===e.id&&"connected"===n.state&&i.emit("transportReady",!0)}),i}return(0,b.default)(t,e),(0,_.default)(t,[{key:"setNotificationId",value:function(){return!1}},{key:"updateToken",value:function(){this._twilsock.removeNotificationsContext(this.context.id),this.context.id=k.default.v4(),this._updateContext()}},{key:"has",value:function(e){return this._messageTypes.has(e)}},{key:"subscribe",value:function(e){return this._messageTypes.has(e)?(M.default.trace("Message type already registered ",e),!1):(this._messageTypes.add(e),this._updateContext(),!0)}},{key:"unsubscribe",value:function(e){return!!this._messageTypes.has(e)&&(this._messageTypes.delete(e),this._messageTypes.size>0?this._updateContext():this._twilsock.removeNotificationsContext(this.context.id),!0)}},{key:"_updateContext",value:function(){if(this.config.token){var e=i(this._messageTypes),t={product_id:this.context.productId,notification_protocol_version:4,endpoint_platform:this.context.platform,ttl:E,token:this.config.token,message_types:e};this.emit("transportReady",!1),this._twilsock.setNotificationsContext(this.context.id,t)}}}]),t}(L.default);n.default=C,(0,o.default)(C),t.exports=n.default},{"./logger":188,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/set":17,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169,uuid:224}],192:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/classCallCheck"),s=r(i),o=e("babel-runtime/helpers/createClass"),a=r(o),u=e("karibu"),c=function(){function e(t,n){(0,s.default)(this,e),this.value=t,this.revision=n}return(0,a.default)(e,[{key:"isValid",get:function(){return!0}}]),e}(),l=function(){function e(t){(0,s.default)(this,e),this.revision=t}return(0,a.default)(e,[{key:"isValid",get:function(){return!1}}]),e}(),d=function(){function e(){(0,s.default)(this,e),this.items=new u.TreeMap}return(0,a.default)(e,[{key:"store",value:function(e,t,n){var r=this.items.get(e);return r&&r.revision>n?r.isValid?r.value:null:(this.items.set(e,new c(t,n)),t)}},{key:"delete",value:function(e,t){var n=this.items.get(e);(!n||n.revision<t)&&this.items.set(e,new l(t))}},{key:"isKnown",value:function(e,t){var n=this.items.get(e);return n&&n.revision>=t}},{key:"get",value:function(e){var t=this.items.get(e);return t&&t.isValid?t.value:null}},{key:"has",value:function(e){var t=this.items.get(e);return t&&t.isValid}}]),e}();n.Cache=d,Object.defineProperty(n,"__esModule",{value:!0}),n.default=d},{"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,karibu:171}],193:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e._subscribe(),e}function s(e,t,n,r){return{unique_name:e,purpose:t,context:n,data:r}}function o(e){return e?"string"==typeof e?{id:e,purpose:null,data:null,context:null,mode:null}:{id:e.uniqueName||e.sid||e.id,purpose:e.purpose,data:e.data,context:e.context,mode:e.mode}:{id:null,purpose:null,data:null,context:null,mode:null}}var a=e("babel-runtime/regenerator"),u=r(a),c=e("babel-runtime/core-js/object/get-prototype-of"),l=r(c),d=e("babel-runtime/helpers/classCallCheck"),h=r(d),f=e("babel-runtime/helpers/createClass"),p=r(f),m=e("babel-runtime/helpers/possibleConstructorReturn"),_=r(m),g=e("babel-runtime/helpers/inherits"),v=r(g),y=e("babel-runtime/core-js/promise"),b=r(y),T=function(e,t,n,r){return new(n||(n=b.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},k=e("events"),w=e("twilsock"),M=e("twilio-transport"),S=e("twilio-ems-client"),L=e("twilio-notifications"),E=e("./utils"),C=e("./logger"),x=e("./configuration"),D=e("./subscriptions"),j=e("./router"),R=e("./network"),A=e("./syncdocument"),Y=e("./synclist"),I=e("./syncmap"),P=e("./clientInfo"),O=e("./entitiesCache"),N=e("./syncerror"),H="data_sync",U=e("../package.json").version,F=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,h.default)(this,t);var r=(0,_.default)(this,(t.__proto__||(0,l.default)(t)).call(this));if(!e)throw new Error("Sync library needs a valid Twilio token to be passed");n.hasOwnProperty("logLevel")&&C.default.setLevel(n.logLevel);var i=n.productId=n.productId||H,s=n.twilsockClient=n.twilsockClient||new w(e,n),o=n.transport=n.transport||new M.Transport(n.twilsockClient),a=n.emsClient=n.emsClient||new S.EmsClient(n),u=n.notificationsClient=n.notificationsClient||new L(e,n),c=new x.Configuration(null,n),d=new R.Network(i,new P.ClientInfo(U),c,o);r.fpaToken=e,a.setToken(e).then(function(e){return r.services.config.updateToken(e.token)}),s.connect(),r.services={config:c,twilsock:s,notifications:u,network:d,emsClient:a,router:null,subscriptions:null};var f=new D.Subscriptions(r.services),p=new j.Router({config:c,subscriptions:f,notifications:u});return r.services.router=p,r.services.subscriptions=f,r.entities=new O.EntitiesCache,u.on("connectionStateChanged",function(){r.emit("connectionStateChanged",r.services.notifications.connectionState)}),r}return(0,v.default)(t,e),(0,p.default)(t,[{key:"ensureReady",value:function(){var e=this;return this.services.config.token?b.default.resolve(this.services.config.token):new b.default(function(t,n){e.services.emsClient.once("token",function(e){setTimeout(function(){return t(e)},0)})})}},{key:"_get",value:function(e,t){return T(this,void 0,void 0,u.default.mark(function n(){var r,i,s;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",null);case 2:return r=new E.UriBuilder(e).arg("Deep",!0).arg("Id",t).build(),n.next=5,this.services.network.get(r);case 5:return i=n.sent,s=i.body.documents||i.body.lists||i.body.maps||[],n.abrupt("return",0===s.length?null:s[0]);case 8:case"end":return n.stop()}},n,this)}))}},{key:"_createDocument",value:function(e,t,n){var r=s(e,t,null,n);return this.services.network.post(this.services.config.documentsUri,r).then(function(e){return e.body})}},{key:"_getDocument",value:function(e){return this._get(this.services.config.documentsUri,e)}},{key:"_createList",value:function(e,t,n){var r=s(e,t,n);return this.services.network.post(this.services.config.listsUri,r).then(function(e){return e.body})}},{key:"_getList",value:function(e){return this._get(this.services.config.listsUri,e)}},{key:"_createMap",value:function(e,t,n){var r=s(e,t,n);return this.services.network.post(this.services.config.mapsUri,r).then(function(e){return e.body})}},{key:"_getMap",value:function(e){return this._get(this.services.config.mapsUri,e)}},{key:"getCached",value:function(e,t){return this.entities.get(e,t)||null}},{key:"removeFromCache",value:function(e){this.entities.remove(e)}},{key:"document",value:function(e){return T(this,void 0,void 0,u.default.mark(function t(){var n,r,s,a,c,l=this;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:return n=o(e),r=n.id,s=n.purpose,a=n.data,c=n.mode,t.abrupt("return",this.getCached(r,"document")||this._getDocument(r).then(function(e){if(e)return e;if("open"!==c)return l._createDocument(r,s,a);throw new N.default("Not found",404)}).then(function(e){return new A.SyncDocument(l.services,e,function(e){return l.removeFromCache(e)})}).then(function(e){return l.entities.store(e)}).then(i));case 4:case"end":return t.stop()}},t,this)}))}},{key:"map",value:function(e){return T(this,void 0,void 0,u.default.mark(function t(){var n,r,s,a,c,l=this;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:return n=o(e),r=n.id,s=n.purpose,a=n.context,c=n.mode,t.abrupt("return",this.getCached(r,"map")||this._getMap(r).then(function(e){if(e)return e;if("open"!==c)return l._createMap(r,s,a);throw new N.default("Not found",404)}).then(function(e){return new I.SyncMap(l.services,e,function(e){return l.removeFromCache(e)})}).then(function(e){return l.entities.store(e)}).then(i));case 4:case"end":return t.stop()}},t,this)}))}},{key:"list",value:function(e){return T(this,void 0,void 0,u.default.mark(function t(){var n,r,s,a,c,l=this;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:return n=o(e),r=n.id,s=n.purpose,a=n.context,c=n.mode,t.abrupt("return",this.getCached(r,"list")||this._getList(r).then(function(e){if(e)return e;if("open"!==c)return l._createList(r,s,a);throw new N.default("Not found",404)}).then(function(e){return new Y.SyncList(l.services,e,function(e){return l.removeFromCache(e)})}).then(function(e){return l.entities.store(e)}).then(i));case 4:case"end":return t.stop()}},t,this)}))}},{key:"shutdown",value:function(){return T(this,void 0,void 0,u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.subscriptions.shutdown();case 2:return e.next=4,this.services.twilsock.disconnect();case 4:case"end":return e.stop()}},e,this)}))}},{key:"updateToken",value:function(e){return T(this,void 0,void 0,u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.emsClient.setToken(e);case 2:return n=t.sent,this.services.config.updateToken(n.token),t.next=6,b.default.all([this.services.notifications.updateToken(e),this.services.twilsock.updateToken(e)]);case 6:this.fpaToken=e;case 7:case"end":return t.stop()}},t,this)}))}},{key:"connectionState",get:function(){return this.services.notifications.connectionState}}],[{key:"version",get:function(){return U}}]),t}(k.EventEmitter);n.SyncClient=F,n.Client=F,Object.defineProperty(n,"__esModule",{value:!0}),n.default=F},{"../package.json":212,"./clientInfo":194,"./configuration":195,"./entitiesCache":196,"./logger":200,"./network":202,"./router":205,"./subscriptions":206,"./syncdocument":207,"./syncerror":208,"./synclist":209,"./syncmap":210,"./utils":211,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":28,events:169,"twilio-ems-client":182,"twilio-notifications":187,"twilio-transport":214,twilsock:217}],194:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/classCallCheck"),s=r(i),o=e("platform"),a=function e(t){(0,s.default)(this,e),this.sdk="js",this.sdkVer=t,this.os=o.os.family,this.osVer=o.os.version,this.pl=o.name,this.plVer=o.version};n.ClientInfo=a,Object.defineProperty(n,"__esModule",{value:!0}),n.default=a},{"babel-runtime/helpers/classCallCheck":21,platform:174}],195:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/classCallCheck"),s=r(i),o=e("babel-runtime/helpers/createClass"),a=r(o),u="https://cds.twilio.com",c="/v4/Subscriptions",l="/v3/Maps",d="/v3/Lists",h="/v3/Documents",f=function(){function e(t,n){(0,s.default)(this,e),n=(n||{}).DataSync||{};var r=n.cdsUri||u;this._token=t,this.settings={subscriptionsUri:r+c,documentsUri:r+h,listsUri:r+d,mapsUri:r+l}}return(0,a.default)(e,[{key:"updateToken",value:function(e){this._token=e}},{key:"token",get:function(){return this._token}},{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}}]),e}();n.Configuration=f},{"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],196:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/map"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l=function(){function e(){(0,a.default)(this,e),this.names=new s.default,this.entities=new s.default}return(0,c.default)(e,[{key:"store",value:function(e){var t=this.entities.get(e.sid);return t?t:(this.entities.set(e.sid,e),e.uniqueName&&this.names.set(e.type+"::"+e.uniqueName,e.sid),e)}},{key:"getResolved",value:function(e,t){var n=this.names.get(t+"::"+e);return n?this.entities.get(n):null}},{key:"get",value:function(e,t){return this.entities.get(e)||this.getResolved(e,t)||null}},{key:"remove",value:function(e){var t=this.entities.get(e);t&&(this.entities.delete(e),t.uniqueName&&this.names.delete(t.type+"::"+t.uniqueName))}}]),e}();n.EntitiesCache=l},{"babel-runtime/core-js/map":5,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],197:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/get-prototype-of"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),d=r(l),h=e("babel-runtime/helpers/inherits"),f=r(h),p=e("events"),m=function(e){function t(e){(0,a.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return n.services=e,n}return(0,f.default)(t,e),(0,c.default)(t,[{key:"reportFailure",value:function(e){404===e.status?this.onRemoved(!1):this.emit("failure",e)}},{key:"_subscribe",value:function(){return this.services.router.subscribe(this.sid,this),this}},{key:"_unsubscribe",value:function(){return this.services.router.unsubscribe(this.sid,this),this}},{key:"close",value:function(){this._unsubscribe()}}]),t}(p.EventEmitter);n.SyncEntity=m,Object.defineProperty(n,"__esModule",{value:!0}),n.default=m},{"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],198:[function(e,t,n){"use strict";var r=e("./client");n.SyncClient=r.SyncClient,Object.defineProperty(n,"__esModule",{value:!0}),n.default=r.SyncClient},{"./client":193}],199:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/classCallCheck"),s=r(i),o=e("babel-runtime/helpers/createClass"),a=r(o),u=function(){function e(t){(0,s.default)(this,e),this.data=t}return(0,a.default)(e,[{key:"update",value:function(e,t,n){return this.data.lastEventId=e,this.data.revision=t,this.data.value=n,this}},{key:"uri",get:function(){return this.data.uri}},{key:"revision",get:function(){return this.data.revision}},{key:"lastEventId",get:function(){return this.data.lastEventId}},{key:"index",get:function(){return this.data.index}},{key:"value",get:function(){return this.data.value}}]),e}();n.ListItem=u,Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],200:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return[e].concat((0,o.default)(t))}var s=e("babel-runtime/core-js/array/from"),o=r(s),a=e("loglevel");Object.defineProperty(n,"__esModule",{value:!0}),n.default={setLevel:function(e){a.setLevel(e)},trace:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.trace.apply(null,i("Sync T:",t))},debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.debug.apply(null,i("Sync D:",t))},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.info.apply(null,i("Sync I:",t))},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.warn.apply(null,i("Sync W:",t))},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.error.apply(null,i("Sync E:",t))}}},{"babel-runtime/core-js/array/from":1,loglevel:172}],201:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/classCallCheck"),s=r(i),o=e("babel-runtime/helpers/createClass"),a=r(o),u=function(){function e(t){(0,s.default)(this,e),this.data=t}return(0,a.default)(e,[{key:"update",value:function(e,t,n){return this.data.lastEventId=e,this.data.revision=t,this.data.value=n,this}},{key:"uri",get:function(){return this.data.uri}},{key:"revision",get:function(){return this.data.revision}},{key:"lastEventId",get:function(){return this.data.lastEventId}},{key:"key",get:function(){return this.data.key}},{key:"value",get:function(){return this.data.value}}]),e}();n.MapItem=u,Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],202:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){throw 429===e.status?new f.SyncError(e.body.message,429):e}var s=e("babel-runtime/core-js/json/stringify"),o=r(s),a=e("babel-runtime/helpers/classCallCheck"),u=r(a),c=e("babel-runtime/helpers/createClass"),l=r(c),d=e("uuid"),h=e("./logger"),f=e("./syncerror"),p=function(){function e(t,n,r,i){(0,u.default)(this,e),this.productId=t,this.clientInfo=n,this.config=r,this.transport=i}return(0,l.default)(e,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":(0,o.default)(this.clientInfo),"Twilio-Request-Id":"RQ"+d.v4().replace(/-/g,""),"X-Twilio-Product-Id":this.productId,"X-Twilio-Token":this.config.token}}},{key:"get",value:function(e){var t=this.createHeaders();return h.default.debug("GET",e,"ID:",t["Twilio-Request-Id"]),this.transport.get(e,t).catch(i)}},{key:"post",value:function(e,t,n,r){var s=this.createHeaders();return void 0!==n&&(s["If-Match"]=n),h.default.debug("POST",e,"ID:",s["Twilio-Request-Id"]),this.transport.post(e,s,t,r).catch(i)}},{key:"put",value:function(e,t,n){var r=this.createHeaders();return void 0!==n&&(r["If-Match"]=n),h.default.debug("PUT",e,"ID:",r["Twilio-Request-Id"]),this.transport.put(e,r,t).catch(i)}},{key:"delete",value:function(e){var t=this.createHeaders();return h.default.debug("DELETE",e,"ID:",t["Twilio-Request-Id"]),this.transport.delete(e,t).catch(i)}}]),e}();n.Network=p,Object.defineProperty(n,"__esModule",{value:!0}),n.default=p},{"./logger":200,"./syncerror":208,"babel-runtime/core-js/json/stringify":4,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,uuid:224}],203:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/regenerator"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/core-js/promise"),d=r(l),h=function(e,t,n,r){return new(n||(n=d.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},f=function(){function e(t,n,r,i){(0,a.default)(this,e),this.prevToken=r,this.nextToken=i,this.items=t,this.source=n}return(0,c.default)(e,[{key:"nextPage",value:function(){return h(this,void 0,void 0,s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasNextPage){e.next=2;break}throw new Error("No next page");case 2:return e.abrupt("return",this.source(this.nextToken));case 3:case"end":return e.stop()}},e,this)}))}},{key:"prevPage",value:function(){return h(this,void 0,void 0,s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasPrevPage){e.next=2;break}throw new Error("No previous page");case 2:return e.abrupt("return",this.source(this.prevToken));case 3:case"end":return e.stop()}},e,this)}))}},{key:"hasNextPage",get:function(){return!!this.nextToken}},{key:"hasPrevPage",get:function(){return!!this.prevToken}}]),e}();n.Paginator=f,Object.defineProperty(n,"__esModule",{value:!0}),n.default=f},{"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/regenerator":28}],204:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/freeze"),s=r(i),o=e("babel-runtime/core-js/promise"),a=r(o),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),d=r(l),h=function(){function e(){(0,c.default)(this,e),this.queue=new Array,this.isActive=!1}return(0,d.default)(e,[{key:"wakeupQueue",value:function(){var e=this;!this.isActive&&this.queue.length>0&&(this.isActive=!0,setTimeout(function(){return e.executeTask(e.queue[0])},0))}},{key:"pickNext",value:function(){var e=this;if(this.queue.shift(),0===this.queue.length)return void(this.isActive=!1);setTimeout(function(){return e.executeTask(e.queue[0])},0)}},{key:"pickSame",value:function(e){var t=this;this.queue[0].arg=e,setTimeout(function(){return t.executeTask(t.queue[0])},0)}},{key:"executeTask",value:function(e){var t=this;e.task(e.context,e.arg).then(function(n){t.pickNext(),e.resolve(n)}).catch(function(n){try{if(!e.handle)throw n;e.handle(n).then(function(e){return t.pickSame(e)}).catch(e.reject)}catch(t){e.reject(n)}})}},{key:"add",value:function(e,t,n,r){var i=this;return new a.default(function(s,o){i.queue.push({task:e,context:t,arg:n,handle:r,resolve:s,reject:o}),i.wakeupQueue()})}}]),e}();n.RetryingQueue=h,(0,s.default)(h),Object.defineProperty(n,"__esModule",{value:!0}),n.default=h},{"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],205:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/regenerator"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/core-js/promise"),d=r(l),h=function(e,t,n,r){return new(n||(n=d.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},f=e("./logger"),p="com.twilio.rtd.cds.document",m="com.twilio.rtd.cds.list",_="com.twilio.rtd.cds.map",g="twilio.sync.event",v=function(){function e(t){var n=this;(0,a.default)(this,e),this.config=t.config,this.subscriptions=t.subscriptions,this.notifications=t.notifications,this.notifications.subscribe(g),this.notifications.subscribe(p),this.notifications.subscribe(m),this.notifications.subscribe(_),this.notifications.on("message",function(e,t){return n.onMessage(e,t)}),this.notifications.on("transportReady",function(e){e&&n.onConnected()})}return(0,c.default)(e,[{key:"onMessage",value:function(e,t){switch(e){case p:case m:case _:case g:f.default.trace("Notification type:",e,"content:",t),this.subscriptions.acceptMessage(t)}}},{key:"subscribe",value:function(e,t){return h(this,void 0,void 0,s.default.mark(function n(){return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.subscriptions.add(e,t);case 2:case"end":return n.stop()}},n,this)}))}},{key:"unsubscribe",value:function(e,t){return h(this,void 0,void 0,s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriptions.remove(e);case 2:case"end":return t.stop()}},t,this)}))}},{key:"onConnected",value:function(){this.subscriptions.poke()}}]),e}();n.Router=v,Object.defineProperty(n,"__esModule",{value:!0}),n.default=v},{"./logger":200,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/regenerator":28}],206:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/regenerator"),s=r(i),o=e("babel-runtime/helpers/slicedToArray"),a=r(o),u=e("babel-runtime/core-js/get-iterator"),c=r(u),l=e("babel-runtime/helpers/extends"),d=r(l),h=e("babel-runtime/core-js/map"),f=r(h),p=e("babel-runtime/helpers/classCallCheck"),m=r(p),_=e("babel-runtime/helpers/createClass"),g=r(_),v=e("babel-runtime/core-js/promise"),y=r(v),b=function(e,t,n,r){return new(n||(n=y.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},T=e("backoff"),k=e("./logger"),w=e("./syncerror"),M=e("twilio-transport"),S=1e3,L=function(){function e(t){(0,m.default)(this,e),this.localObject=t,this.correlationId=null}return(0,g.default)(e,[{key:"markAsFailed",value:function(e){this.pendingPokeTimer&&clearTimeout(this.pendingPokeTimer),this.rejectedWithError=e}},{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"isInTransition",get:function(){return null!==this.correlationId}}]),e}(),E=function(){function e(t){var n=this;(0,m.default)(this,e),this.services=t,this.subscriptions=new f.default,this.persisted=new f.default;var r={randomisationFactor:.2,initialDelay:100,maxDelay:12e4};this.backoff=T.exponential((0,d.default)(r,this.services.config.backoffConfig)),this.backoff.on("ready",function(){var e=n.getSubscriptionUpdateBatch(),t=e.action,r=e.subscriptions;t?n.applyNewSubscriptionUpdateBatch(t,r):(n.backoff.reset(),k.default.info("All subscriptions resolved."))})}return(0,g.default)(e,[{key:"getSubscriptionUpdateBatch",value:function(){function e(e,t,n,r){var i=[],s=!0,o=!1,u=void 0;try{for(var l,d=(0,c.default)(e);!(s=(l=d.next()).done);s=!0){var h=(0,a.default)(l.value,2),f=h[0],p=h[1];if(!t.get(f)&&(n||!p.isInTransition)&&!p.rejectedWithError&&(i.push(p),r&&i.length>=r))break}}catch(e){o=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(o)throw u}}return i}var t=e(this.subscriptions,this.persisted,!1,S).map(function(e){return new L(e)});if(t.length>0)return{action:"establish",subscriptions:t};var n=e(this.persisted,this.subscriptions,!0,S);return n.length>0?{action:"cancel",subscriptions:n}:{action:null,subscriptions:null}}},{key:"persist",value:function(){try{this.backoff.backoff()}catch(e){}}},{key:"applyNewSubscriptionUpdateBatch",value:function(e,t){return b(this,void 0,void 0,s.default.mark(function n(){var r,i,o,a,u,l,d,h,f,p,m,_,g,v,y,b,T,w,S,L;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(t=this.processLocalActions(e,t),r=(new Date).getTime(),i=!0,o=!1,a=void 0,n.prev=5,u=(0,c.default)(t);!(i=(l=u.next()).done);i=!0)d=l.value,this.recordActionAttemptOn(d,e,r);n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),o=!0,a=n.t0;case 13:n.prev=13,n.prev=14,!i&&u.return&&u.return();case 16:if(n.prev=16,!o){n.next=19;break}throw a;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.prev=21,n.next=24,this.request(e,r,t.map(function(t){return{object_sid:t.sid,object_type:t.type,last_event_id:"establish"===e?t.lastEventId:void 0}}));case 24:if(h=n.sent,"establish"!==e){n.next=45;break}for(f=!0,p=!1,m=void 0,n.prev=29,_=(0,c.default)(t);!(f=(g=_.next()).done);f=!0)v=g.value,v.correlationId===r&&this.beginReplayTimeout(h.body.estimated_delivery_in_ms,v,e,r);n.next=37;break;case 33:n.prev=33,n.t1=n.catch(29),p=!0,m=n.t1;case 37:n.prev=37,n.prev=38,!f&&_.return&&_.return();case 40:if(n.prev=40,!p){n.next=43;break}throw m;case 43:return n.finish(40);case 44:return n.finish(37);case 45:this.backoff.reset(),n.next=70;break;case 48:for(n.prev=48,n.t2=n.catch(21),y=!0,b=!1,T=void 0,n.prev=53,w=(0,c.default)(t);!(y=(S=w.next()).done);y=!0)L=S.value,this.recordActionFailureOn(L,e);n.next=61;break;case 57:n.prev=57,n.t3=n.catch(53),b=!0,T=n.t3;case 61:n.prev=61,n.prev=62,!y&&w.return&&w.return();case 64:if(n.prev=64,!b){n.next=67;break}throw T;case 67:return n.finish(64);case 68:return n.finish(61);case 69:n.t2 instanceof M.TwilsockUnavailableError?(k.default.debug("Twilsock connection (required for subscription) not ready (c:"+r+"); waiting"),this.backoff.reset()):(k.default.debug("Failed an attempt to "+e+" subscriptions (c:"+r+"); retrying",n.t2),this.persist());case 70:case"end":return n.stop()}},n,this,[[5,9,13,21],[14,,16,20],[21,48],[29,33,37,45],[38,,40,44],[53,57,61,69],[62,,64,68]])}))}},{key:"processLocalActions",value:function(e,t){return"cancel"===e?t.filter(function(e){return!e.rejectedWithError}):t}},{key:"recordActionAttemptOn",value:function(e,t,n){if("establish"===t)this.persisted.set(e.sid,e),e.correlationId=n;else{var r=this.persisted.get(e.sid);r&&(r.correlationId=n)}}},{key:"recordActionFailureOn",value:function(e,t){e.correlationId=null,"establish"===t&&this.persisted.delete(e.sid)}},{key:"request",value:function(e,t,n){k.default.debug("Attempting '"+e+"' request (c:"+t+"):",n);var r={event_protocol_version:3,action:e,correlation_id:t,requests:n};return this.services.network.post(this.services.config.subscriptionsUri,r,null,!0)}},{key:"beginReplayTimeout",value:function(e,t,n,r){var i=this;!isNaN(parseFloat(e))&&isFinite(e)&&e>0&&(t.pendingPokeTimer=setTimeout(function(){t.correlationId===r&&(k.default.debug("Attempt to "+n+" "+t.sid+" (c:"+r+") timed out without confirmation; trying again."),t.correlationId=null,i.persisted.delete(t.sid),i.persist())},e))}},{key:"add",value:function(e,t){k.default.debug("Establishing intent to subscribe to "+e);var n=this.subscriptions.get(e);n&&n.lastEventId===t.lastEventId||(this.persisted.delete(e),this.subscriptions.set(e,t),this.persist())}},{key:"remove",value:function(e){k.default.debug("Establishing intent to unsubscribe from "+e),this.subscriptions.delete(e)&&this.persist()}},{key:"acceptMessage",value:function(e){switch(k.default.trace("Subscriptions received",e),e.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(e.event,e.correlation_id);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(e.event,e.correlation_id);break;case"subscription_failed":this.applySubscriptionFailedMessage(e.event,e.correlation_id);break;case(e.event_type.match(/^(?:map|list|document)_/)||{}).input:var t=function(){return e.event_type.match(/^map_/)?e.event.map_sid:e.event_type.match(/^list_/)?e.event.list_sid:e.event_type.match(/^document_/)?e.event.document_sid:void 0};this.applyEventToSubscribedEntity(t(),e);break;default:k.default.debug("Dropping unknown message type "+e.event_type)}}},{key:"applySubscriptionEstablishedMessage",value:function(e,t){var n=e.object_sid,r=this.persisted.get(e.object_sid);r&&r.correlationId===t?"interrupted"===e.replay_status?(k.default.debug("Event Replay for subscription to "+n+" (c:"+t+") interrupted; continuing eagerly."),clearTimeout(r.pendingPokeTimer),r.pendingPokeTimer=null,r.correlationId=null,this.persisted.delete(r.sid),this.backoff.reset()):"completed"===e.replay_status&&(k.default.debug("Event Replay for subscription to "+n+" (c:"+t+") completed. Subscription is ready."),clearTimeout(r.pendingPokeTimer),r.pendingPokeTimer=null,r.correlationId=null,this.persisted.set(e.object_sid,r),this.backoff.reset()):k.default.debug("Late message for "+e.object_sid+" (c:"+t+") dropped."),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(e,t){var n=this.persisted.get(e.object_sid);n&&n.correlationId===t?(clearTimeout(n.pendingPokeTimer),n.pendingPokeTimer=null,n.correlationId=null,this.persisted.delete(e.object_sid)):k.default.debug("Late message for "+e.object_sid+" (c:"+t+") dropped."),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(e,t){var n=e.object_sid,r=this.subscriptions.get(n),i=this.persisted.get(n);r&&i?i.correlationId===t&&(i.markAsFailed(e.error),k.default.error("Failed to subscribe on "+i.sid,e.error),r.reportFailure(new w.SyncError("Failed to subscribe on service events: "+e.error.message,e.error.status))):!r&&i&&this.persisted.delete(n),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(e,t){var n=e?this.subscriptions.get(e):null;n?(t.event.type=t.event_type,n._update(t.event)):k.default.debug("Message dropped for SID '"+e+"', for which there is no subscription.")}},{key:"poke",value:function(){k.default.info("Triggering event replay for all subscriptions.");var e=[],t=!0,n=!1,r=void 0;try{for(var i,s=(0,c.default)(this.persisted);!(t=(i=s.next()).done);t=!0){var o=(0,a.default)(i.value,2),u=(o[0],o[1]);clearTimeout(u.pendingPokeTimer),u.pendingPokeTimer=null,u.correlationId=null,u.rejectedWithError&&e.push(u)}}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}this.persisted.clear();var l=!0,d=!1,h=void 0;try{for(var f,p=(0,c.default)(e);!(l=(f=p.next()).done);l=!0){var u=f.value;this.persisted.set(u.sid,u)}}catch(e){d=!0,h=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw h}}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),e}();n.Subscriptions=E,Object.defineProperty(n,"__esModule",{value:!0}),n.default=E},{"./logger":200,"./syncerror":208,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":5,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/extends":23,"babel-runtime/helpers/slicedToArray":26,"babel-runtime/regenerator":28,backoff:29,"twilio-transport":214}],207:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/extends"),s=r(i),o=e("babel-runtime/regenerator"),a=r(o),u=e("babel-runtime/core-js/object/get-prototype-of"),c=r(u),l=e("babel-runtime/helpers/classCallCheck"),d=r(l),h=e("babel-runtime/helpers/createClass"),f=r(h),p=e("babel-runtime/helpers/possibleConstructorReturn"),m=r(p),_=e("babel-runtime/helpers/inherits"),g=r(_),v=e("babel-runtime/core-js/promise"),y=r(v),b=function(e,t,n,r){return new(n||(n=y.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},T=e("./logger"),k=e("./entity"),w=e("rfc6902"),M=e("./retryingqueue"),S=function(e){function t(e,n,r){(0,d.default)(this,t);var i=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return i.actionQueue=new M.RetryingQueue,i.descriptor=n,i.onRemoveDocument=r,i}return(0,g.default)(t,e),(0,f.default)(t,[{key:"_update",value:function(e){switch(e.type){case"document_updated":if(e.id>this.lastEventId){var t=this.descriptor.data;this.descriptor.last_event_id=e.id,this.descriptor.revision=e.document_revision,this.descriptor.data=e.document_data,this.traverse(t,e.document_data,!1),this.emit("updated",e.document_data,!1),this.emit("updatedRemotely",e.document_data)}break;case"document_removed":this.onRemoved(!1)}}},{key:"traverse",value:function(e,t,n){var r=this;w.createPatch(e,t).forEach(function(e){"add"===e.op?(r.emit("keyAdded",e.path,e.value,n),n||r.emit("keyAddedRemotely",e.path,e.value)):"replace"===e.op?(r.emit("keyUpdated",e.path,e.value,n),n||r.emit("keyUpdatedRemotely",e.path,e.value)):"remove"===e.op&&(r.emit("keyRemoved",e.path,n),n||r.emit("keyRemovedRemotely",e.path))})}},{key:"get",value:function(e){return this.value}},{key:"set",value:function(e,t){return this._actualSet(e,t?function(){throw new Error("Revision mismatch")}:null)}},{key:"_actualSet",value:function(e,t){var n=this,r=void 0,i={data:e,revision:t?this.revision:void 0};return t&&(r=function(r){return b(n,void 0,void 0,a.default.mark(function n(){return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(412!==r.status){n.next=4;break}return n.next=3,this.softSync();case 3:return n.abrupt("return",{revision:this.revision,data:t(this.value,e)});case 4:throw r;case 5:case"end":return n.stop()}},n,this)}))}),this.actionQueue.add(this._set.bind(this),this.uri,i,r).then(function(e){return n.descriptor.revision=e.revision,n.descriptor.data=e.data,n.emit("updated",n.value,!0),n.value})}},{key:"mutate",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._actualSet(e(this.value),e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"update",value:function(e){return this.mutate(function(t){return(0,s.default)(t,e)})}},{key:"_set",value:function(e,t){return b(this,void 0,void 0,a.default.mark(function e(){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.post(this.uri,{data:t.data},t.revision);case 2:return n=e.sent,e.abrupt("return",{revision:n.body.revision,data:t.data});case 4:case"end":return e.stop()}},e,this)}))}},{key:"softSync",value:function(){var e=this;return this.services.network.get(this.uri).then(function(t){return e._update({type:"document_updated",id:t.body.last_event_id,document_revision:t.body.revision,document_data:t.body.data}),e}).catch(function(t){404===t.status?e.onRemoved(!1):T.default.error("Can't get updates for "+e.sid+":",t)})}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.emit("removed",e),e||this.emit("removedRemotely")}},{key:"removeDocument",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.onRemoveDocument(this.sid),e.next=3,this.services.network.delete(this.uri);case 3:this.onRemoved(!0);case 4:case"end":return e.stop()}},e,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"value",get:function(){return this.descriptor.data}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"type",get:function(){return"document"}}],[{key:"type",get:function(){return"document"}}]),t}(k.SyncEntity);n.SyncDocument=S,Object.defineProperty(n,"__esModule",{value:!0}),n.default=S},{"./entity":197,"./logger":200,"./retryingqueue":204,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/extends":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":28,rfc6902:181}],208:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/get-prototype-of"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),c=r(u),l=e("babel-runtime/helpers/inherits"),d=r(l),h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,a.default)(this,t);var r=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return r.name=r.constructor.name,r.message=e,r.status=n,r}return(0,d.default)(t,e),t}(Error);n.SyncError=h,Object.defineProperty(n,"__esModule",{value:!0}),n.default=h},{"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25}],209:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/extends"),s=r(i),o=e("babel-runtime/regenerator"),a=r(o),u=e("babel-runtime/core-js/object/get-prototype-of"),c=r(u),l=e("babel-runtime/helpers/classCallCheck"),d=r(l),h=e("babel-runtime/helpers/createClass"),f=r(h),p=e("babel-runtime/helpers/possibleConstructorReturn"),m=r(p),_=e("babel-runtime/helpers/inherits"),g=r(_),v=e("babel-runtime/core-js/promise"),y=r(v),b=function(e,t,n,r){return new(n||(n=y.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},T=e("./utils"),k=e("./logger"),w=e("./entity"),M=e("./retryingqueue"),S=e("./listitem"),L=e("./paginator"),E=e("./cache"),C=function(e){function t(e,n,r){(0,d.default)(this,t);var i=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return i.actionQueue=new M.RetryingQueue,i.cache=new E.Cache,i.descriptor=n,i.onRemoveList=r,i}return(0,g.default)(t,e),(0,f.default)(t,[{key:"__set",value:function(e,t){return b(this,void 0,void 0,a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.services.network.post(e,{data:t.data},t.revision);case 2:return r=n.sent,r.body.data=t.data,n.abrupt("return",r.body);case 5:case"end":return n.stop()}},n,this)}))}},{key:"_set",value:function(e,t,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,s,o=this;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=5;break}return r.next=3,this.services.network.post(e.uri,{data:t});case 3:return i=r.sent,r.abrupt("return",e.update(i.body.last_event_id,i.body.revision,t));case 5:return s=function(r){if(412===r.status)return o.queryEvents().then(function(){return o.get(e.index)}).then(function(e){return{revision:e.revision,data:n(e.value,t)}});throw r},r.abrupt("return",this.actionQueue.add(this.__set.bind(this),e.uri,{revision:e.revision,data:t},s).then(function(t){return e.update(t.last_event_id,t.revision,t.data)}));case 7:case"end":return r.stop()}},r,this)}))}},{key:"push",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){var n,r,i;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.post(this.links.items,{data:e});case 2:return n=t.sent,r=Number(n.body.index),i=this.cache.store(r,new S.ListItem({index:r,revision:n.body.revision,lastEventId:n.body.last_event_id,uri:n.body.url,value:e}),n.body.last_event_id),this.emit("itemAdded",i,!0),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}))}},{key:"set",value:function(e,t){return this._actualSet(e,t)}},{key:"_actualSet",value:function(e,t,n){return b(this,void 0,void 0,a.default.mark(function r(){var i;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(e);case 2:return i=r.sent,r.next=5,this._set(i,t,n);case 5:return i=r.sent,this.emit("itemUpdated",i,!0),r.abrupt("return",i);case 8:case"end":return r.stop()}},r,this)}))}},{key:"mutate",value:function(e,t){return b(this,void 0,void 0,a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.get(e);case 2:return r=n.sent,n.abrupt("return",this._actualSet(e,t(r.value),t));case 4:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(e,t){return b(this,void 0,void 0,a.default.mark(function n(){return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.mutate(e,function(e){return(0,s.default)(e,t)}));case 1:case"end":return n.stop()}},n,this)}))}},{key:"remove",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return n=t.sent,t.next=5,this.services.network.delete(n.uri);case 5:this.cache.delete(e,n.lastEventId),this.emit("itemRemoved",e,!0);case 7:case"end":return t.stop()}},t,this)}))}},{key:"get",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){var n,r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.cache.get(e),!n){t.next=3;break}return t.abrupt("return",n);case 3:return t.next=5,this.queryItems({index:e});case 5:if(r=t.sent,!(r.items.length<1)){t.next=8;break}throw new Error("No item with index "+e+" found");case 8:return t.abrupt("return",this.cache.store(e,r.items[0],r.items[0].lastEventId));case 9:case"end":return t.stop()}},t,this)}))}},{key:"queryEvents",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){var t,n,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.links.events+"?From="+(this.lastEventId+1)+"&PageSize=100",e.next=3,this.services.network.get(t);case 3:n=e.sent,n.body.events.forEach(function(e){return r._update(e)});case 5:case"end":return e.stop()}},e,this)}))}},{key:"queryItems",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){var n,r,i,s,o=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},n=new T.UriBuilder(this.links.items).arg("From",e.from).arg("PageSize",e.limit).arg("Index",e.index).arg("PageToken",e.pageToken).arg("Order",e.order).build(),t.next=4,this.services.network.get(n);case 4:return r=t.sent,i=r.body.items.map(function(e){return o.cache.store(Number(e.index),new S.ListItem({index:Number(e.index),uri:e.url,revision:e.revision,lastEventId:e.last_event_id,value:e.data}),e.last_event_id)}),s=r.body.meta,t.abrupt("return",new L.Paginator(i,function(e){return o.queryItems({pageToken:e})},s.previous_token,s.next_token));case 8:case"end":return t.stop()}},t,this)}))}},{key:"getItems",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",t.abrupt("return",this.queryItems(e));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getContext",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.context){e.next=2;break}return e.abrupt("return",this.context);case 2:return e.next=4,this.services.network.get(this.links.context);case 4:return t=e.sent,this.context=t.body.data,e.abrupt("return",this.context);case 7:case"end":return e.stop()}},e,this)}))}},{key:"updateContext",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.services.network.post(this.links.context,{data:e});case 3:return this.context=e,this.emit("contextUpdated",e,!0),t.abrupt("return",this);case 8:throw t.prev=8,t.t0=t.catch(0),k.default.error("Failed to update context",t.t0),t.t0;case 12:case"end":return t.stop()}},t,this,[[0,8]])}))}},{key:"removeList",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.onRemoveList(this.sid),e.next=3,this.services.network.delete(this.uri);case 3:this.onRemoved(!0);case 4:case"end":return e.stop()}},e,this)}))}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.emit("collectionRemoved",e),e||this.emit("collectionRemovedRemotely")}},{key:"softSync",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.queryEvents();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),404===e.t0.status?this.onRemoved(!1):k.default.error("Can't get updates for "+this.sid+":",e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}))}},{key:"shouldIgnoreEvent",value:function(e,t){return this.cache.isKnown(e,t)}},{key:"_update",value:function(e){var t=Number(e.item_index);switch(e.type){case"list_item_added":this._handleItemAdded(t,e.item_url,e.id,e.item_revision,e.item_data);break;case"list_item_updated":this._handleItemUpdated(t,e.item_url,e.id,e.item_revision,e.item_data);break;case"list_item_removed":this._handleItemRemoved(t,e.id);break;case"list_context_updated":this._handleContextUpdate(e.context_data,e.id);break;case"list_removed":this.onRemoved(!1)}this.lastEventId<e.id&&(this.descriptor.revision=e.list_revision,this.descriptor.last_event_id=e.id)}},{key:"_handleItemAdded",value:function(e,t,n,r,i){if(!this.cache.isKnown(e,n)){var s=new S.ListItem({index:e,uri:t,lastEventId:n,revision:r,value:i});this.cache.store(e,s,n),this.emit("itemAdded",s,!1),this.emit("itemAddedRemotely",s)}}},{key:"_handleItemUpdated",value:function(e,t,n,r,i){var s=this.cache.get(e);s||this.shouldIgnoreEvent(e,n)?s&&n>s.lastEventId&&(s.update(n,r,i),this.emit("itemUpdated",s,!1),this.emit("itemUpdatedRemotely",s)):(s=this.cache.store(e,new S.ListItem({index:e,uri:t,lastEventId:n,revision:r,value:i}),n),this.emit("itemUpdated",s,!1),this.emit("itemUpdatedRemotely",s))}},{key:"_handleItemRemoved",value:function(e,t){this.cache.delete(e,t),this.emit("itemRemoved",e,!1),this.emit("itemRemovedRemotely",e)}},{key:"_handleContextUpdate",value:function(e,t){this.lastEventId<t&&(this.context=e,this.emit("contextUpdated",e,!1),this.emit("contextUpdatedRemotely",e))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"type",get:function(){return"list"}}],[{key:"type",get:function(){return"list"}}]),t}(w.SyncEntity);n.SyncList=C,Object.defineProperty(n,"__esModule",{value:!0}),n.default=C},{"./cache":192,"./entity":197,"./listitem":199,"./logger":200,"./paginator":203,"./retryingqueue":204,"./utils":211,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/extends":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":28}],210:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/helpers/extends"),s=r(i),o=e("babel-runtime/regenerator"),a=r(o),u=e("babel-runtime/core-js/object/get-prototype-of"),c=r(u),l=e("babel-runtime/helpers/classCallCheck"),d=r(l),h=e("babel-runtime/helpers/createClass"),f=r(h),p=e("babel-runtime/helpers/possibleConstructorReturn"),m=r(p),_=e("babel-runtime/helpers/inherits"),g=r(_),v=e("babel-runtime/core-js/promise"),y=r(v),b=function(e,t,n,r){return new(n||(n=y.default))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},T=e("./utils"),k=e("./logger"),w=e("./entity"),M=e("./retryingqueue"),S=e("./mapitem"),L=e("./paginator"),E=e("./cache"),C=function(e){function t(e,n,r){(0,d.default)(this,t);var i=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return i.actionQueue=new M.RetryingQueue,i.cache=new E.Cache,i.descriptor=n,i.onRemoveMap=r,i}return(0,g.default)(t,e),(0,f.default)(t,[{key:"_get",value:function(e){return this.queryItems({key:e}).then(function(t){if(t.items.length<1)throw new Error("No item with key "+e+" found");return t.items[0]})}},{key:"__set",value:function(e,t){return this.services.network.post(e,{data:t.data},t.revision).then(function(e){return e=e.body,e.data=t.data,e})}},{key:"_set",value:function(e,t,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,s=this;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return",this.__set(e,{data:t.data}));case 2:return i=function(e){return b(s,void 0,void 0,a.default.mark(function r(){var i;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(412!==e.status){r.next=7;break}return r.next=3,this.queryEvents();case 3:return r.next=5,this.get(t.key);case 5:return i=r.sent,r.abrupt("return",{revision:i.revision,data:n(i.value,t.data)});case 7:throw e;case 8:case"end":return r.stop()}},r,this)}))},r.abrupt("return",this.actionQueue.add(this.__set.bind(this),e,{revision:t.revision,data:t.data},i));case 4:case"end":return r.stop()}},r,this)}))}},{key:"_tryAddOrUpdate",value:function(e,t,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,s,o,u,c;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.services.network.post(e,t);case 3:return i=r.sent,i.body.data=t.data,r.abrupt("return",{added:!0,value:i.body});case 8:if(r.prev=8,r.t0=r.catch(0),409===r.t0.status){r.next=12;break}throw r.t0;case 12:if(s=r.t0.body.links.item,n){r.next=20;break}return r.next=16,this._set(s,t,n);case 16:return o=r.sent,r.abrupt("return",{added:!1,value:o});case 20:return r.next=22,this.services.network.get(s);case 22:return u=r.sent,r.next=25,this._set(s,{key:u.key,revision:u.revision,data:t},n);case 25:return c=r.sent,r.abrupt("return",{added:!1,value:c});case 27:case"end":return r.stop()}},r,this,[[0,8]])}))}},{key:"queryEvents",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){var t,n,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.descriptor.links.events+"?From="+(this.lastEventId+1)+"&PageSize=100",e.next=4,this.services.network.get(t);case 4:n=e.sent,n.body.events.forEach(function(e){return r._update(e)}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),k.default.error("Failed to fetch events:",e.t0),e.t0;case 12:case 13:case"end":return e.stop()}},e,this,[[0,8]])}))}},{key:"getContext",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.context){e.next=2;break}return e.abrupt("return",this.context);case 2:return e.next=4,this.services.network.get(this.links.context);case 4:return t=e.sent,this.context=t.body.data,e.abrupt("return",this.context);case 7:case"end":return e.stop()}},e,this)}))}},{key:"updateContext",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.post(this.links.context,{data:e});case 2:this.context=e,this.emit("contextUpdated",e,!0);case 4:case"end":return t.stop()}},t,this)}))}},{key:"set",value:function(e,t){return this._actualSet(e,t)}},{key:"_actualSet",value:function(e,t,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,s,o,u,c,l,d;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.cache.get(e),!i){r.next=9;break}return s={key:e,data:t,revision:i.revision||void 0},r.next=5,this._set(i.uri,s,n);case 5:return o=r.sent,i.update(o.last_event_id,o.revision,o.data),this.emit("itemUpdated",i,!0),r.abrupt("return",i);case 9:return r.next=11,this._tryAddOrUpdate(this.links.items,{key:e,data:t},n);case 11:return u=r.sent,c=u.added,l=u.value,d={key:l.key,revision:l.revision,lastEventId:l.last_event_id,uri:l.url,value:l.data},r.next=17,this.cache.get(e);case 17:return i=r.sent,i&&d.lastEventId>i.lastEventId?i.update(d.lastEventId,d.revision,d.value):i||(i=this.cache.store(e,new S.MapItem(d),d.lastEventId),c?this.emit("itemAdded",i,!0):this.emit("itemUpdated",i,!0)),r.abrupt("return",i);case 20:case"end":return r.stop()}},r,this)}))}},{key:"get",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cache.has(e)){t.next=2;break}return t.abrupt("return",this.cache.get(e));case 2:return t.next=4,this.queryItems({key:e});case 4:if(n=t.sent,!(n.items.length<1)){t.next=7;break}throw new Error("No item with key "+e+" found");case 7:return t.abrupt("return",n.items[0]);case 8:case"end":return t.stop()}},t,this)}))}},{key:"mutate",value:function(e,t){return b(this,void 0,void 0,a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.get(e).then(function(e){return e.value}).catch(function(){return{}});case 2:return r=n.sent,n.abrupt("return",this._actualSet(e,t(r),t));case 4:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(e,t){return b(this,void 0,void 0,a.default.mark(function n(){return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.mutate(e,function(e){return(0,s.default)(e,t)}));case 1:case"end":return n.stop()}},n,this)}))}},{key:"remove",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}throw new Error("Key argument is invalid");case 2:return t.next=4,this.get(e);case 4:return n=t.sent,t.next=7,this.services.network.delete(n.uri);case 7:this.cache.delete(e,n.lastEventId),this.emit("itemRemoved",e,!0);case 9:case"end":return t.stop()}},t,this)}))}},{key:"queryItems",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){var n,r,i,s,o=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},n=new T.UriBuilder(this.links.items).arg("From",e.from).arg("PageSize",e.limit).arg("Key",e.key).arg("PageToken",e.pageToken).arg("Order",e.order).build(),t.next=4,this.services.network.get(n);case 4:return r=t.sent,i=r.body.items.map(function(e){return o.cache.store(e.key,new S.MapItem({key:e.key,uri:e.url,revision:e.revision,lastEventId:e.last_event_id,value:e.data}),e.last_event_id)}),s=r.body.meta,t.abrupt("return",new L.Paginator(i,function(e){return o.queryItems({pageToken:e})},s.previous_token,s.next_token));case 8:case"end":return t.stop()}},t,this)}))}},{key:"getItems",value:function(e){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",t.abrupt("return",this.queryItems(e));case 4:case"end":return t.stop()}},t,this)}))}},{key:"softSync",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.queryEvents();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),404===e.t0.status?this.onRemoved(!1):k.default.error("Can't get updates for "+this.sid+":",e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}))}},{key:"forEach",value:function(e){var t=this;return new y.default(function(n,r){function i(t){t.items.forEach(function(t){return e(t)}),t.hasNextPage?t.nextPage().then(i).catch(r):n()}t.queryItems().then(i).catch(r)})}},{key:"shouldIgnoreEvent",value:function(e,t){return this.cache.isKnown(e,t)}},{key:"_update",value:function(e){switch(e.type){case"map_item_added":this._handleItemAdded(e.item_key,e.item_url,e.id,e.item_revision,e.item_data);break;case"map_item_updated":this._handleItemUpdated(e.item_key,e.item_url,e.id,e.item_revision,e.item_data);break;case"map_item_removed":this._handleItemRemoved(e.item_key,e.id);break;case"map_context_updated":this._handleContextUpdate(e.context_data,e.id);break;case"map_removed":this.onRemoved(!1)}this.lastEventId<e.id&&(this.descriptor.revision=e.map_revision,this.descriptor.last_event_id=e.id)}},{key:"_handleItemAdded",value:function(e,t,n,r,i){if(!this.cache.has(e)&&!this.shouldIgnoreEvent(e,n)){var s=new S.MapItem({key:e,uri:t,lastEventId:n,revision:r,value:i});this.cache.store(e,s,n),this.emit("itemAdded",s,!1),this.emit("itemAddedRemotely",s)}}},{key:"_handleItemUpdated",value:function(e,t,n,r,i){var s=this.cache.get(e);s||this.shouldIgnoreEvent(e,n)?s&&n>s.lastEventId&&(s.update(n,r,i),this.emit("itemUpdated",s,!1),this.emit("itemUpdatedRemotely",s)):(s=new S.MapItem({key:e,uri:t,lastEventId:n,revision:r,value:i}),this.cache.store(e,s,n),this.emit("itemUpdated",s,!1),this.emit("itemUpdatedRemotely",s))}},{key:"_handleItemRemoved",value:function(e,t){this.cache.delete(e,t),this.emit("itemRemoved",e,!1),this.emit("itemRemovedRemotely",e,!1)}},{key:"_handleContextUpdate",value:function(e,t){this.lastEventId<t&&(this.context=e,this.emit("contextUpdated",e,!1),this.emit("contextUpdatedRemotely",e))}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.emit("collectionRemoved",e),e||this.emit("collectionRemovedRemotely")}},{key:"removeMap",value:function(){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.onRemoveMap(this.sid),e.next=3,this.services.network.delete(this.uri);case 3:this.onRemoved(!0);case 4:case"end":return e.stop()}},e,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"type",get:function(){return"map"}}],[{key:"type",get:function(){return"map"}}]),t}(w.SyncEntity);n.SyncMap=C,Object.defineProperty(n,"__esModule",{value:!0}),n.default=C},{"./cache":192,"./entity":197,"./logger":200,"./mapitem":201,"./paginator":203,"./retryingqueue":204,"./utils":211,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/extends":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":28}],211:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return JSON.parse((0,l.default)(e))}var s=e("babel-runtime/helpers/classCallCheck"),o=r(s),a=e("babel-runtime/helpers/createClass"),u=r(a),c=e("babel-runtime/core-js/json/stringify"),l=r(c);n.deepClone=i;var d=function(){function e(t){(0,o.default)(this,e),this.base=t,this.args=new Array,this.paths=new Array}return(0,u.default)(e,[{key:"path",value:function(e){return this.paths.push(e),this}},{key:"arg",value:function(e,t){return void 0!==t&&this.args.push(e+"="+encodeURIComponent(t)),this}},{key:"build",value:function(){var e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}]),e}();n.UriBuilder=d},{"babel-runtime/core-js/json/stringify":4,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],212:[function(e,t,n){t.exports={_args:[[{raw:"twilio-sync@^0.4.2",scope:null,escapedName:"twilio-sync",name:"twilio-sync",rawSpec:"^0.4.2",spec:">=0.4.2 <0.5.0",type:"range"},"/Users/schertkov/workspace/twilio/rtd/js/ipmessaging-js-lib"]],_from:"twilio-sync@>=0.4.2 <0.5.0",_id:"twilio-sync@0.4.2",_inCache:!0,_location:"/twilio-sync",_nodeVersion:"7.5.0",_npmOperationalInternal:{host:"packages-18-east.internal.npmjs.com",tmp:"tmp/twilio-sync-0.4.2.tgz_1487671857135_0.2178721190430224"},_npmUser:{name:"schertkov",email:"schertkov@twilio.com"},_npmVersion:"4.1.2",_phantomChildren:{},_requested:{raw:"twilio-sync@^0.4.2",scope:null,escapedName:"twilio-sync",name:"twilio-sync",rawSpec:"^0.4.2",spec:">=0.4.2 <0.5.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.4.2.tgz",_shasum:"ef4f1137fa5f1575a4f090a4469498d2fa204856",_shrinkwrap:null,_spec:"twilio-sync@^0.4.2",_where:"/Users/schertkov/workspace/twilio/rtd/js/ipmessaging-js-lib",author:{name:"Twilio"},browser:"browser/index.js",dependencies:{"babel-runtime":"^6.23.0",karibu:"^1.0.1",loglevel:"^1.4.1",platform:"^1.3.3",rfc6902:"^1.3.0","twilio-ems-client":"^0.1.5","twilio-notifications":"^0.3.0","twilio-transport":"^0.1.1",twilsock:"^0.2.2",uuid:"^3.0.1"},description:"Twilio Sync client library",devDependencies:{"@types/chai":"^3.4.34","@types/chai-as-promised":"0.0.29","@types/loglevel":"^1.4.29","@types/mocha":"^2.2.39","@types/node":"^7.0.5","@types/sinon":"^1.16.35","@types/sinon-as-promised":"^4.0.5","@types/sinon-chai":"^2.7.27","async-test-tools":"^1.0.6","babel-cli":"^6.23.0","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.22.0",babelify:"^7.3.0",backoff:"^2.5.0",browserify:"^14.1.0",chai:"^3.5.0","chai-as-promised":"^6.0.0",cheerio:"^0.22.0",del:"^2.2.2","event-to-promise":"^0.7.0",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-exit":"0.0.2","gulp-insert":"^0.5.0","gulp-istanbul":"^1.1.1","gulp-mocha":"^3.0.1","gulp-rename":"^1.2.2","gulp-replace":"^0.5.4","gulp-tap":"^0.1.3","gulp-tslint":"^7.1.0","gulp-typescript":"^3.1.4","gulp-uglify":"^2.0.1","gulp-util":"^3.0.8","ink-docstrap":"^1.3.0",isparta:"^4.0.0",jsdoc:"^3.4.3",jsonwebtoken:"^7.3.0",karma:"^1.4.1","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.2.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.2","run-sequence":"^1.2.2",sinon:"^1.17.7","sinon-as-promised":"^4.0.2","sinon-chai":"^2.8.0","ts-node":"^2.1.0",tslint:"^4.4.2",twilio:"^3.3.0-edge",typescript:"^2.1.6",underscore:"^1.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.9.0"},directories:{},dist:{shasum:"ef4f1137fa5f1575a4f090a4469498d2fa204856",tarball:"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.4.2.tgz"},gitHead:"894388524f3fd61ed39162b4ceae3c8100348f1d",license:"MIT",main:"lib/index.js",maintainers:[{name:"schertkov",email:"schertkov@twilio.com"},{name:"twilio-ci",email:"mroberts+twilio-ci@twilio.com"}],name:"twilio-sync",optionalDependencies:{},readme:"ERROR: No README data found!",scripts:{prepublish:"gulp build",test:"gulp unit-test"},version:"0.4.2"}},{}],213:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return e.split("\r\n").map(function(e){return e.split(": ")}).filter(function(e){return 2===e.length&&e[1].length>0}).reduce(function(e,t){return e[t[0]]=t[1],e},{})}function o(e){var t=e.getResponseHeader("Content-Type");if(!t||0!==t.indexOf("application/json")||0===e.responseText.length)return e.responseText;try{return JSON.parse(e.responseText)}catch(t){return e.responseText}}var a=e("babel-runtime/core-js/json/stringify"),u=r(a),c=e("babel-runtime/core-js/promise"),l=r(c),d=e("babel-runtime/core-js/object/define-property"),h=r(d);Object.defineProperty(n,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,h.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="undefined"==typeof XMLHttpRequest?e("xmlhttprequest").XMLHttpRequest:XMLHttpRequest,m=function(){function e(){i(this,e)}return f(e,null,[{key:"request",value:function(e,t){return new l.default(function(n,r){var i=new p;i.open(e,t.url,!0),i.onreadystatechange=function(){if(4===i.readyState){var e=s(i.getAllResponseHeaders()),t=o(i);200<=i.status&&i.status<300?n({status:i.status,headers:e,body:t}):r({status:i.status,description:i.statusText,headers:e,body:t})}};for(var a in t.headers)i.setRequestHeader(a,t.headers[a]),"Content-Type"===a&&"application/json"===t.headers[a]&&(t.body=(0,u.default)(t.body));i.send(t.body)})}},{key:"get",value:function(e){return this.request("GET",e)}},{key:"post",value:function(e){return this.request("POST",e)}},{key:"put",value:function(e){return this.request("PUT",e)}},{key:"delete",value:function(e){return this.request("DELETE",e)}}]),e}();n.default=m,t.exports=m,t.exports=n.default},{"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/define-property":10,"babel-runtime/core-js/promise":15,xmlhttprequest:40}],214:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,I.default)(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,I.default)(t)));e.prototype=(0,A.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(j.default?(0,j.default)(e,t):e.__proto__=t)}function u(e){function t(){var t=(0,x.default)(e,(0,E.default)(arguments));return(0,j.default)(t,(0,S.default)(this)),t}return t.prototype=(0,A.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),j.default?(0,j.default)(t,e):t.__proto__=e,t}function c(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e.hasOwnProperty(t[0])?Array.isArray(e[t[0]])?e[t[0]].push(t[1]):e[t[0]]=[e[t[0]],t[1]]:e[t[0]]=t[1],e},{})}return n}throw new Error("Incorrect URI: "+e)}function l(e,t){var n=c(t),r={method:e,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function d(e,t,n,r){return{to:l(e,t),headers:n,body:r}}function h(e){return{status:e.status,headers:e.header.http_headers,body:e.body}}function f(e,t,n){return{url:e,headers:t,body:n}}function p(e){try{e.body=JSON.parse(e.body)}catch(e){}return e}function m(e){for(var t=(0,w.default)(e.headers),n=t.length,r={};n--;){var i=t[n];r[i.toLowerCase()]=e.headers[i]}return e.headers=r,e}var _=e("babel-runtime/core-js/promise"),g=r(_),v=e("babel-runtime/core-js/map"),y=r(v),b=e("babel-runtime/core-js/object/define-properties"),T=r(b),k=e("babel-runtime/core-js/object/keys"),w=r(k),M=e("babel-runtime/core-js/object/get-prototype-of"),S=r(M),L=e("babel-runtime/core-js/array/from"),E=r(L),C=e("babel-runtime/core-js/reflect/construct"),x=r(C),D=e("babel-runtime/core-js/object/set-prototype-of"),j=r(D),R=e("babel-runtime/core-js/object/create"),A=r(R),Y=e("babel-runtime/helpers/typeof"),I=r(Y),P=e("babel-runtime/core-js/object/define-property"),O=r(P);Object.defineProperty(n,"__esModule",{value:!0}),n.TwilsockUnavailableError=n.Transport=void 0;var N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,O.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),H=e("./httprequest"),U=i(H),F=function(e){function t(){return s(this,t),o(this,(t.__proto__||(0,S.default)(t)).call(this))}return a(t,e),t}(u(Error)),$=function(){function e(t){var n=this;s(this,e),(0,T.default)(this,{_activeGetRequests:{value:new y.default},_twilsock:{value:t},_http:{value:U.default},_twilsockIsAvailable:{get:function(){return n._twilsock&&n._twilsock.isConnected}}}),t&&t.connect()}return N(e,[{key:"get",value:function(e,t,n){var r=this;if(this._activeGetRequests.has(e))return this._activeGetRequests.get(e);var i=this._get(e,t,n).then(function(t){return r._activeGetRequests.delete(e),t}).catch(function(t){throw r._activeGetRequests.delete(e),t});return this._activeGetRequests.set(e,i),i}},{key:"_oneOfBasedOnChannelAvailability",value:function(e,t){var n=this;return function(e){var r=e.sendViaTwilsock,i=e.sendDirectHttp;return n._twilsockIsAvailable?r():t?g.default.reject(new F):i()}(e).then(m)}},{key:"_get",value:function(e,t,n){var r=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return r._twilsock.send(d("GET",e,t)).then(h)},sendDirectHttp:function(){return r._http.get(f(e,t)).then(p)}},n)}},{key:"post",value:function(e,t,n,r){var i=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return i._twilsock.send(d("POST",e,t,n)).then(h)},sendDirectHttp:function(){return i._http.post(f(e,t,n)).then(p)}},r)}},{key:"put",value:function(e,t,n,r){var i=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return i._twilsock.send(d("PUT",e,t,n)).then(h)},sendDirectHttp:function(){return i._http.put(f(e,t,n)).then(p)}},r)}},{key:"delete",value:function(e,t,n){var r=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return r._twilsock.send(d("DELETE",e,t)).then(h)},sendDirectHttp:function(){return r._http.delete(f(e,t)).then(p)}},n)}}]),e}();n.default=$,n.Transport=$,n.TwilsockUnavailableError=F},{"./httprequest":213,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/create":8,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/define-property":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/keys":13,"babel-runtime/core-js/object/set-prototype-of":14,"babel-runtime/core-js/promise":15,"babel-runtime/core-js/reflect/construct":16,"babel-runtime/helpers/typeof":27}],215:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/core-js/object/freeze"),s=r(i),o=e("babel-runtime/core-js/set"),a=r(o),u=e("babel-runtime/core-js/promise"),c=r(u),l=e("babel-runtime/core-js/map"),d=r(l),h=e("babel-runtime/core-js/object/define-properties"),f=r(h),p=e("babel-runtime/core-js/object/get-prototype-of"),m=r(p),_=e("babel-runtime/helpers/classCallCheck"),g=r(_),v=e("babel-runtime/helpers/createClass"),y=r(v),b=e("babel-runtime/helpers/possibleConstructorReturn"),T=r(b),k=e("babel-runtime/helpers/inherits"),w=r(k),M=e("events"),S=r(M),L=e("./logger"),E=r(L),C=e("uuid"),x=r(C),D=e("./configuration"),j=r(D),R=e("./twilsock"),A=r(R),Y=e("./packetinterface"),I=r(Y),P=function(e){function t(e,n){(0,g.default)(this,t);var r=(0,T.default)(this,(t.__proto__||(0,m.default)(t)).call(this));n=n||{},n.logLevel=n.logLevel||"error",E.default.setLevel(n.logLevel);var i=new j.default(e,n),s=new A.default(i),o=new I.default(s);return(0,f.default)(r,{_config:{value:i},_socket:{value:s},_packet:{value:o},_registrations:{value:new d.default},_registrationsInProgress:{value:new d.default},isConnected:{get:function(){return r._socket.isConnected}},connected:{get:function(){return r._socket.isConnected}},state:{get:function(){return r._socket.state}}}),r._socket.on("message",function(e,t){return setTimeout(function(){r.emit("message",e,t)},0)}),r._socket.on("connected",function(){return r._updateRegistrations()}),r._socket.on("connected",function(e){return r.emit("connected",e)}),r._socket.on("disconnected",function(){return r.emit("disconnected")}),r._socket.on("stateChanged",function(e){return r.emit("stateChanged",e)}),r}return(0,w.default)(t,e),(0,y.default)(t,[{key:"send",value:function(e){return this._packet.send(e.to,e.headers,e.body)}},{key:"updateToken",value:function(e){var t=this;return E.default.info("updateToken"),this._config.token===e?c.default.resolve():(this._config.updateToken(e),this._socket.disconnect().then(function(){return t._socket.connect()}),c.default.resolve())}},{key:"_updateRegistration",value:function(e,t){var n=this;E.default.info("update registration for context",e);var r=this._registrationsInProgress.get(e);r||(r=new a.default,this._registrationsInProgress.set(e,r));var i=x.default.v4();return r.add(i),this._packet.putNotificationContext(e,t).then(function(){E.default.info("registration attempt succeeded for context",t),r.delete(i),0===r.size&&(n._registrationsInProgress.delete(e),n.emit("registered",e))}).catch(function(s){E.default.info("registration attempt failed for context",t),E.default.debug(s),r.delete(i),0===r.size&&(n._registrationsInProgress.delete(e),n.emit("registrationFailed",e,s))})}},{key:"_updateRegistrations",value:function(){var e=this;E.default.info("refreshing all registrations"),this._registrations.forEach(function(t,n){e._updateRegistration(n,t)})}},{key:"setNotificationsContext",value:function(e,t){if(!e||!t)throw new Error("Invalid arguments provided");this._registrations.set(e,t),this._socket.isConnected&&this._updateRegistration(e,t)}},{key:"removeNotificationsContext",value:function(e){this._registrations.has(e)&&(this._registrations.delete(e),this._socket.isConnected&&this._packet.deleteNotificationContext(e))}},{key:"connect",value:function(){return this._socket.connect()}},{key:"disconnect",value:function(){return this._socket.disconnect()}}]),t}(S.default);n.default=P,(0,s.default)(P),t.exports=n.default},{"./configuration":216,"./logger":218,"./packetinterface":219,"./twilsock":220,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/core-js/set":17,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169,uuid:224}],216:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/core-js/object/define-properties"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l="wss://tsock.twilio.com",d="/v2/wsconnect",h=function(){function e(t,n){var r=this;(0,a.default)(this,e),n=n||{};var i=n.Twilsock||{},o=i.uri||n.wsServer||l;(0,s.default)(this,{_twilsockWsHost:{value:o+d},_token:{value:t,writable:!0},twilsockUri:{get:function(){return r._twilsockWsHost}},token:{get:function(){return r._token}}})}return(0,c.default)(e,[{key:"updateToken",value:function(e){this._token=e}}]),e}();n.default=h,t.exports=n.default},{"babel-runtime/core-js/object/define-properties":9,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],217:[function(e,t,n){arguments[4][187][0].apply(n,arguments)},{"./client":215,dup:187}],218:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return[e].concat((0,o.default)(t))}Object.defineProperty(n,"__esModule",{value:!0});var s=e("babel-runtime/core-js/array/from"),o=r(s),a=e("loglevel"),u=r(a);n.default={setLevel:function(e){u.default.setLevel(e)},trace:function(){u.default.trace.apply(null,i("Twilsock T:",arguments))},debug:function(){u.default.debug.apply(null,i("Twilsock D:",arguments))},info:function(){u.default.info.apply(null,i("Twilsock I:",arguments))},warn:function(){u.default.warn.apply(null,i("Twilsock W:",arguments))},error:function(){u.default.error.apply(null,i("Twilsock E:",arguments))}},t.exports=n.default},{"babel-runtime/core-js/array/from":1,loglevel:172}],219:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e>=200&&e<300}function s(e){return e&&e.header&&e.header.http_status}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/promise"),a=r(o),u=e("babel-runtime/core-js/map"),c=r(u),l=e("babel-runtime/core-js/object/define-properties"),d=r(l),h=e("babel-runtime/helpers/classCallCheck"),f=r(h),p=e("babel-runtime/helpers/createClass"),m=r(p),_=e("./logger"),g=r(_),v=3e4,y=function(){function e(t){var n=this;(0,f.default)(this,e),(0,d.default)(this,{_activeRequests:{value:new c.default},_socket:{value:t}}),this._socket.on("reply",this._processReply.bind(this)),this._socket.on("disconnected",function(){n._activeRequests.forEach(function(e){clearTimeout(e.timeout),e.reject(new Error("Twilsock disconnected"))}),n._activeRequests.clear()})}return(0,m.default)(e,[{key:"_processReply",value:function(e){var t=this._activeRequests.get(e.id);t&&(clearTimeout(t.timeout),this._activeRequests.delete(e.id),setTimeout(function(){i(e.status.code)?s(e)&&!i(e.header.http_status.code)?t.reject({status:e.header.http_status.code,description:e.header.http_status.status,body:e.body}):t.resolve(e):t.reject(new Error("Transport failure: "+e.status.status))},0))}},{key:"_storeRequest",value:function(e,t,n){var r={resolve:t,reject:n,timeout:setTimeout(function(){g.default.debug("request",e,"is timed out"),n(new Error("Twilsock: request timeout: "+e))},v)};this._activeRequests.set(e,r)}},{key:"send",value:function(e,t,n){var r=this;return new a.default(function(i,s){var o=r._socket.sendUpstreamMessage(e,t,n);g.default.trace("message sent: ",{id:o,address:e,headers:t,body:n}),r._storeRequest(o,i,s)})}},{key:"putNotificationContext",value:function(e,t){var n=this;return new a.default(function(r,i){var s={method:"put_notification_ctx",notification_ctx_id:e},o=n._socket.send(s,t);n._storeRequest(o,r,i)})}},{key:"deleteNotificationContext",value:function(e){var t=this;return new a.default(function(n,r){var i={method:"delete_notification_ctx",notification_ctx_id:e},s=t._socket.send(i);t._storeRequest(s,n,r)})}},{key:"shutdown",value:function(){this._activeRequests.forEach(function(e){clearTimeout(e.timeout),e.reject(new Error("Twilsock: request cancelled by user"))}),this._activeRequests.clear()}}]),e}();n.default=y,t.exports=n.default},{"./logger":218,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],220:[function(e,t,r){(function(n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}).length}function o(e){var t=encodeURIComponent(e),n=t.replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}),r=new Uint8Array(n.length);return Array.prototype.forEach.call(n,function(e,t){r[t]=e.charCodeAt(0)}),r}function a(e){var t=Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join(""),n=t.replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n});return decodeURIComponent(n)}function u(e){for(var t="",n=0;n<e.length;++n){var r=String.fromCharCode(e[n]);if(t+=r,"\r"===r){n+=2;break}}var i=t.split(" ");return{size:n,protocol:i[0],version:i[1],headerSize:Number(i[2])}}function c(e){switch(void 0===e?"undefined":(0,D.default)(e)){case"undefined":return"";case"object":return(0,C.default)(e);default:return e}}function l(e){var t=a(e);try{return JSON.parse(t)}catch(e){throw Y.default.error("failed to parse input: ",t),e}}Object.defineProperty(r,"__esModule",{value:!0});var d=e("babel-runtime/core-js/object/freeze"),h=i(d),f=e("babel-runtime/core-js/promise"),p=i(f),m=e("babel-runtime/core-js/object/define-properties"),_=i(m),g=e("babel-runtime/core-js/object/get-prototype-of"),v=i(g),y=e("babel-runtime/helpers/classCallCheck"),b=i(y),T=e("babel-runtime/helpers/createClass"),k=i(T),w=e("babel-runtime/helpers/possibleConstructorReturn"),M=i(w),S=e("babel-runtime/helpers/inherits"),L=i(S),E=e("babel-runtime/core-js/json/stringify"),C=i(E),x=e("babel-runtime/helpers/typeof"),D=i(x),j=e("events"),R=i(j),A=e("./logger"),Y=i(A),I=e("uuid"),P=i(I),O=e("backoff"),N=i(O),H=e("javascript-state-machine"),U=i(H),F=n.WebSocket||n.MozWebSocket||e("ws"),$=5e3,q=43e3,X=function(e){function t(e){var n=arguments;(0,b.default)(this,t);var r=(0,M.default)(this,(t.__proto__||(0,v.default)(t)).call(this)),i=N.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return i.on("ready",function(){r._retry()}),(0,_.default)(r,{_config:{value:e},_transportReady:{value:!1,writable:!0},_disconnectedPromiseResolve:{value:null,writable:!0},_backoff:{value:i},_fsm:{value:null,writable:!0},_watchTimer:{value:null,writable:!0},_timestamp:{value:0,writable:!0},_socket:{value:null,writable:!0},_activeToken:{value:null,writable:!0},activeToken:{enumerable:!0,get:function(){return r._activeToken}},state:{enumberable:!0,get:function(){return r._getState()}},isConnected:{enumberable:!0,get:function(){return r._isConnected()}}}),r._fsm=U.default.create({initial:"disconnected",events:[{name:"userConnect",from:["error","disconnected"],to:"connecting"},{name:"userDisconnect",from:["connecting","connected","retrying"],to:"disconnecting"},{name:"userDisconnect",from:["rejected"],to:"disconnected"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"connected"},{name:"socketClosed",from:["connecting","connected","error"],to:"retrying"},{name:"socketError",from:["connected"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketRejected",from:["connecting","connected"],to:"disconnecting"},{name:"tokenRejected",from:["connecting","connected"],to:"rejected"},{name:"evUnsupported",from:["connecting"],to:"unsupported"},{name:"evUnsupported",from:["connected"],to:"error"},{name:"protocolError",from:["connecting","connected"],to:"error"}],callbacks:{onconnecting:function(){r._startWatchdogTimer(),r._setupSocket(),r.emit("connecting")},onretrying:function(){r._initRetry(),r.emit("connecting")},onenterconnected:r._onConnected.bind(r),onuserDisconnect:function(){r._closeSocket()},ondisconnected:function(){return r._finalizeSocket()},onsocketRejected:function(){var e=Array.prototype.slice.call(n,3,n.length);r._onSocketRejected(e)},onunsupported:function(){r._closeSocket(),r._finalizeSocket()},onrejected:function(){r._closeSocket(),r._finalizeSocket()},onerror:function(){r._closeSocket(),r._finalizeSocket()},onenterstate:function(){r.emit("stateChanged",r.state)}},error:function(){Y.default.trace("FSM: unexpected transition",arguments)}}),r}return(0,L.default)(t,e),(0,k.default)(t,[{key:"_isConnected",value:function(){return this.state===t.state.CONNECTED&&this._socket&&1===this._socket.readyState}},{key:"_getState",value:function(){if(!this._fsm)return t.state.DISCONNECTED;switch(this._fsm.current){case"connecting":case"retrying":return t.state.CONNECTING;case"connected":return t.state.CONNECTED;case"rejected":return t.state.REJECTED;case"disconnecting":return t.state.DISCONNECTING;case"disconnected":case"error":default:return t.state.DISCONNECTED}}},{key:"_initRetry",value:function(){this._backoff.backoff()}},{key:"_retry",value:function(){this._socket=null,this._activeToken=null,this._fsm.userRetry()}},{key:"_onConnected",value:function(){this._backoff.reset(),this.emit("connected",this._wschannelUrl)}},{key:"_finalizeSocket",value:function(){if(this._stopWatchdogTimer(),this._onDisconnected(),this._disconnectedPromiseResolve){var e=this._disconnectedPromiseResolve;this._disconnectedPromiseResolve=null,e()}}},{key:"_onDisconnected",value:function(){this._backoff.reset(),this._wschannelUrl=null,this._socket=null,this._activeToken=null,this.emit("disconnected")}},{key:"_setupSocket",value:function(){var e=this,t=this._config.token,n=this._config.twilsockUri+"?token="+encodeURIComponent(t),r=new F(n);r.binaryType="arraybuffer",r.onopen=function(){Y.default.info("socket opened")},r.onclose=function(t){Y.default.info("socket closed",t),e._fsm.socketClosed()},r.onerror=function(e){Y.default.error("error: ",e)},r.onmessage=function(t){Y.default.trace("data: ",t.data);var n=2,r=new Uint8Array(t.data),i=u(r);if("TWILSOCK"!==i.protocol||"V1.0"!==i.version)return Y.default.error("unsupported protocol: "+i.protocol+" ver "+i.version),void e._fsm.evUnsupported("Unsupported protocol");var s=null;try{s=l(r.subarray(i.size,i.size+i.headerSize))}catch(n){return Y.default.error("failed to parse message header",n,t),void e._fsm.protocolError()}Y.default.trace("message received: ",s);var o=null;if(s.payload_size>0){var c=n+i.size+i.headerSize,d=s.payload_size;if(s.hasOwnProperty("payload_type")&&0!==s.payload_type.indexOf("application/json"))0===s.payload_type.indexOf("text/plain")&&(o=a(r.subarray(c,c+d)));else try{o=l(r.subarray(c,c+d))}catch(n){return Y.default.error("failed to parse message body",n,t),void e._fsm.protocolError()}}e._updateActivityTimestamp(),"ready"===s.method?(Y.default.trace("ready",o),e._wschannelUrl=o.wschannel_url,e._confirmReceiving(s),e._fsm.socketConnected()):"notification"===s.method?(e._confirmReceiving(s),e.emit("message",s.message_type,o)):"reply"===s.method?e.emit("reply",{id:s.id,status:s.status,header:s,body:o}):"ping"===s.method?e._confirmReceiving(s):"close"===s.method&&(Y.default.trace("connection close initated by server"),e._confirmReceiving(s),!o||401!==o.code&&410!==o.code?e._fsm.socketRejected(o):e._fsm.tokenRejected(o))},this._activeToken=t,this._socket=r}},{key:"_confirmReceiving",value:function(e){var t={method:"reply",id:e.id,payload_type:"application/json",status:{code:200,status:"OK"}};try{this._sendPacket(t)}catch(e){Y.default.debug("failed to confirm packet receiving",e)}}},{key:"_sendPacket",value:function(e,t){var n=c(t);e.payload_size=s(n);var r=(0,C.default)(e)+"\r\n",i="TWILSOCK V1.0 "+(s(r)-2)+"\r\n",a=o(i+r+n);try{this._socket.send(a.buffer)}catch(t){throw Y.default.info("failed to send ",e,t),Y.default.info(t.stack),t}}},{key:"_cancelRetryAttempt",value:function(){this._backoff.reset()}},{key:"_closeSocket",value:function(){this._cancelRetryAttempt(),this._socket&&(this._socket.onopen=null,this._socket.onclose=null,this._socket.onerror=null,this._socket.onmessage=null,this._socket.close()),this._fsm.socketClosed()}},{key:"connect",value:function(){this._fsm.userConnect()}},{key:"disconnect",value:function(){var e=this;return this._fsm.is("disconnected")?p.default.resolve():new p.default(function(t){e._disconnectedPromiseResolve=t,e._fsm.userDisconnect()})}},{key:"sendUpstreamMessage",value:function(e,t,n){var r=P.default.v4(),i={host:e.host,path:e.path,method:e.method};e.hasOwnProperty("params")&&(i.params=e.params);var s={method:"message",id:r,http_header:i};return t&&(s.http_header.headers=t),t&&t.hasOwnProperty("Content-Type")&&(s.payload_type=t["Content-Type"]),this._sendPacket(s,n),r}},{key:"send",value:function(e,t){return e.id=e.id||P.default.v4(),this._sendPacket(e,t),e.id}},{key:"_onSocketRejected",value:function(e){Y.default.error("connection closed by server",e),this._closeSocket()}},{key:"_startWatchdogTimer",value:function(){var e=this;this._timestamp=Date.now(),this._watchTimer=setInterval(function(){Date.now()-e._timestamp>q&&e._socket&&e._socket.close()},$)}},{key:"_stopWatchdogTimer",value:function(){clearInterval(this._watchTimer)}},{key:"_updateActivityTimestamp",value:function(){this._timestamp=Date.now()}}]),t}(R.default);r.default=X,X.state={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTING:"disconnecting",ERROR:"error",REJECTED:"rejected"},(0,h.default)(X.state),(0,h.default)(X),t.exports=r.default}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./logger":218,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/helpers/typeof":27,backoff:29,events:169,"javascript-state-machine":170,uuid:224,ws:40}],221:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],222:[function(e,t,n){t.exports=function(e){return e&&"object"===(void 0===e?"undefined":u(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],223:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:o};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&r._extend(n,t),k(n.showHidden)&&(n.showHidden=!1),k(n.depth)&&(n.depth=2),k(n.colors)&&(n.colors=!1),k(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),c(n,e,n.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,n){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return b(i)||(i=c(e,i,n)),i}var s=l(e,t);if(s)return s;var o=Object.keys(t),u=a(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),L(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(t);if(0===o.length){if(E(t)){var _=t.name?": "+t.name:"";return e.stylize("[Function"+_+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(L(t))return d(t)}var g="",v=!1,y=["{","}"];if(m(t)&&(v=!0,y=["[","]"]),E(t)){g=" [Function"+(t.name?": "+t.name:"")+"]"}if(w(t)&&(g=" "+RegExp.prototype.toString.call(t)),S(t)&&(g=" "+Date.prototype.toUTCString.call(t)),L(t)&&(g=" "+d(t)),0===o.length&&(!v||0==t.length))return y[0]+g+y[1];if(n<0)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var T;return T=v?h(e,t,n,u,o):o.map(function(r){return f(e,t,n,u,r,v)}),e.seen.pop(),p(T,g,y)}function l(e,t){if(k(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var s=[],o=0,a=t.length;o<a;++o)D(t,String(o))?s.push(f(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(f(e,t,n,r,i,!0))}),s}function f(e,t,n,r,i,s){var o,a,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),D(r,i)||(o="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=g(n)?c(e,u.value,null):c(e,u.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),k(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function T(e){return"symbol"===(void 0===e?"undefined":u(e))}function k(e){return void 0===e}function w(e){return M(e)&&"[object RegExp]"===x(e)}function M(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e}function S(e){return M(e)&&"[object Date]"===x(e)}function L(e){return M(e)&&("[object Error]"===x(e)||e instanceof Error)}function E(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":u(e))||void 0===e}function x(e){return Object.prototype.toString.call(e)}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var j=/%[sdj%]/g;r.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(j,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<s;a=r[++n])o+=g(a)||!M(a)?" "+a:" "+i(a);return o},r.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation,o=!0}return e.apply(this,arguments)}if(k(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var R,A={};r.debuglog=function(e){if(k(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!A[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){t.pid;A[e]=function(){r.format.apply(r,arguments)}}else A[e]=function(){};return A[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=m,r.isBoolean=_,r.isNull=g,r.isNullOrUndefined=v,r.isNumber=y,r.isString=b,r.isSymbol=T,r.isUndefined=k,r.isRegExp=w,r.isObject=M,r.isDate=S,r.isError=L,r.isFunction=E,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");r.log=function(){},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!M(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":222,_process:178,inherits:221}],224:[function(e,t,n){var r=e("./v1"),i=e("./v4"),s=i;s.v1=r,s.v4=i,t.exports=s},{"./v1":227,"./v4":228}],225:[function(e,t,n){function r(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}for(var i=[],s=0;s<256;++s)i[s]=(s+256).toString(16).substr(1);t.exports=r},{}],226:[function(e,t,r){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var s=new Array(16);n=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}t.exports=n}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],227:[function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:u,d=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:l+1,f=d-c+(h-l)/1e4;if(f<0&&void 0===e.clockseq&&(o=o+1&16383),(f<0||d>c)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=d,l=h,u=o,d+=122192928e5;var p=(1e4*(268435455&d)+h)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var m=d/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var _=e.node||a,g=0;g<6;++g)i[r+g]=_[g];return t?t:s(i)}var i=e("./lib/rng"),s=e("./lib/bytesToUuid"),o=i(),a=[1|o[0],o[1],o[2],o[3],o[4],o[5]],u=16383&(o[6]<<8|o[7]),c=0,l=0;t.exports=r},{"./lib/bytesToUuid":225,"./lib/rng":226}],228:[function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[r+a]=o[a];return t||s(o)}var i=e("./lib/rng"),s=e("./lib/bytesToUuid");t.exports=r},{"./lib/bytesToUuid":225,"./lib/rng":226}],229:[function(e,t,n){t.exports={name:"twilio-chat",version:"0.12.0",description:"A library for Twilio IP messaging",main:"lib/index.js",author:"Twilio",license:"MIT",dependencies:{"babel-runtime":"^6.18.0",backoff:"^2.5.0",durational:"^1.1.0",loglevel:"^1.4.1",platform:"^1.3.3",rfc6902:"^1.3.0","twilio-ems-client":"^0.1.5","twilio-notifications":"^0.3.0","twilio-sync":"^0.4.2","twilio-transport":"^0.1.1",twilsock:"^0.2.2",uuid:"^3.0.1"},devDependencies:{async:"^2.1.4","async-test-tools":"^1.0.6","babel-eslint":"^7.1.1","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-async-to-generator":"^6.22.0","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.22.0","babel-preset-es2015":"^6.22.0","babel-runtime":"^6.22.0",babelify:"^7.3.0",browserify:"^14.0.0","browserify-replace":"^0.9.0",chai:"^3.5.0","chai-as-promised":"^6.0.0",cheerio:"^0.22.0",del:"^2.2.2","event-to-promise":"^0.7.0",express:"^4.14.1",gulp:"^3.9.1","gulp-derequire":"^2.1.0","gulp-eslint":"^3.0.1","gulp-exit":"0.0.2","gulp-insert":"^0.5.0","gulp-istanbul":"^1.1.1","gulp-mocha":"^3.0.1","gulp-rename":"^1.2.2","gulp-replace":"^0.5.4","gulp-tap":"^0.1.3","gulp-uglify":"^2.0.1","ink-docstrap":"^1.3.0",isparta:"^4.0.0",jsdoc:"^3.4.3","jsdoc-strip-async-await":"^0.1.0",karma:"^1.4.1","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.2.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.2","karma-sinon-ie":"^2.0.0","loglevel-message-prefix":"^2.0.1","mocha.parallel":"^0.14.0",proxyquire:"^1.7.11","run-sequence":"^1.2.2",sinon:"^1.17.7","sinon-as-promised":"^4.0.2","sinon-chai":"^2.8.0",twilio:"^2.11.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.9.0"},engines:{node:">=6"}}},{}],230:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){try{return new Date(e)}catch(e){return null}}function s(e){switch(e){case"notParticipating":return"known";default:return e}}var o=e("babel-runtime/core-js/object/freeze"),a=r(o),u=e("babel-runtime/core-js/get-iterator"),c=r(u),l=e("babel-runtime/core-js/promise"),d=r(l),h=e("babel-runtime/core-js/object/define-properties"),f=r(h),p=e("babel-runtime/core-js/map"),m=r(p),_=e("babel-runtime/core-js/json/stringify"),g=r(_),v=e("babel-runtime/core-js/object/get-prototype-of"),y=r(v),b=e("babel-runtime/helpers/classCallCheck"),T=r(b),k=e("babel-runtime/helpers/createClass"),w=r(k),M=e("babel-runtime/helpers/possibleConstructorReturn"),S=r(M),L=e("babel-runtime/helpers/inherits"),E=r(L),C=e("events").EventEmitter,x=e("./data/members"),D=e("./member"),j=e("./data/messages"),R=e("./logger"),A=e("./util").isDeepEqual,Y=e("./util").UriBuilder,I={attributes:"attributes",createdBy:"createdBy",dateCreated:"dateCreated",dateUpdated:"dateUpdated",friendlyName:"friendlyName",lastConsumedMessageIndex:"lastConsumedMessageIndex",name:"friendlyName",sid:"sid",status:"status",type:"type",uniqueName:"uniqueName"},P=function(e){function t(e,n,r){(0,T.default)(this,t);var s=(0,S.default)(this,(t.__proto__||(0,y.default)(t)).call(this)),o=n.attributes||{},a=n.createdBy,u=i(n.dateCreated),c=i(n.dateUpdated),l=n.name||n.friendlyName||null,d=void 0!==n.lastConsumedMessageIndex?n.lastConsumedMessageIndex:null,h="known",p=n.type||t.type.PUBLIC,_=n.uniqueName||null,v=n.channel;n.isPrivate&&(p=t.type.PRIVATE);try{(0,g.default)(o)}catch(e){throw new Error("Attributes must be a valid JSON object.")}var b=new m.default,k=new x(s,e.session,e.userInfos,b);k.on("memberJoined",s.emit.bind(s,"memberJoined")),k.on("memberLeft",s.emit.bind(s,"memberLeft")),k.on("memberUpdated",s.emit.bind(s,"memberUpdated")),k.on("memberInfoUpdated",s.emit.bind(s,"memberInfoUpdated"));var w=[],M=new j(s,e.session,w);return M.on("messageAdded",function(e){return s._onMessageAdded(e)}),M.on("messageUpdated",s.emit.bind(s,"messageUpdated")),M.on("messageRemoved",s.emit.bind(s,"messageRemoved")),(0,f.default)(s,{_attributes:{get:function(){return o},set:function(e){return o=e}},_createdBy:{get:function(){return a},set:function(e){return a=e}},_dateCreated:{get:function(){return u},set:function(e){return u=e}},_dateUpdated:{get:function(){return c},set:function(e){return c=e}},_friendlyName:{get:function(){return l},set:function(e){return l=e}},_lastConsumedMessageIndex:{get:function(){return d},set:function(e){return d=e}},_type:{get:function(){return p},set:function(e){return p=e}},_sid:{get:function(){return r},set:function(e){return r=e}},_status:{get:function(){return h},set:function(e){return h=e}},_uniqueName:{get:function(){return _},set:function(e){return _=e}},_entityPromise:{value:null,writable:!0},_subscribePromise:{value:null,writable:!0},_membersEntity:{value:k},_messagesEntity:{value:M},_services:{value:e},_session:{value:e.session},_typingIndicator:{value:e.typingIndicator},_consumptionHorizon:{value:e.consumptionHorizon},_entityName:{value:v,writable:!0},_members:{value:b},_messages:{value:w},attributes:{enumerable:!0,get:function(){return o}},createdBy:{enumerable:!0,get:function(){return a}},dateCreated:{enumerable:!0,get:function(){return u}},dateUpdated:{enumerable:!0,get:function(){return c}},friendlyName:{enumerable:!0,get:function(){return l}},isPrivate:{enumerable:!0,get:function(){return s._type===t.type.PRIVATE}},lastConsumedMessageIndex:{enumerable:!0,get:function(){return d}},sid:{enumerable:!0,get:function(){return r}},status:{enumerable:!0,get:function(){return h}},type:{enumerable:!0,get:function(){return p}},uniqueName:{enumerable:!0,get:function(){return _}}}),s}return(0,E.default)(t,e),(0,w.default)(t,[{key:"_subscribe",value:function(){var e=this;return this._entityPromise?this._entityPromise:(this._entityPromise=this._session.datasync.document({uniqueName:this._entityName,mode:"open"}).then(function(t){return e._entity=t,t.on("updated",function(t){return e._update(t)}),e._update(t.value),e._entity}).catch(function(t){throw e._enityPromise=null,R.error("Failed to get channel object",t),t}),this._entityPromise)}},{key:"_subscribeStreams",value:function(){var e=this;return this._subscribePromise=this._subscribePromise||this._subscribe().then(function(t){var n=t.value.messages,r=t.value.roster;return d.default.all([e._messagesEntity.subscribe(n),e._membersEntity.subscribe(r)])}).then(function(){return e._entity}).catch(function(t){throw e._subscribePromise=null,R.error("Failed to subscribe on channel objects",e.sid,t),t}),this._subscribePromise}},{key:"_fetch",value:function(){return this._session.datasync.document({uniqueName:this._entityName,mode:"open"}).then(function(e){return e.value})}},{key:"_unsubscribe",value:function(){var e=[];return this._entityPromise&&e.push(this._entity.close()),e.push(this._membersEntity.unsubscribe()),e.push(this._messagesEntity.unsubscribe()),this._entityPromise=null,this._subscribePromise=null,d.default.all(e)}},{key:"_setStatus",value:function(e){this._status!==e&&(this._status=e,e===t.status.JOINED?this._subscribeStreams():e===t.status.INVITED?this._subscribe():this._entityPromise&&this._unsubscribe())}},{key:"_update",value:function(e){t._preprocessUpdate(e,this._sid);var n=!1;for(var r in e){var i=I[r];i&&(i===I.status?this._status=s(e.status):i===I.attributes?A(this._attributes,e.attributes)||(this._attributes=e.attributes,n=!0):e[r]instanceof Date?this[i]&&this[i].getTime()===e[r].getTime()||(this["_"+i]=e[r],n=!0):this[i]!==e[r]&&(this["_"+i]=e[r],n=!0))}e.status||e.uniqueName||this._uniqueName&&(this._uniqueName=null,n=!0),n&&this.emit("updated",this)}},{key:"_onMessageAdded",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=(0,c.default)(this._members.values());!(t=(i=s.next()).done);t=!0){var o=i.value;if(o.identity===e.author){o._endTyping();break}}}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}this.emit("messageAdded",e)}},{key:"add",value:function(e){return e&&"string"==typeof e?this._membersEntity.add(e):d.default.reject(new Error("Channel.add requires an <String>identity parameter"))}},{key:"advanceLastConsumedMessageIndex",value:function(e){var t=this;if(parseInt(e)!==e){return d.default.reject(new Error("Channel.advanceLastConsumedMessageIndex requires an integral <Number>index parameter"))}return null!==this.lastConsumedMessageIndex&&e<=this.lastConsumedMessageIndex?d.default.resolve():this._subscribeStreams().then(function(){t._consumptionHorizon.advanceLastConsumedMessageIndexForChannel(t.sid,e)}).then(function(){return t})}},{key:"decline",value:function(){var e=this;return this._session.addCommand("declineInvitation",{channelSid:this._sid}).then(function(){return e})}},{key:"delete",value:function(){var e=this;return this._session.addCommand("destroyChannel",{channelSid:this._sid}).then(function(){return e})}},{key:"getAttributes",value:function(){var e=this;return this._entityPromise?this._subscribe().then(function(){return e.attributes}):this._fetch().then(function(t){return e._update(t),e.attributes})}},{key:"getMessages",value:function(e,t,n){var r=this;return this._subscribeStreams().then(function(){return r._messagesEntity.getMessages(e,t,n)})}},{key:"getMembers",value:function(){var e=this;return this._subscribeStreams().then(function(){return e._membersEntity.getMembers()})}},{key:"getMembersCount",value:function(){var e=this;return this._session.getSessionLinks().then(function(t){return new Y(t.publicChannelsUrl).path(e.sid).build()}).then(function(t){return e._services.network.get(t)}).then(function(e){return e.body.members_count})}},{key:"getMessagesCount",value:function(){var e=this;return this._session.getSessionLinks().then(function(t){return new Y(t.publicChannelsUrl).path(e.sid).build()}).then(function(t){return e._services.network.get(t)}).then(function(e){return e.body.messages_count})}},{key:"getUnconsumedMessagesCount",value:function(){var e=this;return this._session.getSessionLinks().then(function(t){return new Y(t.myChannelsUrl).arg("ChannelSid",e.sid).build()}).then(function(t){return e._services.network.get(t)}).then(function(e){return e.body.channels.length?e.body.channels[0].unread_messages_count||0:d.default.reject(new Error("Channel is not in user channels list"))})}},{key:"invite",value:function(e){return"string"==typeof e&&e.length?this._membersEntity.invite(e):d.default.reject(new Error("Channel.invite requires an <String>identity parameter"))}},{key:"join",value:function(){var e=this;return this._session.addCommand("joinChannel",{channelSid:this._sid}).then(function(){return e})}},{key:"leave",value:function(){var e=this;return this._status!==t.status.JOINED?d.default.resolve(this):this._session.addCommand("leaveChannel",{channelSid:this._sid}).then(function(){return e})}},{key:"removeMember",value:function(e){return e&&("string"==typeof e||e instanceof D)?this._membersEntity.remove("string"==typeof e?e:e.identity):d.default.reject(new Error("Channel.removeMember requires a <String|Member>member parameter."))}},{key:"sendMessage",value:function(e,t){return this._messagesEntity.send(e,t).then(function(e){return e.messageId})}},{key:"setAllMessagesConsumed",value:function(){var e=this;return this._subscribeStreams().then(function(){return e.getMessages(1)}).then(function(t){t.items.length>0&&e.advanceLastConsumedMessageIndex(t.items[0].index)}).then(function(){return e})}},{key:"setNoMessagesConsumed",value:function(){return this.updateLastConsumedMessageIndex(null)}},{key:"typing",value:function(){return this._typingIndicator.send(this._sid)}},{key:"updateAttributes",value:function(e){var t=this;if(!e){return d.default.reject(new Error("Attributes is a required parameter for updateAttributes and it should be valid JSON"))}return e.constructor!==Object?d.default.reject(new Error("Attributes must be a valid JSON object.")):this._session.addCommand("editAttributes",{channelSid:this._sid,attributes:(0,g.default)(e)}).then(function(){return t})}},{key:"updateFriendlyName",value:function(e){var t=this;return this._friendlyName===e?d.default.resolve(this):this._session.addCommand("editFriendlyName",{channelSid:this._sid,friendlyName:e}).then(function(){return t})}},{key:"updateLastConsumedMessageIndex",value:function(e){var t=this;if(null!==e&&parseInt(e)!==e){return d.default.reject(new Error("Channel.updateLastConsumedMessageIndex requires an integral <Number>index parameter"))}return this._subscribeStreams().then(function(){t._consumptionHorizon.updateLastConsumedMessageIndexForChannel(t.sid,e)}).then(function(){return t})}},{key:"updateUniqueName",value:function(e){var t=this;return this._uniqueName===e?d.default.resolve(this):this._session.addCommand("editUniqueName",{channelSid:this._sid,uniqueName:e}).then(function(){return t})}}],[{key:"_preprocessUpdate",value:function(e,t){try{"string"==typeof e.attributes?e.attributes=JSON.parse(e.attributes):e.attributes&&(0,g.default)(e.attributes)}catch(n){R.warn("Retrieved malformed attributes from the server for channel: "+t),e.attributes={}}try{e.dateCreated&&(e.dateCreated=new Date(e.dateCreated))}catch(n){R.warn("Retrieved malformed attributes from the server for channel: "+t),delete e.dateCreated}try{e.dateUpdated&&(e.dateUpdated=new Date(e.dateUpdated))}catch(n){R.warn("Retrieved malformed attributes from the server for channel: "+t),delete e.dateUpdated}}}]),t}(C);P.type={PUBLIC:"public",PRIVATE:"private"},P.status={KNOWN:"known",INVITED:"invited",JOINED:"joined",FAILED:"failed"},(0,a.default)(P.type),(0,a.default)(P.status),t.exports=P},{"./data/members":235,"./data/messages":236,"./logger":240,"./member":241,"./util":251,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],231:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){try{return JSON.parse(e)}catch(e){h.warning("Failed to parse channel attributes",e)}return{}}function s(e){try{return new Date(e)}catch(e){return null}}var o=e("babel-runtime/core-js/object/define-properties"),a=r(o),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),d=r(l),h=e("./logger"),f=function(){function e(t,n){(0,c.default)(this,e),(0,a.default)(this,{_client:{value:t},_descriptor:{value:n},sid:{value:n.sid,enumerable:!0},channel:{value:n.sid+".channel",enumerable:!0},uniqueName:{value:n.unique_name,enumerable:!0},friendlyName:{value:n.friendly_name,enumerable:!0},attributes:{value:i(n.attributes)},createdBy:{value:n.created_by,enumerable:!0},dateCreated:{value:s(n.date_created),enumerable:!0},dateUpdated:{value:s(n.date_updated),enumerable:!0},messagesCount:{value:n.messages_count,enumerable:!0},membersCount:{value:n.members_count,enumerable:!0},type:{value:n.type,enumerable:!0}})}return(0,d.default)(e,[{key:"getChannel",value:function(){return this._client.getChannelBySid(this.sid)}}]),e}();t.exports=f},{"./logger":240,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],232:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/freeze"),s=r(i),o=e("babel-runtime/core-js/promise"),a=r(o),u=e("babel-runtime/core-js/object/define-properties"),c=r(u),l=e("babel-runtime/core-js/object/get-prototype-of"),d=r(l),h=e("babel-runtime/helpers/classCallCheck"),f=r(h),p=e("babel-runtime/helpers/createClass"),m=r(p),_=e("babel-runtime/helpers/possibleConstructorReturn"),g=r(_),v=e("babel-runtime/helpers/inherits"),y=r(v),b=e("events").EventEmitter,T=e("./logger"),k=e("twilio-notifications"),w=e("twilsock"),M=e("twilio-transport").Transport,S=e("twilio-sync").SyncClient,L=e("./configuration"),E=e("./session"),C=e("./data/channels"),x=e("./data/publicchannels"),D=e("./data/userinfos"),j=e("./services/typingindicator"),R=e("./services/consumptionhorizon"),A=e("./services/network"),Y=e("twilio-ems-client").EmsClient,I=e("./../package.json").version,P="A valid Twilio token should be provided",O=function(e){function t(e,n){(0,f.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this));if(n=n||{},n.logLevel=n.logLevel||"error",n.productId="ip_messaging",!e)throw new Error(P);T.setLevel(n.logLevel);var i=new L(null,n);n.twilsockClient=n.twilsockClient||new w(e,n),n.transport=n.transport||new M(n.twilsockClient,n);var s=n.emsClient=n.emsClient||new Y(n);n.notificationsClient=n.notificationsClient||new k(e,n),n.syncClient=n.syncClient||new S(e,n);var o=n.syncClient,a=n.transport,u=n.twilsockClient,l=n.notificationsClient,h=new E(o,a,i),p=h.initialize(e),m=new A(i,h,a),_=new D(h,o,null);_.on("userInfoUpdated",r.emit.bind(r,"userInfoUpdated"));var v=new R(i,h),y=new j(i,a,l,r.getChannelBySid.bind(r)),b=new C({session:h,userInfos:_,typingIndicator:y,consumptionHorizon:v,network:m,config:i}),x=p.then(function(){return b.on("channelAdded",r.emit.bind(r,"channelAdded")),b.on("channelRemoved",r.emit.bind(r,"channelRemoved")),b.on("channelInvited",r.emit.bind(r,"channelInvited")),b.on("channelJoined",r.emit.bind(r,"channelJoined")),b.on("channelLeft",r.emit.bind(r,"channelLeft")),b.on("channelUpdated",r.emit.bind(r,"channelUpdated")),b.on("memberJoined",r.emit.bind(r,"memberJoined")),b.on("memberLeft",r.emit.bind(r,"memberLeft")),b.on("memberUpdated",r.emit.bind(r,"memberUpdated")),b.on("messageAdded",r.emit.bind(r,"messageAdded")),b.on("messageUpdated",r.emit.bind(r,"messageUpdated")),b.on("messageRemoved",r.emit.bind(r,"messageRemoved")),b.on("typingStarted",r.emit.bind(r,"typingStarted")),b.on("typingEnded",r.emit.bind(r,"typingEnded")),b.fetchChannels()}).then(function(){return b});return l.on("transportReady",function(e){if(e)r._connectionState=t.connectionState.CONNECTED,r._session.syncToken().catch(function(e){T.error("Failed to sync session token",e)});else switch(r._twilsock.state){case"rejected":r._connectionState=t.connectionState.DENIED;break;default:r._connectionState=t.connectionState.CONNECTING}r.emit("connectionStateChanged",r._connectionState)}),(0,c.default)(r,{_config:{value:i},_fpaToken:{value:e,writable:!0},_emsClient:{value:s},_channelsPromise:{value:x},_channels:{value:b},_transport:{value:m},_datasync:{value:o},_notifications:{value:l},_session:{value:h},_sessionPromise:{value:p},_initializePromise:{value:null,writable:!0},_twilsock:{value:u},_typingIndicator:{value:y},_userInfos:{value:_},_publicChannels:{value:null,writable:!0},_connectionState:{value:t.connectionState.CONNECTING,writable:!0},userInfo:{enumerable:!0,get:function(){return r._userInfos.myUserInfo}},connectionState:{enumerable:!0,get:function(){return r._connectionState}},reachabilityEnabled:{enumerable:!0,get:function(){return r._session.reachabilityEnabled}}}),r._initializePromise=r._initialize(),r}return(0,y.default)(t,e),(0,m.default)(t,[{key:"_initialize",value:function(){var e=this;return this._emsClient.setToken(this._fpaToken).then(function(t){return e._config.updateToken(t.token)}).then(function(){return e._sessionPromise}).then(function(){return e._notifications.subscribe("twilio.channel.new_message","gcm"),e._notifications.subscribe("twilio.channel.added_to_channel","gcm"),e._notifications.subscribe("twilio.channel.invited_to_channel","gcm"),e._session.getSessionLinks().then(function(e){return e.publicChannelsUrl}).then(function(t){return e._publicChannels=new x(e._config,e,e._transport,t),e._publicChannels})}).then(function(){return e._typingIndicator.initialize()})}},{key:"initialize",value:function(){var e=this;return this._initializePromise.then(function(){return e})}},{key:"shutdown",value:function(){return this._twilsock.disconnect()}},{key:"updateToken",value:function(e){var t=this;if(T.info("updateToken"),!e){var n=new Error(P);return a.default.reject(n)}return e===this._fpaToken?a.default.resolve(this):this._emsClient.setToken(e).then(function(e){if("NEW"===e.status)throw T.error("Can't extend token:",e.reason),new Error("Can't extend token:"+e.reason);return e.token}).then(function(n){return t._twilsock.updateToken(e).then(function(){return t._datasync.updateToken(e)}).then(function(){return t._notifications.updateToken(e)}).then(function(){return t._sessionPromise}).then(function(){return t._session.updateToken(n)}).then(function(){return n})}).then(function(n){return t._config.updateToken(n),t._fpaToken=e,t})}},{key:"getChannelBySid",value:function(e){var t=this;if(!e||"string"!=typeof e){var n=new Error("Client.getChannelBySid requires a <String>channelSid parameter");return a.default.reject(n)}return this._channels.getChannel(e).then(function(n){return n||t._publicChannels.getChannelBySid(e).then(function(e){return t._channels.pushChannel(e)})})}},{key:"getChannelByUniqueName",value:function(e){var t=this;if(!e||"string"!=typeof e){var n=new Error("Client.getChannelByUniqueName requires a <String>uniqueName parameter");return a.default.reject(n)}return this._publicChannels.getChannelByUniqueName(e).then(function(e){return t._channels.pushChannel(e)})}},{key:"getUserChannels",value:function(e){return this._channelsPromise.then(function(t){return t.getChannels(e)})}},{key:"getPublicChannels",value:function(){return this._publicChannels.getChannels()}},{key:"createChannel",value:function(e){return e=e||{},this._channelsPromise.then(function(t){return t.addChannel(e)})}},{key:"setPushRegistrationId",value:function(e,t){this._notification.setPushRegistrationId(e,t||"gcm")}},{key:"putPushNotificationPayload",value:function(e){var t=e.additionalData;switch(t.type){case"twilio.channel.new_message":var n=t.data.channel_id,r=t.data.message_id;this.getChannelBySid(n).then(function(e){return e.getMessages(10,r)})}}}]),t}(b);(0,c.default)(O,{version:{enumerable:!0,value:I}}),O.connectionState={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",ERROR:"error",DENIED:"denied"},(0,s.default)(O.connectionState),t.exports=O},{"./../package.json":229,"./configuration":233,"./data/channels":234,"./data/publicchannels":237,"./data/userinfos":238,"./logger":240,"./services/consumptionhorizon":244,"./services/network":245,"./services/typingindicator":246,"./session":247,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/freeze":11,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169,"twilio-ems-client":182,"twilio-notifications":187,"twilio-sync":198,"twilio-transport":214,twilsock:217}],233:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/define-properties"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l="https://aim.twilio.com",d="/v1/typing",h=5,f=10,p="PT5S",m=function(){function e(t,n){var r=this;(0,a.default)(this,e),n=n||{};var i=n.Chat||n.IPMessaging||{},o=i.apiUri||i.typingUri||l;(0,s.default)(this,{_token:{value:t,writable:!0},token:{get:function(){return r._token},enumerable:!0},baseUri:{value:o},baseUrl:{value:o},typingIndicatorUri:{enumerable:!0,value:o+d},typingIndicatorTimeoutDefault:{enumerable:!0,value:1e3*h},httpCacheLifetimeDefault:{enumerable:!0,value:1e3*f},consumptionReportIntervalDefault:{enumerable:!0,value:p},typingIndicatorTimeoutOverride:{enumberable:!0,value:n.typingIndicatorTimeoutOverride},httpCacheLifetimeOverride:{enumberable:!0,value:n.httpCacheLifetimeOverride},consumptionReportIntervalOverride:{enumberable:!0,value:n.consumptionReportIntervalOverride}})}return(0,c.default)(e,[{key:"updateToken",value:function(e){this._token=e}}]),e}();t.exports=m},{"babel-runtime/core-js/object/define-properties":9,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],234:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/promise"),s=r(i),o=e("babel-runtime/core-js/json/stringify"),a=r(o),u=e("babel-runtime/core-js/map"),c=r(u),l=e("babel-runtime/core-js/object/define-properties"),d=r(l),h=e("babel-runtime/core-js/object/get-prototype-of"),f=r(h),p=e("babel-runtime/helpers/classCallCheck"),m=r(p),_=e("babel-runtime/helpers/createClass"),g=r(_),v=e("babel-runtime/helpers/possibleConstructorReturn"),y=r(v),b=e("babel-runtime/helpers/inherits"),T=r(b),k=e("events").EventEmitter,w=e("../channel"),M=e("../logger"),S=function(e){function t(e){(0,m.default)(this,t);var n=(0,y.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return(0,d.default)(n,{_services:{value:e},_userInfos:{value:e.userInfos},_typingIndicator:{value:e.typingIndicator},_session:{value:e.session},channels:{enumerable:!0,value:new c.default}}),n}return(0,T.default)(t,e),(0,g.default)(t,[{key:"_getMap",value:function(){var e=this;return this._session.getMyChannelsId().then(function(t){return e._session.datasync.map({uniqueName:t,mode:"open"})})}},{key:"addChannel",value:function(e){var t=this;return this._session.addCommand("createChannel",{friendlyName:e.friendlyName,uniqueName:e.uniqueName,type:e.isPrivate?"private":"public",attributes:(0,a.default)(e.attributes)}).then(function(e){var n=t.channels.get(e.channelSid);if(n)return n._subscribe().then(function(){return n});var r=new w(t._services,{channel:e.channel,channelSid:e.channelSid},e.channelSid);return t.channels.set(r.sid,r),t._registerForEvents(r),r._subscribe().then(function(){return t.emit("channelAdded",r),r})})}},{key:"fetchChannels",value:function(){var e=this;this._session.getMyChannelsId().then(function(t){return e._session.datasync.map({uniqueName:t,mode:"open"})}).then(function(t){t.on("itemAdded",function(t){e._upsertChannel(t.key,t.value)}),t.on("itemRemoved",function(t){var n=e.channels.get(t);n&&("joined"!==n.status&&"invited"!==n.status||(n._setStatus("known"),e.emit("channelLeft",n)),e.channels.delete(t),e.emit("channelRemoved",n))}),t.on("itemUpdated",function(t){e._upsertChannel(t.key,t.value)});var n=[];return t.forEach(function(t){n.push(e._upsertChannel(t.key,t.value))}).then(function(){return s.default.all(n)})}).then(function(){M.debug("Channels list fetched")}).then(function(){return e}).catch(function(e){throw M.error("Failed to get channels list",e),e})}},{key:"_wrapPaginator",value:function(e,t){var n=this;return t(e.items).then(function(r){return{items:r,hasNextPage:e.hasNextPage,hasPrevPage:e.hasPrevPage,nextPage:function(){return e.nextPage().then(function(e){return n._wrapPaginator(e,t)})},prevPage:function(){return e.prevPage().then(function(e){return n._wrapPaginator(e,t)})}}})}},{key:"getChannels",value:function(e){var t=this;return this._getMap().then(function(t){return t.getItems(e)}).then(function(e){return t._wrapPaginator(e,function(e){return s.default.all(e.map(function(e){return t._upsertChannel(e.key,e.value)}))})})}},{key:"getChannel",value:function(e){var t=this;return this._getMap().then(function(t){return t.getItems({key:e})}).then(function(e){return e.items.map(function(e){return t._upsertChannel(e.key,e.value)})}).then(function(e){return e.length>0?e[0]:null})}},{key:"pushChannel",value:function(e){var t=e.sid,n={status:"known",type:e.type,friendlyName:e.friendlyName,dateUpdated:e.dateUpdated,dateCreated:e.dateCreated,uniqueName:e.uniqueName,createdBy:e.createdBy,attributes:e.attributes,channel:e.channel,sid:t},r=this.channels.get(e.sid);return r||(r=new w(this._services,n,t),this.channels.set(t,r)),r}},{key:"_upsertChannel",value:function(e,t){var n=this,r=this.channels.get(e);return r?("joined"===t.status&&"joined"!==r.status?(r._setStatus("joined"),void 0!==t.lastConsumedMessageIndex&&(r._lastConsumedMessageIndex=t.lastConsumedMessageIndex),r._subscribe().then(function(){n.emit("channelJoined",r)})):"invited"===t.status&&"invited"!==r.status?(r._setStatus("invited"),r._subscribe().then(function(){n.emit("channelInvited",r)})):"known"!==t.status||"invited"!==r.status&&"joined"!==r.status?"notParticipating"===t.status&&"private"===t.type?r._subscribe():r._update(t):(r._setStatus("known"),r._update(t),r._subscribe().then(function(){n.emit("channelLeft",r)})),r._subscribe().then(function(){return r})):(r=new w(this._services,t,e),this._registerForEvents(r),this.channels.set(e,r),r._subscribe().then(function(){return"joined"===t.status?(r._setStatus("joined"),n.emit("channelJoined",r)):"invited"===t.status&&(r._setStatus("invited"),n.emit("channelInvited",r)),r.isPrivate&&n.emit("channelAdded",r),r}))}},{key:"_registerForEvents",value:function(e){var t=this;e.on("updated",function(){return t.emit("channelUpdated",e)}),e.on("memberJoined",this.emit.bind(this,"memberJoined")),e.on("memberLeft",this.emit.bind(this,"memberLeft")),e.on("memberUpdated",this.emit.bind(this,"memberUpdated")),e.on("messageAdded",this.emit.bind(this,"messageAdded")),e.on("messageUpdated",this.emit.bind(this,"messageUpdated")),e.on("messageRemoved",this.emit.bind(this,"messageRemoved")),e.on("typingStarted",this.emit.bind(this,"typingStarted")),e.on("typingEnded",this.emit.bind(this,"typingEnded"))}}]),t}(k);t.exports=S},{"../channel":230,"../logger":240,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],235:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/promise"),s=r(i),o=e("babel-runtime/core-js/object/define-properties"),a=r(o),u=e("babel-runtime/core-js/object/get-prototype-of"),c=r(u),l=e("babel-runtime/helpers/classCallCheck"),d=r(l),h=e("babel-runtime/helpers/createClass"),f=r(h),p=e("babel-runtime/helpers/possibleConstructorReturn"),m=r(p),_=e("babel-runtime/helpers/inherits"),g=r(_),v=e("events").EventEmitter,y=e("../logger").scope("Members"),b=e("../member"),T=function(e){function t(e,n,r,i){(0,d.default)(this,t);var s=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return(0,a.default)(s,{_datasync:{value:n.datasync},_userInfos:{value:r},_session:{value:n},_rosterStreamPromise:{writable:!0,value:null},channel:{enumerable:!0,value:e},members:{enumerable:!0,value:i}}),s}return(0,g.default)(t,e),(0,f.default)(t,[{key:"unsubscribe",value:function(){return this._rosterStreamPromise?this._rosterStreamPromise.then(function(e){return e.close()}):s.default.resolve()}},{key:"subscribe",value:function(e){var t=this;return this._rosterStreamPromise=this._rosterStreamPromise||this._datasync.map({uniqueName:e,mode:"open"}).then(function(e){e.on("itemAdded",function(e){t.upsertMember(e.key,e.value).then(function(e){t.emit("memberJoined",e)})}),e.on("itemRemoved",function(e){if(t.members.has(e)){var n=t.members.get(e);t.members.delete(e),t.emit("memberLeft",n)}}),e.on("itemUpdated",function(e){t.upsertMember(e.key,e.value)});var n=[];return e.forEach(function(e){n.push(t.upsertMember(e.key,e.value))}).then(function(){return s.default.all(n)}).then(function(){return e})}).catch(function(e){throw t._rosterStreamPromise=null,y.error("Failed to get roster object for channel",t.channel.sid,e),e})}},{key:"upsertMember",value:function(e,t){var n=this,r=this.members.get(e);return r?(r._update(t),s.default.resolve(r)):this._userInfos.getUserInfo(t.identity,t.userInfo).then(function(i){return r=new b(n.channel,t,e,i),n.members.set(e,r),r.on("updated",function(){return n.emit("memberUpdated",r)}),r.on("userInfoUpdated",function(){return n.emit("memberInfoUpdated",r)}),r})}},{key:"getMembers",value:function(){var e=this;return this._rosterStreamPromise.then(function(){var t=[];return e.members.forEach(function(e){return t.push(e)}),t})}},{key:"add",value:function(e){return this._session.addCommand("addMember",{channelSid:this.channel.sid,username:e})}},{key:"invite",value:function(e){return this._session.addCommand("inviteMember",{channelSid:this.channel.sid,username:e})}},{key:"remove",value:function(e){return this._session.addCommand("removeMember",{channelSid:this.channel.sid,username:e})}}]),t}(v);t.exports=T},{"../logger":240,"../member":241,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],236:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/number/is-integer"),s=r(i),o=e("babel-runtime/core-js/json/stringify"),a=r(o),u=e("babel-runtime/core-js/promise"),c=r(u),l=e("babel-runtime/core-js/map"),d=r(l),h=e("babel-runtime/core-js/object/define-properties"),f=r(h),p=e("babel-runtime/core-js/object/get-prototype-of"),m=r(p),_=e("babel-runtime/helpers/classCallCheck"),g=r(_),v=e("babel-runtime/helpers/createClass"),y=r(v),b=e("babel-runtime/helpers/possibleConstructorReturn"),T=r(b),k=e("babel-runtime/helpers/inherits"),w=r(k),M=e("events").EventEmitter,S=e("loglevel"),L=e("../message"),E=function(e){function t(e,n,r){(0,g.default)(this,t);var i=(0,T.default)(this,(t.__proto__||(0,m.default)(t)).call(this));return(0,f.default)(i,{_datasync:{value:n.datasync},_eventStreamPromise:{value:null,writable:!0},_sortedMessages:{value:r},_messagesByIndex:{value:new d.default},_session:{value:n},channel:{enumerable:!0,value:e}}),i}return(0,w.default)(t,e),(0,y.default)(t,[{key:"subscribe",value:function(e){var t=this;return this._eventStreamPromise=this._eventStreamPromise||this._datasync.list({uniqueName:e,mode:"open"}).then(function(e){return e.on("itemAdded",function(e){var n=new L(t.channel,e.index,e.value);if(t._messagesByIndex.has(n.index))return void S.debug("Message arrived, but already known and ignored",t.channel.sid,n.index);t._sortedMessages.push(n),t._messagesByIndex.set(n.index,n),n.on("updated",function(){return t.emit("messageUpdated",n)}),t.emit("messageAdded",n)}),e.on("itemRemoved",function(e){var n=t._removeMessageById(e);n&&(t._messagesByIndex.delete(n.index),n.removeAllListeners("updated"),t.emit("messageRemoved",n))}),e.on("itemUpdated",function(e){var n=t._messagesByIndex.get(e.index);n&&n._update(e.value)}),e}).catch(function(e){throw t._eventStreamPromise=null,S.error("Failed to get messages object for channel",t.channel.sid,e),e})}},{key:"unsubscribe",value:function(){return this._eventStreamPromise?this._eventStreamPromise.then(function(e){return e.close()}):c.default.resolve()}},{key:"_removeMessageById",value:function(e){for(var t=void 0,n=0;n<this._sortedMessages.length;n++){if(this._sortedMessages[n].index===e){t=this._sortedMessages.splice(n,1)[0];break}}return t}},{key:"send",value:function(e,t){if(void 0===t)t={};else if(t.constructor!==Object)return c.default.reject(new Error("Attributes must be a valid JSON object"));return this._session.addCommand("sendMessage",{channelSid:this.channel.sid,text:e,attributes:(0,a.default)(t)})}},{key:"getMessages",value:function(e,t,n){return t=(0,s.default)(t)&&t>=0?t:"end",n=n||"backwards",this._getMessages(e,t,n)}},{key:"_wrapPaginator",value:function(e,t,n){var r=this,i="desc"===e,s=function(){return t.nextPage().then(function(t){return r._wrapPaginator(e,t,n)})},o=function(){return t.prevPage().then(function(t){return r._wrapPaginator(e,t,n)})};return n(t.items).then(function(e){return{items:e.sort(function(e,t){return e.index-t.index}),hasPrevPage:i?t.hasNextPage:t.hasPrevPage||!1,hasNextPage:i?t.hasPrevPage:t.hasNextPage||!1,prevPage:i?s:o,nextPage:i?o:s}})}},{key:"_upsertMessage",value:function(e,t){var n=this,r=this._messagesByIndex.get(e);if(r)return r;var i=new L(this.channel,e,t);return this._messagesByIndex.set(i.index,i),i.on("updated",function(){return n.emit("messageUpdated",i)}),i}},{key:"_getMessages",value:function(e,t,n){var r=this;t=(0,s.default)(t)&&t>=0?t:"end",e=e||30;var i="backwards"===n?"desc":"asc";return this.subscribe().then(function(n){return n.getItems({from:"end"!==t?t:void 0,pageSize:e,order:i})}).then(function(e){return r._wrapPaginator(i,e,function(e){return c.default.all(e.map(function(e){return r._upsertMessage(e.index,e.value)}))})})}}]),t}(M);t.exports=E},{"../message":242,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/map":5,"babel-runtime/core-js/number/is-integer":6,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169,loglevel:172}],237:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/define-properties"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("../util").UriBuilder,d=e("../restpaginator"),h=e("../channeldescriptor"),f=function(){function e(t,n,r,i){(0,a.default)(this,e),(0,s.default)(this,{_config:{value:t},_client:{value:n},_transport:{value:r},_url:{value:i}})}return(0,c.default)(e,[{key:"getChannels",value:function(e){var t=this;e=e||{};var n=new l(this._url).arg("PageToken",e.pageToken).build();return this._transport.get(n).then(function(e){return e.body}).then(function(e){return new d(e.channels.map(function(e){return new h(t._client,e)}),function(e){return t.getChannels({pageToken:e})},e.meta.prev_token,e.meta.next_token)})}},{key:"getChannelBySid",value:function(e){var t=this,n=new l(this._url).path(e).build();return this._transport.get(n).then(function(e){return e.body}).then(function(e){return new h(t._client,e)})}},{key:"getChannelByUniqueName",value:function(e){var t=this,n=new l(this._url).path(encodeURIComponent(e)).build();return this._transport.get(n).then(function(e){return e.body}).then(function(e){return new h(t._client,e)})}}]),e}();t.exports=f},{"../channeldescriptor":231,"../restpaginator":243,"../util":251,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],238:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/map"),s=r(i),o=e("babel-runtime/core-js/object/define-properties"),a=r(o),u=e("babel-runtime/core-js/object/get-prototype-of"),c=r(u),l=e("babel-runtime/helpers/classCallCheck"),d=r(l),h=e("babel-runtime/helpers/createClass"),f=r(h),p=e("babel-runtime/helpers/possibleConstructorReturn"),m=r(p),_=e("babel-runtime/helpers/inherits"),g=r(_),v=e("events").EventEmitter,y=e("../userinfo"),b=function(e){function t(e,n){(0,d.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this)),i=new y(null,null,n,e);return i.on("updated",function(){return r.emit("userInfoUpdated",i)}),(0,a.default)(r,{_session:{value:e},_datasync:{value:n},_infos:{value:new s.default},_identity:{value:null,writable:!0},myUserInfo:{enumerable:!0,get:function(){return i}}}),r._session.getUserInfosData().then(function(e){return r._identity=e.identity,i._identity=e.identity,i._entityName=e.userInfo,r._infos.set(e.identity,i),i._ensureFetched()}),r}return(0,g.default)(t,e),(0,f.default)(t,[{key:"getMyUserInfo",value:function(){var e=this;return this._session.getUserInfosData().then(function(t){return e.getUserInfo(t.identity,t.userInfo)})}},{key:"getUserInfo",value:function(e,t){var n=this,r=this._infos.get(e);return r||(r=new y(e,t||null,this._datasync,this._session),this._infos.set(e,r),r.on("updated",function(){return n.emit("userInfoUpdated",r)})),r._ensureFetched()}}]),t}(v);t.exports=b},{"../userinfo":249,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],239:[function(e,t,n){"use strict";var r=e("./client");t.exports=r},{"./client":232}],240:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return[e].concat((0,h.default)(t))}var s=e("babel-runtime/core-js/object/define-properties"),o=r(s),a=e("babel-runtime/helpers/classCallCheck"),u=r(a),c=e("babel-runtime/helpers/createClass"),l=r(c),d=e("babel-runtime/core-js/array/from"),h=r(d),f=e("loglevel"),p=function(){function e(){(0,u.default)(this,e),(0,o.default)(this,{_prefix:{value:"",writable:!0}})}return(0,l.default)(e,[{key:"setLevel",value:function(e){f.setLevel(e)}},{key:"trace",value:function(){f.trace.apply(null,i("Chat T:"+this._prefix,arguments))}},{key:"debug",value:function(){f.debug.apply(null,i("Chat D:"+this._prefix,arguments))}},{key:"info",value:function(){f.info.apply(null,i("Chat I:"+this._prefix,arguments))}},{key:"warn",value:function(){f.warn.apply(null,i("Chat W:"+this._prefix,arguments))}},{key:"error",value:function(){f.error.apply(null,i("Chat E:"+this._prefix,arguments))}}],[{key:"scope",value:function(t){return this._prefix+=" "+t,new e}},{key:"setLevel",value:function(e){f.setLevel(e)}},{key:"trace",value:function(){f.trace.apply(null,i("Chat T:",arguments))}},{key:"debug",value:function(){f.debug.apply(null,i("Chat D:",arguments))}},{key:"info",value:function(){f.info.apply(null,i("Chat I:",arguments))}},{key:"warn",value:function(){f.warn.apply(null,i("Chat W:",arguments))}},{key:"error",value:function(){f.error.apply(null,i("Chat E:",arguments))}}]),e}();t.exports=p},{"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,loglevel:172}],241:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/define-properties"),s=r(i),o=e("babel-runtime/core-js/object/get-prototype-of"),a=r(o),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),d=r(l),h=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(h),p=e("babel-runtime/helpers/inherits"),m=r(p),_=e("events").EventEmitter,g=function(e){function t(e,n,r,i){(0,c.default)(this,t);var o=(0,f.default)(this,(t.__proto__||(0,a.default)(t)).call(this)),u=!1,l=null,d=n.identity,h=n.roleSid||null,p=void 0!==n.lastConsumedMessageIndex?n.lastConsumedMessageIndex:null,m=n.lastConsumptionTimestamp?new Date(n.lastConsumptionTimestamp):null;if(!n.identity)throw new Error("Received invalid Member object from server: Missing identity.");return(0,s.default)(o,{_identity:{get:function(){return d},set:function(e){return d=e}},_isTyping:{get:function(){return u},set:function(e){return u=e}},_lastConsumedMessageIndex:{get:function(){return p},set:function(e){return p=e}},_lastConsumptionTimestamp:{get:function(){return m},set:function(e){return m=e}},_roleSid:{get:function(){return h},set:function(e){return h=e}},_typingTimeout:{writable:!0,value:l},channel:{enumerable:!0,value:e},identity:{enumerable:!0,get:function(){return d}},isTyping:{enumerable:!0,get:function(){return u}},lastConsumedMessageIndex:{enumerable:!0,get:function(){return p}},lastConsumptionTimestamp:{enumerable:!0,get:function(){return m}},roleSid:{enumerable:!0,get:function(){return h}},sid:{enumerable:!0,value:r},userInfo:{enumerable:!0,get:function(){return i}}}),i.on("updated",function(){return o.emit("userInfoUpdated",o)}),o}return(0,m.default)(t,e),(0,d.default)(t,[{key:"_startTyping",value:function(e){var t=this;return clearTimeout(this._typingTimeout),this._isTyping=!0,this.emit("typingStarted",this),this.channel.emit("typingStarted",this),this._typingTimeout=setTimeout(function(){return t._endTyping()},e),this}},{key:"_endTyping",value:function(){this._typingTimeout&&(this._isTyping=!1,this.emit("typingEnded",this),this.channel.emit("typingEnded",this),clearInterval(this._typingTimeout),this._typingTimeout=null)}},{key:"_update",value:function(e){var t=!1;if(e.roleSid&&this._roleSid!==e.roleSid&&(this._roleSid=e.roleSid,t=!0),void 0!==e.lastConsumedMessageIndex&&this._lastConsumedMessageIndex!==e.lastConsumedMessageIndex&&(this._lastConsumedMessageIndex=e.lastConsumedMessageIndex,t=!0),e.lastConsumptionTimestamp){var n=new Date(e.lastConsumptionTimestamp);this._lastConsumptionTimestamp&&this._lastConsumptionTimestamp.getTime()===n.getTime()||(this._lastConsumptionTimestamp=n,t=!0)}t&&this.emit("updated",this)}},{key:"remove",value:function(){return this.channel.removeMember(this)}}]),t}(_);t.exports=g},{"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],242:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){try{return t?JSON.parse(t):{}}catch(t){return k.warn("Got malformed attributes for the message",e),{}}}var s=e("babel-runtime/core-js/json/stringify"),o=r(s),a=e("babel-runtime/core-js/promise"),u=r(a),c=e("babel-runtime/core-js/object/define-properties"),l=r(c),d=e("babel-runtime/core-js/object/get-prototype-of"),h=r(d),f=e("babel-runtime/helpers/classCallCheck"),p=r(f),m=e("babel-runtime/helpers/createClass"),_=r(m),g=e("babel-runtime/helpers/possibleConstructorReturn"),v=r(g),y=e("babel-runtime/helpers/inherits"),b=r(y),T=e("events").EventEmitter,k=e("./logger"),w=e("./util").isDeepEqual,M=function(e){function t(e,n,r){(0,p.default)(this,t);var s=(0,v.default)(this,(t.__proto__||(0,h.default)(t)).call(this)),o=r.text,a=r.dateUpdated?new Date(r.dateUpdated):null,u=r.lastUpdatedBy?r.lastUpdatedBy:null;return(0,l.default)(s,{_body:{get:function(){return o},set:function(e){return o=e}},_dateUpdated:{get:function(){return a},set:function(e){return a=e}},_lastUpdatedBy:{get:function(){return u},set:function(e){return u=e}},_attributes:{value:i(r.sid,r.attributes),writable:!0},author:{enumerable:!0,value:r.author},body:{enumerable:!0,get:function(){return o}},channel:{enumerable:!0,value:e},dateUpdated:{enumerable:!0,get:function(){return a}},index:{enumerable:!0,value:parseInt(n)},lastUpdatedBy:{enumerable:!0,get:function(){return u}},sid:{enumerable:!0,value:r.sid},timestamp:{enumerable:!0,value:new Date(r.timestamp)},attributes:{enumerable:!0,get:function(){return s._attributes}}}),s}return(0,b.default)(t,e),(0,_.default)(t,[{key:"_update",value:function(e){var t=!1;!e.text&&"string"!=typeof e.text||e.text===this._body||(this._body=e.text,t=!0),e.lastUpdatedBy&&e.lastUpdatedBy!==this._lastUpdatedBy&&(this._lastUpdatedBy=e.lastUpdatedBy,t=!0),e.dateUpdated&&new Date(e.dateUpdated).getTime()!==(this._dateUpdated&&this._dateUpdated.getTime())&&(this._dateUpdated=new Date(e.dateUpdated),t=!0);var n=i(this.sid,e.attributes);w(this._attributes,n)||(this._attributes=n,t=!0),t&&this.emit("updated",this)}},{key:"remove",value:function(){var e=this;return this.channel._session.addCommand("deleteMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString()}).then(function(){return e})}},{key:"updateBody",value:function(e){var t=this;if("string"!=typeof e)throw new Error("Body <String> is a required parameter for updateBody");return this.channel._session.addCommand("editMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString(),text:e}).then(function(){return t})}},{key:"updateAttributes",value:function(e){var t=this;return void 0===e?u.default.reject(new Error("Attributes is a required parameter for updateAttributes")):e.constructor!==Object?u.default.reject(new Error("Attributes must be a valid JSON object")):this.channel._session.addCommand("editMessageAttributes",{channelSid:this.channel.sid,messageIdx:this.index,attributes:(0,o.default)(e)}).then(function(){return t})}}]),t}(T);t.exports=M},{"./logger":240,"./util":251,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,events:169}],243:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/promise"),s=r(i),o=e("babel-runtime/core-js/object/define-properties"),a=r(o),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),d=r(l),h=function(){function e(t,n,r,i){(0,c.default)(this,e),(0,a.default)(this,{prevToken:{value:r},nextToken:{value:i},source:{value:n},hasNextPage:{value:!!i,enumerable:!0},hasPrevPage:{value:!!r,enumerable:!0},items:{get:function(){return t},enumerable:!0}})}return(0,d.default)(e,[{key:"nextPage",value:function(){return this.hasNextPage?this.source(this.nextToken):s.default.reject(new Error("No next page"))}},{key:"prevPage",value:function(){return this.hasPrevPage?this.source(this.prevToken):s.default.reject(new Error("No previous page"))}}]),e}();t.exports=h},{"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],244:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/map"),s=r(i),o=e("babel-runtime/core-js/object/define-properties"),a=r(o),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),d=r(l),h=function(){function e(t,n){(0,c.default)(this,e),(0,a.default)(this,{_session:{value:n},_consumptionHorizonReports:{value:new s.default},_consumptionHorizonUpdateTimer:{value:null,writable:!0}})}return(0,d.default)(e,[{key:"_getReportInterval",value:function(){return this._session.getConsumptionReportInterval().then(function(e){return 1e3*e.seconds})}},{key:"_delayedSendConsumptionHorizon",value:function(e){var t=this;null===this._consumptionHorizonUpdateTimer&&(this._consumptionHorizonUpdateTimer=setTimeout(function(){var e=[];t._consumptionHorizonReports.forEach(function(t){return e.push(t)}),e.length>0&&t._session.addCommand("consumptionReport",{report:e}),t._consumptionHorizonUpdateTimer=null,t._consumptionHorizonReports.clear()},e))}},{key:"updateLastConsumedMessageIndexForChannel",value:function(e,t){var n=this;this._consumptionHorizonReports.set(e,{channelSid:e,messageIdx:t}),this._getReportInterval().then(function(e){return n._delayedSendConsumptionHorizon(e)})}},{key:"advanceLastConsumedMessageIndexForChannel",value:function(e,t){var n=this,r=this._consumptionHorizonReports.get(e);r&&r.messageIdx>=t||(this._consumptionHorizonReports.set(e,{channelSid:e,messageIdx:t}),this._getReportInterval().then(function(e){return n._delayedSendConsumptionHorizon(e)}))}}]),e}();t.exports=h},{"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],245:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/promise"),s=r(i),o=e("babel-runtime/helpers/slicedToArray"),a=r(o),u=e("babel-runtime/core-js/get-iterator"),c=r(u),l=e("babel-runtime/core-js/map"),d=r(l),h=e("babel-runtime/core-js/number/is-integer"),f=r(h),p=e("babel-runtime/core-js/object/define-properties"),m=r(p),_=e("babel-runtime/helpers/classCallCheck"),g=r(_),v=e("babel-runtime/helpers/createClass"),y=r(v),b=function(){function e(t,n,r){(0,g.default)(this,e),(0,m.default)(this,{_config:{value:t},_transport:{value:r},_session:{value:n},_cacheLifetime:{value:(0,f.default)(t.httpCacheLifetimeOverride)?t.httpCacheLifetimeOverride:t.httpCacheLifetimeDefault,writable:!0},_cache:{value:new d.default},_timer:{value:null,writable:!0}})}return(0,y.default)(e,[{key:"_isExpired",value:function(e){return!this._cacheLifetime||Date.now()-e>this._cacheLifetime}},{key:"_cleanupCache",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=(0,c.default)(this._cache);!(e=(r=i.next()).done);e=!0){var s=(0,a.default)(r.value,2),o=s[0],u=s[1];this._isExpired(u.timestamp)&&this._cache.delete(o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}0===this._cache.size&&clearTimeout(this._timer)}},{key:"_pokeTimer",value:function(){var e=this;this._timer=this._timer||setInterval(function(){return e._cleanupCache()},2*this._cacheLifetime)}},{key:"get",value:function(e){var t=this,n=this._cache.get(e);if(n&&!this._isExpired(n.timestamp))return s.default.resolve(n.response);var r={"X-Twilio-Token":this._config.token};return this._transport.get(e,r).then(function(n){return t._cache.set(e,{response:n,timestamp:Date.now()}),t._pokeTimer(),n})}}]),e}();t.exports=b},{"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":5,"babel-runtime/core-js/number/is-integer":6,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/slicedToArray":26}],246:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/promise"),s=r(i),o=e("babel-runtime/core-js/map"),a=r(o),u=e("babel-runtime/core-js/object/define-properties"),c=r(u),l=e("babel-runtime/helpers/classCallCheck"),d=r(l),h=e("babel-runtime/helpers/createClass"),f=r(h),p=e("../logger").scope("TypingIndicator"),m="twilio.ipmsg.typing_indicator",_=function(){function e(t,n,r,i){var s=this;(0,d.default)(this,e),(0,c.default)(this,{_transport:{value:n},_notifications:{value:r},_config:{value:t},_typingTimeout:{value:null,writable:!0},_sentUpdates:{value:new a.default},_getChannel:{value:i},token:{get:function(){return t.token}},typingTimeout:{get:function(){return t.typingIndicatorTimeoutOverride||s._typingTimeout||t.typingIndicatorTimeoutDefault}}})}return(0,f.default)(e,[{key:"initialize",value:function(){var e=this;this._notifications.subscribe(m,"twilsock"),this._notifications.on("message",function(t,n){t===m&&e._handleRemoteTyping(n)})}},{key:"_handleRemoteTyping",value:function(e){var t=this;p.trace("Got new typing indicator ",e),this._getChannel(e.channel_sid).then(function(n){n&&n._members.forEach(function(n){n.identity===e.identity&&n._startTyping(t.typingTimeout)})}).catch(function(e){throw p.error(e),e})}},{key:"send",value:function(e){var t=this._sentUpdates.get(e);return t&&t>Date.now()-this.typingTimeout?s.default.resolve():(this._sentUpdates.set(e,Date.now()),this._send(e))}},{key:"_send",value:function(e){var t=this;p.trace("Sending typing indicator");var n=this._config.typingIndicatorUri,r={"X-Twilio-Token":this.token,"Content-Type":"application/x-www-form-urlencoded"},i="ChannelSid="+e;return this._transport.post(n,r,i).then(function(e){e.body.hasOwnProperty("typing_timeout")&&(t._typingTimeout=1e3*e.body.typing_timeout)}).catch(function(e){throw p.error("Failed to send typing indicator:",e),e})}}]),e}();t.exports=_},{"../logger":240,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22}],247:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/promise"),s=r(i),o=e("babel-runtime/core-js/map"),a=r(o),u=e("babel-runtime/core-js/object/define-properties"),c=r(u),l=e("babel-runtime/helpers/classCallCheck"),d=r(l),h=e("babel-runtime/helpers/createClass"),f=r(h),p=e("uuid"),m=e("platform"),_=e("./logger").scope("Session"),g=e("./util/changetracker"),v=e("./sessionerror"),y=e("durational"),b=e("./../package.json").version,T="com.twilio.rtd.ipmsg",k=function(){function e(t,n,r){var i=this;(0,d.default)(this,e);var s="undefined"!=typeof navigator?m.parse(navigator.userAgent):m;(0,c.default)(this,{_endpointPlatform:{value:["js",b,s.os,s.name,s.version].join("|")},_pendingCommands:{value:new a.default},_sessionContextChangeTracker:{value:new g},_sessionStreamPromise:{value:null,writable:!0},_config:{value:r},_token:{value:null,writable:!0},_tokenSynced:{value:!0,writable:!0},identity:{enumerable:!0,get:function(){return i._sessionContextChangeTracker._data.identity}},userInfo:{enumerable:!0,get:function(){return i._sessionContextChangeTracker._data.userInfo}},reachabilityEnabled:{enumerable:!0,get:function(){return i._sessionContextChangeTracker._data.reachabilityEnabled}},datasync:{enumerable:!0,value:t},transport:{value:n}})}return(0,f.default)(e,[{key:"initialize",value:function(e){var t=this;this._token=e,this._tokenSynced=!1;var n={type:"IpMsgSession",apiVersion:"3",endpointPlatform:this._endpointPlatform,token:e};return this._sessionStreamPromise=this.datasync.list({purpose:T,context:n}).then(function(e){return _.info("Session created",e.sid),t._tokenSynced=!0,e.on("itemAdded",function(e){return t._processCommandResponse(e)}),e.on("itemUpdated",function(e){return t._processCommandResponse(e)}),e.on("contextUpdated",function(e){_.info("Session context updated"),_.debug("new session context:",e),t._sessionContextChangeTracker.update(e)}),e}).catch(function(e){throw _.error("Failed to create session",e),e}),this._sessionStreamPromise}},{key:"addCommand",value:function(e,t){return this._processCommand(e,t)}},{key:"_processCommand",value:function(e,t){var n=this,r={request:t};return r.request.action=e,r.commandId=p.v4(),_.info("Adding command: ",e,r.commandId),_.debug("command arguments:",t),new s.default(function(e,t){n._sessionStreamPromise.then(function(i){return n._pendingCommands.set(r.commandId,{resolve:e,reject:t}),i.push(r)}).then(function(){return _.debug("Command accepted by server",r.commandId)}).catch(function(e){n._pendingCommands.delete(r.commandId),_.error("Failed to add a command to the session",e),t(new Error("Can't add command: "+e.description))})})}},{key:"_processCommandResponse",value:function(e){if(e.value.hasOwnProperty("response")&&e.value.hasOwnProperty("commandId")&&this._pendingCommands.has(e.value.commandId)){var t=e.value,n=e.value.commandId;if(200===t.response.status){_.debug("Command succeeded: ",t);var r=this._pendingCommands.get(n).resolve;this._pendingCommands.delete(n),r(t.response)}else{_.error("Command failed: ",t);var i=this._pendingCommands.get(n).reject;this._pendingCommands.delete(n),i(new v(t.response.statusText,t.response.status))}}}},{key:"updateToken",value:function(e){return this._token=e,this._tokenSynced=!1,this.syncToken()}},{key:"syncToken",value:function(){var e=this;return this._tokenSynced?s.default.resolve():this._sessionStreamPromise.then(function(t){return t.getContext().then(function(n){return n.token=e._token,t.updateContext(n)}).then(function(){e._tokenSynced=!0})}).catch(function(e){throw _.error("Couldn't update the token in session context",e),new Error(e)})}},{key:"onKeyUpdated",value:function(e,t){this._sessionContextChangeTracker.addEventHandler("keyAdded",e,t),this._sessionContextChangeTracker.addEventHandler("keyUpdated",e,t)}},{key:"getSessionLinks",value:function(){var e=this;return new s.default(function(t){e._sessionStreamPromise.then(function(e){return e.getContext()}).then(function(n){n.hasOwnProperty("links")?t(n.links):e.onKeyUpdated("/links",function(){e._sessionStreamPromise.then(function(e){return e.getContext()}).then(function(e){return t(e.links)})})})}).then(function(t){return{publicChannelsUrl:e._config.baseUrl+t.publicChannelsUrl,myChannelsUrl:e._config.baseUrl+t.myChannelsUrl,typingUrl:e._config.baseUrl+t.typingUrl}})}},{key:"getChannelsId",value:function(){var e=this;return new s.default(function(t){e._sessionStreamPromise.then(function(e){return e.getContext()}).then(function(n){n.hasOwnProperty("channelsUrl")?t(n.channels):e.onKeyUpdated("/channels",t)})})}},{key:"getMyChannelsId",value:function(){var e=this;return new s.default(function(t){e._sessionStreamPromise.then(function(e){return e.getContext()}).then(function(n){n.hasOwnProperty("myChannels")?t(n.myChannels):e.onKeyUpdated("/myChannels",t)})})}},{key:"getUserInfosData",value:function(){var e=this;return new s.default(function(t){function n(e){t({userInfo:e.userInfo,identity:e.identity})}e._sessionStreamPromise.then(function(e){return e.getContext()}).then(function(t){t.hasOwnProperty("userInfo")?n(t):e.onKeyUpdated("/userInfo",function(){e._sessionStreamPromise.then(function(e){return e.getContext()}).then(function(e){return n(e)})})})})}},{key:"getConsumptionReportInterval",value:function(){var e=this;return this._sessionStreamPromise.then(function(e){return e.getContext()}).then(function(t){return y.fromString(e._config.consumptionReportIntervalOverride||t.consumptionReportInterval||e._config.consumptionReportIntervalDefault)})}}]),e}();t.exports=k},{"./../package.json":229,"./logger":240,"./sessionerror":248,"./util/changetracker":250,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,durational:167,platform:174,uuid:224}],248:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/core-js/object/get-prototype-of"),s=r(i),o=e("babel-runtime/helpers/classCallCheck"),a=r(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),c=r(u),l=e("babel-runtime/helpers/inherits"),d=r(l),h=function(e){function t(e,n){(0,a.default)(this,t);var r=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return r.name=r.constructor.name,r.message=e,r.code=n,Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=(new Error).stack,r}return(0,d.default)(t,e),t}(Error);t.exports=h},{"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25}],249:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("babel-runtime/regenerator"),s=r(i),o=e("babel-runtime/core-js/json/stringify"),a=r(o),u=e("babel-runtime/helpers/asyncToGenerator"),c=r(u),l=e("babel-runtime/core-js/promise"),d=r(l),h=e("babel-runtime/core-js/object/define-properties"),f=r(h),p=e("babel-runtime/core-js/object/get-prototype-of"),m=r(p),_=e("babel-runtime/helpers/classCallCheck"),g=r(_),v=e("babel-runtime/helpers/createClass"),y=r(v),b=e("babel-runtime/helpers/possibleConstructorReturn"),T=r(b),k=e("babel-runtime/helpers/inherits"),w=r(k),M=e("events").EventEmitter,S=e("./logger").scope("UserInfo"),L=function(e){function t(e,n,r,i){(0,g.default)(this,t);var s=(0,T.default)(this,(t.__proto__||(0,m.default)(t)).call(this));return s.setMaxListeners(0),(0,f.default)(s,{_datasync:{value:r},_session:{value:i},_identity:{value:e,writable:!0},_entityName:{value:n,writable:!0},_attributes:{value:{},writable:!0},_friendlyName:{value:null,writable:!0},_online:{value:null,writable:!0},_notifiable:{value:null,writable:!0},_promiseToFetch:{writable:!0},identity:{enumerable:!0,get:function(){return s._identity}},attributes:{enumerable:!0,get:function(){return s._attributes}},friendlyName:{enumerable:!0,get:function(){return s._friendlyName}},online:{enumerable:!0,get:function(){return s._online}},notifiable:{enumerable:!0,get:function(){return s._notifiable}}}),s}return(0,w.default)(t,e),(0,y.default)(t,[{key:"_update",value:function(e,t){switch(S.debug("UserInfo for",this._identity,"updated:",e,t),e){case"friendlyName":this._friendlyName=t.value;break;case"attributes":try{this._attributes=JSON.parse(t.value)}catch(e){this._attributes={}}break;case"reachability":this._online=t.online,this._notifiable=t.notifiable;break;default:return}this.emit("updated",e)}},{key:"_updateReachabilityInfo",value:function(e,t){var n=this;return this._session.reachabilityEnabled?e.get("reachability").then(t).catch(function(e){S.warn("Failed to get reachability info for ",n._identity,e)}):d.default.resolve()}},{key:"_fetch",value:function(){var e=this;if(!this._entityName)return d.default.resolve(this);var t=function(t){return e._update(t.key,t.value)};return this._promiseToFetch=this._datasync.map({uniqueName:this._entityName,mode:"open"}).then(function(n){return n.on("itemUpdated",t),d.default.all([n.get("friendlyName").then(t),n.get("attributes").then(t),e._updateReachabilityInfo(n,t)])}).then(function(){return S.debug("Fetched for",e.identity),e}).catch(function(t){throw e._promiseToFetch=null,t}),this._promiseToFetch}},{key:"_ensureFetched",value:function(){return this._promiseToFetch||this._fetch()}},{key:"updateAttributes",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.constructor===Object){e.next=2;break}throw new Error("Attributes must be an object.");case 2:return e.next=4,this._session.addCommand("editUserAttributes",{username:this._identity,attributes:(0,a.default)(t)});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateFriendlyName",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"string"==typeof t){e.next=2;break}throw new Error("friendlyName must be string or empty.");case 2:return e.next=4,this._session.addCommand("editUserFriendlyName",{username:this._identity,friendlyName:t});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}},e,this)}));return e}()}]),t}(M);t.exports=L},{"./logger":240,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/define-properties":9,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/asyncToGenerator":20,"babel-runtime/helpers/classCallCheck":21,"babel-runtime/helpers/createClass":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":28,events:169}],250:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=this;(0,o.default)(this,{_pendingListeners:{value:{}},_data:{value:e||{},writable:!0}}),a.call(this),["keyAdded","keyRemoved","keyUpdated"].forEach(function(e){t._pendingListeners[e]={},t.on(e,function(n,r){(t._pendingListeners[e][n]||[]).forEach(function(e){return e(r)}),t._pendingListeners[e][n]=[]})})}var s=e("babel-runtime/core-js/object/define-properties"),o=r(s),a=e("events").EventEmitter,u=e("util").inherits,c=e("rfc6902");u(i,a),i.prototype._traverse=function(e,t){var n=this;c.createPatch(e,t).forEach(function(e){"add"===e.op?n.emit("keyAdded",e.path,e.value):"replace"===e.op?n.emit("keyUpdated",e.path,e.value):"remove"===e.op&&n.emit("keyRemoved",e.path)})},i.prototype.update=function(e){var t=this._data;this._data=e,this._traverse(t,e)},i.prototype.addEventHandler=function(e,t,n){var r=this._pendingListeners[e][t]||[];r.push(n),this._pendingListeners[e][t]=r},t.exports=i},{"babel-runtime/core-js/object/define-properties":9,events:169,rfc6902:181,util:223}],251:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return 0===u.createPatch(e,t).length}function s(e){(0,a.default)(this,{base:{value:e.replace(/\/$/,"")},paths:{value:[]},args:{value:[]}}),this.arg=function(e,t){return void 0!==t&&this.args.push(e+"="+t),this},this.path=function(e){return this.paths.push(e),this},this.build=function(){var e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}var o=e("babel-runtime/core-js/object/define-properties"),a=r(o),u=e("rfc6902");t.exports.isDeepEqual=i,t.exports.UriBuilder=s},{"babel-runtime/core-js/object/define-properties":9,rfc6902:181}]},{},[239])(239)})}).call(t,n(3),n(156).setImmediate)},function(e,t,n){(function(n,r){var i,i,s,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! twilio-video.js 1.0.0-beta4

The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2015, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes SIP.js under the following license.

    Copyright (c) 2014 Junction Networks, Inc. <http://www.onsip.com>

    License: The MIT License

    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
    LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
    OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
    WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

SIP.js contains substantial portions of the JsSIP software under the following
license.

    Copyright (c) 2012-2013 Jos Luis Milln - Versatica <http://www.versatica.com>

    License: The MIT License

    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
    LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
    OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
    WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 */
!function(r){var u=function e(t,n,r){function s(a,u){if(!n[a]){if(!t[a]){var c="function"==typeof i&&i;if(!u&&c)return i(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return s(n?n:e)},d,d.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof i&&i,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,n){"use strict";function r(e,t){return new r.Client(e,t)}var i=e("../package").version;Object.defineProperties(r,{Client:{enumerable:!0,value:e("./client")},getUserMedia:{enumerable:!0,value:e("./webrtc/getusermedia")},LocalMedia:{enumerable:!0,value:e("./media/localmedia")},version:{enumerable:!0,value:i}}),t.exports=r},{"../package":110,"./client":3,"./media/localmedia":8,"./webrtc/getusermedia":59}],2:[function(e,t,n){"use strict";function r(e,t,n,r){var s,o=new Error("Canceled");return new i(function(i,a,u){var c;e(function(e){return u()?Promise.reject(o):(c=t(e),n(c).then(function(e){if(u())throw o;return s=e()}))}).then(function(e){if(u())throw e.disconnect(),o;i(r(c,e))}).catch(function(e){a(e)})},function(){s&&s.cancel()})}var i=e("./util/cancelablepromise");t.exports=r},{"./util/cancelablepromise":48}],3:[function(e,t,n){"use strict";function r(e,t){function n(){var e={configUrl:t.ecsServer+"/v1/Configuration",body:{service:"video",sdk_version:w}};return c.info("Getting ECS configuration"),c.debug("Token:",f.token),c.debug("ECS options:",e),a.getConfiguration(f.token,e).then(function(e){c.info("Got ECS configuration"),c.debug("ECS configuration:",e);var t=k.getOrNull(e,"video.network_traversal_service.ttl");return t=t||d.ICE_SERVERS_DEFAULT_TTL,c.debug("NTS Token TTL:",t),setTimeout(function(){f._ecsPromise=n()},1e3*(t-d.ECS_TIMEOUT)),e},function(e){return c.warn("Failed to get ECS configuration:",e),null})}if(!(this instanceof r))return new r(e,t);if("string"!=typeof e)throw new p.INVALID_TYPE("initialToken","string");_.call(this);try{var i=k.token.getAccountSid(e),s=k.token.getIdentity(e)}catch(e){throw new m.INVALID_ACCESSTOKEN(e.message)}t=Object.assign({ECS:h,environment:d.DEFAULT_ENVIRONMENT,getLocalMedia:g.getLocalMedia,logLevel:d.DEFAULT_LOG_LEVEL,realm:d.DEFAULT_REALM,signaling:b},t),t=Object.assign({ecsServer:d.ECS_SERVER(t.environment,t.realm),wsServer:d.WS_SERVER(t.environment,t.realm,i)},t);var o=d.DEFAULT_ICE_SERVERS(t.environment),a=t.ECS,u=k.buildLogLevels(t.logLevel),c=new y("default",this,u),l=new Map,f=this,v=t.signaling;t.log=c;var T=new v(t.wsServer,i,s,t);Object.defineProperties(this,{_defaultIceServers:{value:o},_getLocalMedia:{value:t.getLocalMedia},_instanceId:{value:++M},_log:{value:c},_options:{value:t},_rooms:{value:l},_signaling:{value:T},_token:{value:e,writable:!0},rooms:{enumerable:!0,get:function(){return new Map(l)}},token:{enumerable:!0,get:function(){return this._token}}}),Object.defineProperty(this,"_ecsPromise",{value:n(),writable:!0}),c.info("Created a new Client"),c.debug("Initial Access Token:",e),c.debug("Options:",t)}function i(e,t){var n=e._signaling.createLocalParticipantSignaling(),r=e._log;return r.debug("Creating a new LocalParticipant:",n),new v(n,t,{log:r})}function s(e,t,n,r){var i=new f(n,r,t),s=e._log;return s.debug("Creating a new Room:",i),e._rooms.set(i.sid,i),r.on("stateChanged",function t(){s.info("Disconnected from Room:",i.toString()),e._rooms.delete(i.sid),r.removeListener("stateChanged",t)}),i}function o(e,t,n){var r=e._log;return r.info("Getting ICE servers"),r.debug("Options:",t),u(e,t).then(function(i){var s={token:e.token,accountSid:k.token.getAccountSid(e.token),identity:k.token.getIdentity(e.token)};return r.info("Got ICE servers"),r.debug("ICE servers:",i),t.iceServers=i,r.debug("Creating a new RoomSignaling"),r.debug("RoomSignaling params:",s),e._signaling.connect(n._signaling,s.token,s.accountSid,s.identity,t)})}function a(e,t,n){var r=e._log;return t.shouldStopLocalMedia=!t.localMedia&&!t.localStream,t.log=r,t.shouldStopLocalMedia?r.info("LocalMedia was not provided, so it will be acquired automatically before connecting to the Room. LocalMedia will be released if connecting to the Room fails or if the Room is disconnected"):(r.info("Getting LocalMedia"),r.debug("Options:",t)),e._getLocalMedia(t).then(function(e){t.shouldStopLocalMedia&&r.info("Got LocalMedia:",e);var i=n(e);return i.catch(function(){t.shouldStopLocalMedia&&(r.info("The automatically acquired LocalMedia will now be stopped"),e.stop())}),i})}function u(e,t){var n=e._log;return t.iceServers?(n.debug("ICE servers:",t.iceServers),Promise.resolve(t.iceServers)):(n.debug("No ICE servers provided, so getting them from ECS"),new T(e._ecsPromise,d.ICE_SERVERS_TIMEOUT_MS).then(function(e){var t=k.getOrNull(e,"video.network_traversal_service");if(!t)throw new Error("network_traversal_service not available");if(t.warning&&n.warn(t.warning),!t.ice_servers)throw new Error("ice_servers not available");return n.info("Got ICE servers"),n.debug("ICE servers:",t.ice_servers),t.ice_servers}).catch(function(t){return n.error("Failed to get ICE servers from ECS:",t.message),n.warn("Returning default ICE servers:",e._defaultIceServers),e._defaultIceServers}))}var c=e("util").inherits,l=e("./cancelableroompromise"),d=e("./util/constants"),h=e("./ecs"),f=e("./room"),p=e("./util/constants").typeErrors,m=e("./util/constants").twilioErrors,_=e("events").EventEmitter,g=e("./media/localmedia"),v=e("./localparticipant"),y=e("./util/log"),b=e("./signaling/v2"),T=e("./util/timeoutpromise"),k=e("./util"),w=e("../package").version,M=0;c(r,_),r.prototype.toString=function(){return"[Client #"+this._instanceId+"]"},r.prototype.connect=function(e){e=Object.assign({to:null},this._options,e);var t=this._log;t.info("Connecting to a Room"),t.debug("Options:",e);var n=l(a.bind(null,this,e),i.bind(null,this),o.bind(null,this,e),s.bind(null,this,e));return n.then(function(e){return t.info("Connected to Room:",e.toString()),t.info("Room name:",e.name),t.debug("Room:",e),e},function(e){n._isCanceled?t.info("Attempt to connect to a Room was canceled"):t.info("Error while connecting to a Room:",e)}),n},r.prototype.setLogLevel=function(e){return this._log.setLevels(k.buildLogLevels(e)),this},r.prototype.updateToken=function(e){var t=this._log;t.info("Updating the Client with a new Access Token"),t.debug("New Access Token:",e);try{return k.token.getAccountSid(e),k.token.getIdentity(e),this._token=e,Promise.resolve(this)}catch(e){throw new m.INVALID_ACCESSTOKEN(e.message)}},t.exports=r},{"../package":110,"./cancelableroompromise":2,"./ecs":4,"./localparticipant":6,"./media/localmedia":8,"./room":18,"./signaling/v2":28,"./util":51,"./util/constants":49,"./util/log":53,"./util/timeoutpromise":55,events:70,util:109}],4:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("<String>token is a required argument.");t=Object.assign({configUrl:o},t);var n={url:t.configUrl,headers:{"X-Twilio-Token":e,"Content-Type":"application/x-www-form-urlencoded"}};return t.body&&(n.body=i(t.body)),s.post(n).then(function(e){return JSON.parse(e)})}function i(e){return Object.keys(e||{}).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}var s=e("./request"),o="https://ecs.us1.twilio.com/v1/Configuration";t.exports.getConfiguration=r},{"./request":17}],5:[function(e,t,n){"use strict";function r(){Object.defineProperties(this,{_eventEmitter:{value:new i}})}var i=e("events").EventEmitter;r.prototype.dispatchEvent=function(e){return this._eventEmitter.emit(e.type,e)},r.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},r.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},t.exports=r},{events:70}],6:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);n.media=t,o.call(this,e,n)}var i=e("./util"),s=e("util").inherits,o=e("./participant");s(r,o),r.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},r.prototype._handleTrackSignalingEvents=function(){function e(e){s.addTrack(e._signaling),n.info("Added a new "+i.trackClass(e,!0)+":",e.id),n.debug(i.trackClass(e,!0)+":",e)}function t(e){s.removeTrack(e._signaling),n.info("Removed a "+i.trackClass(e,!0)+":",e.id),n.debug(i.trackClass(e,!0)+":",e)}var n=this._log;if("disconnected"!==this.state){var r=this.media,s=this._signaling;r.on("trackAdded",e),r.on("trackRemoved",t),r.tracks.forEach(e),s.on("stateChanged",function i(o){n.debug("Transitioned to state:",o),"disconnected"===o&&(n.debug("Removing LocalTrack event listeners"),s.removeListener("stateChanged",i),r.removeListener("trackAdded",e),r.removeListener("trackRemoved",t))})}},t.exports=r},{"./participant":15,"./util":51,util:109}],7:[function(e,t,n){"use strict";function r(e){i.call(this),e=e||{};var t=new Map,n=new Map,r=new Set,s=new Map,o=new Map,u=new Map;return Object.defineProperties(this,{_instanceId:{value:++a},_log:{value:e.log.createLog("media",this)},_trackEventListeners:{value:o},attachments:{enumerable:!0,value:t},audioTracks:{enumerable:!0,value:n},isMuted:{enumerable:!0,get:function(){var e=!0;return n.forEach(function(t){e=e&&!t.isEnabled}),e}},isPaused:{enumerable:!0,get:function(){var e=!0;return u.forEach(function(t){e=e&&!t.isEnabled}),e}},mediaStreams:{enumerable:!0,value:r},tracks:{enumerable:!0,value:s},videoTracks:{enumerable:!0,value:u}}),this._log.info("Created a new Media"),this}var i=e("events").EventEmitter,s=e("util").inherits,o=e("../util"),a=0,u=e("./track"),c=e("./track/videotrack"),l=r.TRACK_ADDED="trackAdded",d=r.TRACK_DIMENSIONS_CHANGED="trackDimensionsChanged",h=r.TRACK_DISABLED="trackDisabled",f=r.TRACK_ENABLED="trackEnabled",p=r.TRACK_REMOVED="trackRemoved",m=r.TRACK_STARTED="trackStarted";s(r,i),r.prototype.toString=function(){return"[Media #"+this._instanceId+"]"},r.prototype._updateMediaStreams=function(){return this.mediaStreams.clear(),this.tracks.forEach(function(e){this.mediaStreams.add(e.mediaStream)},this),this.mediaStreams},r.prototype._addTrack=function(e){return this.tracks.has(e.id)?this:(this.mediaStreams.add(e.mediaStream),this.tracks.set(e.id,e),this._reemitTrackEvents(e),"audio"===e.kind?this.audioTracks.set(e.id,e):this.videoTracks.set(e.id,e),this.emit(l,e),this._log.info("Added "+o.trackClass(e)+":",e.id),this)},r.prototype._reemitTrackEvents=function(e){if(!this._trackEventListeners.has(e)){var t=[[c.DIMENSIONS_CHANGED,d],[u.DISABLED,h],[u.ENABLED,f],[u.STARTED,m]].map(function(t){var n=t[0],r=t[1];return[n,this._reemitTrackEvent(e,n,r)]},this);this._trackEventListeners.set(e,t)}},r.prototype._reemitTrackEvent=function(e,t,n){function r(){i.emit(n,e)}var i=this;return e.on(t,r),r},r.prototype._createTrackElement=function(e){return e.attach()},r.prototype._attachTrack=function(e,t,n){var r=this._createTrackElement(n);return e.appendChild(r),t.set(n,r),this._log.debug("Attached "+n+"to element:",r),this},r.prototype._detachTrack=function(e,t){var n=e.get(t);return n?(t.detach(n),n.parentNode&&n.parentNode.removeChild(n),e.delete(t),this._log.debug("Detached "+t+" from element:",n),this):this},r.prototype._removeTrack=function(e){return this.tracks.has(e.id)?(this.tracks.delete(e.id),("audio"===e.kind?this.audioTracks:this.videoTracks).delete(e.id),this._removeTrackEventListeners(e),this._updateMediaStreams(),this.emit(p,e),this._log.info("Removed a "+o.trackClass(e)+":",e.id),this):this},r.prototype._removeTrackEventListeners=function(e){var t=this._trackEventListeners.get(e)||[];this._trackEventListeners.delete(e),t.forEach(function(t){e.removeListener.apply(e,t)})},r.prototype.attach=function(e){return"string"==typeof e?e=this._selectContainer(e):e||(e=this._createContainer()),this._attach(e)},r.prototype._createContainer=function(){return document.createElement("div")},r.prototype._selectContainer=function(e){var t=document.querySelector(e);if(!t)throw new Error("Selector matched no element: "+e);return t},r.prototype._attach=function(e){if(this.attachments.has(e))return e;var t=new Map,n=this;return this.tracks.forEach(function(r){n._attachTrack(e,t,r)}),this.on(l,function r(i){if(!n.attachments.has(e))return n.removeListener(l,r);n._attachTrack(e,t,i)}),this.on(p,function r(i){if(!n.attachments.has(e))return n.removeListener(p,r);n._detachTrack(t,i)}),this.attachments.set(e,t),e},r.prototype.detach=function(e){var t;return t="string"==typeof e?[this._selectContainer(e)]:e?[e]:this._getAllAttachedContainers(),this._detachContainers(t),e?t[0]:t},r.prototype._detachContainers=function(e){return e.map(this._detachContainer.bind(this))},r.prototype._detachContainer=function(e){if(!this.attachments.has(e))return e;var t=this.attachments.get(e),n=this;return this.attachments.delete(e),t.forEach(function(e,r){n._detachTrack(t,r)}),e},r.prototype._getAllAttachedContainers=function(){var e=[];return this.attachments.forEach(function(t,n){e.push(n)}),e},t.exports=r},{"../util":51,"./track":10,"./track/videotrack":14,events:70,util:109}],8:[function(e,t,n){"use strict";function r(e){return this instanceof r?(e=Object.assign({logLevel:o.DEFAULT_LOG_LEVEL},e),e.log=e.log||new d("media",this,a.buildLogLevels(e.logLevel)),l.call(this,e),this):new r(e)}var i=e("../webrtc/getusermedia"),s=e("util").inherits,o=e("../util/constants"),a=e("../util"),u=e("./track/localaudiotrack"),c=e("./track/localvideotrack"),l=e("./"),d=e("../util/log");r.getLocalMedia=function(e){if(e=e||{},e.localMedia)return Promise.resolve(e.localMedia);var t=new r(e),n=t._log;return e.localStream?(n.info("Adding user-provided local MediaStream"),n.debug("MediaStream:",e.localStream),Promise.resolve(t.addStream(e.localStream))):e.audio===!1&&e.video===!1?(n.info("Neither audio nor video requested, so returning empty LocalMedia"),Promise.resolve(t)):(n.info("Calling getUserMedia:",e),i({audio:null===e.audio||void 0===e.audio||e.audio,video:null===e.video||void 0===e.video||e.video}).then(function(e){return n.info("Call to getUserMedia successful; got MediaStream:",e),n.info("Adding MediaStream to LocalMedia"),t.addStream(e)}).catch(function(e){throw n.warn("Call to getUserMedia failed:",e),e}))},s(r,l),r.prototype.toString=function(){return"[LocalMedia #"+this._instanceId+"]"},r.prototype.setLogLevel=function(e){return this._log.setLevels(a.buildLogLevels(e)),this},r.prototype.addTrack=function(e){return e.mediaStream.getTracks().indexOf(e.mediaStreamTrack)===-1&&(this._log.debug("Adding MediaStreamTrack:",e.mediaStreamTrack),e.mediaStream.addTrack(e.mediaStreamTrack)),l.prototype._addTrack.apply(this,arguments)},r.prototype.addMicrophone=function(e){var t=this,n=null,r=this._log;return e=e||!0,this.audioTracks.forEach(function(e){n=n||e}),n?(r.info("Returning existing LocalAudioTrack for microphone:",n),Promise.resolve(n)):(r.info("Getting microphone"),i({audio:e,video:!1}).then(function(e){var n=e.getAudioTracks(),i=n[0],s=new u(e,i,{log:r});return t._addTrack(s),r.info("Got microphone:",i),s}).catch(function(e){throw r.warn("Error while getting microphone:",e),e}))},r.prototype.removeMicrophone=function(e){var t=null,n=this._log;return this.audioTracks.forEach(function(e){t=t||e}),t?(n.info((e?"Stopping and r":"R")+"emoving microphone:",t),this.removeTrack(t,e)):(n.debug("Cannot remove the microphone because it has not been added"),t)},r.prototype.addCamera=function(e){var t=this,n=null,r=this._log;return e=e||!0,this.videoTracks.forEach(function(e){n=n||e}),n?(r.info("Returning existing LocalVideoTrack for camera:",n),Promise.resolve(n)):i({audio:!1,video:e}).then(function(e){var n=e.getVideoTracks(),i=n[0],s=new c(e,i,{log:r});return t._addTrack(s),r.info("Got camera:",i),s}).catch(function(e){throw r.warn("Error while getting camera:",e),e})},r.prototype.removeCamera=function(e){var t=null,n=this._log;return this.videoTracks.forEach(function(e){t=t||e}),t?(n.info((e?"Stopping and r":"R")+"emoving camera:",t),this.removeTrack(t,e)):(n.debug("Cannot remove the camera because it has not been added"),t)},r.prototype.addStream=function(e){var t=this._log;return e.getAudioTracks().forEach(function(n){var r=new u(e,n,{log:t});this._addTrack(r),t.debug("Added new LocalAudioTrack:",r)},this),e.getVideoTracks().forEach(function(n){var r=new c(e,n,{log:t});this._addTrack(r),t.debug("Added new LocalVideoTrack:",r)},this),t.info("Added MediaStream:",e),this},r.prototype.removeStream=function(e,t){var n=this._log;return n.info((t?"Stopping and r":"R")+"emoving all Tracks associated with local MediaStream:",e),e.getTracks().forEach(function(e){var r=this.tracks.get(e.id);r&&(n.debug((t?"Stopping and r":"R")+"emoving LocalTrack:",r),this.removeTrack(r,t))},this),this},r.prototype.removeTrack=function(e,t){var n=this._log;try{e.mediaStream.removeTrack(e.mediaStreamTrack),n.info("Removed MediaStreamTrack:",e.mediaStreamTrack)}catch(e){n.warn("Cannot remove MediaStreamTrack on Firefox:",e)}return l.prototype._removeTrack.call(this,e),("boolean"!=typeof t||t)&&(e.stop(),n.info("Stopped LocalTrack:",e)),e},r.prototype.mute=function(e){var t=this._log;return t.info((e?"M":"Unm")+"uting LocalMedia by "+(e?"dis":"en")+"abling the LocalAudioTracks"),e="boolean"!=typeof e||e,this.audioTracks.forEach(function(n){t.debug((e?"Dis":"En")+"abling LocalAudioTrack:",n),n.enable(!e)}),this},r.prototype.pause=function(e){var t=this._log;return t.info((e?"P":"Unp")+"ausing LocalMedia by "+(e?"dis":"en")+"abling the LocalVideoTracks"),e="boolean"!=typeof e||e,this.videoTracks.forEach(function(n){t.debug((e?"Dis":"En")+"abling LocalVideoTrack:",n),n.enable(!e)}),this},r.prototype.stop=function(){var e=this._log;return e.info("Stopping the LocalMedia by stopping all LocalTracks"),this.tracks.forEach(function(t){e.debug("Stopping LocalTrack:",t),t.stop()}),this},r.prototype.unmute=function(){return this.mute(!1)},r.prototype.unpause=function(){return this.pause(!1)},t.exports=r},{"../util":51,"../util/constants":49,"../util/log":53,"../webrtc/getusermedia":59,"./":7,"./track/localaudiotrack":11,"./track/localvideotrack":13,util:109}],9:[function(e,t,n){"use strict";function r(e,t,n,r){s.call(this,e,t,n,r)}var i=e("util").inherits,s=e("./");i(r,s),r.prototype.toString=function(){return"[AudioTrack #"+this._instanceId+": "+this.id+"]"},r.prototype.attach=s.prototype.attach,r.prototype.detach=s.prototype.detach,t.exports=r},{"./":10,util:109}],10:[function(e,t,n){"use strict";function r(e,t,n,r){i.call(this);var s=!1;Object.defineProperties(this,{_instanceId:{value:++o},_isStarted:{get:function(){return s},set:function(e){s=e}},_log:{value:r.log.createLog("media",this)},_signaling:{value:n},attachments:{value:new Set},id:{enumerable:!0,value:t.id},isEnabled:{enumerable:!0,get:function(){return n.isEnabled}},isStarted:{get:function(){return s}},kind:{enumerable:!0,value:t.kind},mediaStream:{enumerable:!0,value:e},mediaStreamTrack:{enumerable:!0,value:t}}),this._initialize()}var i=e("events").EventEmitter,s=e("util").inherits,o=0;r.DISABLED="disabled",r.ENABLED="enabled";var a=r.STARTED="started";s(r,i),r.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._detachElement(this._dummyEl),this._dummyEl.oncanplay=null,this.emit(a,this)},r.prototype._initialize=function(){var e=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._reemit=function(){e.emit(e.isEnabled?"enabled":"disabled",e)},this._signaling.on("updated",this._reemit),this._attach(this._dummyEl)},r.prototype._end=function(){this._log.debug("Ended"),this._signaling.removeListener("updated",this._reemit),this._detachElement(this._dummyEl),this._dummyEl.oncanplay=null},r.prototype.attach=function(e){return"string"==typeof e?e=this._selectElement(e):e||(e=this._createElement()),this._log.debug("Attempting to attach to element:",e),e=this._attach(e)},r.prototype._attach=function(e){if(this.attachments.has(e))return e;if("undefined"==typeof window||"undefined"==typeof navigator)throw new Error("Can not attach track to page: global.navigator and global.window are required.");var t="undefined"!=typeof webkitMediaStream?webkitMediaStream:MediaStream,n=new t;if(n.addTrack(this.mediaStreamTrack),"function"==typeof navigator.webkitGetUserMedia){var r=window.URL||window.webkitURL;e.src=r.createObjectURL(n)}else"function"==typeof navigator.mozGetUserMedia&&(e.mozSrcObject=n);return e.autoplay=!0,this.attachments.add(e),e},r.prototype._selectElement=function(e){var t=document.querySelector(e);if(!t)throw new Error("Selector matched no element: "+e);return t},r.prototype._createElement=function(){return document.createElement(this.kind)},r.prototype.detach=function(e){var t;return t="string"==typeof e?[this._selectElement(e)]:e?[e]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",t),this._detachElements(t),e?t[0]:t},r.prototype._detachElements=function(e){return e.map(this._detachElement.bind(this))},r.prototype._detachElement=function(e){return this.attachments.has(e)?(e.removeAttribute("src"),this.attachments.delete(e),e):e},r.prototype._getAllAttachedElements=function(){var e=[];return this.attachments.forEach(function(t){e.push(t)}),e},t.exports=r},{events:70,util:109}],11:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);o.call(this,i,e,t,n)}var i=e("./audiotrack"),s=e("util").inherits,o=e("./localtrack");s(r,i),r.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},r.prototype.attach=function(e){return e=i.prototype.attach.call(this,e),e.muted=!0,e},r.prototype.disable=o.prototype.disable,r.prototype.enable=o.prototype.enable,r.prototype.stop=o.prototype.stop,t.exports=r},{"./audiotrack":9,"./localtrack":12,util:109}],12:[function(e,t,n){"use strict";function r(e,t,n,r){var s=this,o=new i(n,t);e.call(this,t,n,o,r),this.mediaStreamTrack.addEventListener("ended",function t(){e.prototype._end.call(s),s.mediaStreamTrack.removeEventListener("ended",t)})}var i=e("../../signaling/localtrack");r.prototype.enable=function(e){return e="boolean"!=typeof e||e,this._log.info((e?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=e,this._signaling.enable(e),this},r.prototype.disable=function(){return this.enable(!1)},r.prototype.stop=function(){return this._log.info("Stopping"),this.mediaStreamTrack.stop(),this},t.exports=r},{"../../signaling/localtrack":20}],13:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);s.call(this,o,e,t,n)}var i=e("util").inherits,s=e("./localtrack"),o=e("./videotrack");i(r,o),r.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},r.prototype.enable=s.prototype.enable,r.prototype.disable=s.prototype.disable,r.prototype.stop=s.prototype.stop,t.exports=r},{"./localtrack":12,"./videotrack":14,util:109}],14:[function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r),Object.defineProperties(this,{dimensions:{enumerable:!0,value:{width:null,height:null}}}),Object.defineProperty(this,"_dimensionsChangedElem",{value:i(this)}),this}function i(e){if("undefined"==typeof document)throw new Error("document is undefined");var t=document.createElement(e.kind);return t.muted=!0,t.onloadedmetadata=function(){s(e,t)&&(e.dimensions.width=t.videoWidth,e.dimensions.height=t.videoHeight)},t.onresize=function(){s(e,t)&&(e.dimensions.width=t.videoWidth,e.dimensions.height=t.videoHeight,e.isStarted&&(e._log.debug("Dimensions changed:",e.dimensions),e.emit(u,e)))},e.attach(t)}function s(e,t){return e.dimensions.width!==t.videoWidth||e.dimensions.height!==t.videoHeight}var o=e("util").inherits,a=e("./"),u=r.DIMENSIONS_CHANGED="dimensionsChanged";o(r,a),r.prototype.toString=function(){return"[VideoTrack #"+this._instanceId+": "+this.id+"]"},r.prototype._start=function(e){return this.dimensions.width=e.videoWidth,this.dimensions.height=e.videoHeight,this._log.debug("Dimensions:",this.dimensions),a.prototype._start.call(this,e)},r.prototype.attach=function(e){return e=a.prototype.attach.call(this,e),e.muted=!0,e},r.prototype.detach=function(){return a.prototype.detach.call(this,this._dimensionsChangedElem),a.prototype.detach.apply(this,arguments)},t.exports=r},{"./":10,util:109}],15:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);a.call(this),t=Object.assign({AudioTrack:s,VideoTrack:o},t),Object.defineProperties(this,{_AudioTrack:{value:t.AudioTrack},_instanceId:{value:++d},_log:{value:t.log.createLog("default",this)},_signaling:{value:e},_VideoTrack:{value:t.VideoTrack},identity:{enumerable:!0,get:function(){return e.identity}},media:{enumerable:!0,value:t.media||new l({log:t.log})},sid:{enumerable:!0,get:function(){return e.sid}},state:{enumerable:!0,get:function(){return e.state}}}),i(this,e),this._handleTrackSignalingEvents();var n=this._log;n.info("Created a new Participant"+(this.identity?": "+this.identity:"")),n.debug("Media:",this.media)}function i(e,t){var n=e._log;if("disconnected"!==e.state){var r=["trackAdded","trackDimensionsChanged","trackDisabled","trackEnabled","trackRemoved","trackStarted"].map(function(t){function n(){var n=[].slice.call(arguments);n.unshift(t),e.emit.apply(e,n)}return e.media.on(t,n),e.media.removeListener.bind(e.media,t,n)});t.on("stateChanged",function i(s){n.debug("Transitioned to state:",s),e.emit(s,e),"disconnected"===s&&(n.debug("Removing Track event reemitters"),t.removeListener("stateChanged",i),r.forEach(function(e){e()}))})}}var s=e("./media/track/audiotrack"),o=e("./media/track/videotrack"),a=e("events").EventEmitter,u=e("util").inherits,c=e("./util"),l=e("./media"),d=0;u(r,a),r.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},r.prototype._handleTrackSignalingEvents=function(){function e(e){e.getMediaStreamTrack().then(function(t){var s=t[0],a=t[1],u="audio"===e.kind?r:o,l=new u(a,s,e,{log:n});i._addTrack(l),n.info("Added a new "+c.trackClass(l)+":",l.id),n.debug(c.trackClass(l)+":",l)})}function t(e){e.getMediaStreamTrack().then(function(){var t=i.tracks.get(e.id);t&&(i._removeTrack(t),n.info("Removed a "+c.trackClass(t)+":",t.id),n.debug(c.trackClass(t)+":",t))})}var n=this._log;if("disconnected"!==this.state){var r=this._AudioTrack,i=this.media,s=this._signaling,o=this._VideoTrack;s.on("trackAdded",e),s.on("trackRemoved",t),s.tracks.forEach(e),s.on("stateChanged",function r(i){"disconnected"===i&&(n.debug("Removing TrackSignaling listeners"),s.removeListener("stateChanged",r),s.removeListener("trackAdded",e),s.removeListener("trackRemoved",t))})}},t.exports=r},{"./media":7,"./media/track/audiotrack":9,"./media/track/videotrack":14,"./util":51,events:70,util:109}],16:[function(e,t,n){"use strict";function r(){i.call(this),Object.defineProperties(this,{_queuedEvents:{value:new Map}})}var i=e("events").EventEmitter;(0,e("util").inherits)(r,i),r.prototype.dequeue=function(e){var t=!0;if(!e)return this._queuedEvents.forEach(function(e,n){t=this.dequeue(n)&&t},this),t;var n=this._queuedEvents.get(e)||[];this._queuedEvents.delete(e);var r=this;return n.reduce(function(t,n){return r.emit.apply(r,[e].concat(n))&&t},t)},r.prototype.queue=function(){var e=[].slice.call(arguments);if(this.emit.apply(this,e))return!0;var t=e[0];return this._queuedEvents.has(t)||this._queuedEvents.set(t,[]),this._queuedEvents.get(t).push(e.slice(1)),!1},t.exports=r},{events:70,util:109}],17:[function(e,t,n){"use strict";function r(e,t){return new Promise(function(n,r){if("string"!=typeof e||!t)throw new Error("<String>method and <Object>params are required args.");var s=new i;s.open(e.toUpperCase(),t.url,!0),s.withCredentials=!!t.withCredentials,s.onreadystatechange=function(){4===s.readyState&&(200<=s.status&&s.status<300?n(s.responseText):r(s.responseText))};for(var o in t.headers)s.setRequestHeader(o,t.headers[o]);s.send(t.body)})}var i=e("xmlhttprequest").XMLHttpRequest;r.get=r.bind(null,"GET"),r.post=r.bind(null,"POST"),t.exports=r},{xmlhttprequest:112}],18:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);a.call(this);var i=n.log.createLog("default",this),u=new Map;Object.defineProperties(this,{_log:{value:i},_instanceId:{value:++d},_options:{value:n},_participants:{value:u},_signaling:{value:t},isRecording:{enumerable:!0,get:function(){return t.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:t.name},participants:{enumerable:!0,value:u},sid:{enumerable:!0,value:t.sid},state:{enumerable:!0,get:function(){return t.state}}}),s(this,t.recording),o(this,t),i.info("Created a new Room:",this.name),i.debug("Initial Participants:",Array.from(this._participants.values()))}function i(e,t){var n=e._log,r=new c(t,{log:n});n.info("A new Participant connected:",r),e._participants.set(r.sid,r),e.emit("participantConnected",r);var i=["trackAdded","trackDimensionsChanged","trackDisabled","trackEnabled","trackRemoved","trackStarted"].map(function(t){function n(){var n=[].slice.call(arguments);n.unshift(t),n.push(r),e.emit.apply(e,n)}return r.on(t,n),[t,n]});r.once("disconnected",function(){n.info("Participant disconnected:",r),e._participants.delete(r.sid),i.forEach(function(e){r.removeListener(e[0],e[1])}),e.emit("participantDisconnected",r)})}function s(e,t){t.on("updated",function(){var n=t.isEnabled;e._log.info("Recording "+(n?"started":"stopped")),e.emit("recording"+(n?"Started":"Stopped"))})}function o(e,t){var n=e._log;n.debug("Creating a new Participant for each ParticipantSignaling in the RoomSignaling"),t.participants.forEach(i.bind(null,e)),n.debug("Setting up Participant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),t.on("participantConnected",i.bind(null,e)),t.on("stateChanged",function(r){var i=t.didDisconnectUnexpectedly?new l.SIGNALING_CONNECTION_DISCONNECTED:null;n.info("Transitioned to state:",r),e.emit(r,e,i),"disconnected"===r&&e._options.shouldStopLocalMedia&&(n.info("Room disconnected. We now stop any automatically acquired LocalMedia"),e.localParticipant.media.stop())})}var a=e("events").EventEmitter,u=e("util").inherits,c=e("./participant"),l=e("./util/constants").twilioErrors,d=0;u(r,a),r.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},r.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},r.prototype.getStats=function(){return this._signaling.getStats()},t.exports=r},{"./participant":15,"./util/constants":49,events:70,util:109}],19:[function(e,t,n){"use strict";function r(){a.call(this,"closed",u)}var i=e("util").inherits,s=e("./participant"),o=e("./room"),a=e("../statemachine"),u={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]};i(r,a),r.prototype._close=function(e){return this.transition("closing",e),this.transition("closed",e),Promise.resolve(this)},r.prototype._connect=function(e,t,n,r,i){e.connect("PA00000000000000000000000000000000",r);var s="RM00000000000000000000000000000000",a=Promise.resolve(new o(e,s,i));return a.cancel=function(){},a},r.prototype._open=function(e){return this.transition("opening",e),this.transition("open",e),Promise.resolve(this)},r.prototype.close=function(){var e=this;return this.bracket("close",function(t){switch(e.state){case"closed":return e;case"open":return e._close(t);default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},r.prototype.connect=function(e,t,n,r,i){var s=this;return this.bracket("connect",function o(a){switch(s.state){case"closed":return s._open(a).then(o.bind(null,a));case"open":return s.releaseLockCompletely(a),s._connect(e,t,n,r,i);default:throw new Error('Unexpected Signaling state "'+s.state+'"')}})},r.prototype.createLocalParticipantSignaling=function(){return new s},r.prototype.open=function(){var e=this;return this.bracket("open",function(t){switch(e.state){case"closed":return e._open(t);case"open":return e;default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t.exports=r},{"../statemachine":39,"./participant":21,"./room":24,util:109}],20:[function(e,t,n){"use strict";function r(e,t){s.call(this,e.id,e.kind,e.enabled),this.setMediaStreamTrack(e,t)}var i=e("util").inherits,s=e("./track");i(r,s),t.exports=r},{"./track":25,util:109}],21:[function(e,t,n){"use strict";function r(){s.call(this,"connecting",o),Object.defineProperties(this,{_identity:{writable:!0,value:null},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}})}var i=e("util").inherits,s=e("../statemachine"),o={connecting:["connected"],connected:["disconnected"],disconnected:[]};i(r,s),r.prototype.addTrack=function(e){return this.tracks.set(e.id,e),this.emit("trackAdded",e),this},r.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},r.prototype.removeTrack=function(e){var t=this.tracks.delete(e.id);return t&&this.emit("trackRemoved",e),t},r.prototype.connect=function(e,t){return"connecting"===this.state&&(this._sid=e,this._identity=t,this.preempt("connected"),!0)},t.exports=r},{"../statemachine":39,util:109}],22:[function(e,t,n){"use strict";function r(){i.call(this),Object.defineProperties(this,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}})}var i=e("events").EventEmitter;(0,e("util").inherits)(r,i),r.prototype.disable=function(){return this.enable(!1)},r.prototype.enable=function(e){return e="boolean"!=typeof e||e,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t.exports=r},{events:70,util:109}],23:[function(e,t,n){"use strict";function r(e,t){s.call(this),this.connect(e,t)}var i=e("util").inherits,s=e("./participant");i(r,s),t.exports=r},{"./participant":21,util:109}],24:[function(e,t,n){"use strict";function r(e,t,n,r){r=Object.assign({RecordingSignaling:s},r),o.call(this,"connected",a);var i=r.RecordingSignaling;Object.defineProperties(this,{_options:{value:r},didDisconnectUnexpectedly:{value:!1,writable:!0,enumerable:!0},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:n},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new i},sid:{enumerable:!0,value:t}})}var i=e("util").inherits,s=e("./recording"),o=e("../statemachine"),a={connected:["disconnected"],disconnected:[]};i(r,o),r.prototype._handleUnexpectedDisconnect=function(){return this.didDisconnectUnexpectedly=!0,this.disconnect()},r.prototype.connectParticipant=function(e){var t=this;return"disconnected"!==e.state&&(!this.participants.has(e.sid)&&(this.participants.set(e.sid,e),e.on("stateChanged",function n(r){"disconnected"===r&&(e.removeListener("stateChanged",n),t.participants.delete(e.sid),t.emit("participantDisconnected",e))}),this.emit("participantConnected",e),!0))},r.prototype.disconnect=function(){return"connected"===this.state&&(this.preempt("disconnected"),!0)},t.exports=r},{"../statemachine":39,"./recording":22,util:109}],25:[function(e,t,n){"use strict";function r(e,t,n){i.call(this);var r,s;Object.defineProperties(this,{_isEnabled:{value:n,writable:!0},_mediaStream:{get:function(){return r},set:function(e){r=e,this._mediaStreamDeferred.resolve(r)}},_mediaStreamDeferred:{value:o.defer()},_mediaStreamTrack:{get:function(){return s},set:function(e){s=e,this._mediaStreamTrackDeferred.resolve(s)}},_mediaStreamTrackDeferred:{value:o.defer()},id:{enumerable:!0,value:e},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},kind:{enumerable:!0,value:t},mediaStream:{enumerable:!0,get:function(){return r}},mediaStreamTrack:{enumerable:!0,get:function(){return s}}})}var i=e("events").EventEmitter,s=e("util").inherits,o=e("../util");s(r,i),r.prototype.disable=function(){return this.enable(!1)},r.prototype.enable=function(e){return e="boolean"!=typeof e||e,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},r.prototype.getMediaStreamTrack=function(){return Promise.all([this._mediaStreamTrackDeferred.promise,this._mediaStreamDeferred.promise])},r.prototype.setMediaStreamTrack=function(e,t){return this._mediaStream=t,this._mediaStreamTrack=e,this},t.exports=r},{"../util":51,events:70,util:109}],26:[function(e,t,n){"use strict";function r(e,t,n,r,c){c=Object.assign({PeerConnectionManager:s,RoomV2:o,Transport:a},c);var l,d=c.PeerConnectionManager,h=c.RoomV2,f=new d;f.setConfiguration(c);var p=new Set;r.tracks.forEach(function(e){p.add(e.mediaStream)}),p.forEach(f.addMediaStream,f);var m=new Error("Canceled");return new i(function(i,s,o){f.createAndOffer().then(function(){return f.dequeue("description"),new Promise(function(i,s){if(o())return void s(m);l=new(0,c.Transport)(c.to,e,t,r,f,n),l.once("connected",function(e){if(o())return void s(m);var t=e.participant;if(!t)return void s(new Error("Missing LocalParticipant information"));r.connect(t.sid,t.identity),i(new h(r,e,l,f,c))}),l.once("stateChanged",function(e){"disconnected"===e&&(l=null,s(new u.SIGNALING_CONNECTION_DISCONNECTED))})})}).then(function(e){if(o())return f.close(),e.disconnect(),void s(m);i(e)}).catch(function(e){l&&(l.disconnect(),l=null),f.close(),s(e)})},function(){l&&(l.disconnect(),l=null)})}var i=e("../../util/cancelablepromise"),s=e("./peerconnectionmanager"),o=e("./room"),a=e("./transport"),u=e("../../util/constants").twilioErrors;t.exports=r},{"../../util/cancelablepromise":48,"../../util/constants":49,"./peerconnectionmanager":31,"./room":34,"./transport":37}],27:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;Object.defineProperties(this,{_filter:{value:new i({getKey:function(e){return e.ufrag},isLessThanOrEqualTo:function(e,t){return e.revision<=t.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}var i=e("../../util/filter");r.prototype.setUfrag=function(e){this._ufrag=e;var t=this._filter.toMap().get(e);return t?t.candidates:[]},r.prototype.update=function(e){e.candidates=e.candidates||[];var t=this._filter.toMap().get(e.ufrag),n=t?t.candidates:[];return this._filter.update(e)&&this._ufrag===e.ufrag?e.candidates.slice(n.length):[]},t.exports=r},{"../../util/filter":50}],28:[function(e,t,n){"use strict";function r(e,t,n,r){var o=d.makeRegistrationSIPURI(t,n);r=Object.assign({createCancelableRoomSignalingPromise:s,registrarServer:i.REGISTRAR_SERVER(t),UA:c.UA},r);var a="debug"===r.logLevel,h=e.startsWith("wss://"),f=r.UA,p=new f({autostart:!1,log:{builtinEnabled:a},extraSupported:["room-signaling","timer"],hackAllowUnregisteredOptionTags:!0,keepAliveInterval:30,mediaHandlerFactory:l.defaultFactory,register:!1,registrarServer:r.registrarServer,traceSip:a,uri:o,wsServers:e,hackWssInTransport:h});u.call(this),Object.defineProperties(this,{_createCancelableRoomSignalingPromise:{value:r.createCancelableRoomSignalingPromise},_options:{value:r},_ua:{value:p}})}var i=e("../../util/constants"),s=e("./cancelableroomsignalingpromise"),o=e("util").inherits,a=e("./localparticipant"),u=e("../"),c=e("../../sip"),l=e("./sipjsmediahandler"),d=e("../../util");o(r,u),r.prototype._close=function(e){return this.transition("closing",e),this._ua.stop(),this._ua.transport.disconnect(),this.transition("closed",e),Promise.resolve(this)},r.prototype._open=function(e){function t(){n._ua.start()}var n=this;return this.transition("opening",e),d.promiseFromEvents(t,this._ua,"connected","disconnected").then(function(){return n.transition("open",e),n},function(){throw n.transition("closed",e),new Error("Open failed")})},r.prototype._connect=function(e,t,n,r,s){s=Object.assign({iceServers:i.DEFAULT_ICE_SERVERS},this._options,s);var o=this._ua;return this._createCancelableRoomSignalingPromise.bind(null,n,t,o,e,s)},r.prototype.createLocalParticipantSignaling=function(){return new a},t.exports=r},{"../":19,"../../sip":38,"../../util":51,"../../util/constants":49,"./cancelableroomsignalingpromise":26,"./localparticipant":29,"./sipjsmediahandler":35,util:109}],29:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;o.call(this),Object.defineProperties(this,{_revision:{writable:!0,value:1},revision:{enumerable:!0,get:function(){return this._revision}}})}var i=e("./track").getState,s=e("util").inherits,o=e("../participant");s(r,o),r.prototype.update=function(){return this._revision++,this},r.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(i)}},t.exports=r},{"../participant":21,"./track":36,util:109}],30:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);d.call(this,"open",_),t=Object.assign(m,t);var n=s(t),i=t.RTCPeerConnection,o=new i(n);Object.defineProperties(this,{_descriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCandidatesRevision:{writable:!0,value:1},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_offerOptions:{writable:!0,value:t.offerOptions},_peerConnection:{value:o},_remoteCandidates:{writable:!0,value:new c},_RTCIceCandidate:{value:t.RTCIceCandidate},_RTCPeerConnection:{value:t.RTCPeerConnection},_RTCSessionDescription:{value:t.RTCSessionDescription},id:{enumerable:!0,value:e}}),o.addEventListener("icecandidate",this._handleIceCandidateEvent.bind(this)),o.addEventListener("signalingstatechange",this._handleSignalingStateChange.bind(this)),o.addEventListener("track",this._handleTrackEvent.bind(this))}function i(e){if(e.sdp){var t=e.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+\/]+)/m);if(t)return t[1]}return null}function s(e){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},e)}var o=e("../../webrtc/rtcicecandidate"),a=e("../../webrtc/rtcpeerconnection"),u=e("../../webrtc/rtcsessiondescription"),c=e("./icebox"),l=e("util").inherits,d=e("../../../lib/statemachine"),h=e("../../webrtc/getstats"),f=e("../../stats/statsreport"),p=e("../../util/constants").twilioErrors,m={iceServers:[],offerOptions:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},RTCIceCandidate:o,RTCPeerConnection:a,RTCSessionDescription:u},_={open:["closed","updating"],updating:["closed","open"],closed:[]};l(r,d),r.prototype._addIceCandidate=function(e){var t=this._RTCIceCandidate,n=this;return new Promise(function(r,i){n._peerConnection.addIceCandidate(new t(e),r,i)}).then(function(){return n})},r.prototype._addIceCandidates=function(e){var t=this;return Promise.all(e.map(this._addIceCandidate,this)).then(function(){return t})},r.prototype._answer=function(e){var t=this._RTCSessionDescription,n=this;return new Promise(function(r,i){var s=new t(e),o=i.bind(null,new p.MEDIA_CLIENT_REMOTE_DESC_FAILED);n._peerConnection.setRemoteDescription(s,r,o)}).then(function(){var t=i(e);if(t){var r=n._remoteCandidates.setUfrag(t);n._addIceCandidates(r)}return new Promise(function(e,t){var r=t.bind(null,new p.MEDIA_CLIENT_LOCAL_DESC_FAILED);n._peerConnection.createAnswer(e,r)})}).then(function(e){return n._setLocalDescription(e)}).then(function(){return n})},r.prototype._close=function(){return"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),!0)},r.prototype._handleGlare=function(e){var t=this._RTCSessionDescription,n=new t({type:"rollback"}),r=this;return this._setLocalDescription(n).then(function(){return r._answer(e)}).then(function(){return r._offer()})},r.prototype._handleIceCandidateEvent=function(e){e.candidate&&this._localCandidates.push(e.candidate);var t={ice:{candidates:this._localCandidates.slice(),revision:this._localCandidatesRevision++,ufrag:this._localUfrag},id:this.id};e.candidate||(t.ice.complete=!0),this.emit("candidates",t)},r.prototype._handleSignalingStateChange=function(){"closed"===this._peerConnection.signalingState&&"closed"!==this.state&&this.preempt("closed")},r.prototype._handleTrackEvent=function(e){var t=e.track,n=e.streams[0];this.emit("trackAdded",t,n)},r.prototype._offer=function(){var e=this;return new Promise(function(t,n){var r=n.bind(null,new p.MEDIA_CLIENT_LOCAL_DESC_FAILED);e._peerConnection.createOffer(t,r,e._offerOptions)}).then(function(t){return e._setLocalDescription(t)})},r.prototype._setLocalDescription=function(e){var t=this._RTCSessionDescription,n=this;return new Promise(function(r,i){var s=i.bind(null,new p.MEDIA_CLIENT_LOCAL_DESC_FAILED);n._peerConnection.setLocalDescription(new t(e),r,s)}).then(function(){return"rollback"!==e.type&&(n._localDescription=e,n._localCandidates=[],"offer"===e.type&&n._descriptionRevision++,n._localUfrag=i(e),n.emit("description",n.getState())),n})},r.prototype._updateDescription=function(e){switch(e.type){case"answer":case"pranswer":if(e.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve(this);this._descriptionRevision=e.revision;break;case"close":return e.revision<this._descriptionRevision||e.revision===this._descriptionRevision&&"have-local-offer"!==this._peerConnection.signalingState||"closed"===this._peerConnection.signalingState?Promise.resolve(this):this._close();case"create-offer":return e.revision<=this._descriptionRevision||"stable"!==this._peerConnection.signalingState?Promise.resolve(this):(this._descriptionRevision=e.revision,this._offer());case"offer":return e.revision<this._descriptionRevision||e.revision===this._descriptionRevision&&"have-local-offer"!==this._peerConnection.signalingState||"closed"===this._peerConnection.signalingState?Promise.resolve(this):e.revision>=this._descriptionRevision&&"have-local-offer"===this._peerConnection.signalingState?(this._descriptionRevision=e.revision,this._handleGlare(e)):(this._descriptionRevision=e.revision,this._answer(e))}var t=this._RTCSessionDescription,n=this;return new Promise(function(r,i){var s=i.bind(null,new p.MEDIA_CLIENT_REMOTE_DESC_FAILED);n._peerConnection.setRemoteDescription(new t(e),r,s)}).then(function(){var t=i(e);if(t){var r=n._remoteCandidates.setUfrag(t);return n._addIceCandidates(r)}return n})},r.prototype._updateIce=function(e){var t=this._remoteCandidates.update(e);return this._addIceCandidates(t)},r.prototype.addMediaStream=function(e){return this._peerConnection.addStream(e),this},r.prototype.close=function(){return this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState())),this},r.prototype.getRemoteMediaStreams=function(){return this._peerConnection.getRemoteStreams()},r.prototype.getState=function(){if(!this._localDescription)return null;var e={type:this._localDescription.type,revision:this._descriptionRevision};return this._localDescription.sdp&&(e.sdp=this._localDescription.sdp),{description:e,id:this.id}},r.prototype.offer=function(){var e=this;return this.bracket("offering",function(t){return e.transition("updating",t),e._offer().then(function(){return e.tryTransition("open",t),e},function(n){throw e.tryTransition("open",t),n})})},r.prototype.removeMediaStream=function(e){return this._peerConnection.removeStream(e),this},r.prototype.setConfiguration=function(e){return"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(s(e)),this},r.prototype.update=function(e){var t=this;return this.bracket("updating",function(n){if("closed"===t.state)return Promise.resolve(t);t.transition("updating",n);var r=[];return e.ice&&r.push(t._updateIce(e.ice)),e.description&&r.push(t._updateDescription(e.description)),Promise.all(r).then(function(){return t.tryTransition("open",n),t},function(e){throw t.tryTransition("open",n),e})})},r.prototype.getStats=function(){var e=this;return h(this._peerConnection).then(function(t){return new f(e.id,t)})},t.exports=r},{"../../../lib/statemachine":39,"../../stats/statsreport":46,"../../util/constants":49,"../../webrtc/getstats":58,"../../webrtc/rtcicecandidate":60,"../../webrtc/rtcpeerconnection":63,"../../webrtc/rtcsessiondescription":66,"./icebox":27,util:109}],31:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);o.call(this),e=Object.assign({PeerConnectionV2:s},e),Object.defineProperties(this,{_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:a.defer()},_localMediaStreams:{value:new Set},_localMediaStreamTracks:{value:new Set},_peerConnections:{value:new Map},_PeerConnectionV2:{value:e.PeerConnectionV2}})}var i=e("util").inherits,s=e("./peerconnection"),o=e("../../queueingeventemitter"),a=e("../../util");i(r,o),r.prototype._getConfiguration=function(){return this._configurationDeferred.promise},r.prototype._getOrCreate=function(e,t){var n=this,r=this._peerConnections.get(e);if(!r){r=new(0,this._PeerConnectionV2)(e,t),this._peerConnections.set(r.id,r),r.on("candidates",this.queue.bind(this,"candidates")),r.on("description",this.queue.bind(this,"description")),r.on("trackAdded",this.queue.bind(this,"trackAdded")),r.on("stateChanged",function e(t){"closed"===t&&(r.removeListener("stateChanged",e),n._peerConnections.delete(r.id),n._closedPeerConnectionIds.add(r.id))}),this._localMediaStreams.forEach(r.addMediaStream,r)}return r},r.prototype.addMediaStream=function(e){return this._localMediaStreams.add(e),e.getTracks().forEach(function(e){this._localMediaStreamTracks.add(e)},this),this._peerConnections.forEach(function(t){t.addMediaStream(e)},this),this},r.prototype.close=function(){return this._peerConnections.forEach(function(e){e.close()}),this},r.prototype.createAndOffer=function(){var e=this;return this._getConfiguration().then(function(t){var n;do n=a.makeUUID();while(e._peerConnections.has(n));return e._getOrCreate(n,t)}).then(function(e){return e.offer()}).then(function(){return e})},r.prototype.getRemoteMediaStreams=function(){var e=[];return this._peerConnections.forEach(function(t){e=e.concat(t.getRemoteMediaStreams())}),e},r.prototype.getStates=function(){var e=[];return this._peerConnections.forEach(function(t){var n=t.getState();n&&e.push(n)}),e},r.prototype.removeMediaStream=function(e){var t=this._localMediaStreams.delete(e);return this._peerConnections.forEach(function(t){t.removeMediaStream(e),e.getTracks().forEach(function(e){this._localMediaStreamTracks.delete(e)},this)},this),t},r.prototype.setConfiguration=function(e){return this._configuration&&(this._configurationDeferred=a.defer(),this._peerConnections.forEach(function(t){t.setConfiguration(e)})),this._configuration=e,this._configurationDeferred.resolve(e),this},r.prototype.setMediaStreams=function(e){var t=new Set(this._localMediaStreamTracks.values());this._localMediaStreamTracks.clear(),this._localMediaStreams.forEach(this.removeMediaStream,this),e.forEach(this.addMediaStream,this);var n=this._localMediaStreamTracks,r=!1;return t.size!==n.size?r=!0:t.forEach(function(e){n.has(e)||(r=!0)}),r&&this._peerConnections.forEach(function(e){e.offer()}),this},r.prototype.update=function(e){var t=this;return this._getConfiguration().then(function(n){return Promise.all(e.map(function(e){return t._closedPeerConnectionIds.has(e.id)?null:t._getOrCreate(e.id,n).update(e)}))}).then(function(){return t})},r.prototype.getStats=function(){var e=Array.from(this._peerConnections.values());return Promise.all(e.map(function(e){return e.getStats()}))},t.exports=r},{"../../queueingeventemitter":16,"../../util":51,"./peerconnection":30,util:109}],32:[function(e,t,n){"use strict";function r(){s.call(this),Object.defineProperties(this,{_revision:{value:1,writable:!0}})}var i=e("util").inherits,s=e("../recording");i(r,s),r.prototype.update=function(e){return e.revision<this._revision?this:(this._revision=e.revision,this.enable(e.enabled))},t.exports=r},{"../recording":22,util:109}],33:[function(e,t,n){"use strict";function r(e,t,n){return this instanceof r?(s.call(this,e.sid,e.identity),n=Object.assign({TrackV2:o},n),Object.defineProperties(this,{_revision:{writable:!0,value:null},_TrackV2:{value:n.TrackV2},_getMediaStreamTrack:{value:t},revision:{enumerable:!0,get:function(){return this._revision}}}),this.update(e)):new r(e,t,n)}var i=e("util").inherits,s=e("../remoteparticipant"),o=e("./track");i(r,s),r.prototype._getOrCreateTrack=function(e){var t=this._TrackV2,n=this.tracks.get(e.id);return n||(n=new t(e),this.addTrack(n)),n},r.prototype.update=function(e){if(null!==this.revision&&e.revision<=this.revision)return this;this._revision=e.revision;var t=new Set;return e.tracks.forEach(function(e){var n=this._getOrCreateTrack(e);n.update(e),t.add(n)},this),this.tracks.forEach(function(e){t.has(e)||this.removeTrack(e)},this),"disconnected"===e.state&&"connected"===this.state&&this.preempt("disconnected"),this},r.prototype.addTrack=function(e){return s.prototype.addTrack.call(this,e),this._getMediaStreamTrack(e.id).then(function(t){var n=t[0],r=t[1];e.setMediaStreamTrack(n,r)}),this},t.exports=r},{"../remoteparticipant":23,"./track":36,util:109}],34:[function(e,t,n){"use strict";function r(e,t,n,a,d){if(!(this instanceof r))return new r(e,t,n,a,d);d=Object.assign({RecordingSignaling:u,RemoteParticipantV2:l},d),c.call(this,e,t.sid,t.name,d),Object.defineProperties(this,{_disconnectedParticipantSids:{value:new Set},_peerConnectionManager:{value:a},_RemoteParticipantV2:{value:d.RemoteParticipantV2},_transport:{value:n},_trackIdToParticipants:{value:new Map},_mediaStreamTrackDeferreds:{value:new Map}}),i(this,e),s(this,a),o(this,n),this._update(t)}function i(e,t){function n(){var e=new Set;t.tracks.forEach(function(t){e.add(t.mediaStream)}),u.setMediaStreams(e)}function r(t){function n(){e._publishNewLocalParticipantState()}t.on("updated",n),i(t),a.set(t,t.removeListener.bind(t,"updated",n))}function i(e){var t=a.get(e);t&&t()}function s(t){r(t),e._publishNewLocalParticipantState(),n()}function o(t){i(t),e._publishNewLocalParticipantState(),n()}var a=new Map,u=e._peerConnectionManager;t.on("trackAdded",s),t.on("trackRemoved",o),t.tracks.forEach(r),e.on("stateChanged",function n(r){"disconnected"===r&&(t.removeListener("trackAdded",s),t.removeListener("trackRemoved",o),e.removeListener("stateChanged",n),t.disconnect())})}function s(e,t){t.on("description",function(t){e._publishPeerConnectionState(t)}),t.dequeue("description"),t.on("candidates",function(t){e._publishPeerConnectionState(t)}),t.dequeue("candidates"),t.on("trackAdded",e._addMediaStreamTrack.bind(e)),t.dequeue("trackAdded"),t.getRemoteMediaStreams().forEach(function(t){t.getTracks().forEach(function(n){e._addMediaStreamTrack(n,t)})})}function o(e,t){t.on("message",e._update.bind(e)),t.on("stateChanged",function n(r){"disconnected"===r&&("connected"===e.state&&e._handleUnexpectedDisconnect(),t.removeListener("stateChanged",n))})}var a=e("util").inherits,u=e("./recording"),c=e("../room"),l=e("./remoteparticipant"),d=e("../../util");a(r,c),r.prototype._deleteMediaStreamTrackDeferred=function(e){return this._mediaStreamTrackDeferreds.delete(e)},r.prototype._getOrCreateMediaStreamTrackDeferred=function(e){var t=this._mediaStreamTrackDeferreds.get(e);return t||(t=d.defer(),this._mediaStreamTrackDeferreds.set(e,t)),t},r.prototype._addMediaStreamTrack=function(e,t){return this._getOrCreateMediaStreamTrackDeferred(e.id).resolve([e,t]),this},r.prototype.disconnect=function(){var e=c.prototype.disconnect.call(this);return e&&this._transport.disconnect(),e},r.prototype._getMediaStreamTrack=function(e){var t=this;return this._getOrCreateMediaStreamTrackDeferred(e).promise.then(function(n){return t._deleteMediaStreamTrackDeferred(e),n})},r.prototype._getOrCreateRemoteParticipant=function(e){var t=this._RemoteParticipantV2,n=this.participants.get(e.sid),r=this;return n||(n=new t(e,this._getMediaStreamTrack.bind(this)),n.on("stateChanged",function e(t){"disconnected"===t&&(n.removeListener("stateChanged",e),r.participants.delete(n.sid),r._disconnectedParticipantSids.add(n.sid))}),this.connectParticipant(n)),n},r.prototype._getState=function(){return{participant:this.localParticipant.getState()}},r.prototype._publishNewLocalParticipantState=function(){this.localParticipant.update(),this._transport.publish(this._getState())},r.prototype._publishPeerConnectionState=function(e){this._transport.publish(Object.assign({peer_connections:[e]},this._getState()))},r.prototype._update=function(e){var t=new Set;return(e.participants||[]).forEach(function(e){if(e.sid!==this.localParticipant.sid&&!this._disconnectedParticipantSids.has(e.sid)){var n=this._getOrCreateRemoteParticipant(e);n.update(e),t.add(n)}},this),e.peer_connections&&this._peerConnectionManager.update(e.peer_connections),e.recording&&this.recording.update(e.recording),this},r.prototype.getStats=function(){return this._peerConnectionManager.getStats()},t.exports=r},{"../../util":51,"../room":24,"./recording":32,"./remoteparticipant":33,util:109}],35:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e);Object.defineProperties(this,{createMessage:{enumerable:!0,value:t},peerConnectionManager:{enumerable:!0,value:e}})}function i(e){try{return JSON.parse(e.body)}catch(e){return null}}var s=e("../../sip");r.defaultFactory=function(){},r.defaultFactory.isSupported=function(){return s.WebRTC.isSupported()},r.prototype.close=function(){this.peerConnectionManager.close()},r.prototype.getDescription=function(){var e=Object.assign({peer_connections:this.peerConnectionManager.getStates()},this.createMessage());return Promise.resolve({body:JSON.stringify(e),contentType:"application/room-signaling+json"})},r.prototype.hasDescription=function(){return!0},r.prototype.hold=function(){},r.prototype.isReady=function(){return!0},r.prototype.isMuted=function(){return{audio:!1,video:!1}},r.prototype.mute=function(){},r.prototype.render=function(){},r.prototype.setDescription=function(e){var t=i(e);if(t){var n=t.peer_connections;if(n)return this.peerConnectionManager.update(n)}return Promise.resolve()},r.prototype.unhold=function(){},r.prototype.unmute=function(){},r.prototype.updateIceServers=function(){},t.exports=r},{"../../sip":38}],36:[function(e,t,n){"use strict";function r(e){s.call(this,e.id,e.kind,e.enabled)}var i=e("util").inherits,s=e("../track");i(r,s),r.getState=function(e){return{enabled:e.isEnabled,id:e.id,kind:e.kind}},r.prototype.update=function(e){return this.enable(e.enabled),this},t.exports=r},{"../track":25,util:109}],37:[function(e,t,n){"use strict";function r(e,t,n,s,o,a,c){if(!(this instanceof r))return new r(e,t,n,s,o,a,c);c=Object.assign({SIPJSMediaHandler:h},c),f.call(this,"connecting",_);var l=i(this,e,t,n,s,o,a,c.SIPJSMediaHandler);Object.defineProperties(this,{_session:{value:l},_updatesReceived:{value:[]},_updatesToSend:{value:[]}}),u(this,l,a)}function i(e,t,n,r,i,s,o,a){var u="sip:"+p.makeSIPURI(n,"orchestrator");return o.invite(u,{extraHeaders:[c.headers.X_TWILIO_ACCESSTOKEN+": "+r,"Session-Expires: 120"],media:{stream:{}},mediaHandlerFactory:function(){return new a(s,function(){if("disconnected"===e.state)return{type:"disconnect",version:m};var n={connecting:"connect",syncing:"sync"}[e.state]||"update",r={name:t,participant:i.getState(),type:n,version:m},s=p.getSdpFormat();return"connect"===n&&s&&(r.format=s),r})},onInfo:function(e){this.emit("info",e),e.reply(200)}})}function s(e,t,n){return n=n||0,new Promise(function(r,i){function o(o){switch(Math.floor(o.status_code/100)){case 2:r();break;case 5:if(n<c.PUBLISH_MAX_ATTEMPTS){r(s(e,t,++n));break}break;default:i(o)}}function a(){e.sendRequest("INFO",{body:JSON.stringify(t),extraHeaders:["Content-Type: application/room-signaling+json","Event: room-signaling","Info-Package: room-signaling"],receiveResponse:o})}if(0===n)return void a();setTimeout(a,n*c.PUBLISH_BACKOFF_MS)})}function o(e){return Array.from(e.reduce(function(e,t){var n=e.get(t.id)||t;return!n.description&&t.description?n.description=t.description:n.description&&t.description&&t.description.revision>n.description.revision&&(n.description=t.description),!n.ice&&t.ice?n.ice=t.ice:n.ice&&t.ice&&t.ice.revision>n.ice.revision&&(n.ice=t.ice),e.set(n.id,n),e},new Map).values())}function a(e){return e.reduce(function(e,t){return!e.participant&&t.participant?e.participant=t.participant:e.participant&&t.participant&&t.participant.revision>e.participant.revision&&(e.participant=t.participant),!e.peer_connections&&t.peer_connections?e.peer_connections=o(t.peer_connections):e.peer_connections&&t.peer_connections&&(e.peer_connections=o(e.peer_connections.concat(t.peer_connections))),e},{type:"update",version:m})}function u(e,t,n){function r(){e.disconnect()}function i(t){if(!(t instanceof d.OutgoingRequest)){var n;try{n=JSON.parse(t.body)}catch(e){return}switch(e.state){case"connected":switch(n.type){case"connected":case"synced":case"update":return void e.emit("message",n);case"error":case"disconnected":return void e.disconnect();default:return}case"connecting":switch(n.type){case"connected":return e.emit("connected",n),void e.preempt("connected");case"synced":case"update":return void e._updatesReceived.push(n);case"error":case"disconnected":return void e.disconnect();default:return}case"disconnected":return;case"syncing":switch(n.type){case"connected":case"update":return void e._updatesReceived.push(n);case"synced":return e.emit("message",n),void e.preempt("connected");case"disconnected":case"error":return void e.disconnect();default:return}default:return}}}t.on("info",i),t.once("bye",r),t.once("accepted",i),t.once("failed",r),e.on("stateChanged",function n(s){switch(s){case"connected":t.removeListener("accepted",i),t.removeListener("failed",r);var o=e._updatesToSend.splice(0);return o.length&&e.publish(a(o)),void e._updatesReceived.splice(0).forEach(e.emit.bind(e,"message"));case"disconnected":return t.removeListener("accepted",i),t.removeListener("failed",r),t.removeListener("info",i),t.removeListener("bye",r),void e.removeListener("stateChanged",n);case"syncing":return;default:return}}),n.once("disconnected",r)}var c=e("../../util/constants"),l=e("util").inherits,d=e("../../sip"),h=e("./sipjsmediahandler"),f=e("../../statemachine"),p=e("../../util"),m=1,_={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]};l(r,f),r.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),this._session.terminate({body:JSON.stringify({type:"disconnect",version:m}),extraHeaders:["Content-Type: application/room-signaling+json"]}),!0)},r.prototype.publish=function(e){switch(e=Object.assign({type:"update",version:m},e),this.state){case"connected":return s(this._session,e),!0;case"connecting":case"syncing":return this._updatesToSend.push(e),!0;case"disconnected":default:return!1}},r.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._session.sendReinvite(),!0)},t.exports=r},{"../../sip":38,"../../statemachine":39,"../../util":51,"../../util/constants":49,"./sipjsmediahandler":35,util:109}],38:[function(e,t,r){(function(n){"use strict";var r=n.window||n,i=e("sip.js/src/Transport"),s=r.WebSocket?r.WebSocket:e("ws"),o=r.addEventListener?r.addEventListener.bind(r):null;t.exports=e("sip.js/src/SIP")({addEventListener:o,console:r.console,Promise:r.Promise,WebSocket:s,timers:r,Transport:i})}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"sip.js/src/SIP":91,"sip.js/src/Transport":100,ws:111}],39:[function(e,t,n){"use strict";function r(e,t){d.call(this);var n=null,r=e;t=c(t),Object.defineProperties(this,{_lock:{get:function(){return n},set:function(e){n=e}},_reachableStates:{value:o(t)},_state:{get:function(){return r},set:function(e){r=e}},_states:{value:t},isLocked:{enumerable:!0,get:function(){return null!==n}},state:{enumerable:!0,get:function(){return r}}})}function i(e,t,n){return e.get(t).has(n)}function s(e){var t=f.defer();return t.name=e,t.depth=0,t}function o(e){return Array.from(e.keys()).reduce(function(t,n){return t.set(n,u(e,n))},new Map)}function u(e,t,n){return n=n||new Set,e.get(t).forEach(function(t){n.has(t)||(n.add(t),u(e,t,n).forEach(n.add,n))}),n}function c(e){var t=new Map;for(var n in e)t.set(n,new Set(e[n]));return t}function l(e,t){return new Error('"'+t+'" cannot be reached from "'+e+'"')}var d=e("events").EventEmitter,h=e("util").inherits,f=e("./util");h(r,d),r.prototype.bracket=function(e,t){function n(e){if(i.hasLock(r)&&i.releaseLockCompletely(r),e)throw e}var r,i=this;return this.takeLock(e).then(function(e){return r=e,t(r)}).then(function(e){return n(),e},n)},r.prototype.hasLock=function(e){return this._lock===e},r.prototype.preempt=function(e,t){if(!i(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');var n;this.isLocked&&(n=this._lock,this._lock=null);var r,s=null;null===t||void 0===t?n&&(r=new Error(n.name+" was preempted")):(n&&(r=new Error(n.name+" was preempted by "+t)),s=this.takeLockSync(t));var o=s?null:this.takeLockSync("preemption");return this.transition(e,s||o),n&&n.reject(r),o&&this.releaseLock(o),s},r.prototype.releaseLock=function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");0===e.depth?(this._lock=null,e.resolve()):e.depth--},r.prototype.releaseLockCompletely=function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");e.depth=0,this._lock=null,e.resolve()},r.prototype.takeLock=function e(t){if("object"===(void 0===t?"undefined":a(t))){var n=t,r=this;return new Promise(function(e){e(r.takeLockSync(n))})}var i=t;if(this.isLocked){var e=this.takeLock.bind(this,i);return this._lock.promise.then(e,e)}return Promise.resolve(this.takeLockSync(i))},r.prototype.takeLockSync=function(e){var t="string"==typeof e?null:e,n=t?t.name:e;if(t&&!this.hasLock(t)||!t&&this.isLocked)throw new Error("Could not take the lock for "+n+" because the lock for "+this._lock.name+" was not released");if(t)return t.depth++,t;var r=s(n);return this._lock=r,r},r.prototype.transition=function(e,t){if(this.isLocked){if(!t)throw new Error("You must provide the key in order to transition");if(!this.hasLock(t))throw new Error("Could not transition using the key for "+t.name+" because "+this._lock.name+" has the lock")}else if(t)throw new Error("Key provided for "+t.name+", but the StateMachine was not locked (possibly due to preemption)");if(!i(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');this._state=e,this.emit("stateChanged",e)},r.prototype.tryTransition=function(e,t){try{this.transition(e,t)}catch(e){return!1}return!0},r.prototype.when=function(e){var t=this;return this.state===e?Promise.resolve(this):i(this._reachableStates,this.state,e)?new Promise(function(n,r){t.on("stateChanged",function s(o){o===e?(t.removeListener("stateChanged",s),n(t)):i(t._reachableStates,o,e)||(t.removeListener("stateChanged",s),r(l(o,e)))})}):Promise.reject(l(this.state,e))},t.exports=r},{"./util":51,events:70,util:109}],40:[function(e,t,n){"use strict";function r(e,t){s.call(this,e,t),Object.defineProperties(this,{audioLevel:{value:"number"==typeof t.audioInputLevel?t.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof t.jitter?t.jitter:null,enumerable:!0}})}var i=e("util").inherits,s=e("./localtrackstats");i(r,s),t.exports=r},{"./localtrackstats":41,util:109}],41:[function(e,t,n){"use strict";function r(e,t){s.call(this,e,t),Object.defineProperties(this,{direction:{value:"sending",enumerable:!0},bytesSent:{value:"number"==typeof t.bytesSent?t.bytesSent:null,enumerable:!0},packetsSent:{value:"number"==typeof t.packetsSent?t.packetsSent:null,enumerable:!0},roundTripTime:{value:"number"==typeof t.roundTripTime?t.roundTripTime:null,enumerable:!0}})}var i=e("util").inherits,s=e("./trackstats");i(r,s),t.exports=r},{"./trackstats":47,util:109}],42:[function(e,t,n){"use strict";function r(e,t){s.call(this,e,t);var n=null;"number"==typeof t.frameWidthInput&&"number"==typeof t.frameHeightInput&&(n={},Object.defineProperties(n,{width:{value:t.frameWidthInput,enumerable:!0},height:{value:t.frameHeightInput,enumerable:!0}}));var r=null;"number"==typeof t.frameWidthSent&&"number"==typeof t.frameHeightSent&&(r={},Object.defineProperties(r,{width:{value:t.frameWidthSent,enumerable:!0},height:{value:t.frameHeightSent,enumerable:!0}})),Object.defineProperties(this,{captureDimensions:{value:n,enumerable:!0},dimensions:{value:r,enumerable:!0},captureFrameRate:{value:"number"==typeof t.frameRateInput?t.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof t.frameRateSent?t.frameRateSent:null,enumerable:!0}})}var i=e("util").inherits,s=e("./localtrackstats");i(r,s),t.exports=r},{"./localtrackstats":41,util:109}],43:[function(e,t,n){"use strict";function r(e,t){s.call(this,e,t),Object.defineProperties(this,{audioLevel:{value:"number"==typeof t.audioOutputLevel?t.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof t.jitter?t.jitter:null,enumerable:!0}})}var i=e("util").inherits,s=e("./remotetrackstats");i(r,s),t.exports=r},{"./remotetrackstats":44,util:109}],44:[function(e,t,n){"use strict";function r(e,t){s.call(this,e,t),Object.defineProperties(this,{direction:{value:"receiving",enumerable:!0},bytesReceived:{value:"number"==typeof t.bytesReceived?t.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof t.packetsReceived?t.packetsReceived:null,enumerable:!0}})}var i=e("util").inherits,s=e("./trackstats");i(r,s),t.exports=r},{"./trackstats":47,util:109}],45:[function(e,t,n){"use strict";function r(e,t){s.call(this,e,t);var n=null;"number"==typeof t.frameWidthReceived&&"number"==typeof t.frameHeightReceived&&(n={},Object.defineProperties(n,{width:{value:t.frameWidthReceived,enumerable:!0},height:{value:t.frameHeightReceived,enumerable:!0}})),Object.defineProperties(this,{dimensions:{value:n,enumerable:!0},frameRate:{value:"number"==typeof t.frameRateReceived?t.frameRateReceived:null,enumerable:!0}})}var i=e("util").inherits,s=e("./remotetrackstats");i(r,s),t.exports=r},{"./remotetrackstats":44,util:109}],46:[function(e,t,n){"use strict";function r(e,t){if("string"!=typeof e)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:e,enumerable:!0},localAudioTrackStats:{value:t.localAudioTrackStats.map(function(e){return new i(e.trackId,e)}),enumerable:!0},localVideoTrackStats:{value:t.localVideoTrackStats.map(function(e){return new s(e.trackId,e)}),enumerable:!0},remoteAudioTrackStats:{value:t.remoteAudioTrackStats.map(function(e){return new o(e.trackId,e)}),enumerable:!0},remoteVideoTrackStats:{value:t.remoteVideoTrackStats.map(function(e){return new a(e.trackId,e)}),enumerable:!0}})}var i=e("./localaudiotrackstats"),s=e("./localvideotrackstats"),o=e("./remoteaudiotrackstats"),a=e("./remotevideotrackstats");t.exports=r},{"./localaudiotrackstats":40,"./localvideotrackstats":42,"./remoteaudiotrackstats":43,"./remotevideotrackstats":45}],47:[function(e,t,n){"use strict";function r(e,t){if("string"!=typeof e)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:e,enumerable:!0},timestamp:{value:t.timestamp,enumerable:!0},ssrc:{value:t.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof t.packetsLost?t.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof t.codecName?t.codecName:null,enumerable:!0}})}t.exports=r},{}],48:[function(e,t,n){"use strict";function r(e,t){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:t}}),Object.defineProperty(this,"_promise",{value:new Promise(function(t,r){e(function(e){n._isCancelable=!1,t(e)},function(e){n._isCancelable=!1,r(e)},function(){return n._isCanceled})})})}r.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},r.prototype.catch=function(){return this._promise.catch.apply(this._promise,arguments)},r.prototype.then=function(){return this._promise.then.apply(this._promise,arguments)},t.exports=r},{}],49:[function(e,t,n){"use strict";function r(e){return["a","e","i","o","u"].indexOf(e.toLowerCase()[0])>=0?"an":"a"}t.exports.DEFAULT_ENVIRONMENT="prod",t.exports.DEFAULT_REALM="us1",t.exports.DEFAULT_LOG_LEVEL="warn",t.exports.REGISTRAR_SERVER=function(e){return e+".endpoint.twilio.com"},t.exports.WS_SERVER=function(e,t,n){switch(e){case"prod":switch(t){case"us1":return"wss://"+n+".endpoint.twilio.com";default:return"wss://"+n+".endpoint."+t+".twilio.com"}default:return"wss://"+n+".endpoint."+e+"-"+t+".twilio.com"}},t.exports.ECS_SERVER=function(e,t){switch(e){case"prod":return"https://ecs."+t+".twilio.com";default:return"https://ecs."+e+"-"+t+".twilio.com"}},t.exports.ECS_TIMEOUT=60,t.exports.PUBLISH_MAX_ATTEMPTS=5,t.exports.PUBLISH_BACKOFF_MS=10,t.exports.ICE_SERVERS_TIMEOUT_MS=3e3,t.exports.ICE_SERVERS_DEFAULT_TTL=3600,t.exports.DEFAULT_ICE_SERVERS=function(e){switch(e){case"prod":return[{urls:"stun:global.stun.twilio.com:3478?transport=udp"}];default:return[{urls:"stun:global.stun."+e+".twilio.com:3478?transport=udp"}]}},t.exports.headers={X_TWILIO_ACCESSTOKEN:"X-Twilio-AccessToken",X_TWILIO_PARTICIPANTS:"X-Twilio-Participants",X_TWILIO_PARTICIPANTSID:"X-Twilio-ParticipantSid"};var i=e("./twilioerror"),s={SIGNALING:53e3,ROOM:53100,PARTICIPANT:53200,TRACK:53300,MEDIA:53400,CONFIGURATION:53500};t.exports.twilioErrors=[{category:"SIGNALING",errors:["CONNECTION_ERROR","CONNECTION_DISCONNECTED","CONNECTION_TIMEOUT","INVALID_MESSAGE_RECEIVED","INVALID_MESSAGE_SENT"],messages:["Signaling connection error","Signaling connection disconnected","Signaling connection timed out","Client received an invalid signaling message","Client sent an invalid signaling message"]},{category:"ROOM",errors:["INVALID_NAME","NAME_TOO_LONG","INVALID_NAME_CHARS","CREATE_FAILED","CONNECT_FAILED","TOO_MANY_PARTICIPANTS"],messages:["Room name is invalid","Room name is too long","Room name contains invalid characters","Unable to create Room","Unable to connect to Room","Room contains too many Participants"]},{category:"PARTICIPANT",errors:["INVALID_IDENTITY","IDENTITY_TOO_LONG","INVALID_IDENTITY_CHARS","TOO_MANY_TRACKS"],messages:["Participant identity is invalid","Participant identity is too long","Participant identity contains invalid characters","Participant has too many Tracks"]},{category:"TRACK",errors:["INVALID","INVALID_NAME","NAME_TOO_LONG","INVALID_NAME_CHARS"],messages:["Track is invalid","Track name is invalid","Track name is too long","Track name contains invalid characters"]},{category:"MEDIA",errors:["CLIENT_LOCAL_DESC_FAILED","SERVER_LOCAL_DESC_FAILED","CLIENT_REMOTE_DESC_FAILED","SERVER_REMOTE_DESC_FAILED","NO_SUPPORTED_CODEC"],messages:["Client is unable to create or apply a local media description","Server is unable to create or apply a local media description","Client is unable to apply a remote media description","Server is unable to apply a remote media description","No supported codec"]},{category:"CONFIGURATION",errors:["ACQUIRE_FAILED","ACQUIRE_TURN_FAILED"],messages:["Unable to acquire configuration","Unable to acquire TURN credentials"]}].reduce(function(e,t){return t.errors.forEach(function(n,r){e[t.category+"_"+n]=i.bind(null,s[t.category]+r,t.messages[r])}),e},{INVALID_ACCESSTOKEN:i.bind(null,20101)}),t.exports.typeErrors={INVALID_TYPE:function(e,t){return new TypeError(e+" must be "+r(t)+" "+t)},INVALID_VALUE:function(e,t){return new RangeError(e+" must be one of ",t.join(", "))},REQUIRED_ARGUMENT:function(e){return new TypeError(e+" must be specified")}}},{"./twilioerror":57}],50:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);e=Object.assign({getKey:function(e){return e},getValue:function(e){return e},isLessThanOrEqualTo:function(e,t){return e<=t}},e),Object.defineProperties(this,{_getKey:{value:e.getKey},_getValue:{value:e.getValue},_isLessThanOrEqualTo:{value:e.isLessThanOrEqualTo},_map:{value:new Map}})}r.prototype.toMap=function(){return new Map(this._map)},r.prototype.updateAndFilter=function(e){return e.filter(this.update,this)},r.prototype.update=function(e){var t=this._getKey(e),n=this._getValue(e);return(!this._map.has(t)||!this._isLessThanOrEqualTo(n,this._map.get(t)))&&(this._map.set(t,n),!0)},t.exports=r},{}],51:[function(e,t,n){"use strict";function r(e,t){return encodeURIComponent(t)+"@"+b.REGISTRAR_SERVER(e)}function i(e,t){return r(e,encodeURIComponent(t))}function s(t){var n=e("../sip"),r=n.Grammar.parse(t,"Contact");return r!==-1&&r[0]?r[0].parsed.uri.user:null}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function u(e,t,n,r){return new Promise(function(i,s){function o(){var e=[].slice.call(arguments);r&&t.removeListener(r,a),i.apply(null,e)}function a(){var e=[].slice.call(arguments);t.removeListener(n,o),s.apply(null,e)}t.once(n,o),r&&t.once(r,a),e()})}function c(e){var t=e.match(/<sip:(.*)@(.*)$/);return t?t[1]:null}function l(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:null},e)}function d(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}function h(e,t,n,r){if(!t[r]&&!r.match(/^on[a-z]+$/)){var i;try{i=a(e[r])}catch(e){}"function"===i&&(t[r]=function(){return this[n][r].apply(this[n],arguments)})}}function f(e,t,n){for(var r in e)h(e,t,n,r)}function p(e,t,n){for(var r in e)m(e,t,n,r)}function m(e,t,n,r){if(!(r in t))return r.match(/^on[a-z]+$/)?(Object.defineProperty(t,r,{value:null,writable:!0}),void n.addEventListener(r.slice(2),function(){t.dispatchEvent.apply(t,arguments)})):void Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[r]}})}function _(e,t,n){return t?e.then(function(e){t(e)},function(e){n(e)}):e}function g(e){return"string"==typeof e?{default:e,media:e,signaling:e,webrtc:e}:e}function v(e,t){return t=t?"Local":"",t+(e.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"Track"}function y(){return"undefined"!=typeof mozRTCPeerConnection?"unified":null}var b=e("./constants"),T=e("./map"),k=e("./token");t.exports.constants=b,t.exports.makeSIPURI=r,t.exports.makeRegistrationSIPURI=i,t.exports.getUser=s,t.exports.makeUUID=o,t.exports.promiseFromEvents=u,t.exports.parseRoomSIDFromContactHeader=c,t.exports.map=T,t.exports.getOrNull=l,t.exports.defer=d,t.exports.token=k,t.exports.delegateMethods=f,t.exports.proxyProperties=p,t.exports.legacyPromise=_,t.exports.buildLogLevels=g,t.exports.trackClass=v,t.exports.getSdpFormat=y},{"../sip":38,"./constants":49,"./map":54,"./token":56}],52:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);o.call(this,e||"low",a)}function i(e,t){return e.transition(t),e}var s=e("util").inherits,o=e("../statemachine"),a={high:["low"],low:["high"]};s(r,o),r.prototype.raise=function(){return i(this,"high")},r.prototype.lower=function(){return i(this,"low")},t.exports=r},{"../statemachine":39,util:109}],53:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);if("string"!=typeof e)throw new c.INVALID_TYPE("moduleName","string");if(!t)throw new c.REQUIRED_ARGUMENT("component");"object"!==(void 0===n?"undefined":a(n))&&(n={}),s(n),Object.defineProperties(this,{_logLevels:{value:n},logLevel:{get:function(){return r.getLevelByName(n[e]||u)}},name:{get:t.toString.bind(t)}})}function i(e){if(!(e in l))throw new c.INVALID_VALUE("level",h)}function s(e){Object.keys(e).forEach(function(t){i(e[t].toUpperCase())})}var o=e("./constants"),u=o.DEFAULT_LOG_LEVEL,c=e("./constants").typeErrors;Object.defineProperties(r,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:[{name:"DEBUG",logFn:console.log},{name:"INFO",logFn:console.info},{name:"WARN",logFn:console.warn},{name:"ERROR",logFn:console.error},{name:"OFF",logFn:function(){}}]}});var l={},d=[],h=r._levels.map(function(e,t){return l[e.name]=!0,d.push(t),e.name});r.getLevelByName=function(e){return isNaN(e)?(e=e.toUpperCase(),i(e),r[e]):parseInt(e,10)},r.prototype.createLog=function(e,t){return new r(e,t,this._logLevels)},r.prototype.setLevels=function(e){return s(e),Object.assign(this._logLevels,e),this},r.prototype.log=function(e,t){var n=r._levels[e];if(!n)throw new c.INVALID_VALUE("logLevel",d);if(this.logLevel<=e){var i=n.name,s=(new Date).toISOString().split("T").concat(["|",i,"in",this.name+":"]);n.logFn.apply(console,s.concat(t))}return this},r.prototype.debug=function(){return this.log(r.DEBUG,[].slice.call(arguments))},r.prototype.info=function(){return this.log(r.INFO,[].slice.call(arguments))},r.prototype.warn=function(){return this.log(r.WARN,[].slice.call(arguments))},r.prototype.error=function(){return this.log(r.ERROR,[].slice.call(arguments))},r.prototype.throw=function(e,t){throw e.clone&&(e=e.clone(t)),this.log(r.ERROR,e),e},t.exports=r},{"./constants":49}],54:[function(e,t,n){"use strict";function r(e,t,n){return e.has(t)||e.set(t,new Set),e.get(t).add(n),e}function i(e,t,n){if(!e.has(t))return e;var r=e.get(t);return r.delete(n),r.size||e.delete(r),e}t.exports.addToMapOfSets=r,t.exports.deleteFromMapOfSets=i},{}],55:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);i.call(this);var n=o.defer(),s=!1,a=new Error("Timed out"),u=null,c=null;Object.defineProperties(this,{_deferred:{value:n},_isTimedOut:{get:function(){return s},set:function(e){s=e}},_timedOut:{value:a},_timeout:{get:function(){return u},set:function(e){u=e}},_timer:{get:function(){return c},set:function(e){c=e}},_promise:{value:n.promise},isTimedOut:{enumerable:!0,get:function(){return s}},timeout:{enumerable:!0,get:function(){return u}}});var l=this;e.then(function(){clearTimeout(l._timer),n.resolve.apply(n.promise,arguments)},function(){clearTimeout(l._timer),n.reject.apply(n.promise,arguments)}),t&&this.start(t)}var i=e("events").EventEmitter,s=e("util").inherits,o=e("./");s(r,i),r.prototype.catch=function(){return this._promise.catch.apply(this._promise,arguments)},r.prototype.start=function(e){if(this._timer)return this;var t=this;return this._timeout=e,this._timer=setTimeout(function(){t._timer&&(t._isTimedOut=!0,t.emit("timedOut",t),t._deferred.reject(t._timedOut))},this.timeout),this},r.prototype.then=function(){return this._promise.then.apply(this._promise,arguments)},t.exports=r},{"./":51,events:70,util:109}],56:[function(e,t,n){(function(e){"use strict";function t(e){var t=e.split(".");if(3!==t.length)throw new Error("Token is invalid or malformed");var n=t[1],i=r(n);return JSON.parse(i)}function r(e){var t=e.length%4;if(t>0){var n=4-t;e+=new Array(n+1).join("=")}return e=e.replace(/-/g,"+").replace(/_/g,"/"),i(e)}function i(t){return new e(t,"base64").toString()}function s(e){return t(e).sub}function o(e){return t(e).grants.identity}n.getAccountSid=s,n.getIdentity=o}).call(this,e("buffer").Buffer)},{buffer:68}],57:[function(e,t,n){"use strict";function r(e){var t=Error.apply(this,[].slice.call(arguments,1));t.name="TwilioError",Object.defineProperty(this,"code",{value:e,enumerable:!0}),Object.getOwnPropertyNames(t).forEach(function(e){Object.defineProperty(this,e,{value:t[e],enumerable:!0})},this)}(0,e("util").inherits)(r,Error),r.prototype.toString=function(){var e=this.message?": "+this.message:"";return this.name+" "+this.code+e},t.exports=r},{util:109}],58:[function(e,t,n){"use strict";function r(e,t){return e&&"function"==typeof e.getStats?i(e,t):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function i(e,t){var n=s(e,"audio","local"),r=s(e,"video","local"),i=s(e,"audio"),a=s(e,"video"),u={localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},c=[].concat(n.map(function(n){return o(e,n,t).then(function(e){e.trackId=n.id,u.localAudioTrackStats.push(e)})}),r.map(function(n){return o(e,n,t).then(function(e){e.trackId=n.id,u.localVideoTrackStats.push(e)})}),i.map(function(n){return o(e,n,t).then(function(e){e.trackId=n.id,u.remoteAudioTrackStats.push(e)})}),a.map(function(n){return o(e,n,t).then(function(e){e.trackId=n.id,u.remoteVideoTrackStats.push(e)})}));return Promise.all(c).then(function(){return u})}function s(e,t,n){return e["local"===n?"getLocalStreams":"getRemoteStreams"]().reduce(function(e,n){var r="audio"===t?"getAudioTracks":"getVideoTracks";return e.concat(n[r]())},[])}function o(e,t,n){return n=n||{},void 0!==n.testForChrome||"undefined"!=typeof webkitRTCPeerConnection?a(e,t):void 0!==n.testForFirefox||"undefined"!=typeof mozRTCPeerConnection?u(e,t):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function a(e,t){return new Promise(function(n,r){e.getStats(function(e){n(c(e))},t,r)})}function u(e,t){return new Promise(function(n,r){e.getStats(t,function(e){n(l(e))},r)})}function c(e){var t=e.result().reduce(function(e,t){return"ssrc"===t.type?t:e},null),n={};return t&&(n.timestamp=Math.round(Number(t.timestamp)),n=t.names().reduce(function(e,n){switch(n){case"googCodecName":e.codecName=t.stat(n);break;case"googRtt":e.roundTripTime=1e3*Number(t.stat(n));break;case"googJitterReceived":e.jitter=Number(t.stat(n));break;case"googFrameWidthInput":e.frameWidthInput=Number(t.stat(n));break;case"googFrameHeightInput":e.frameHeightInput=Number(t.stat(n));break;case"googFrameWidthSent":e.frameWidthSent=Number(t.stat(n));break;case"googFrameHeightSent":e.frameHeightSent=Number(t.stat(n));break;case"googFrameWidthReceived":e.frameWidthReceived=Number(t.stat(n));break;case"googFrameHeightReceived":e.frameHeightReceived=Number(t.stat(n));break;case"googFrameRateInput":e.frameRateInput=Number(t.stat(n));break;case"googFrameRateSent":e.frameRateSent=Number(t.stat(n));break;case"googFrameRateReceived":e.frameRateReceived=Number(t.stat(n));break;case"ssrc":e[n]=t.stat(n);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":e[n]=Number(t.stat(n))}return e},n)),n}function l(e){function t(e){var t=r,i=n;return r.isRemote&&(t=n,i=r),void 0!==t[e]?t[e]:i[e]}var n=Object.keys(e).reduce(function(t,n){return"inboundrtp"===e[n].type?e[n]:t},null),r=Object.keys(e).reduce(function(t,n){return"outboundrtp"===e[n].type?e[n]:t},null),i={},s=t("timestamp");i.timestamp=Math.round(s);var o=t("ssrc");"string"==typeof o&&(i.ssrc=o);var a=t("bytesSent");"number"==typeof a&&(i.bytesSent=a);var u=t("packetsLost");"number"==typeof u&&(i.packetsLost=u);var c=t("packetsSent");"number"==typeof c&&(i.packetsSent=c);var l=t("mozRtt");"number"==typeof l&&(i.roundTripTime=1e3*l);var d=t("jitter");"number"==typeof d&&(i.jitter=Math.round(1e3*d));var h=t("framerateMean");"number"==typeof h&&(i.frameRateSent=Math.round(h));var f=t("bytesReceived");"number"==typeof f&&(i.bytesReceived=f);var p=t("packetsReceived");"number"==typeof p&&(i.packetsReceived=p);var m=t("framerateMean");return"number"==typeof m&&(i.frameRateReceived=Math.round(m)),i}t.exports=r},{}],59:[function(e,t,n){"use strict";function r(e){return new Promise(function(t,n){i(e||{audio:!0,video:!0},t,n)})}function i(e,t,n){if("undefined"!=typeof window&&"undefined"!=typeof navigator)return void("object"===a(navigator.mediaDevices)&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(t,n):"function"==typeof navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e,t,n):"function"==typeof navigator.mozGetUserMedia&&navigator.mozGetUserMedia(e,t,n));n(new Error("getUserMedia is not supported"))}t.exports=r},{}],60:[function(e,t,n){"use strict";"undefined"!=typeof mozRTCIceCandidate?t.exports=mozRTCIceCandidate:"undefined"!=typeof RTCIceCandidate&&(t.exports=RTCIceCandidate)},{}],61:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this);var t=Object.assign({},e);t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy);var n=null,i=new webkitRTCPeerConnection(t);Object.defineProperties(this,{_peerConnection:{value:i},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_signalingStateLatch:{value:new l},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:i.localDescription}},onsignalingstatechange:{get:function(){return n},set:function(e){n&&this.removeEventListener("signalingstatechange",n),"function"==typeof e?(n=e,this.addEventListener("signalingstatechange",n)):n=null}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:i.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":i.signalingState}}});var s=this;i.addEventListener("signalingstatechange",function(){s._pendingLocalOffer||s._pendingRemoteOffer||s.dispatchEvent.apply(s,arguments)}),d.proxyProperties(webkitRTCPeerConnection.prototype,this,i),"ontrack"in webkitRTCPeerConnection.prototype||i.addEventListener("addstream",function(e){var t=e.stream;t.addEventListener("addtrack",function(e){var n=e.track,r=new Event("track");r.track=n,r.receiver={track:n},r.streams=[t],s.dispatchEvent(r)}),t.getTracks().forEach(function(e){var n=new Event("track");n.track=e,n.streams=[t],s.dispatchEvent(n)})})}function i(e,t,n){function r(n){t?e._pendingLocalOffer=n:e._pendingRemoteOffer=n}function i(){t?e._pendingLocalOffer=null:e._pendingRemoteOffer=null}var a,u=t?e._pendingLocalOffer:e._pendingRemoteOffer,c=t?e._pendingRemoteOffer:e._pendingLocalOffer,l=t?"have-local-offer":"have-remote-offer",d=t?"setLocalDescription":"setRemoteDescription";if(!t&&c&&"answer"===n.type)a=s(e,n);else if("offer"===n.type){if(e.signalingState!==l&&"stable"!==e.signalingState)return Promise.reject(new Error("Cannot set "+(t?"local":"remote")+" offer in state "+e.signalingState));u||e._signalingStateLatch.raise();var h=e.signalingState;r(o(n)),a=Promise.resolve(),e.signalingState!==h&&a.then(function(){e.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===n.type&&(e.signalingState!==l?a=Promise.reject(new Error("Cannot rollback "+(t?"local":"remote")+" description in "+e.signalingState)):(i(),a=Promise.resolve(),a.then(function(){e.dispatchEvent(new Event("signalingstatechange"))})));return a||e._peerConnection[d](o(n))}function s(e,t){var n=e._pendingLocalOffer;return e._peerConnection.setLocalDescription(n).then(function(){return e._pendingLocalOffer=null,e.setRemoteDescription(t)}).then(function(){e._signalingStateLatch.lower()})}function o(e){return e instanceof a&&e._description?e._description:new RTCSessionDescription(e)}var a=e("../rtcsessiondescription/chrome"),u=e("../../eventtarget"),c=e("util").inherits,l=e("../../util/latch"),d=e("../../util");c(r,u),r.prototype.addIceCandidate=function(e){var t,n=[].slice.call(arguments),r=this;return t="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return r._peerConnection.addIceCandidate(e)}):this._peerConnection.addIceCandidate(e),n.length>1?d.legacyPromise(t,n[1],n[2]):t},r.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},r.prototype.createAnswer=function(){var e,t=[].slice.call(arguments),n=this;return this._pendingRemoteOffer&&(e=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return n._signalingStateLatch.lower(),n._peerConnection.createAnswer()}).then(function(e){return n._pendingRemoteOffer=null,e},function(e){throw n._pendingRemoteOffer=null,e})),e?t.length>1?d.legacyPromise(e,t[0],t[1]):e:this._peerConnection.createAnswer.apply(this._peerConnection,t)},r.prototype.setLocalDescription=function(){var e=[].slice.call(arguments),t=e[0],n=i(this,!0,t);return e.length>1?d.legacyPromise(n,e[1],e[2]):n},r.prototype.setRemoteDescription=function(){var e=[].slice.call(arguments),t=e[0],n=i(this,!1,t);return e.length>1?d.legacyPromise(n,e[1],e[2]):n},d.delegateMethods(webkitRTCPeerConnection.prototype,r.prototype,"_peerConnection"),t.exports=r},{"../../eventtarget":5,"../../util":51,"../../util/latch":52,"../rtcsessiondescription/chrome":64,util:109}],62:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);a.call(this);var t=null,n=new mozRTCPeerConnection(e);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:n},_rollingBack:{value:!1,writable:!0},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return o(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},onsignalingstatechange:{get:function(){return t},set:function(e){t&&this.removeEventListener("signalingstatechange",t),"function"==typeof e?(t=e,this.addEventListener("signalingstatechange",t)):t=null}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var i,s=this;n.addEventListener("signalingstatechange",function(){if(!s._rollingBack&&s.signalingState!==i){i=s.signalingState;var e=s.dispatchEvent.apply.bind(s.dispatchEvent,s,arguments);s._isClosed?setTimeout(e):e()}}),l.proxyProperties(mozRTCPeerConnection.prototype,this,n),"ontrack"in mozRTCPeerConnection.prototype||n.addEventListener("addstream",function(e){var t=e.stream;t.getTracks().forEach(function(e){var n=new Event("track");n.track=e,n.streams=[t],s.dispatchEvent(n)})})}function i(e,t,n){var r=t?"setLocalDescription":"setRemoteDescription";return e._rollingBack=!0,e._peerConnection[r](new u({type:"rollback"})).then(n).then(function(t){return e._rollingBack=!1,t},function(t){throw e._rollingBack=!1,t})}function s(e,t,n){if(!e._initiallyNegotiatedDtlsRole&&"offer"!==t.type){var r=t.sdp.match(/a=setup:([a-z]+)/);if(r){var i=r[1];e._initiallyNegotiatedDtlsRole=n?{active:"passive",passive:"active"}[i]:i}}}function o(e,t){return e&&"answer"===e.type&&t&&(e.sdp=e.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+t)),e}var a=e("../../eventtarget"),u=e("../rtcsessiondescription/firefox"),c=e("util").inherits,l=e("../../util");c(r,a),r.prototype.getRemoteStreams=function(){return this._isClosed?[]:this._peerConnection.getRemoteStreams()},r.prototype.removeStream=function(){},r.prototype.addStream=function(e){if(!this._peerConnection.getLocalStreams().some(function(t){return t===e}))return this._peerConnection.addStream(e)},r.prototype.createAnswer=function(){var e,t=[].slice.call(arguments),n=this;return e=this._peerConnection.createAnswer().then(function(e){return s(n,e),o(e,n._initiallyNegotiatedDtlsRole),e}),"function"==typeof t[0]?l.legacyPromise(e,t[0],t[1]):e},r.prototype.createOffer=function(){var e,t=[].slice.call(arguments),n=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var r="have-local-offer"===this.signalingState,s=(t.length>1?t[2]:t[0])||{};e=i(this,r,function(){return n.createOffer(s)})}return e?t.length>1?l.legacyPromise(e,t[0],t[1]):e:this._peerConnection.createOffer.apply(this._peerConnection,t)},r.prototype.setLocalDescription=function(){var e,t=[].slice.call(arguments),n=t[0];return n&&"answer"===n.type&&"have-local-offer"===this.signalingState&&(e=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),e?t.length>1?l.legacyPromise(e,t[1],t[2]):e:this._peerConnection.setLocalDescription.apply(this._peerConnection,t)},r.prototype.setRemoteDescription=function(){var e,t=[].slice.call(arguments),n=t[0],r=this;return n&&"have-remote-offer"===this.signalingState&&("answer"===n.type?e=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===n.type&&(e=i(this,!1,function(){return r._peerConnection.setRemoteDescription(n)}))),e||(e=this._peerConnection.setRemoteDescription(n)),e=e.then(function(){s(r,n,!0)}),t.length>1?l.legacyPromise(e,t[1],t[2]):e},r.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},l.delegateMethods(mozRTCPeerConnection.prototype,r.prototype,"_peerConnection"),t.exports=r},{"../../eventtarget":5,"../../util":51,"../rtcsessiondescription/firefox":65,util:109}],63:[function(e,t,n){"use strict";"undefined"!=typeof webkitRTCPeerConnection?t.exports=e("./chrome"):"undefined"!=typeof mozRTCPeerConnection?t.exports=e("./firefox"):"undefined"!=typeof RTCPeerConnection&&(t.exports=RTCPeerConnection)},{"./chrome":61,"./firefox":62}],64:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);var t=e&&"rollback"===e.type?null:new RTCSessionDescription(e),n=t?null:"rollback",i=e.sdp;Object.defineProperties(this,{_description:{get:function(){return t}},sdp:{enumerable:!0,get:function(){return t?t.sdp:i},set:function(e){if(t)return void(t.sdp=e);i=e}},type:{enumerable:!0,get:function(){return t?t.type:n},set:function(e){if("rollback"===e&&t){var r=t.sdp;t=null,this.sdp=r}else{if(t)return void(t.type=e);if(["offer","answer","pranswer","rollback"].indexOf(e)===-1)return}n=e}}})}t.exports=r},{}],65:[function(e,t,n){"use strict";t.exports=mozRTCSessionDescription},{}],66:[function(e,t,n){"use strict";"undefined"!=typeof webkitRTCPeerConnection?t.exports=e("./chrome"):"undefined"!=typeof mozRTCSessionDescription?t.exports=e("./firefox"):"undefined"!=typeof RTCSessionDescription&&(t.exports=RTCSessionDescription)},{"./chrome":64,"./firefox":65}],67:[function(e,t,n){!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===l?62:t===o||t===d?63:t<a?-1:t<a+10?t-a+26+26:t<c+26?t-c:t<u+26?t-u+26:void 0}function n(e){function n(e){c[d++]=e}var r,s,o,a,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new i(3*e.length/4-u),o=u>0?e.length-4:e.length;var d=0;for(r=0,s=0;r<o;r+=4,s+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===u&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function r(e){function t(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,i,s,o=e.length%3,a="";for(r=0,s=e.length-o;r<s;r+=3)i=(e[r]<<16)+(e[r+1]<<8)+e[r+2],a+=n(i);switch(o){case 1:i=e[e.length-1],a+=t(i>>2),a+=t(i<<4&63),a+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],a+=t(i>>10),a+=t(i>>4&63),a+=t(i<<2&63),a+="="}return a}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),o="/".charCodeAt(0),a="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),l="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}(void 0===n?this.base64js={}:n)},{}],68:[function(e,t,r){(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
"use strict";function n(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?o(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new s(e,arguments[1]):new s(e)}function o(e,t){if(e=m(e,t<0?0:0|_(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}function a(e,t,n){return"string"==typeof n&&""!==n||(n="utf8"),e=m(e,0|v(t,n)),e.write(t,n),e}function u(e,t){if(s.isBuffer(t))return c(e,t);if(J(t))return l(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return d(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?f(e,t):p(e,t)}function c(e,t){var n=0|_(t.length);return e=m(e,n),t.copy(e,0,0,n),e}function l(e,t){var n=0|_(t.length);e=m(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t){var n=0|_(t.length);e=m(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t){return s.TYPED_ARRAY_SUPPORT?(t.byteLength,e=s._augment(new Uint8Array(t))):e=d(e,new Uint8Array(t)),e}function f(e,t){var n=0|_(t.length);e=m(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t){var n,r=0;"Buffer"===t.type&&J(t.data)&&(n=t.data,r=0|_(n.length)),e=m(e,r);for(var i=0;i<r;i+=1)e[i]=255&n[i];return e}function m(e,t){return s.TYPED_ARRAY_SUPPORT?(e=s._augment(new Uint8Array(t)),e.__proto__=s.prototype):(e.length=t,e._isBuffer=!0),0!==t&&t<=s.poolSize>>>1&&(e.parent=K),e}function _(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e,t){if(!(this instanceof g))return new g(e,t);var n=new s(e,t);return delete n.parent,n}function v(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return q(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if(t|=0,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),t<0&&(t=0),n>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return x(this,t,n);case"binary":return D(this,t,n);case"base64":return L(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new Error("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;o++){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+o]=a}return o}function T(e,t,n,r){return z(q(t,e.length-n),e,n,r)}function k(e,t,n,r){return z(X(t),e,n,r)}function w(e,t,n,r){return k(e,t,n,r)}function M(e,t,n,r){return z(B(t),e,n,r)}function S(e,t,n,r){return z(W(t,e.length-n),e,n,r)}function L(e,t,n){return 0===t&&n===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s=e[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=n){var u,c,l,d;switch(a){case 1:s<128&&(o=s);break;case 2:u=e[i+1],128===(192&u)&&(d=(31&s)<<6|63&u,d>127&&(o=d));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(d=(15&s)<<12|(63&u)<<6|63&c,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(d=(15&s)<<18|(63&u)<<12|(63&c)<<6|63&l,d>65535&&d<1114112&&(o=d))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return C(r)}function C(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;s++)i+=$(e[s]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function A(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Y(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||t<o)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function O(e,t,n,r,i,s){if(t>i||t<s)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function N(e,t,n,r,i){return i||O(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(e,t,n,r,23,4),n+4}function H(e,t,n,r,i){return i||O(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(e,t,n,r,52,8),n+8}function U(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;o<r;o++){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function X(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}function B(e){return G.toByteArray(U(e))}function z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var G=e("base64-js"),V=e("ieee754"),J=e("isarray");r.Buffer=s,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,s.poolSize=8192;var K={};s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),s.TYPED_ARRAY_SUPPORT?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o&&e[i]===t[i];)++i;return i!==o&&(n=e[i],r=t[i]),n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!J(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new s(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new s(t),i=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(r,i),i+=o.length}return r},s.byteLength=v,s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):y.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:s.compare(this,e)},s.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[r===-1?0:i-r]){if(r===-1&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(s.isBuffer(e))return n(this,e,t);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(e){return this.readUInt8(e)},s.prototype.set=function(e,t){return this.writeUInt8(e,t)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return k(this,e,t,n);case"binary":return w(this,e,t,n);case"base64":return M(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=s._augment(this.subarray(e,t));else{var i=t-e;r=new s(i,void 0);for(var o=0;o<i;o++)r[o]=this[o+e]}return r.length&&(r.parent=this.parent||this),r},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),V.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),V.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),V.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),V.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Y(this,e,t,n,Math.pow(2,8*n),0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Y(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Y(this,e,t,n,i-1,-i)}var s=0,o=1,a=e<0?1:0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=(e/o>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Y(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=e<0?1:0;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=(e/o>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;i--)e[i+t]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;r<n;r++)this[r]=e;else{var i=q(e.toString()),s=i.length;for(r=t;r<n;r++)this[r]=i[r%s]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":67,ieee754:71,isarray:69}],69:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],70:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),a=1;a<r;a++)s[a-1]=arguments[a];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),a=1;a<r;a++)s[a-1]=arguments[a];for(c=n.slice(),r=c.length,a=0;a<r;a++)c[a].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.trace)}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){return e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],71:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+e[t+d],d+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+d],d+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:(f?-1:1)*(1/0);o+=Math.pow(2,r),s-=c}return(f?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,a,u,c=8*s-i-1,l=(1<<c)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+d>=1?h/u:h*Math.pow(2,1-d),t*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(t*u-1)*Math.pow(2,i),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*m}},{}],72:[function(e,t,n){function r(){if(!a){a=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}a=!1}}function i(){}var s=t.exports={},o=[],a=!1;s.nextTick=function(e){o.push(e),a||setTimeout(r,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],73:[function(e,t,n){t.exports={_args:[[{raw:"sip.js@github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",scope:null,escapedName:"sip.js",name:"sip.js",rawSpec:"github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",spec:"github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",type:"hosted",hosted:{type:"github",ssh:"git@github.com:twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",sshUrl:"git+ssh://git@github.com/twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",httpsUrl:"git+https://github.com/twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",gitUrl:"git://github.com/twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",shortcut:"github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",directUrl:"https://raw.githubusercontent.com/twilio/SIP.js/420ed46ba6751b32e99950fb6fb84683afb820cc/package.json"}},"/home/travis/build/twilio/twilio-video.js"]],_from:"twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",_id:"sip.js@0.7.5",_inCache:!0,_location:"/sip.js",_phantomChildren:{},_requested:{raw:"sip.js@github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",scope:null,escapedName:"sip.js",name:"sip.js",rawSpec:"github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",spec:"github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",type:"hosted",hosted:{type:"github",ssh:"git@github.com:twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",sshUrl:"git+ssh://git@github.com/twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",httpsUrl:"git+https://github.com/twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",gitUrl:"git://github.com/twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",shortcut:"github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",directUrl:"https://raw.githubusercontent.com/twilio/SIP.js/420ed46ba6751b32e99950fb6fb84683afb820cc/package.json"}},_requiredBy:["/"],_resolved:"git://github.com/twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",_shasum:"964da52f1f19b7ad6662d83ad03a3bac705a36dc",_shrinkwrap:null,_spec:"sip.js@github:twilio/SIP.js#420ed46ba6751b32e99950fb6fb84683afb820cc",_where:"/home/travis/build/twilio/twilio-video.js",author:{name:"OnSIP",email:"developer@onsip.com",url:"http://sipjs.com/authors/"},browser:{"./src/environment.js":"./src/environment_browser.js"},bugs:{url:"https://github.com/onsip/SIP.js/issues"},contributors:[{url:"https://github.com/onsip/SIP.js/blob/master/THANKS.md"}],dependencies:{pegjs:"^0.8.0",promiscuous:"^0.6.0",ws:"^1.0.1"},description:"A simple, intuitive, and powerful JavaScript signaling library",devDependencies:{beefy:"^2.1.5",browserify:"^4.1.8",grunt:"~0.4.0","grunt-browserify":"^4.0.1","grunt-cli":"~0.1.6","grunt-contrib-copy":"^0.5.0","grunt-contrib-jasmine":"^1.0.3","grunt-contrib-jshint":">0.5.0","grunt-contrib-uglify":"~0.2.0","grunt-peg":"~1.3.1","grunt-trimtrailingspaces":"^0.4.0"},engines:{node:">=0.12"},gitHead:"420ed46ba6751b32e99950fb6fb84683afb820cc",homepage:"http://sipjs.com",keywords:["sip","websocket","webrtc","library","javascript"],license:"MIT",main:"src/index.js",name:"sip.js",optionalDependencies:{promiscuous:"^0.6.0"},readme:'# SIP.js\n\n[![Build Status](https://travis-ci.org/onsip/SIP.js.png?branch=master)](https://travis-ci.org/onsip/SIP.js)\n\nA JavaScript SIP stack for WebRTC, instant messaging, and more!\n\n\n## Website and Documentation\n\n* [SIPjs.com](http://sipjs.com)\n* [Mailing List](https://groups.google.com/forum/#!forum/sip_js)\n* [Issue Tracking](https://github.com/onsip/sip.js/issues)\n\n\n## Download\n\n* [sipjs.com/download](http://sipjs.com/download/)\n* Bower: `bower install sip.js`\n* npm: `npm install sip.js`\n\n## Authors\n\n### James Criscuolo\n\n* <james@onsip.com>\n\n### Joseph Frazier\n\n* <1212jtraceur@gmail.com>\n* GitHub [@josephfrazier](https://github.com/josephfrazier)\n* Twitter [@josephfrazier_](https://twitter.com/josephfrazier_)\n\n### Eric Green\n\n* <eric.green@onsip.com>\n\n### Will Mitchell\n\n* <wakamoleguy@gmail.com>\n* GitHub [@wakamoleguy](http://github.com/wakamoleguy)\n* Twitter [@wakamoleguy](http://twitter.com/wakamoleguy)\n\n### JsSIP Authors\n\nSIP.js contains substantial portions of the JsSIP software. JsSIP\'s authors at time of fork are listed below. For up to date information about JsSIP, please visit [jssip.net](http://jssip.net)\n\n* Jos Luis Milln\n* Iaki Baz Castillo\n* Sal Ibarra Corretg\n\n## License\n\nSIP.js is released under the [MIT license](http://sipjs.com/license).\n\nSIP.js contains substantial portions of the JsSIP software, under the following license:\n\n~~~\nCopyright (c) 2012-2013 Jos Luis Milln - Versatica <http://www.versatica.com>\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n"Software"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n~~~\n',readmeFilename:"README.md",repository:{type:"git",url:"git+https://github.com/onsip/SIP.js.git"},scripts:{build:"grunt build",postinstall:"cd src/Grammar && mkdir -p dist && pegjs --extra-options-file peg.json src/Grammar.pegjs dist/Grammar.js",repl:"beefy test/repl.js --open",test:"grunt travis --verbose"},title:"SIP.js",version:"0.7.5"}},{}],74:[function(e,t,n){"use strict";t.exports=function(e){var t;t=function(t,n,r,i){var s=r;if(void 0===r)throw new TypeError("Not enough arguments");if(this.ua=t,this.logger=t.getLogger("sip.clientcontext"),this.method=n,r=t.normalizeTarget(r),!r)throw new TypeError("Invalid target: "+s);i=Object.create(i||Object.prototype),i.extraHeaders=(i.extraHeaders||[]).slice(),this.request=new e.OutgoingRequest(this.method,r,this.ua,i.params,i.extraHeaders),i.body&&(this.body={},this.body.body=i.body,i.contentType&&(this.body.contentType=i.contentType),this.request.body=this.body),this.localIdentity=this.request.from,this.remoteIdentity=this.request.to,this.data={}},t.prototype=Object.create(e.EventEmitter.prototype),t.prototype.send=function(){return new e.RequestSender(this,this.ua).send(),this},t.prototype.cancel=function(t){t=t||{},t.extraHeaders=(t.extraHeaders||[]).slice();var n=e.Utils.getCancelReason(t.status_code,t.reason_phrase);this.request.cancel(n,t.extraHeaders),this.emit("cancel")},t.prototype.receiveResponse=function(t){var n=e.Utils.getReasonPhrase(t.status_code);switch(!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t,n);break;case/^2[0-9]{2}$/.test(t.status_code):this.ua.applicants[this]&&delete this.ua.applicants[this],this.emit("accepted",t,n);break;default:this.ua.applicants[this]&&delete this.ua.applicants[this],this.emit("rejected",t,n),this.emit("failed",t,n)}},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR)},e.ClientContext=t}},{}],75:[function(e,t,n){"use strict";t.exports=function(e,t){return{USER_AGENT:e+"/"+t,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",AUTHENTICATION_ERROR:"Authentication Error",DIALOG_ERROR:"Dialog Error",WEBRTC_NOT_SUPPORTED:"WebRTC Not Supported",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",NO_PRACK:"No PRACK",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},supported:{UNSUPPORTED:"none",SUPPORTED:"supported",REQUIRED:"required"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",REFER:"REFER",PRACK:"PRACK",REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},OPTION_TAGS:{"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0}}}},{}],76:[function(e,t,n){"use strict";t.exports=function(e){var t;return t=function(e,t,n){this.dialog=e,this.applicant=t,this.request=n,this.reattempt=!1,this.reattemptTimer=null},t.prototype={send:function(){var t=this,n=new e.RequestSender(this,this.dialog.owner.ua);n.send(),this.request.method===e.C.INVITE&&n.clientTransaction.state!==e.Transactions.C.STATUS_TERMINATED&&(this.dialog.uac_pending_reply=!0,n.clientTransaction.on("stateChanged",function n(){this.state!==e.Transactions.C.STATUS_ACCEPTED&&this.state!==e.Transactions.C.STATUS_COMPLETED&&this.state!==e.Transactions.C.STATUS_TERMINATED||(this.removeListener("stateChanged",n),t.dialog.uac_pending_reply=!1,t.dialog.uas_pending_reply===!1&&t.dialog.owner.onReadyToReinvite())}))},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(t){var n=this;408===t.status_code||481===t.status_code?this.applicant.onDialogError(t):t.method===e.C.INVITE&&491===t.status_code?this.reattempt?this.applicant.receiveResponse(t):(this.request.cseq.value=this.dialog.local_seqnum+=1,this.reattemptTimer=e.Timers.setTimeout(function(){n.applicant.owner.status!==e.Session.C.STATUS_TERMINATED&&(n.reattempt=!0,n.request_sender.send())},this.getReattemptTimeout())):this.applicant.receiveResponse(t)}},t}},{}],77:[function(e,t,n){"use strict";t.exports=function(t){var n,r=e("./Dialog/RequestSender")(t),i={STATUS_EARLY:1,STATUS_CONFIRMED:2};n=function(e,n,r,s){var o;if(this.uac_pending_reply=!1,this.uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};s=n instanceof t.IncomingResponse?n.status_code<200?i.STATUS_EARLY:i.STATUS_CONFIRMED:s||i.STATUS_CONFIRMED,o=n.parseHeader("contact"),"UAS"===r?(this.id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=s,this.remote_seqnum=n.cseq,this.local_uri=n.parseHeader("to").uri,this.remote_uri=n.parseHeader("from").uri,this.remote_target=o.uri,this.route_set=n.getHeaders("record-route"),this.invite_seqnum=n.cseq,this.local_seqnum=n.cseq):"UAC"===r&&(this.id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=s,this.invite_seqnum=n.cseq,this.local_seqnum=n.cseq,this.local_uri=n.parseHeader("from").uri,this.pracked=[],this.remote_uri=n.parseHeader("to").uri,this.remote_target=o.uri,this.route_set=n.getHeaders("record-route").reverse(),this.state!==i.STATUS_EARLY||e.hasOffer||(this.mediaHandler=e.mediaHandlerFactory(e))),this.logger=e.ua.getLogger("sip.dialog",this.id.toString()),this.owner=e,e.ua.dialogs[this.id.toString()]=this,this.logger.log("new "+r+" dialog created with status "+(this.state===i.STATUS_EARLY?"EARLY":"CONFIRMED")),e.emit("dialog",this)},n.prototype={update:function(e,t){this.state=i.STATUS_CONFIRMED,this.logger.log("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.route_set=e.getHeaders("record-route").reverse())},terminate:function(){this.logger.log("dialog "+this.id.toString()+" deleted"),this.mediaHandler&&this.state!==i.STATUS_CONFIRMED&&this.mediaHandler.peerConnection.close(),delete this.owner.ua.dialogs[this.id.toString()]},createRequest:function(e,n,r){var i,s;return n=(n||[]).slice(),this.local_seqnum||(this.local_seqnum=Math.floor(1e4*Math.random())),i=e===t.C.CANCEL||e===t.C.ACK?this.invite_seqnum:this.local_seqnum+=1,s=new t.OutgoingRequest(e,this.remote_target,this.owner.ua,{cseq:i,call_id:this.id.call_id,from_uri:this.local_uri,from_tag:this.id.local_tag,to_uri:this.remote_uri,to_tag:this.id.remote_tag,route_set:this.route_set},n,r),s.dialog=this,s},checkInDialogRequest:function(e){var n=this;if(this.remote_seqnum){if(e.cseq<this.remote_seqnum)return e.method!==t.C.ACK&&e.reply(500),e.cseq===this.invite_seqnum;e.cseq>this.remote_seqnum&&(this.remote_seqnum=e.cseq)}else this.remote_seqnum=e.cseq;switch(e.method){case t.C.INVITE:if(this.uac_pending_reply===!0)e.reply(491);else{if(this.uas_pending_reply===!0){var r=(10*Math.random()|0)+1;return e.reply(500,null,["Retry-After:"+r]),!1}this.uas_pending_reply=!0,e.server_transaction.on("stateChanged",function e(){this.state!==t.Transactions.C.STATUS_ACCEPTED&&this.state!==t.Transactions.C.STATUS_COMPLETED&&this.state!==t.Transactions.C.STATUS_TERMINATED||(this.removeListener("stateChanged",e),n.uas_pending_reply=!1,n.uac_pending_reply===!1&&n.owner.onReadyToReinvite())})}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===t.Transactions.C.STATUS_ACCEPTED&&(n.remote_target=e.parseHeader("contact").uri)});break;case t.C.NOTIFY:e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===t.Transactions.C.STATUS_COMPLETED&&(n.remote_target=e.parseHeader("contact").uri)})}return!0},sendRequest:function(e,t,n){n=n||{};var i=(n.extraHeaders||[]).slice(),s=null;n.body&&(n.body.body?s=n.body:(s={},s.body=n.body,n.contentType&&(s.contentType=n.contentType)));var o=this.createRequest(t,i,s);return new r(this,e,o).send(),o},receiveRequest:function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)}},n.C=i,t.Dialog=n}},{"./Dialog/RequestSender":76}],78:[function(e,t,n){"use strict";t.exports=function(e){var t;return t=function(e){this.logger=e.getLogger("sipjs.digestauthentication"),this.username=e.configuration.authorizationUser,this.password=e.configuration.password,this.cnonce=null,this.nc=0,this.ncHex="00000000",this.response=null},t.prototype.authenticate=function(t,n){if(this.algorithm=n.algorithm,this.realm=n.realm,this.nonce=n.nonce,this.opaque=n.opaque,this.stale=n.stale,this.algorithm){if("MD5"!==this.algorithm)return this.logger.warn('challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(n.qop)if(n.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(n.qop.indexOf("auth-int")>-1))return this.logger.warn('challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this.qop="auth-int"}else this.qop=null;return this.method=t.method,this.uri=t.ruri,this.cnonce=e.createRandomToken(12),this.nc+=1,this.updateNcHex(),4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(),!0},t.prototype.calculateResponse=function(){var t,n;t=e.calculateMD5(this.username+":"+this.realm+":"+this.password),"auth"===this.qop?(n=e.calculateMD5(this.method+":"+this.uri),this.response=e.calculateMD5(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+n)):"auth-int"===this.qop?(n=e.calculateMD5(this.method+":"+this.uri+":"+e.calculateMD5(this.body?this.body:"")),this.response=e.calculateMD5(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+n)):null===this.qop&&(n=e.calculateMD5(this.method+":"+this.uri),this.response=e.calculateMD5(t+":"+this.nonce+":"+n))},t.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")},t.prototype.updateNcHex=function(){var e=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-e.length)+e},t}},{}],79:[function(e,t,n){"use strict";var r=e("events").EventEmitter;t.exports=function(e){function t(){r.call(this)}return t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),t.prototype.off=function(t,n){var r="";return r+="SIP.EventEmitter#off is deprecated and may be removed in future SIP.js versions.\n",r+="Please use removeListener or removeAllListeners instead.\n",r+="See here for more details:\n",r+="http://nodejs.org/api/events.html#events_emitter_removelistener_event_listener",e.warn(r),arguments.length<2?this.removeAllListeners.apply(this,arguments):this.removeListener(t,n)},t}},{events:70}],80:[function(e,t,n){"use strict";t.exports={ConfigurationError:function(){var e=function(e,t){this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=e,this.value=t,this.message=this.value?"Invalid value "+JSON.stringify(this.value)+' for parameter "'+this.parameter+'"':"Missing parameter: "+this.parameter};return e.prototype=new Error,e}(),InvalidStateError:function(){var e=function(e){this.code=2,this.name="INVALID_STATE_ERROR",this.status=e,this.message="Invalid status: "+e};return e.prototype=new Error,e}(),NotSupportedError:function(){var e=function(e){this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=e};return e.prototype=new Error,e}(),GetDescriptionError:function(){var e=function(e){this.code=4,this.name="GET_DESCRIPTION_ERROR",this.message=e};return e.prototype=new Error,e}()}},{}],81:[function(e,t,n){"use strict";var r=e("./Grammar/dist/Grammar");t.exports=function(e){return{parse:function(t,n){var i={startRule:n,SIP:e};try{r.parse(t,i)}catch(e){i.data=-1}return i.data}}}},{"./Grammar/dist/Grammar":82}],82:[function(e,t,n){t.exports=function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i,s){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=s,this.name="SyntaxError"}function n(e){function n(){return e.substring(v,g)}function r(){return v}function i(t){function n(t,n,r){var i,s;for(i=n;i<r;i++)s=e.charAt(i),"\n"===s?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return y!==t&&(y>t&&(y=0,b={line:1,column:1,seenCR:!1}),n(b,y,t),y=t),b}function s(e){g<T||(g>T&&(T=g,k=[]),k.push(e))}function o(n,r,s){function o(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r,i,s,o=new Array(e.length);for(s=0;s<e.length;s++)o[s]=e[s].description;return r=e.length>1?o.slice(0,-1).join(", ")+" or "+o[e.length-1]:o[0],i=t?'"'+n(t)+'"':"end of input","Expected "+r+" but "+i+" found."}var u=i(s),c=s<e.length?e.charAt(s):null;return null!==r&&o(r),new t(null!==n?n:a(r,c),r,c,s,u.line,u.column)}function a(e){var t,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=e.charCodeAt(t)-32;return n}function u(t){function n(e){return"[object Array]"===Object.prototype.toString.apply(e)?[]:e}for(var r,i,o=_[t],a=0,c=[],l=o.length,d=[],f=[];;){for(;a<l;)switch(o[a]){case 0:f.push(n(m[o[a+1]])),a+=2;break;case 1:f.push(g),a++;break;case 2:f.pop(),a++;break;case 3:g=f.pop(),a++;break;case 4:f.length-=o[a+1],a+=2;break;case 5:f.splice(-2,1),a++;break;case 6:f[f.length-2].push(f.pop()),a++;break;case 7:f.push(f.splice(f.length-o[a+1],o[a+1])),a+=2;break;case 8:f.pop(),f.push(e.substring(f[f.length-1],g)),a++;break;case 9:d.push(l),c.push(a+3+o[a+1]+o[a+2]),f[f.length-1]?(l=a+3+o[a+1],a+=3):(l=a+3+o[a+1]+o[a+2],a+=3+o[a+1]);break;case 10:d.push(l),c.push(a+3+o[a+1]+o[a+2]),f[f.length-1]===h?(l=a+3+o[a+1],a+=3):(l=a+3+o[a+1]+o[a+2],a+=3+o[a+1]);break;case 11:d.push(l),c.push(a+3+o[a+1]+o[a+2]),f[f.length-1]!==h?(l=a+3+o[a+1],a+=3):(l=a+3+o[a+1]+o[a+2],a+=3+o[a+1]);break;case 12:f[f.length-1]!==h?(d.push(l),c.push(a),l=a+2+o[a+1],a+=2):a+=2+o[a+1];break;case 13:d.push(l),c.push(a+3+o[a+1]+o[a+2]),e.length>g?(l=a+3+o[a+1],a+=3):(l=a+3+o[a+1]+o[a+2],a+=3+o[a+1]);break;case 14:d.push(l),c.push(a+4+o[a+2]+o[a+3]),e.substr(g,m[o[a+1]].length)===m[o[a+1]]?(l=a+4+o[a+2],a+=4):(l=a+4+o[a+2]+o[a+3],a+=4+o[a+2]);break;case 15:d.push(l),c.push(a+4+o[a+2]+o[a+3]),e.substr(g,m[o[a+1]].length).toLowerCase()===m[o[a+1]]?(l=a+4+o[a+2],a+=4):(l=a+4+o[a+2]+o[a+3],a+=4+o[a+2]);break;case 16:d.push(l),c.push(a+4+o[a+2]+o[a+3]),m[o[a+1]].test(e.charAt(g))?(l=a+4+o[a+2],a+=4):(l=a+4+o[a+2]+o[a+3],a+=4+o[a+2]);break;case 17:f.push(e.substr(g,o[a+1])),g+=o[a+1],a+=2;break;case 18:f.push(m[o[a+1]]),g+=m[o[a+1]].length,a+=2;break;case 19:f.push(h),0===w&&s(m[o[a+1]]),a+=2;break;case 20:v=f[f.length-1-o[a+1]],a+=2;break;case 21:v=g,a++;break;case 22:for(r=o.slice(a+4,a+4+o[a+3]),i=0;i<o[a+3];i++)r[i]=f[f.length-1-r[i]];f.splice(f.length-o[a+2],o[a+2],m[o[a+1]].apply(null,r)),a+=4+o[a+3];break;case 23:f.push(u(o[a+1])),a+=2;break;case 24:w++,a++;break;case 25:w--,a++;break;default:throw new Error("Invalid opcode: "+o[a]+".")}if(!(d.length>0))break;l=d.pop(),a=c.pop()}return f[0]}function c(e,t){return[e].concat(t)}var l,d=arguments.length>1?arguments[1]:{},h={},f={Contact:118,Name_Addr_Header:155,Record_Route:175,Request_Response:81,SIP_URI:45,Subscription_State:185,Supported:190,Require:181,Via:193,absoluteURI:84,Call_ID:117,Content_Disposition:129,Content_Length:134,Content_Type:135,CSeq:145,displayName:121,Event:148,From:150,host:52,Max_Forwards:153,Min_SE:212,Proxy_Authenticate:156,quoted_string:40,Refer_To:177,Replaces:178,Session_Expires:209,stun_URI:216,To:191,turn_URI:223,uuid:226,WWW_Authenticate:208,challenge:157},p=118,m=["\r\n",{type:"literal",value:"\r\n",description:'"\\r\\n"'},/^[0-9]/,{type:"class",value:"[0-9]",description:"[0-9]"},/^[a-zA-Z]/,{type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},/^[0-9a-fA-F]/,{type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},/^[\0-\xFF]/,{type:"class",value:"[\\0-\\xFF]",description:"[\\0-\\xFF]"},/^["]/,{type:"class",value:'["]',description:'["]'}," ",{type:"literal",value:" ",description:'" "'},"\t",{type:"literal",value:"\t",description:'"\\t"'},/^[a-zA-Z0-9]/,{type:"class",value:"[a-zA-Z0-9]",description:"[a-zA-Z0-9]"},";",{type:"literal",value:";",description:'";"'},"/",{type:"literal",value:"/",description:'"/"'},"?",{type:"literal",value:"?",description:'"?"'},":",{type:"literal",value:":",description:'":"'},"@",{type:"literal",value:"@",description:'"@"'},"&",{type:"literal",value:"&",description:'"&"'},"=",{type:"literal",value:"=",description:'"="'},"+",{type:"literal",value:"+",description:'"+"'},"$",{type:"literal",value:"$",description:'"$"'},",",{type:"literal",value:",",description:'","'},"-",{type:"literal",value:"-",description:'"-"'},"_",{type:"literal",value:"_",description:'"_"'},".",{type:"literal",value:".",description:'"."'},"!",{type:"literal",value:"!",description:'"!"'},"~",{type:"literal",value:"~",description:'"~"'},"*",{type:"literal",value:"*",description:'"*"'},"'",{type:"literal",value:"'",description:'"\'"'},"(",{type:"literal",value:"(",description:'"("'},")",{type:"literal",value:")",description:'")"'},h,"%",{type:"literal",value:"%",description:'"%"'},null,[],function(){return" "},function(){return":"},/^[!-~]/,{type:"class",value:"[!-~]",description:"[!-~]"},/^[\x80-\uFFFF]/,{type:"class",value:"[\\x80-\\uFFFF]",description:"[\\x80-\\uFFFF]"},/^[\x80-\xBF]/,{type:"class",value:"[\\x80-\\xBF]",description:"[\\x80-\\xBF]"},/^[a-f]/,{type:"class",value:"[a-f]",description:"[a-f]"},"`",{type:"literal",value:"`",description:'"`"'},"<",{type:"literal",value:"<",description:'"<"'},">",{type:"literal",value:">",description:'">"'},"\\",{type:"literal",value:"\\",description:'"\\\\"'},"[",{type:"literal",value:"[",description:'"["'},"]",{type:"literal",value:"]",description:'"]"'},"{",{type:"literal",value:"{",description:'"{"'},"}",{type:"literal",value:"}",description:'"}"'},function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return'"'},/^[!-']/,{type:"class",value:"[!-']",description:"[!-']"},/^[*-[]/,{type:"class",value:"[*-[]",description:"[*-[]"},/^[\]-~]/,{type:"class",value:"[\\]-~]",description:"[\\]-~]"},function(e){return e},/^[#-[]/,{type:"class",value:"[#-[]",description:"[#-[]"},/^[\0-\t]/,{type:"class",value:"[\\0-\\t]",description:"[\\0-\\t]"},/^[\x0B-\f]/,{type:"class",value:"[\\x0B-\\f]",description:"[\\x0B-\\f]"},/^[\x0E-]/,{type:"class",value:"[\\x0E-]",description:"[\\x0E-]"},function(){d.data.uri=new d.SIP.URI(d.data.scheme,d.data.user,d.data.host,d.data.port),delete d.data.scheme,delete d.data.user,delete d.data.host,delete d.data.host_type,delete d.data.port},function(){d.data.uri=new d.SIP.URI(d.data.scheme,d.data.user,d.data.host,d.data.port,d.data.uri_params,d.data.uri_headers),delete d.data.scheme,delete d.data.user,delete d.data.host,delete d.data.host_type,delete d.data.port,delete d.data.uri_params,"SIP_URI"===d.startRule&&(d.data=d.data.uri)},"sips",{type:"literal",value:"sips",description:'"sips"'},"sip",{type:"literal",value:"sip",description:'"sip"'},function(e){d.data.scheme=e},function(){d.data.user=decodeURIComponent(n().slice(0,-1))},function(){d.data.password=n()},function(){return d.data.host=n(),d.data.host},function(){return d.data.host_type="domain",n()},/^[a-zA-Z0-9_\-]/,{type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},/^[a-zA-Z0-9\-]/,{type:"class",value:"[a-zA-Z0-9\\-]",description:"[a-zA-Z0-9\\-]"},function(){return d.data.host_type="IPv6",n()},"::",{type:"literal",value:"::",description:'"::"'},function(){return d.data.host_type="IPv6",n()},function(){return d.data.host_type="IPv4",n()},"25",{type:"literal",value:"25",description:'"25"'},/^[0-5]/,{type:"class",value:"[0-5]",description:"[0-5]"},"2",{type:"literal",value:"2",description:'"2"'},/^[0-4]/,{type:"class",value:"[0-4]",description:"[0-4]"},"1",{type:"literal",value:"1",description:'"1"'},/^[1-9]/,{type:"class",value:"[1-9]",description:"[1-9]"},function(e){return e=parseInt(e.join("")),d.data.port=e,e},"transport=",{type:"literal",value:"transport=",description:'"transport="'},"udp",{type:"literal",value:"udp",description:'"udp"'},"tcp",{type:"literal",value:"tcp",description:'"tcp"'},"sctp",{type:"literal",value:"sctp",description:'"sctp"'},"tls",{type:"literal",value:"tls",description:'"tls"'},function(e){d.data.uri_params||(d.data.uri_params={}),d.data.uri_params.transport=e.toLowerCase()},"user=",{type:"literal",value:"user=",description:'"user="'},"phone",{type:"literal",value:"phone",description:'"phone"'},"ip",{type:"literal",value:"ip",description:'"ip"'},function(e){d.data.uri_params||(d.data.uri_params={}),d.data.uri_params.user=e.toLowerCase()},"method=",{type:"literal",value:"method=",description:'"method="'},function(e){d.data.uri_params||(d.data.uri_params={}),d.data.uri_params.method=e},"ttl=",{type:"literal",value:"ttl=",description:'"ttl="'},function(e){d.data.params||(d.data.params={}),d.data.params.ttl=e},"maddr=",{type:"literal",value:"maddr=",description:'"maddr="'},function(e){d.data.uri_params||(d.data.uri_params={}),d.data.uri_params.maddr=e},"lr",{type:"literal",value:"lr",description:'"lr"'},function(){d.data.uri_params||(d.data.uri_params={}),d.data.uri_params.lr=void 0},function(e,t){d.data.uri_params||(d.data.uri_params={}),t=null===t?void 0:t[1],d.data.uri_params[e.toLowerCase()]=t&&t.toLowerCase()},function(e,t){e=e.join("").toLowerCase(),t=t.join(""),d.data.uri_headers||(d.data.uri_headers={}),d.data.uri_headers[e]?d.data.uri_headers[e].push(t):d.data.uri_headers[e]=[t]},function(){"Refer_To"===d.startRule&&(d.data.uri=new d.SIP.URI(d.data.scheme,d.data.user,d.data.host,d.data.port,d.data.uri_params,d.data.uri_headers),delete d.data.scheme,delete d.data.user,delete d.data.host,delete d.data.host_type,delete d.data.port,delete d.data.uri_params)},"//",{type:"literal",value:"//",description:'"//"'},function(){d.data.scheme=n()},{type:"literal",value:"SIP",description:'"SIP"'},function(){d.data.sip_version=n()},"INVITE",{type:"literal",value:"INVITE",description:'"INVITE"'},"ACK",{type:"literal",value:"ACK",description:'"ACK"'},"VXACH",{type:"literal",value:"VXACH",description:'"VXACH"'},"OPTIONS",{type:"literal",value:"OPTIONS",description:'"OPTIONS"'},"BYE",{type:"literal",value:"BYE",description:'"BYE"'},"CANCEL",{type:"literal",value:"CANCEL",description:'"CANCEL"'},"REGISTER",{type:"literal",value:"REGISTER",description:'"REGISTER"'},"SUBSCRIBE",{type:"literal",value:"SUBSCRIBE",description:'"SUBSCRIBE"'},"NOTIFY",{type:"literal",value:"NOTIFY",description:'"NOTIFY"'},"REFER",{type:"literal",value:"REFER",description:'"REFER"'},function(){return d.data.method=n(),d.data.method},function(e){d.data.status_code=parseInt(e.join(""))},function(){d.data.reason_phrase=n()},function(){d.data=n()},function(){var e,t;for(t=d.data.multi_header.length,e=0;e<t;e++)if(null===d.data.multi_header[e].parsed){d.data=null;break}null!==d.data?d.data=d.data.multi_header:d.data=-1},function(){var e;d.data.multi_header||(d.data.multi_header=[]);try{e=new d.SIP.NameAddrHeader(d.data.uri,d.data.displayName,d.data.params),delete d.data.uri,delete d.data.displayName,delete d.data.params}catch(t){e=null}d.data.multi_header.push({position:g,offset:r(),parsed:e})},function(e){e=n().trim(),'"'===e[0]&&(e=e.substring(1,e.length-1)),d.data.displayName=e},"q",{type:"literal",value:"q",description:'"q"'},function(e){d.data.params||(d.data.params={}),d.data.params.q=e},"expires",{type:"literal",value:"expires",description:'"expires"'},function(e){d.data.params||(d.data.params={}),d.data.params.expires=e},function(e){return parseInt(e.join(""))},"0",{type:"literal",value:"0",description:'"0"'},function(){return parseFloat(n())},function(e,t){d.data.params||(d.data.params={}),t=null===t?void 0:t[1],d.data.params[e.toLowerCase()]=t},"render",{type:"literal",value:"render",description:'"render"'},"session",{type:"literal",value:"session",description:'"session"'},"icon",{type:"literal",value:"icon",description:'"icon"'},"alert",{type:"literal",value:"alert",description:'"alert"'},function(){"Content_Disposition"===d.startRule&&(d.data.type=n().toLowerCase())},"handling",{type:"literal",value:"handling",description:'"handling"'},"optional",{type:"literal",value:"optional",description:'"optional"'},"required",{type:"literal",value:"required",description:'"required"'},function(e){d.data=parseInt(e.join(""))},function(){d.data=n()},"text",{type:"literal",value:"text",description:'"text"'},"image",{type:"literal",value:"image",description:'"image"'},"audio",{type:"literal",value:"audio",description:'"audio"'},"video",{type:"literal",value:"video",description:'"video"'},"application",{type:"literal",value:"application",description:'"application"'},"message",{type:"literal",value:"message",description:'"message"'},"multipart",{type:"literal",value:"multipart",description:'"multipart"'},"x-",{type:"literal",value:"x-",description:'"x-"'},function(e){d.data.value=parseInt(e.join(""))},function(e){d.data=e},function(e){d.data.event=e.toLowerCase()},function(){var e=d.data.tag;d.data=new d.SIP.NameAddrHeader(d.data.uri,d.data.displayName,d.data.params),e&&d.data.setParam("tag",e)},"tag",{type:"literal",value:"tag",description:'"tag"'},function(e){d.data.tag=e},function(e){d.data=parseInt(e.join(""))},function(e){d.data=e},function(){d.data=new d.SIP.NameAddrHeader(d.data.uri,d.data.displayName,d.data.params)},"digest",{type:"literal",value:"Digest",description:'"Digest"'},"realm",{type:"literal",value:"realm",description:'"realm"'},function(e){d.data.realm=e},"domain",{type:"literal",value:"domain",description:'"domain"'},"nonce",{type:"literal",value:"nonce",description:'"nonce"'},function(e){d.data.nonce=e},"opaque",{type:"literal",value:"opaque",description:'"opaque"'},function(e){d.data.opaque=e},"stale",{type:"literal",value:"stale",description:'"stale"'},"true",{type:"literal",value:"true",description:'"true"'},function(){d.data.stale=!0},"false",{type:"literal",value:"false",description:'"false"'},function(){d.data.stale=!1},"algorithm",{type:"literal",value:"algorithm",description:'"algorithm"'},"md5",{type:"literal",value:"MD5",description:'"MD5"'},"md5-sess",{type:"literal",value:"MD5-sess",description:'"MD5-sess"'},function(e){d.data.algorithm=e.toUpperCase()},"qop",{type:"literal",value:"qop",description:'"qop"'},"auth-int",{type:"literal",value:"auth-int",description:'"auth-int"'},"auth",{type:"literal",value:"auth",description:'"auth"'},function(e){d.data.qop||(d.data.qop=[]),d.data.qop.push(e.toLowerCase())},function(e){d.data.value=parseInt(e.join(""))},function(){var e,t;for(t=d.data.multi_header.length,e=0;e<t;e++)if(null===d.data.multi_header[e].parsed){d.data=null;break}null!==d.data?d.data=d.data.multi_header:d.data=-1},function(){var e;d.data.multi_header||(d.data.multi_header=[]);try{e=new d.SIP.NameAddrHeader(d.data.uri,d.data.displayName,d.data.params),delete d.data.uri,delete d.data.displayName,delete d.data.params}catch(t){e=null}d.data.multi_header.push({position:g,offset:r(),parsed:e})},function(){d.data=new d.SIP.NameAddrHeader(d.data.uri,d.data.displayName,d.data.params)},function(){d.data.replaces_from_tag&&d.data.replaces_to_tag||(d.data=-1)},function(){d.data={call_id:d.data}},"from-tag",{type:"literal",value:"from-tag",description:'"from-tag"'},function(e){d.data.replaces_from_tag=e},"to-tag",{type:"literal",value:"to-tag",description:'"to-tag"'},function(e){d.data.replaces_to_tag=e},"early-only",{type:"literal",value:"early-only",description:'"early-only"'},function(){d.data.early_only=!0},function(e){return e},function(e,t){return c(e,t)},function(e){"Require"===d.startRule&&(d.data=e||[])},function(e){d.data.value=parseInt(e.join(""))},"active",{type:"literal",value:"active",description:'"active"'},"pending",{type:"literal",value:"pending",description:'"pending"'},"terminated",{type:"literal",value:"terminated",description:'"terminated"'},function(){d.data.state=n()},"reason",{type:"literal",value:"reason",description:'"reason"'},function(e){void 0!==e&&(d.data.reason=e)},function(e){void 0!==e&&(d.data.expires=e)},"retry_after",{type:"literal",value:"retry_after",description:'"retry_after"'},function(e){void 0!==e&&(d.data.retry_after=e)},"deactivated",{type:"literal",value:"deactivated",description:'"deactivated"'},"probation",{type:"literal",value:"probation",description:'"probation"'},"rejected",{type:"literal",value:"rejected",description:'"rejected"'},"timeout",{type:"literal",value:"timeout",description:'"timeout"'},"giveup",{type:"literal",value:"giveup",description:'"giveup"'},"noresource",{type:"literal",value:"noresource",description:'"noresource"'},"invariant",{type:"literal",value:"invariant",description:'"invariant"'},function(e){"Supported"===d.startRule&&(d.data=e||[])},function(){var e=d.data.tag;d.data=new d.SIP.NameAddrHeader(d.data.uri,d.data.displayName,d.data.params),e&&d.data.setParam("tag",e)},"ttl",{type:"literal",value:"ttl",description:'"ttl"'},function(e){d.data.ttl=e},"maddr",{type:"literal",value:"maddr",description:'"maddr"'},function(e){d.data.maddr=e},"received",{type:"literal",value:"received",description:'"received"'},function(e){d.data.received=e},"branch",{type:"literal",value:"branch",description:'"branch"'},function(e){d.data.branch=e},"rport",{type:"literal",value:"rport",description:'"rport"'},function(){"undefined"!=typeof response_port&&(d.data.rport=response_port.join(""))},function(e){d.data.protocol=e},{type:"literal",value:"UDP",description:'"UDP"'},{type:"literal",value:"TCP",description:'"TCP"'},{type:"literal",value:"TLS",description:'"TLS"'},{type:"literal",value:"SCTP",description:'"SCTP"'},function(e){d.data.transport=e},function(){d.data.host=n()},function(e){d.data.port=parseInt(e.join(""))},function(e){return parseInt(e.join(""))},function(e){"Session_Expires"===d.startRule&&(d.data.deltaSeconds=e)},"refresher",{type:"literal",value:"refresher",description:'"refresher"'},"uas",{type:"literal",value:"uas",description:'"uas"'},"uac",{type:"literal",value:"uac",description:'"uac"'},function(e){"Session_Expires"===d.startRule&&(d.data.refresher=e)},function(e){"Min_SE"===d.startRule&&(d.data=e)},"stuns",{type:"literal",value:"stuns",description:'"stuns"'},"stun",{type:"literal",value:"stun",description:'"stun"'},function(e){d.data.scheme=e},function(e){d.data.host=e},"?transport=",{type:"literal",value:"?transport=",description:'"?transport="'},"turns",{type:"literal",value:"turns",description:'"turns"'},"turn",{type:"literal",value:"turn",description:'"turn"'},function(){d.data.transport=transport},function(){d.data=n()}],_=[a('. ""2 3!'),a('0"""1!3#'),a('0$""1!3%'),a('0&""1!3\''),a("7'*# \"7("),a('0(""1!3)'),a('0*""1!3+'),a('.,""2,3-'),a('..""2.3/'),a('00""1!31'),a('.2""2233* ".4""2435*} ".6""2637*q ".8""2839*e ".:""2:3;*Y ".<""2<3=*M ".>""2>3?*A ".@""2@3A*5 ".B""2B3C*) ".D""2D3E'),a('7)*# "7,'),a('.F""2F3G*} ".H""2H3I*q ".J""2J3K*e ".L""2L3M*Y ".N""2N3O*M ".P""2P3Q*A ".R""2R3S*5 ".T""2T3U*) ".V""2V3W'),a('!!.Y""2Y3Z+7$7#+-%7#+#%\'#%$## X$"# X"# X+! (%'),a('!! \\7$,#&7$"+-$7 +#%\'"%$"# X"# X*# " [+@$ \\7$+&$,#&7$""" X+\'%4"6]" %$"# X"# X'),a('7.*# " ['),a('! \\7\'*# "7(,)&7\'*# "7("+A$.8""2839+1%7/+\'%4#6^# %$## X$"# X"# X'),a('!! \\72+&$,#&72""" X+o$ \\! \\7.,#&7."+-$72+#%\'"%$"# X"# X,@&! \\7.,#&7."+-$72+#%\'"%$"# X"# X"+#%\'"%$"# X"# X+! (%'),a('0_""1!3`*# "73'),a('0a""1!3b'),a('0c""1!3d'),a('7!*) "0e""1!3f'),a('! \\7)* ".F""2F3G* ".J""2J3K*} ".L""2L3M*q ".Y""2Y3Z*e ".P""2P3Q*Y ".H""2H3I*M ".@""2@3A*A ".g""2g3h*5 ".R""2R3S*) ".N""2N3O+$,&7)* ".F""2F3G* ".J""2J3K*} ".L""2L3M*q ".Y""2Y3Z*e ".P""2P3Q*Y ".H""2H3I*M ".@""2@3A*A ".g""2g3h*5 ".R""2R3S*) ".N""2N3O""" X+! (%'),a('! \\7)* ".F""2F3G*} ".L""2L3M*q ".Y""2Y3Z*e ".P""2P3Q*Y ".H""2H3I*M ".@""2@3A*A ".g""2g3h*5 ".R""2R3S*) ".N""2N3O+$,&7)* ".F""2F3G*} ".L""2L3M*q ".Y""2Y3Z*e ".P""2P3Q*Y ".H""2H3I*M ".@""2@3A*A ".g""2g3h*5 ".R""2R3S*) ".N""2N3O""" X+! (%'),a('.T""2T3U* ".V""2V3W* ".i""2i3j* ".k""2k3l* ".:""2:3;* ".D""2D3E* ".2""2233* ".8""2839* ".m""2m3n* "7&*} ".4""2435*q ".o""2o3p*e ".q""2q3r*Y ".6""2637*M ".>""2>3?*A ".s""2s3t*5 ".u""2u3v*) "7\'*# "7('),a('! \\7)* ".F""2F3G* ".J""2J3K* ".L""2L3M* ".Y""2Y3Z* ".P""2P3Q* ".H""2H3I* ".@""2@3A* ".g""2g3h* ".R""2R3S* ".N""2N3O* ".T""2T3U* ".V""2V3W* ".i""2i3j* ".k""2k3l* ".8""2839*w ".m""2m3n*k "7&*e ".4""2435*Y ".o""2o3p*M ".q""2q3r*A ".6""2637*5 ".s""2s3t*) ".u""2u3v+$,&7)* ".F""2F3G* ".J""2J3K* ".L""2L3M* ".Y""2Y3Z* ".P""2P3Q* ".H""2H3I* ".@""2@3A* ".g""2g3h* ".R""2R3S* ".N""2N3O* ".T""2T3U* ".V""2V3W* ".i""2i3j* ".k""2k3l* ".8""2839*w ".m""2m3n*k "7&*e ".4""2435*Y ".o""2o3p*M ".q""2q3r*A ".6""2637*5 ".s""2s3t*) ".u""2u3v""" X+! (%'),a('!7/+A$.P""2P3Q+1%7/+\'%4#6w# %$## X$"# X"# X'),a('!7/+A$.4""2435+1%7/+\'%4#6x# %$## X$"# X"# X'),a('!7/+A$.>""2>3?+1%7/+\'%4#6y# %$## X$"# X"# X'),a('!7/+A$.T""2T3U+1%7/+\'%4#6z# %$## X$"# X"# X'),a('!7/+A$.V""2V3W+1%7/+\'%4#6{# %$## X$"# X"# X'),a('!.k""2k3l+1$7/+\'%4"6|" %$"# X"# X'),a('!7/+7$.i""2i3j+\'%4"6}" %$"# X"# X'),a('!7/+A$.D""2D3E+1%7/+\'%4#6~# %$## X$"# X"# X'),a('!7/+A$.2""2233+1%7/+\'%4#6# %$## X$"# X"# X'),a('!7/+A$.8""2839+1%7/+\'%4#6# %$## X$"# X"# X'),a('!7/+1$7&+\'%4"6" %$"# X"# X'),a('!7&+1$7/+\'%4"6" %$"# X"# X'),a('!7=+W$ \\7G*) "7K*# "7F,/&7G*) "7K*# "7F"+-%7>+#%\'#%$## X$"# X"# X'),a('0""1!3*A "0""1!3*5 "0""1!3*) "73*# "7.'),a('!!7/+U$7&+K% \\7J*# "7K,)&7J*# "7K"+-%7&+#%\'$%$$# X$## X$"# X"# X+! (%'),a('!7/+`$7&+V%! \\7J*# "7K,)&7J*# "7K"+! (%+2%7&+(%4$6$!!%$$# X$## X$"# X"# X'),a('7.*G ".L""2L3M*; "0""1!3*/ "0""1!3*# "73'),a('!.m""2m3n+K$0""1!3*5 "0""1!3*) "0""1!3+#%\'"%$"# X"# X'),a('!7N+Q$.8""2839+A%7O*# " [+1%7S+\'%4$6$ %$$# X$## X$"# X"# X'),a('!7N+k$.8""2839+[%7O*# " [+K%7S+A%7_+7%7l*# " [+\'%4&6& %$&# X$%# X$$# X$## X$"# X"# X'),a('!/""1$3*) "/""1#3+\' 4!6!! %'),a('!7P+b$!.8""2839+-$7R+#%\'"%$"# X"# X*# " [+7%.:""2:3;+\'%4#6# %$## X$"# X"# X'),a(' \\7+*) "7-*# "7Q+2$,/&7+*) "7-*# "7Q""" X'),a('.<""2<3=*q ".>""2>3?*e ".@""2@3A*Y ".B""2B3C*M ".D""2D3E*A ".2""2233*5 ".6""2637*) ".4""2435'),a('! \\7+*_ "7-*Y ".<""2<3=*M ".>""2>3?*A ".@""2@3A*5 ".B""2B3C*) ".D""2D3E,e&7+*_ "7-*Y ".<""2<3=*M ".>""2>3?*A ".@""2@3A*5 ".B""2B3C*) ".D""2D3E"+& 4!6! %'),a('!7T+N$!.8""2839+-$7^+#%\'"%$"# X"# X*# " [+#%\'"%$"# X"# X'),a('!7U*) "7\\*# "7X+& 4!6! %'),a('! \\!7V+3$.J""2J3K+#%\'"%$"# X"# X,>&!7V+3$.J""2J3K+#%\'"%$"# X"# X"+G$7W+=%.J""2J3K*# " [+\'%4#6# %$## X$"# X"# X'),a(' \\0""1!3+,$,)&0""1!3""" X'),a('!0$""1!3%+A$ \\0""1!3,)&0""1!3"+#%\'"%$"# X"# X'),a('!.o""2o3p+A$7Y+7%.q""2q3r+\'%4#6# %$## X$"# X"# X'),a('!!7Z+$.8""2839+%7Z+%.8""2839+%7Z+%.8""2839+{%7Z+q%.8""2839+a%7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\'-%$-# X$,# X$+# X$*# X$)# X$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!.""23+$7Z+%.8""2839+%7Z+%.8""2839+{%7Z+q%.8""2839+a%7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\',%$,# X$+# X$*# X$)# X$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!.""23+$7Z+%.8""2839+{%7Z+q%.8""2839+a%7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\'*%$*# X$)# X$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!.""23+{$7Z+q%.8""2839+a%7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\'(%$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!.""23+a$7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\'&%$&# X$%# X$$# X$## X$"# X"# X* "!.""23+G$7Z+=%.8""2839+-%7[+#%\'$%$$# X$## X$"# X"# X* "!.""23+-$7[+#%\'"%$"# X"# X* "!.""23+-$7Z+#%\'"%$"# X"# X* "!7Z+$.""23+%7Z+%.8""2839+{%7Z+q%.8""2839+a%7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\'+%$+# X$*# X$)# X$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!7Z+$!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%.""23+{%7Z+q%.8""2839+a%7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\'*%$*# X$)# X$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!7Z+$!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+q%.""23+a%7Z+W%.8""2839+G%7Z+=%.8""2839+-%7[+#%\')%$)# X$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!7Z+$!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+W%.""23+G%7Z+=%.8""2839+-%7[+#%\'(%$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!7Z+$!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+h%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+=%.""23+-%7[+#%\'\'%$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!7Z+$!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+h%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+=%.""23+-%7Z+#%\'(%$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X* "!7Z+$!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+^%!.8""2839+-$7Z+#%\'"%$"# X"# X*# " [+3%.""23+#%\'(%$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X+& 4!6! %'),a('!7#+S$7#*# " [+C%7#*# " [+3%7#*# " [+#%\'$%$$# X$## X$"# X"# X'),a('!7Z+=$.8""2839+-%7Z+#%\'#%$## X$"# X"# X*# "7\\'),a('!7]+u$.J""2J3K+e%7]+[%.J""2J3K+K%7]+A%.J""2J3K+1%7]+\'%4\'6\' %$\'# X$&# X$%# X$$# X$## X$"# X"# X'),a('!.""23+3$0""1!3+#%\'"%$"# X"# X* "!.""23+=$0""1!3+-%7!+#%\'#%$## X$"# X"# X*o "!.""23+7$7!+-%7!+#%\'#%$## X$"# X"# X*D "!0""1!3+-$7!+#%\'"%$"# X"# X*# "7!'),a('!!7!*# " [+c$7!*# " [+S%7!*# " [+C%7!*# " [+3%7!*# " [+#%\'%%$%# X$$# X$## X$"# X"# X+\' 4!6!! %'),a(' \\!.2""2233+-$7`+#%\'"%$"# X"# X,>&!.2""2233+-$7`+#%\'"%$"# X"# X"'),a('7a*A "7b*; "7c*5 "7d*/ "7e*) "7f*# "7g'),a('!/""1*3+b$/""1#3*G "/""1#3*; "/""1$3*/ "/""1#3*# "76+(%4"6"! %$"# X"# X'),a('!/""1%3+J$/""1%3*/ "/""1"3*# "76+(%4"6"! %$"# X"# X'),a('!/""1\'3+2$7+(%4"6"! %$"# X"# X'),a('!/""1$3+2$7+(%4"6"! %$"# X"# X'),a('!/""1&3+2$7T+(%4"6"! %$"# X"# X'),a('!/""1"3+R$!.>""2>3?+-$76+#%\'"%$"# X"# X*# " [+\'%4"6" %$"# X"# X'),a('!7h+T$!.>""2>3?+-$7i+#%\'"%$"# X"# X*# " [+)%4"6""! %$"# X"# X'),a('! \\7j+&$,#&7j""" X+! (%'),a('! \\7j+&$,#&7j""" X+! (%'),a('7k*) "7+*# "7-'),a('.o""2o3p*e ".q""2q3r*Y ".4""2435*M ".8""2839*A ".<""2<3=*5 ".@""2@3A*) ".B""2B3C'),a('!.6""2637+u$7m+k% \\!.<""2<3=+-$7m+#%\'"%$"# X"# X,>&!.<""2<3=+-$7m+#%\'"%$"# X"# X"+#%\'#%$## X$"# X"# X'),a('!7n+C$.>""2>3?+3%7o+)%4#6#"" %$## X$"# X"# X'),a(' \\7p*) "7+*# "7-+2$,/&7p*) "7+*# "7-""" X'),a(' \\7p*) "7+*# "7-,/&7p*) "7+*# "7-"'),a('.o""2o3p*e ".q""2q3r*Y ".4""2435*M ".6""2637*A ".8""2839*5 ".@""2@3A*) ".B""2B3C'),a('7*# "7r'),a("!7+K$7'+A%7s+7%7'+-%7+#%'%%$%# X$$# X$## X$\"# X\"# X"),a('7M*# "7t'),a('!7+G$.8""2839+7%7u*# "7x+\'%4#6# %$## X$"# X"# X'),a('!7v*# "7w+N$!.6""2637+-$7+#%\'"%$"# X"# X*# " [+#%\'"%$"# X"# X'),a('!.""23+=$7+3%7w*# " [+#%\'#%$## X$"# X"# X'),a('!.4""2435+-$7{+#%\'"%$"# X"# X'),a('!7z+5$ \\7y,#&7y"+#%\'"%$"# X"# X'),a('7**) "7+*# "7-'),a('7+* "7-* ".2""2233*} ".6""2637*q ".8""2839*e ".:""2:3;*Y ".<""2<3=*M ".>""2>3?*A ".@""2@3A*5 ".B""2B3C*) ".D""2D3E'),a('!7|+k$ \\!.4""2435+-$7|+#%\'"%$"# X"# X,>&!.4""2435+-$7|+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('! \\7~,#&7~"+k$ \\!.2""2233+-$7}+#%\'"%$"# X"# X,>&!.2""2233+-$7}+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a(' \\7~,#&7~"'),a('7+*w "7-*q ".8""2839*e ".:""2:3;*Y ".<""2<3=*M ".>""2>3?*A ".@""2@3A*5 ".B""2B3C*) ".D""2D3E'),a('!7"+$ \\7"*G "7!*A ".@""2@3A*5 ".F""2F3G*) ".J""2J3K,M&7"*G "7!*A ".@""2@3A*5 ".F""2F3G*) ".J""2J3K"+\'%4"6" %$"# X"# X'),a('7*# "7'),a('!!7O+3$.:""2:3;+#%\'"%$"# X"# X*# " [+-$7S+#%\'"%$"# X"# X*# " ['),a(' \\7+* "7-*} ".B""2B3C*q ".D""2D3E*e ".2""2233*Y ".8""2839*M ".:""2:3;*A ".<""2<3=*5 ".>""2>3?*) ".@""2@3A+$,&7+* "7-*} ".B""2B3C*q ".D""2D3E*e ".2""2233*Y ".8""2839*M ".:""2:3;*A ".<""2<3=*5 ".>""2>3?*) ".@""2@3A""" X'),a(' \\7y,#&7y"'),a('!/""1#3+y$.4""2435+i% \\7!+&$,#&7!""" X+P%.J""2J3K+@% \\7!+&$,#&7!""" X+\'%4%6% %$%# X$$# X$## X$"# X"# X'),a('.""23'),a('.""23'),a('.""23'),a('.""23'),a('.""23'),a('.""23'),a('.""23'),a('.""23'),a('.""23'),a('.""23'),a('!7*S "7*M "7*G "7*A "7*; "7*5 "7*/ "7*) "7*# "76+& 4!6! %'),a("!7+K$7'+A%7+7%7'+-%7+#%'%%$%# X$$# X$## X$\"# X\"# X"),a("!7+' 4!6!! %"),a('!7!+7$7!+-%7!+#%\'#%$## X$"# X"# X'),a('! \\7**A "7+*; "7-*5 "73*/ "74*) "7\'*# "7(,G&7**A "7+*; "7-*5 "73*/ "74*) "7\'*# "7("+& 4!6! %'),a('!7+_$ \\!7A+-$7+#%\'"%$"# X"# X,8&!7A+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('!79+R$!.:""2:3;+-$79+#%\'"%$"# X"# X*# " [+\'%4"6" %$"# X"# X'),a('!7:*j "!7+_$ \\!7A+-$7+#%\'"%$"# X"# X,8&!7A+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X+& 4!6! %'),a('!7L*# "7+c$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+\'%4"6" %$"# X"# X'),a('!7*# " [+A$7@+7%7M+-%7?+#%\'$%$$# X$## X$"# X"# X'),a('!!76+_$ \\!7.+-$76+#%\'"%$"# X"# X,8&!7.+-$76+#%\'"%$"# X"# X"+#%\'"%$"# X"# X*# "7H+\' 4!6!! %'),a('7*) "7*# "7'),a('!/""1!3+<$7<+2%7+(%4#6#! %$## X$"# X"# X'),a('!/""1\'3+<$7<+2%7+(%4#6#! %$## X$"# X"# X'),a('! \\7!+&$,#&7!""" X+\' 4!6!! %'),a('!.""23+x$!.J""2J3K+S$7!*# " [+C%7!*# " [+3%7!*# " [+#%\'$%$$# X$## X$"# X"# X*# " [+\'%4"6" %$"# X"# X'),a('!76+N$!7<+-$7+#%\'"%$"# X"# X*# " [+)%4"6""! %$"# X"# X'),a('76*) "7T*# "7H'),a('!7+_$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('!/""1&3*G "/""1\'3*; "/""1$3*/ "/""1%3*# "76+& 4!6! %'),a('7*# "7'),a('!/""1(3+O$7<+E%/""1(3*/ "/""1(3*# "76+#%\'#%$## X$"# X"# X'),a('!76+_$ \\!7A+-$76+#%\'"%$"# X"# X,8&!7A+-$76+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('! \\7!+&$,#&7!""" X+\' 4!6!! %'),a("!7+& 4!6! %"),a('!7+s$7;+i%7+_% \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+#%\'$%$$# X$## X$"# X"# X'),a('7*# "7'),a('/""1$3*S "/""1%3*G "/""1%3*; "/""1%3*/ "/""1+3*# "7'),a('/""1\'3*/ "/""1)3*# "7'),a('76*# "7'),a('!/""1"3+-$76+#%\'"%$"# X"# X'),a('7*# "76'),a('!76+7$7<+-%7+#%\'#%$## X$"# X"# X'),a('76*# "7H'),a('!7+7$7.+-%7+#%\'#%$## X$"# X"# X'),a('! \\7!+&$,#&7!""" X+\' 4!6!! %'),a("!7+' 4!6!! %"),a('!7+d$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+(%4"6"!!%$"# X"# X'),a('!!77+k$ \\!.J""2J3K+-$77+#%\'"%$"# X"# X,>&!.J""2J3K+-$77+#%\'"%$"# X"# X"+#%\'"%$"# X"# X+! (%'),a('!7L*# "7+c$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+\'%4"6" %$"# X"# X'),a('7*# "7'),a('!/""1#3+<$7<+2%76+(%4#6#! %$## X$"# X"# X'),a('! \\7!+&$,#&7!""" X+\' 4!6!! %'),a("!7+' 4!6!! %"),a('! \\7,#&7"+$7@+w%7M+m%7?+c% \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+\'%4%6% %$%# X$$# X$## X$"# X"# X'),a("7"),a('!/""1&3+s$7.+i%7+_% \\!7A+-$7+#%\'"%$"# X"# X,8&!7A+-$7+#%\'"%$"# X"# X"+#%\'$%$$# X$## X$"# X"# X*# "7'),a('!76+s$7.+i%7+_% \\!7A+-$7+#%\'"%$"# X"# X,8&!7A+-$7+#%\'"%$"# X"# X"+#%\'$%$$# X$## X$"# X"# X'),a('!76+=$7<+3%76*# "7H+#%\'#%$## X$"# X"# X'),a('7*G "7*A "7*; "7*5 "7*/ "7*) "7*# "7'),a('!/""1%3+7$7<+-%7+#%\'#%$## X$"# X"# X'),a("!7I+' 4!6!! %"),a('!/""1&3+$7<+%7D+%7+% \\! \\7\'+&$,#&7\'""" X+-$7+#%\'"%$"# X"# X,G&! \\7\'+&$,#&7\'""" X+-$7+#%\'"%$"# X"# X"+-%7E+#%\'&%$&# X$%# X$$# X$## X$"# X"# X'),a('7t*# "7w'),a('!/""1%3+7$7<+-%7+#%\'#%$## X$"# X"# X'),a("!7I+' 4!6!! %"),a('!/""1&3+<$7<+2%7I+(%4#6#! %$## X$"# X"# X'),a('!/""1%3+_$7<+U%!/""1$3+& 4!6! %*4 "!/""1%3+& 4!6! %+#%\'#%$## X$"# X"# X'),a('!/""1)3+T$7<+J%/""1#3*/ "/""1(3*# "76+(%4#6#! %$## X$"# X"# X'),a('!/""1#3+$7<+%7D+%!7+k$ \\!.D""2D3E+-$7+#%\'"%$"# X"# X,>&!.D""2D3E+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X+-%7E+#%\'%%$%# X$$# X$## X$"# X"# X'),a('!/""1(3*/ "/""1$3*# "76+\' 4!6!! %'),a('!76+_$ \\!7A+-$76+#%\'"%$"# X"# X,8&!7A+-$76+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('!7+K$7.+A%7+7%7.+-%7+#%\'%%$%# X$$# X$## X$"# X"# X'),a('! \\7!+&$,#&7!""" X+\' 4!6!! %'),a('!7+c$ \\!7A+-$7+#%\'"%$"# X"# X,8&!7A+-$7+#%\'"%$"# X"# X"+\'%4"6" %$"# X"# X'),a('!7+c$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+\'%4"6" %$"# X"# X'),a('!7L*T "7*N "!7@*# " [+=$7t+3%7?*# " [+#%\'#%$## X$"# X"# X+c$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+\'%4"6" %$"# X"# X'),a('!7+c$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+\'%4"6" %$"# X"# X'),a("!7+& 4!6! %"),a('!/""1(3+<$7<+2%76+(%4#6#! %$## X$"# X"# X*j "!/""1&3+<$7<+2%76+(%4#6#! %$## X$"# X"# X*: "!/""1*3+& 4!6! %*# "7'),a('!!76+o$ \\!7A+2$76+(%4"6"! %$"# X"# X,=&!7A+2$76+(%4"6"! %$"# X"# X"+)%4"6""! %$"# X"# X*# " [+\' 4!6!! %'),a('!7+_$ \\!7A+-$7+#%\'"%$"# X"# X,8&!7A+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('!7+_$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('! \\7!+&$,#&7!""" X+\' 4!6!! %'),a('!7+_$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('!/""1&3*; "/""1\'3*/ "/""1*3*# "76+& 4!6! %'),a('!/""1&3+<$7<+2%7+(%4#6#! %$## X$"# X"# X* "!/""1\'3+<$7<+2%7+(%4#6#! %$## X$"# X"# X*S "!/""1+3+<$7<+2%7+(%4#6#! %$## X$"# X"# X*# "7'),a('/""1+3*k "/""1)3*_ "/""1(3*S "/""1\'3*G "/""1&3*; "/""1*3*/ "/""1)3*# "76'),a('71*# " ['),a('!!76+o$ \\!7A+2$76+(%4"6"! %$"# X"# X,=&!7A+2$76+(%4"6"! %$"# X"# X"+)%4"6""! %$"# X"# X*# " [+\' 4!6!! %'),a('!7L*# "7+c$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+\'%4"6" %$"# X"# X'),a('7*# "7'),a('!7+_$ \\!7A+-$7+#%\'"%$"# X"# X,8&!7A+-$7+#%\'"%$"# X"# X"+#%\'"%$"# X"# X'),a('!7+s$7.+i%7+_% \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+#%\'$%$$# X$## X$"# X"# X'),a('7*; "7*5 "7*/ "7*) "7*# "7'),a('!/""1#3+<$7<+2%7+(%4#6#! %$## X$"# X"# X'),a('!/""1%3+<$7<+2%7T+(%4#6#! %$## X$"# X"# X'),a('!/""1(3+B$7<+8%7\\*# "7Y+(%4#6#! %$## X$"# X"# X'),a('!/""1&3+<$7<+2%76+(%4#6#! %$## X$"# X"# X'),a('!/""1%3+T$!7<+5$ \\7!,#&7!"+#%\'"%$"# X"# X*# " [+\'%4"6" %$"# X"# X'),a('!7+K$7;+A%76+7%7;+-%7+#%\'%%$%# X$$# X$## X$"# X"# X'),a('!/""1#3*# "76+\' 4!6!! %'),a('!/""1#3*G "/""1#3*; "/""1#3*/ "/""1$3*# "76+\' 4!6!! %'),a('!7+H$!7C+-$7+#%\'"%$"# X"# X*# " [+#%\'"%$"# X"# X'),a('!7U*) "7\\*# "7X+& 4!6! %'),a('!!7!*# " [+c$7!*# " [+S%7!*# " [+C%7!*# " [+3%7!*# " [+#%\'%%$%# X$$# X$## X$"# X"# X+\' 4!6!! %'),a('!!7!+C$7!*# " [+3%7!*# " [+#%\'#%$## X$"# X"# X+\' 4!6!! %'),a("7"),a('!7+d$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+(%4"6"!!%$"# X"# X'),a('7*# "7'),a('!.""23+N$7<+D%.""23*) ".""23+(%4#6#! %$## X$"# X"# X'),a('!7+d$ \\!7B+-$7+#%\'"%$"# X"# X,8&!7B+-$7+#%\'"%$"# X"# X"+(%4"6"!!%$"# X"# X'),a('!76+7$70+-%7+#%\'#%$## X$"# X"# X'),a(' \\72*) "74*# "7.,/&72*) "74*# "7."'),a(' \\7%,#&7%"'),a('!7+=$.8""2839+-%7+#%\'#%$## X$"# X"# X'),a('!/""1%3*) "/""1$3+\' 4!6!! %'),a('!7+N$!.8""2839+-$7^+#%\'"%$"# X"# X*# " [+#%\'"%$"# X"# X'),a('!7\\*) "7X*# "7+\' 4!6!! %'),a('! \\7*) "7-*# "7,/&7*) "7-*# "7"+! (%'),a('7"*S "7!*M ".F""2F3G*A ".J""2J3K*5 ".H""2H3I*) ".N""2N3O'),a('.L""2L3M* ".B""2B3C* ".<""2<3=*} ".R""2R3S*q ".T""2T3U*e ".V""2V3W*Y ".P""2P3Q*M ".@""2@3A*A ".D""2D3E*5 ".2""2233*) ".>""2>3?'),a('!7+h$.8""2839+X%7+N%!.""23+-$7+#%\'"%$"# X"# X*# " [+#%\'$%$$# X$## X$"# X"# X'),a('!/""1%3*) "/""1$3+\' 4!6!! %'),a('!7+Q$/""1#3*7 "/""1#3*+ " \\7+,#&7+"+\'%4"6" %$"# X"# X'),a('!7+$.F""2F3G+%7+u%.F""2F3G+e%7+[%.F""2F3G+K%7+A%.F""2F3G+1%7+\'%4)6) %$)# X$(# X$\'# X$&# X$%# X$$# X$## X$"# X"# X'),a('!7#+A$7#+7%7#+-%7#+#%\'$%$$# X$## X$"# X"# X'),a('!7+-$7+#%\'"%$"# X"# X'),a('!7+7$7+-%7+#%\'#%$## X$"# X"# X')],g=0,v=0,y=0,b={line:1,column:1,seenCR:!1},T=0,k=[],w=0;if("startRule"in d){if(!(d.startRule in f))throw new Error("Can't start parsing from rule \""+d.startRule+'".');p=f[d.startRule]}if(d.data={},l=u(p),l!==h&&g===e.length)return l;throw l!==h&&g<e.length&&s({type:"end",description:"end of input"}),o(null,k,T)}return e(t,Error),{SyntaxError:t,parse:n}}()},{}],83:[function(e,t,n){"use strict";t.exports=function(e){e=e;var t={AllBrowsers:{maskDtls:function(e){return e&&(e=e.replace(/ UDP\/TLS\/RTP\/SAVP/gim," RTP/SAVP")),e},unmaskDtls:function(e){return e.replace(/ RTP\/SAVP/gim," UDP/TLS/RTP/SAVP")}},Firefox:{isFirefox:function(){return"undefined"!=typeof mozRTCPeerConnection},cannotHandleExtraWhitespace:function(e){return this.isFirefox()&&e&&(e=e.replace(/ \r\n/g,"\r\n")),e},hasMissingCLineInSDP:function(e){var t,n;if(e.indexOf("c=")>e.indexOf("m=")){n=e.match(/m=.*\r\n.*/g);for(var r=0;r<n.length;r++)n[r].toString().search(/i=.*/)>=0?(t=e.indexOf(n[r].toString())+n[r].toString().length,"c="!==e.substr(t,2)&&(e=e.substr(0,t)+"\r\nc=IN IP4 0.0.0.0"+e.substr(t))):n[r].toString().search(/c=.*/)<0&&(t=e.indexOf(n[r].toString().match(/.*/))+n[r].toString().match(/.*/).toString().length,e=e.substr(0,t)+"\r\nc=IN IP4 0.0.0.0"+e.substr(t))}return e}},Chrome:{needsExplicitlyInactiveSDP:function(e){var n,r;return t.Firefox.isFirefox()&&(r=e.indexOf("m=video 0"),r!==-1)?(n=e.substr(r),n=n.replace(/\r\nc=IN IP4.*\r\n$/,"\r\nc=IN IP4 0.0.0.0\r\na=inactive\r\n"),e.substr(0,r)+n):e},getsConfusedAboutGUM:function(e){e.mediaHandler&&e.mediaHandler.close()}}};return t}},{}],84:[function(e,t,n){"use strict";var r={error:0,warn:1,log:2,debug:3};t.exports=function(e){function t(e,t,n){this.logger=e,this.category=t,this.label=n}var n=function(){var e,t=2,n=!0,i=null;this.loggers={},e=this.getLogger("sip.loggerfactory"),Object.defineProperties(this,{builtinEnabled:{get:function(){return n},set:function(t){"boolean"==typeof t?n=t:e.error('invalid "builtinEnabled" parameter value: '+JSON.stringify(t))}},level:{get:function(){return t},set:function(n){n>=0&&n<=3?t=n:n>3?t=3:r.hasOwnProperty(n)?t=r[n]:e.error('invalid "level" parameter value: '+JSON.stringify(n))}},connector:{get:function(){return i},set:function(t){null===t||""===t||void 0===t?i=null:"function"==typeof t?i=t:e.error('invalid "connector" parameter value: '+JSON.stringify(t))}}})};return n.prototype.print=function(t,n,r,i){if("string"==typeof i){var s=[new Date,n];r&&s.push(r),i=s.concat(i).join(" | ")}t.call(e,i)},Object.keys(r).forEach(function(i){t.prototype[i]=function(e){this.logger[i](this.category,this.label,e)},n.prototype[i]=function(t,n,s){this.level>=r[i]&&(this.builtinEnabled&&this.print(e[i],t,n,s),this.connector&&this.connector(i,t,n,s))}}),n.prototype.getLogger=function(e,n){var r;return n&&3===this.level?new t(this,e,n):this.loggers[e]?this.loggers[e]:(r=new t(this,e),this.loggers[e]=r,r)},n}},{}],85:[function(e,t,n){"use strict";t.exports=function(e){var t=function(e,t){e=e,t=t};return t.prototype=Object.create(e.prototype,{isReady:{value:function(){}},close:{value:function(){}},getDescription:{value:function(e){e=e}},hasDescription:{value:function(e){e=e}},setDescription:{value:function(e){e=e}}}),t}},{}],86:[function(e,t,n){"use strict";t.exports=function(e){var t;t=function(t,n,r){var i;if(!(t&&t instanceof e.URI))throw new TypeError('missing or invalid "uri" parameter');this.uri=t,this.parameters={};for(i in r)this.setParam(i,r[i]);Object.defineProperties(this,{friendlyName:{get:function(){return this.displayName||t.aor}},displayName:{get:function(){return n},set:function(e){n=0===e?"0":e}}})},t.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]=void 0===t||null===t?null:t.toString())},getParam:e.URI.prototype.getParam,hasParam:e.URI.prototype.hasParam,deleteParam:e.URI.prototype.deleteParam,clearParams:e.URI.prototype.clearParams,clone:function(){return new t(this.uri.clone(),this.displayName,JSON.parse(JSON.stringify(this.parameters)))},toString:function(){var e,t;e=this.displayName||0===this.displayName?'"'+this.displayName+'" ':"",e+="<"+this.uri.toString()+">";for(t in this.parameters)e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]);return e}},t.parse=function(t){return t=e.Grammar.parse(t,"Name_Addr_Header"),t!==-1?t:void 0},e.NameAddrHeader=t}},{}],87:[function(e,t,n){"use strict";t.exports=function(e){function t(e,t){var n=t,r=0,i=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(i=e.indexOf("\r\n",n),i===-1)return i;!e.substring(i+2,i+4).match(/(^\r\n)/)&&e.charAt(i+2).match(/(^\s+)/)?n=i+2:r=i}return r}function n(t,n,r,i){var s,o,a,u,c=n.indexOf(":",r),l=n.substring(r,c).trim(),d=n.substring(c+1,i).trim();switch(l.toLowerCase()){case"via":case"v":t.addHeader("via",d),1===t.getHeaders("via").length?(u=t.parseHeader("Via"),u&&(t.via=u,t.via_branch=u.branch)):u=0;break;case"from":case"f":t.setHeader("from",d),u=t.parseHeader("from"),u&&(t.from=u,t.from_tag=u.getParam("tag"));break;case"to":case"t":t.setHeader("to",d),u=t.parseHeader("to"),u&&(t.to=u,t.to_tag=u.getParam("tag"));break;case"record-route":if(u=e.Grammar.parse(d,"Record_Route"),u===-1){u=void 0;break}for(a=u.length,o=0;o<a;o++)s=u[o],t.addHeader("record-route",d.substring(s.position,s.offset)),t.headers["Record-Route"][t.getHeaders("record-route").length-1].parsed=s.parsed;break;case"call-id":case"i":t.setHeader("call-id",d),u=t.parseHeader("call-id"),u&&(t.call_id=d);break;case"contact":case"m":if(u=e.Grammar.parse(d,"Contact"),u===-1){u=void 0;break}for(a=u.length,o=0;o<a;o++)s=u[o],t.addHeader("contact",d.substring(s.position,s.offset)),t.headers.Contact[t.getHeaders("contact").length-1].parsed=s.parsed;break;case"content-length":case"l":t.setHeader("content-length",d),u=t.parseHeader("content-length");break;case"content-type":case"c":t.setHeader("content-type",d),u=t.parseHeader("content-type");break;case"cseq":t.setHeader("cseq",d),u=t.parseHeader("cseq"),u&&(t.cseq=u.value),t instanceof e.IncomingResponse&&(t.method=u.method);break;case"max-forwards":t.setHeader("max-forwards",d),u=t.parseHeader("max-forwards");break;case"www-authenticate":t.setHeader("www-authenticate",d),u=t.parseHeader("www-authenticate");break;case"proxy-authenticate":t.setHeader("proxy-authenticate",d),u=t.parseHeader("proxy-authenticate");break;case"refer-to":case"r":t.setHeader("refer-to",d),u=t.parseHeader("refer-to"),u&&(t.refer_to=u);break;default:t.setHeader(l,d),u=0}return void 0!==u||{error:'error parsing header "'+l+'"'}}var r;r={},r.parseMessage=function(r,i){var s,o,a,u,c,l=0,d=r.indexOf("\r\n"),h=i.getLogger("sip.parser");if(d===-1)return void h.warn("no CRLF found, not a SIP message, discarded");if(o=r.substring(0,d),c=e.Grammar.parse(o,"Request_Response"),c===-1)return void h.warn('error parsing first line of SIP message: "'+o+'"');for(c.status_code?(s=new e.IncomingResponse(i),s.status_code=c.status_code,s.reason_phrase=c.reason_phrase):(s=new e.IncomingRequest(i),s.method=c.method,s.ruri=c.uri),s.data=r,l=d+2;;){if(d=t(r,l),d===-2){u=l+2;break}if(d===-1)return void h.error("malformed message");if(c=n(s,r,l,d),c!==!0)return void h.error(c.error);l=d+2}return s.hasHeader("content-length")?(a=s.getHeader("content-length"),s.body=r.substr(u,a)):s.body=r.substring(u),s},e.Parser=r}},{}],88:[function(e,t,n){var r=90;t.exports=function(e){function t(e){var t=e.parseHeader("Supported")||[],n=e.parseHeader("Session-Expires")||{};return t.indexOf("timer")>=0&&n.deltaSeconds<r}function n(t,n,r,i){t.sessionTimerState=t.sessionTimerState||{},e.clearTimeout(t.sessionTimerState.timeout);var s="string"==typeof n;s&&(n=r(n,i));var o=n.parseHeader("Session-Expires");if(!o)return void(t.sessionTimerState=null);var a=o.deltaSeconds,u=s===("uas"===o.refresher);t.sessionTimerState={interval:a,isRefresher:u};var c=1e3*a,l=this;if(u)t.sessionTimerState.timeout=e.setInterval(function(){t.owner.ua.dialogs[t.id.toString()]||!1?t.sendRequest(l,"UPDATE",{extraHeaders:["Session-Expires: "+a]}):e.clearInterval(t.sessionTimerState.timeout)},c/2);else{var d=Math.min(32e3,c/3);t.sessionTimerState.timeout=e.setTimeout(function(){},c-d)}}function i(e){}function s(e){}function o(){}function a(){}return{localMinSE:r,hasSmallMinSE:t,updateState:n,receiveResponse:i,onDialogError:s,onRequestTimeout:o,onTransportError:a}}},{}],89:[function(e,t,n){"use strict";t.exports=function(e){var t;t=function(t){var n={},r=1;this.registrar=t.configuration.registrarServer,this.expires=t.configuration.registerExpires,this.contact=t.contact.toString(),r&&(this.contact+=";reg-id="+r,this.contact+=';+sip.instance="<urn:uuid:'+t.configuration.instanceId+'>"'),this.call_id=e.Utils.createRandomToken(22),this.cseq=80,this.to_uri=t.configuration.uri,n.to_uri=this.to_uri,n.to_displayName=t.configuration.displayName,n.call_id=this.call_id,n.cseq=this.cseq,e.Utils.augment(this,e.ClientContext,[t,"REGISTER",this.registrar,{params:n}]),this.registrationTimer=null,this.registrationExpiredTimer=null,this.registered=!1,this.logger=t.getLogger("sip.registercontext")},t.prototype={register:function(t){var n,r=this;this.options=t||{},n=(this.options.extraHeaders||[]).slice(),n.push("Contact: "+this.contact+";expires="+this.expires),n.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.closeHeaders=this.options.closeWithHeaders?(this.options.extraHeaders||[]).slice():[],this.receiveResponse=function(t){var n,i,s,o=t.getHeaders("contact").length;if(t.cseq===this.cseq)switch(null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):if(this.emit("accepted",t),t.hasHeader("expires")&&(i=t.getHeader("expires")),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),!o){this.logger.warn("no Contact header in response to REGISTER, response ignored");break}for(;o--;){if(n=t.parseHeader("contact",o),n.uri.user===this.ua.contact.uri.user){i=n.getParam("expires");break}n=null}if(!n){this.logger.warn("no Contact header pointing to us, response ignored");break}i||(i=this.expires),this.registrationTimer=e.Timers.setTimeout(function(){r.registrationTimer=null,r.register(r.options)},1e3*i-3e3),this.registrationExpiredTimer=e.Timers.setTimeout(function(){r.logger.warn("registration expired"),r.registered&&r.unregistered(null,e.C.causes.EXPIRES)},1e3*i),n.hasParam("temp-gruu")&&(this.ua.contact.temp_gruu=e.URI.parse(n.getParam("temp-gruu").replace(/"/g,""))),n.hasParam("pub-gruu")&&(this.ua.contact.pub_gruu=e.URI.parse(n.getParam("pub-gruu").replace(/"/g,""))),this.registered=!0,this.emit("registered",t||null);break;case/^423$/.test(t.status_code):t.hasHeader("min-expires")?(this.expires=t.getHeader("min-expires"),this.register(this.options)):(this.logger.warn("423 response received for REGISTER without Min-Expires"),this.registrationFailure(t,e.C.causes.SIP_FAILURE_CODE));break;default:s=e.Utils.sipErrorCause(t.status_code),this.registrationFailure(t,s)}},this.onRequestTimeout=function(){this.registrationFailure(null,e.C.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.registrationFailure(null,e.C.causes.CONNECTION_ERROR)},this.cseq++,this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=n,this.send()},registrationFailure:function(e,t){this.emit("failed",e||null,t||null)},onTransportClosed:function(){this.registered_before=this.registered,null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),this.registered&&this.unregistered(null,e.C.causes.CONNECTION_ERROR)},onTransportConnected:function(){this.register(this.options)},close:function(){var e={all:!1,extraHeaders:this.closeHeaders};this.registered_before=this.registered,this.unregister(e)},unregister:function(t){var n;if(t=t||{},!this.registered&&!t.all)return void this.logger.warn("already unregistered");n=(t.extraHeaders||[]).slice(),this.registered=!1,null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),t.all?(n.push("Contact: *"),n.push("Expires: 0")):n.push("Contact: "+this.contact+";expires=0"),this.receiveResponse=function(t){var n;switch(!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",t),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),this.unregistered(t);break;default:n=e.Utils.sipErrorCause(t.status_code),this.unregistered(t,n)}},this.onRequestTimeout=function(){},this.onTransportError=function(){},this.cseq++,this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=n,this.send()},unregistered:function(e,t){this.registered=!1,this.emit("unregistered",e||null,t||null)}},e.RegisterContext=t}},{}],90:[function(e,t,n){"use strict";t.exports=function(e){var t;t=function(t,n){this.logger=n.getLogger("sip.requestsender"),this.ua=n,this.applicant=t,this.method=t.request.method,this.request=t.request,this.credentials=null,this.challenged=!1,this.staled=!1,n.status!==e.UA.C.STATUS_USER_CLOSED||this.method===e.C.BYE&&this.method===e.C.ACK||this.onTransportError()},t.prototype={send:function(){switch(this.method){case"INVITE":this.clientTransaction=new e.Transactions.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new e.Transactions.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new e.Transactions.NonInviteClientTransaction(this,this.request,this.ua.transport)}return this.clientTransaction.send(),this.clientTransaction},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(t){var n,r,i,s=t.status_code;if(401===s||407===s){if(401===t.status_code?(r=t.parseHeader("www-authenticate"),i="authorization"):(r=t.parseHeader("proxy-authenticate"),i="proxy-authorization"),!r)return this.logger.warn(t.status_code+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(t);if(!this.challenged||!this.staled&&r.stale===!0){if(this.credentials||(this.credentials=this.ua.configuration.authenticationFactory(this.ua)),!this.credentials.authenticate(this.request,r))return void this.applicant.receiveResponse(t);this.challenged=!0,r.stale&&(this.staled=!0),t.method===e.C.REGISTER?n=this.applicant.cseq+=1:this.request.dialog?n=this.request.dialog.local_seqnum+=1:(n=this.request.cseq+1,this.request.cseq=n),this.request.setHeader("cseq",n+" "+this.method),this.request.setHeader(i,this.credentials.toString()),this.send()}else this.applicant.receiveResponse(t)}else this.applicant.receiveResponse(t)}},e.RequestSender=t}},{}],91:[function(e,t,n){"use strict";t.exports=function(t){var n=e("../package.json"),r=Object.defineProperties({},{version:{get:function(){return n.version}},name:{get:function(){return n.title}}});return e("./Utils")(r,t),r.LoggerFactory=e("./LoggerFactory")(t.console),r.EventEmitter=e("./EventEmitter")(t.console),r.C=e("./Constants")(r.name,r.version),r.Exceptions=e("./Exceptions"),r.Timers=e("./Timers")(t.timers),r.Transport=t.Transport(r,t.WebSocket),e("./Parser")(r),e("./SIPMessage")(r),e("./URI")(r),e("./NameAddrHeader")(r),e("./Transactions")(r),e("./Dialogs")(r),e("./RequestSender")(r),e("./RegisterContext")(r),r.MediaHandler=e("./MediaHandler")(r.EventEmitter),e("./ClientContext")(r),e("./ServerContext")(r),e("./Session")(r,t),e("./Subscription")(r),r.WebRTC=e("./WebRTC")(r,t),e("./UA")(r,t),r.Hacks=e("./Hacks")(r),e("./SanityCheck")(r),r.DigestAuthentication=e("./DigestAuthentication")(r.Utils),r.Grammar=e("./Grammar")(r),r}},{"../package.json":73,"./ClientContext":74,"./Constants":75,"./Dialogs":77,"./DigestAuthentication":78,"./EventEmitter":79,"./Exceptions":80,"./Grammar":81,"./Hacks":83,"./LoggerFactory":84,"./MediaHandler":85,"./NameAddrHeader":86,"./Parser":87,"./RegisterContext":89,"./RequestSender":90,"./SIPMessage":92,"./SanityCheck":93,"./ServerContext":94,"./Session":95,"./Subscription":97,"./Timers":98,"./Transactions":99,"./UA":101,"./URI":102,"./Utils":103,"./WebRTC":104}],92:[function(e,t,n){"use strict";t.exports=function(e){function t(t){var n=t.ua.configuration.hackAllowUnregisteredOptionTags,r=[],i={};return t.method===e.C.REGISTER?r.push("path","gruu"):t.method===e.C.INVITE&&(t.ua.contact.pub_gruu||t.ua.contact.temp_gruu)&&r.push("gruu"),t.ua.configuration.rel100===e.C.supported.SUPPORTED&&r.push("100rel"),t.ua.configuration.replaces===e.C.supported.SUPPORTED&&r.push("replaces"),r.push("outbound"),r=r.concat(t.ua.configuration.extraSupported),r=r.filter(function(t){var r=e.C.OPTION_TAGS[t],s=!i[t];return i[t]=!0,(r||n)&&s}),"Supported: "+r.join(", ")+"\r\n"}var n,r,i,s;n=function(t,n,r,i,s,o){var a,u,c,l,d,h;if(i=i||{},!t||!n||!r)return null;this.logger=r.getLogger("sip.sipmessage"),this.ua=r,this.headers={},this.method=t,this.ruri=n,this.body=o,this.extraHeaders=(s||[]).slice(),this.statusCode=i.status_code,this.reasonPhrase=i.reason_phrase,i.route_set?this.setHeader("route",i.route_set):r.configuration.usePreloadedRoute&&this.setHeader("route",r.transport.server.sip_uri),this.setHeader("via",""),this.setHeader("max-forwards",e.UA.C.MAX_FORWARDS),d=i.to_uri||n,a=i.to_displayName||0===i.to_displayName?'"'+i.to_displayName+'" ':"",a+="<"+(d&&d.toRaw?d.toRaw():d)+">",a+=i.to_tag?";tag="+i.to_tag:"",this.to=new e.NameAddrHeader.parse(a),this.setHeader("to",a),h=i.from_uri||r.configuration.uri,u=i.from_displayName||0===i.from_displayName?'"'+i.from_displayName+'" ':r.configuration.displayName?'"'+r.configuration.displayName+'" ':"",u+="<"+(h&&h.toRaw?h.toRaw():h)+">;tag=",u+=i.from_tag||e.Utils.newTag(),this.from=new e.NameAddrHeader.parse(u),this.setHeader("from",u),c=i.call_id||r.configuration.sipjsId+e.Utils.createRandomToken(15),this.call_id=c,this.setHeader("call-id",c),l=i.cseq||Math.floor(1e4*Math.random()),this.cseq=l,this.setHeader("cseq",l+" "+t)},n.prototype={setHeader:function(t,n){this.headers[e.Utils.headerize(t)]=n instanceof Array?n:[n]},getHeader:function(t){var n,r,i=this.extraHeaders.length,s=this.headers[e.Utils.headerize(t)];if(s){if(s[0])return s[0]}else for(n=new RegExp("^\\s*"+t+"\\s*:","i"),r=0;r<i;r++)if(s=this.extraHeaders[r],n.test(s))return s.substring(s.indexOf(":")+1).trim()},getHeaders:function(t){var n,r,i,s=this.headers[e.Utils.headerize(t)],o=[];if(s){for(r=s.length,n=0;n<r;n++)o.push(s[n]);return o}for(r=this.extraHeaders.length,i=new RegExp("^\\s*"+t+"\\s*:","i"),n=0;n<r;n++)s=this.extraHeaders[n],i.test(s)&&o.push(s.substring(s.indexOf(":")+1).trim());return o},hasHeader:function(t){var n,r,i=this.extraHeaders.length;if(this.headers[e.Utils.headerize(t)])return!0;for(n=new RegExp("^\\s*"+t+"\\s*:","i"),r=0;r<i;r++)if(n.test(this.extraHeaders[r]))return!0;return!1},toString:function(){var n,r,i,s="";s+=this.method+" "+(this.ruri.toRaw?this.ruri.toRaw():this.ruri)+" SIP/2.0\r\n";for(n in this.headers)for(r=this.headers[n].length,i=0;i<r;i++)s+=n+": "+this.headers[n][i]+"\r\n";for(r=this.extraHeaders.length,i=0;i<r;i++)s+=this.extraHeaders[i].trim()+"\r\n";return s+=t(this),s+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",this.body?"string"==typeof this.body?(r=e.Utils.str_utf8_length(this.body),s+="Content-Length: "+r+"\r\n\r\n",s+=this.body):this.body.body&&this.body.contentType?(r=e.Utils.str_utf8_length(this.body.body),s+="Content-Type: "+this.body.contentType+"\r\n",s+="Content-Length: "+r+"\r\n\r\n",s+=this.body.body):s+="Content-Length: 0\r\n\r\n":s+="Content-Length: 0\r\n\r\n",s}},r=function(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null},r.prototype={addHeader:function(t,n){var r={raw:n};t=e.Utils.headerize(t),this.headers[t]?this.headers[t].push(r):this.headers[t]=[r]},getHeader:function(t){var n=this.headers[e.Utils.headerize(t)];if(n)return n[0]?n[0].raw:void 0},getHeaders:function(t){var n,r,i=this.headers[e.Utils.headerize(t)],s=[];if(!i)return[];for(r=i.length,n=0;n<r;n++)s.push(i[n].raw);return s},hasHeader:function(t){return!!this.headers[e.Utils.headerize(t)]},parseHeader:function(t,n){var r,i,s;return t=e.Utils.headerize(t),n=n||0,this.headers[t]?n>=this.headers[t].length?void this.logger.log('not so many "'+t+'" headers present'):(r=this.headers[t][n],i=r.raw,r.parsed?r.parsed:(s=e.Grammar.parse(i,t.replace(/-/g,"_")),s===-1?(this.headers[t].splice(n,1),void this.logger.warn('error parsing "'+t+'" header field with value "'+i+'"')):(r.parsed=s,s))):void this.logger.log('header "'+t+'" not present')},s:function(e,t){return this.parseHeader(e,t)},setHeader:function(t,n){var r={raw:n};this.headers[e.Utils.headerize(t)]=[r]},toString:function(){return this.data}},i=function(e){this.logger=e.getLogger("sip.sipmessage"),this.ua=e,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null},i.prototype=new r,i.prototype.reply=function(n,r,i,s,o,a){var u,c,l,d,h,f=this.getHeader("To"),p=0,m=0;if(h=e.Utils.buildStatusLine(n,r),i=(i||[]).slice(),this.method===e.C.INVITE&&n>100&&n<=200)for(u=this.getHeaders("record-route"),l=u.length,p;p<l;p++)h+="Record-Route: "+u[p]+"\r\n";for(c=this.getHeaders("via"),l=c.length,m;m<l;m++)h+="Via: "+c[m]+"\r\n";for(!this.to_tag&&n>100?f+=";tag="+e.Utils.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(f+=";tag="+this.to_tag),h+="To: "+f+"\r\n",h+="From: "+this.getHeader("From")+"\r\n",h+="Call-ID: "+this.call_id+"\r\n",h+="CSeq: "+this.cseq+" "+this.method+"\r\n",l=i.length,d=0;d<l;d++)h+=i[d].trim()+"\r\n";return h+=t(this),h+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",s?"string"==typeof s?(l=e.Utils.str_utf8_length(s),h+="Content-Type: application/sdp\r\n",h+="Content-Length: "+l+"\r\n\r\n",h+=s):s.body&&s.contentType?(l=e.Utils.str_utf8_length(s.body),h+="Content-Type: "+s.contentType+"\r\n",h+="Content-Length: "+l+"\r\n\r\n",h+=s.body):h+="Content-Length: 0\r\n\r\n":h+="Content-Length: 0\r\n\r\n",this.server_transaction.receiveResponse(n,h).then(o,a),h},i.prototype.reply_sl=function(t,n){var r,i,s=0,o=this.getHeaders("via"),a=o.length;for(i=e.Utils.buildStatusLine(t,n),s;s<a;s++)i+="Via: "+o[s]+"\r\n";r=this.getHeader("To"),!this.to_tag&&t>100?r+=";tag="+e.Utils.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(r+=";tag="+this.to_tag),i+="To: "+r+"\r\n",i+="From: "+this.getHeader("From")+"\r\n",i+="Call-ID: "+this.call_id+"\r\n",i+="CSeq: "+this.cseq+" "+this.method+"\r\n",i+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",i+="Content-Length: 0\r\n\r\n",this.transport.send(i)},s=function(e){this.logger=e.getLogger("sip.sipmessage"),this.headers={},this.status_code=null,this.reason_phrase=null},s.prototype=new r,e.OutgoingRequest=n,e.IncomingRequest=i,e.IncomingResponse=s}},{}],93:[function(e,t,n){"use strict";t.exports=function(e){function t(t){var n,r=e.Utils.buildStatusLine(t),i=d.getHeaders("via"),s=i.length,o=0;for(o;o<s;o++)r+="Via: "+i[o]+"\r\n";n=d.getHeader("To"),d.to_tag||(n+=";tag="+e.Utils.newTag()),r+="To: "+n+"\r\n",r+="From: "+d.getHeader("From")+"\r\n",r+="Call-ID: "+d.call_id+"\r\n",r+="CSeq: "+d.cseq+" "+d.method+"\r\n",r+="\r\n",f.send(r)}function n(){if(!d.ruri||"sip"!==d.ruri.scheme)return t(416),!1}function r(){if(!d.to_tag&&d.call_id.substr(0,5)===h.configuration.sipjsId)return t(482),!1}function i(){if(e.Utils.str_utf8_length(d.body)<d.getHeader("content-length"))return t(400),!1}function s(){var n,r,i=d.from_tag,s=d.call_id,o=d.cseq;if(!d.to_tag)if(d.method===e.C.INVITE){if(n=h.transactions.ist[d.via_branch])return;for(r in h.transactions.ist)if(n=h.transactions.ist[r],n.request.from_tag===i&&n.request.call_id===s&&n.request.cseq===o)return t(482),!1}else{if(n=h.transactions.nist[d.via_branch])return;for(r in h.transactions.nist)if(n=h.transactions.nist[r],n.request.from_tag===i&&n.request.call_id===s&&n.request.cseq===o)return t(482),!1}}function o(){if(d.getHeaders("via").length>1)return l.warn("More than one Via header field present in the response. Dropping the response"),!1}function a(){if(e.Utils.str_utf8_length(d.body)<d.getHeader("content-length"))return l.warn("Message body length is lower than the value in Content-Length header field. Dropping the response"),!1}function u(){for(var e=["from","to","call_id","cseq","via"],t=e.length;t--;)if(!d.hasHeader(e[t]))return l.warn("Missing mandatory header field : "+e[t]+". Dropping the response"),!1}var c,l,d,h,f,p=[],m=[],_=[];p.push(n),p.push(r),p.push(i),p.push(s),m.push(o),m.push(a),_.push(u),c=function(t,n,r){var i,s;for(d=t,h=n,f=r,l=h.getLogger("sip.sanitycheck"),i=_.length;i--;)if(s=_[i](d),s===!1)return!1;if(d instanceof e.IncomingRequest){for(i=p.length;i--;)if(s=p[i](d),s===!1)return!1}else if(d instanceof e.IncomingResponse)for(i=m.length;i--;)if(s=m[i](d),s===!1)return!1;return!0},e.sanityCheck=c}},{}],94:[function(e,t,n){"use strict";t.exports=function(e){var t;t=function(t,n){this.ua=t,this.logger=t.getLogger("sip.servercontext"),this.request=n,n.method===e.C.INVITE?this.transaction=new e.Transactions.InviteServerTransaction(n,t):this.transaction=new e.Transactions.NonInviteServerTransaction(n,t),n.body&&(this.body=n.body),n.hasHeader("Content-Type")&&(this.contentType=n.getHeader("Content-Type")),this.method=n.method,this.data={},this.localIdentity=n.to,this.remoteIdentity=n.from},t.prototype=Object.create(e.EventEmitter.prototype),t.prototype.progress=function(e){return e=Object.create(e||Object.prototype),e.statusCode||(e.statusCode=180),e.minCode=100,e.maxCode=199,e.events=["progress"],this.reply(e)},t.prototype.accept=function(e){return e=Object.create(e||Object.prototype),e.statusCode||(e.statusCode=200),e.minCode=200,e.maxCode=299,e.events=["accepted"],this.reply(e)},t.prototype.reject=function(e){return e=Object.create(e||Object.prototype),e.statusCode||(e.statusCode=480),e.minCode=300,e.maxCode=699,e.events=["rejected","failed"],this.reply(e)},t.prototype.reply=function(t){t=t||{};var n,r=t.statusCode||100,i=t.minCode||100,s=t.maxCode||699,o=e.Utils.getReasonPhrase(r,t.reasonPhrase),a=t.extraHeaders||[],u=t.body,c=t.events||[];if(r<i||r>s)throw new TypeError("Invalid statusCode: "+r);return n=this.request.reply(r,o,a,u),c.forEach(function(e){this.emit(e,n,o)},this),this},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR)},e.ServerContext=t}},{}],95:[function(e,t,n){"use strict";t.exports=function(t,n){var r,i,s,o=e("./Session/DTMF")(t),a=e("./RFC4028")(t.Timers),u={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_PRACK:6,STATUS_WAITING_FOR_ACK:7,STATUS_CANCELED:8,STATUS_TERMINATED:9,STATUS_ANSWERED_WAITING_FOR_PRACK:10,STATUS_EARLY_MEDIA:11,STATUS_CONFIRMED:12};r=function(e){this.status=u.STATUS_NULL,this.dialog=null,this.earlyDialogs={},this.mediaHandlerFactory=e||t.WebRTC.MediaHandler.defaultFactory,this.hasOffer=!1,this.hasAnswer=!1,this.timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null,rel1xxTimer:null,prackTimer:null},this.startTime=null,this.endTime=null,this.tones=null,this.local_hold=!1,this.remote_hold=!1,this.pending_actions={actions:[],length:function(){return this.actions.length},isPending:function(e){var t=0,n=this.actions.length;for(t;t<n;t++)if(this.actions[t].name===e)return!0;return!1},shift:function(){return this.actions.shift()},push:function(e){this.actions.push({name:e})},pop:function(e){var t=0,n=this.actions.length;for(t;t<n;t++)this.actions[t].name===e&&(this.actions.splice(t,1),n--,t--)}},this.early_sdp=null,this.rel100=t.C.supported.UNSUPPORTED},r.prototype={dtmf:function(e,n){var r,i=[],s=this;if(n=n||{},void 0===e)throw new TypeError("Not enough arguments");if(this.status!==u.STATUS_CONFIRMED&&this.status!==u.STATUS_WAITING_FOR_ACK)throw new t.Exceptions.InvalidStateError(this.status);if("string"!=typeof e&&"number"!=typeof e||!e.toString().match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+e);for(e=e.toString().split("");e.length>0;)i.push(new o(this,e.shift(),n));if(this.tones)return this.tones=this.tones.concat(i),this;var a=function e(){var i,o;if(s.status===u.STATUS_TERMINATED||!s.tones||0===s.tones.length)return s.tones=null,this;i=s.tones.shift(),","===r?o=2e3:(i.on("failed",function(){s.tones=null}),i.send(n),o=i.duration+i.interToneGap),t.Timers.setTimeout(e,o)};return this.tones=i,a(),this},bye:function(e){e=Object.create(e||Object.prototype);var n=e.statusCode;if(this.status===u.STATUS_TERMINATED)return this.logger.error("Error: Attempted to send BYE in a terminated session."),this;if(this.logger.log("terminating Session"),n&&(n<200||n>=700))throw new TypeError("Invalid statusCode: "+n);return e.receiveResponse=function(){},this.sendRequest(t.C.BYE,e).terminated()},refer:function(e,n){n=n||{};var r=(n.extraHeaders||[]).slice(),i=e instanceof t.InviteServerContext||e instanceof t.InviteClientContext,s=e;if(void 0===e)throw new TypeError("Not enough arguments");if(this.status!==u.STATUS_CONFIRMED)throw new t.Exceptions.InvalidStateError(this.status);if(i)e='"'+e.remoteIdentity.friendlyName+'" <'+e.dialog.remote_target.toString()+"?Replaces="+e.dialog.id.call_id+"%3Bto-tag%3D"+e.dialog.id.remote_tag+"%3Bfrom-tag%3D"+e.dialog.id.local_tag+">";else{try{e=t.Grammar.parse(e,"Refer_To").uri||e}catch(t){this.logger.debug(".refer() cannot parse Refer_To from",e),this.logger.debug("...falling through to normalizeTarget()")}if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+s)}return r.push("Contact: "+this.contact),r.push("Allow: "+t.UA.C.ALLOWED_METHODS.toString()),r.push("Refer-To: "+e),this.sendRequest(t.C.REFER,{extraHeaders:r,body:n.body,receiveResponse:function(t){/^2[0-9]{2}$/.test(t.status_code)&&(i||e.scheme&&e.scheme.match("^sips?$"))&&this.terminate()}.bind(this)}),this},followRefer:function(e){return function(e,r){var i=r.parseHeader("refer-to"),s=i.uri;if(!s.scheme.match("^sips?$")){var o=s.toString();return void("function"==typeof n.open?n.open(o):this.logger.warn("referred to non-SIP URI but `open` isn't in the environment: "+o))}var a=[],u=s.getHeader("Replaces");void 0!==u&&a.push("Replaces: "+decodeURIComponent(u)),s.clearHeaders();var c=this.mediaHandler.getReferMedia,l=c?c.call(this.mediaHandler):this.mediaHint;t.Hacks.Chrome.getsConfusedAboutGUM(this);var d=this.ua.invite(s,{media:l,params:{to_displayName:i.friendlyName},extraHeaders:a});e.call(this,r,d),this.terminate()}.bind(this,e)},sendRequest:function(e,n){n=n||{};var r=this,i=new t.OutgoingRequest(e,this.dialog.remote_target,this.ua,{cseq:n.cseq||(this.dialog.local_seqnum+=1),call_id:this.dialog.id.call_id,from_uri:this.dialog.local_uri,from_tag:this.dialog.id.local_tag,to_uri:this.dialog.remote_uri,to_tag:this.dialog.id.remote_tag,route_set:this.dialog.route_set,statusCode:n.statusCode,reasonPhrase:n.reasonPhrase},n.extraHeaders||[],n.body);return new t.RequestSender({request:i,onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},receiveResponse:n.receiveResponse||function(e){r.receiveNonInviteResponse(e)}},this.ua).send(),this.emit(e.toLowerCase(),i),this},close:function(){var e;if(this.status===u.STATUS_TERMINATED)return this;this.logger.log("closing INVITE session "+this.id),this.mediaHandler&&this.mediaHandler.close();for(e in this.timers)t.Timers.clearTimeout(this.timers[e]);this.dialog&&(this.dialog.terminate(),delete this.dialog);for(e in this.earlyDialogs)this.earlyDialogs[e].terminate(),delete this.earlyDialogs[e];return this.status=u.STATUS_TERMINATED,delete this.ua.sessions[this.id],this},createDialog:function(e,n,r){var i,s,o=e["UAS"===n?"to_tag":"from_tag"],a=e["UAS"===n?"from_tag":"to_tag"],u=e.call_id+o+a;if(s=this.earlyDialogs[u],r)return!!s||(s=new t.Dialog(this,e,n,t.Dialog.C.STATUS_EARLY),s.error?(this.logger.error(s.error),this.failed(e,t.C.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[u]=s,!0));if(s){s.update(e,n),this.dialog=s,delete this.earlyDialogs[u];for(var c in this.earlyDialogs)this.earlyDialogs[c].terminate(),delete this.earlyDialogs[c];return!0}return i=new t.Dialog(this,e,n),i.error?(this.logger.error(i.error),this.failed(e,t.C.causes.INTERNAL_ERROR),!1):(this.to_tag=e.to_tag,this.dialog=i,!0)},isReadyToReinvite:function(){return this.mediaHandler.isReady()&&!this.dialog.uac_pending_reply&&!this.dialog.uas_pending_reply},mute:function(e){var t=this.mediaHandler.mute(e);t&&this.onmute(t)},unmute:function(e){var t=this.mediaHandler.unmute(e);t&&this.onunmute(t)},hold:function(){if(this.status!==u.STATUS_WAITING_FOR_ACK&&this.status!==u.STATUS_CONFIRMED)throw new t.Exceptions.InvalidStateError(this.status);if(this.mediaHandler.hold(),!this.isReadyToReinvite())return void(this.pending_actions.isPending("unhold")?this.pending_actions.pop("unhold"):this.pending_actions.isPending("hold")||this.pending_actions.push("hold"));this.local_hold!==!0&&(this.onhold("local"),this.sendReinvite())},unhold:function(e){if(this.status!==u.STATUS_WAITING_FOR_ACK&&this.status!==u.STATUS_CONFIRMED)throw new t.Exceptions.InvalidStateError(this.status);if(this.mediaHandler.unhold(),!this.isReadyToReinvite())return void(this.pending_actions.isPending("hold")?this.pending_actions.pop("hold"):this.pending_actions.isPending("unhold")||this.pending_actions.push("unhold"));this.local_hold!==!1&&(this.onunhold("local"),this.sendReinvite(e))},isOnHold:function(){return{local:this.local_hold,remote:this.remote_hold}},receiveReinvite:function(e){var n=this;if(!this.mediaHandler.hasDescription(e))return this.logger.warn("invalid Content-Type"),void e.reply(415);this.mediaHandler.setDescription(e).then(this.mediaHandler.getDescription.bind(this.mediaHandler,this.mediaHint)).then(function(t){var r=["Contact: "+n.contact];e.reply(200,null,r,t,function(){n.status=u.STATUS_WAITING_FOR_ACK,n.setInvite2xxTimer(e,t),n.setACKTimer(),n.remote_hold&&!n.mediaHandler.remote_hold?n.onunhold("remote"):!n.remote_hold&&n.mediaHandler.remote_hold&&n.onhold("remote")})}).catch(function(r){var i;r instanceof t.Exceptions.GetDescriptionError?i=500:(n.logger.error(r),i=488),e.reply(i)})},sendReinvite:function(e){e=e||{};var n,r=this,i=(e.extraHeaders||[]).slice(),s=e.eventHandlers||{};s.succeeded&&(n=s.succeeded),this.reinviteSucceeded=function(){t.Timers.clearTimeout(r.timers.ackTimer),t.Timers.clearTimeout(r.timers.invite2xxTimer),r.status=u.STATUS_CONFIRMED,n&&n.apply(this,arguments)},s.failed?this.reinviteFailed=s.failed:this.reinviteFailed=function(){},i.push("Contact: "+this.contact),i.push("Allow: "+t.UA.C.ALLOWED_METHODS.toString()),this.receiveResponse=this.receiveReinviteResponse,this.mediaHandler.getDescription(r.mediaHint).then(function(e){r.dialog.sendRequest(r,t.C.INVITE,{extraHeaders:i,body:e})},function(){r.isReadyToReinvite()&&r.onReadyToReinvite(),r.reinviteFailed()})},receiveRequest:function(e){switch(e.method){case t.C.BYE:e.reply(200),this.status===u.STATUS_CONFIRMED&&(this.emit("bye",e),this.terminated(e,t.C.causes.BYE));break;case t.C.INVITE:this.status===u.STATUS_CONFIRMED&&(this.logger.log("re-INVITE received"),this.receiveReinvite(e));break;case t.C.INFO:if(this.status===u.STATUS_1XX_RECEIVED||this.status===u.STATUS_WAITING_FOR_PRACK||this.status===u.STATUS_WAITING_FOR_ACK||this.status===u.STATUS_ANSWERED_WAITING_FOR_PRACK||this.status===u.STATUS_EARLY_MEDIA||this.status===u.STATUS_CONFIRMED||this.dialog){if(this.onInfo)return this.onInfo(e);var n,r,i,s=e.getHeader("content-type"),a=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,c=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;s&&(s.match(/^application\/dtmf-relay/i)?(e.body&&(n=e.body.split("\r\n",2),2===n.length&&(a.test(n[0])&&(r=n[0].replace(a,"$2")),c.test(n[1])&&(i=parseInt(n[1].replace(c,"$2"),10)))),new o(this,r,{duration:i}).init_incoming(e)):e.reply(415,null,["Accept: application/dtmf-relay"]))}break;case t.C.REFER:if(this.status===u.STATUS_CONFIRMED){this.logger.log("REFER received");var l,d=this.listeners("refer").length;d?(e.reply(202,"Accepted"),l="SIP/2.0 100 Trying",this.sendRequest(t.C.NOTIFY,{extraHeaders:["Event: refer","Subscription-State: terminated","Content-Type: message/sipfrag"],body:l,receiveResponse:function(){}}),this.emit("refer",e)):e.reply(603,"Declined")}break;case t.C.NOTIFY:e.reply(200,"OK"),this.emit("notify",e)}},receiveReinviteResponse:function(e){var n=this;if(this.status!==u.STATUS_TERMINATED)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):if(this.status=u.STATUS_CONFIRMED,this.sendRequest(t.C.ACK,{cseq:e.cseq}),!this.mediaHandler.hasDescription(e)){this.reinviteFailed();break}this.mediaHandler.setDescription(e).then(function(){n.reinviteSucceeded()},function(){n.reinviteFailed()});break;default:this.reinviteFailed()}},acceptAndTerminate:function(e,n,r){var i=[];return n&&i.push("Reason: "+t.Utils.getReasonHeaderValue(n,r)),(this.dialog||this.createDialog(e,"UAC"))&&(this.sendRequest(t.C.ACK,{cseq:e.cseq}),this.sendRequest(t.C.BYE,{extraHeaders:i})),this},setInvite2xxTimer:function(e,n){var r=this,i=t.Timers.T1;this.timers.invite2xxTimer=t.Timers.setTimeout(function s(){if(r.status===u.STATUS_WAITING_FOR_ACK){r.logger.log("no ACK received, attempting to retransmit OK");var o=["Contact: "+r.contact];e.reply(200,null,o,n),i=Math.min(2*i,t.Timers.T2),r.timers.invite2xxTimer=t.Timers.setTimeout(s,i)}},i)},setACKTimer:function(){var e=this;this.timers.ackTimer=t.Timers.setTimeout(function(){e.status===u.STATUS_WAITING_FOR_ACK&&(e.logger.log("no ACK received for an extended period of time, terminating the call"),t.Timers.clearTimeout(e.timers.invite2xxTimer),e.sendRequest(t.C.BYE),e.terminated(null,t.C.causes.NO_ACK))},t.Timers.TIMER_H)},onReadyToReinvite:function(){var e=this.pending_actions.shift();e&&this[e.name]&&this[e.name]()},onTransportError:function(){this.status!==u.STATUS_CONFIRMED&&this.status!==u.STATUS_TERMINATED&&this.failed(null,t.C.causes.CONNECTION_ERROR)},onRequestTimeout:function(){this.status===u.STATUS_CONFIRMED?this.terminated(null,t.C.causes.REQUEST_TIMEOUT):this.status!==u.STATUS_TERMINATED&&(this.failed(null,t.C.causes.REQUEST_TIMEOUT),this.terminated(null,t.C.causes.REQUEST_TIMEOUT))},onDialogError:function(e){this.status===u.STATUS_CONFIRMED?this.terminated(e,t.C.causes.DIALOG_ERROR):this.status!==u.STATUS_TERMINATED&&(this.failed(e,t.C.causes.DIALOG_ERROR),this.terminated(e,t.C.causes.DIALOG_ERROR))},onhold:function(e){this["local"===e?"local_hold":"remote_hold"]=!0,this.emit("hold",{originator:e})},onunhold:function(e){this["local"===e?"local_hold":"remote_hold"]=!1,this.emit("unhold",{originator:e})},onmute:function(e){this.emit("muted",{audio:e.audio,video:e.video})},onunmute:function(e){this.emit("unmuted",{audio:e.audio,video:e.video})},failed:function(e,t){return this.status===u.STATUS_TERMINATED?this:(this.emit("failed",e||null,t||null),this)},rejected:function(e,t){return this.emit("rejected",e||null,t||null),this},canceled:function(){return this.emit("cancel"),this},accepted:function(e,n){return n=t.Utils.getReasonPhrase(e&&e.status_code,n),this.startTime=new Date,this.replacee&&(this.replacee.emit("replaced",this),this.replacee.terminate()),e&&a.updateState(this.dialog,e,t.Parser.parseMessage,this.ua),this.emit("accepted",e,n),this},terminated:function(e,t){return this.status===u.STATUS_TERMINATED?this:(this.endTime=new Date,this.close(),this.emit("terminated",e||null,t||null),this)},connecting:function(e){return this.emit("connecting",{request:e}),this}},r.desugar=function(e){return n.HTMLMediaElement&&e instanceof n.HTMLMediaElement&&(e={media:{constraints:{audio:!0,video:"VIDEO"===e.tagName},render:{remote:e}}}),e||{}},r.C=u,t.Session=r,i=function(e,n){function r(e,t){n.hasHeader(e)&&n.getHeader(e).toLowerCase().indexOf("100rel")>=0&&(o.rel100=t)}function i(){var e={extraHeaders:["Contact: "+o.contact]};o.rel100!==t.C.supported.REQUIRED&&o.progress(e),o.status=u.STATUS_WAITING_FOR_ANSWER,o.timers.userNoAnswerTimer=t.Timers.setTimeout(function(){n.reply(408),o.failed(n,t.C.causes.NO_ANSWER),o.terminated(n,t.C.causes.NO_ANSWER)},o.ua.configuration.noAnswerTimeout),s&&(o.timers.expiresTimer=t.Timers.setTimeout(function(){o.status===u.STATUS_WAITING_FOR_ANSWER&&(n.reply(487),o.failed(n,t.C.causes.EXPIRES),o.terminated(n,t.C.causes.EXPIRES))},s)),o.emit("invite",n)}var s,o=this,c=n.getHeader("Content-Type"),l=n.parseHeader("Content-Disposition");if(t.Utils.augment(this,t.ServerContext,[e,n]),t.Utils.augment(this,t.Session,[e.configuration.mediaHandlerFactory]),this.mediaHandler=this.mediaHandlerFactory(this,{RTCConstraints:{optional:[{DtlsSrtpKeyAgreement:"true"}]}}),!l&&!this.mediaHandler.hasDescription(n)||l&&"render"===l.type)this.renderbody=n.body,this.rendertype=c;else if(!this.mediaHandler.hasDescription(n)&&l&&"session"===l.type)return void n.reply(415);return a.hasSmallMinSE(n)?void n.reply(422,null,["Min-SE: "+a.localMinSE]):(this.status=u.STATUS_INVITE_RECEIVED,this.from_tag=n.from_tag,this.id=n.call_id+this.from_tag,this.request=n,this.contact=this.ua.contact.toString(),this.receiveNonInviteResponse=function(){},this.logger=e.getLogger("sip.inviteservercontext",this.id),this.ua.sessions[this.id]=this,n.hasHeader("expires")&&(s=1e3*n.getHeader("expires")),r("require",t.C.supported.REQUIRED),r("supported",t.C.supported.SUPPORTED),n.to_tag=t.Utils.newTag(),this.createDialog(n,"UAS",!0)?(this.mediaHandler&&this.mediaHandler.getRemoteStreams&&(this.getRemoteStreams=this.mediaHandler.getRemoteStreams.bind(this.mediaHandler),this.getLocalStreams=this.mediaHandler.getLocalStreams.bind(this.mediaHandler)),void(!this.mediaHandler.hasDescription(n)||this.renderbody?t.Timers.setTimeout(i,0):(this.hasOffer=!0,this.mediaHandler.setDescription(n).then(i,function(e){o.logger.warn("invalid description"),o.logger.warn(e),n.reply(488)})))):void n.reply(500,"Missing Contact header field"))},i.prototype={reject:function(e){if(this.status===u.STATUS_TERMINATED)throw new t.Exceptions.InvalidStateError(this.status);return this.logger.log("rejecting RTCSession"),t.ServerContext.prototype.reject.call(this,e),this.terminated()},terminate:function(e){e=e||{};var n,r=(e.extraHeaders||[]).slice(),i=e.body,s=this;return this.status===u.STATUS_WAITING_FOR_ACK&&this.request.server_transaction.state!==t.Transactions.C.STATUS_TERMINATED?(n=this.dialog,this.receiveRequest=function(e){e.method===t.C.ACK&&(this.sendRequest(t.C.BYE,{extraHeaders:r,body:i}),n.terminate())},this.request.server_transaction.on("stateChanged",function(){this.state===t.Transactions.C.STATUS_TERMINATED&&this.dialog&&(this.request=new t.OutgoingRequest(t.C.BYE,this.dialog.remote_target,this.ua,{cseq:this.dialog.local_seqnum+=1,call_id:this.dialog.id.call_id,from_uri:this.dialog.local_uri,from_tag:this.dialog.id.local_tag,to_uri:this.dialog.remote_uri,to_tag:this.dialog.id.remote_tag,route_set:this.dialog.route_set},r,i),new t.RequestSender({request:this.request,onRequestTimeout:function(){s.onRequestTimeout()},onTransportError:function(){s.onTransportError()},receiveResponse:function(){}},this.ua).send(),n.terminate())}),this.emit("bye",this.request),this.terminated(),this.dialog=n,this.ua.dialogs[n.id.toString()]=n):this.status===u.STATUS_CONFIRMED?this.bye(e):this.reject(e),this},progress:function(e){function n(){o=e.statusCode||183,this.status=u.STATUS_WAITING_FOR_PRACK,c.push("Contact: "+this.contact),c.push("Require: 100rel"),c.push("RSeq: "+Math.floor(1e4*Math.random())),this.mediaHint=e.media,this.mediaHandler.getDescription(e.media).then(function(e){if(!this.isCanceled&&this.status!==u.STATUS_TERMINATED){this.early_sdp=e.body,this[this.hasOffer?"hasAnswer":"hasOffer"]=!0;var n=t.Timers.T1;this.timers.rel1xxTimer=t.Timers.setTimeout(function r(){this.request.reply(o,null,c,e),n*=2,this.timers.rel1xxTimer=t.Timers.setTimeout(r.bind(this),n)}.bind(this),n),this.timers.prackTimer=t.Timers.setTimeout(function(){this.status===u.STATUS_WAITING_FOR_PRACK&&(this.logger.log("no PRACK received, rejecting the call"),t.Timers.clearTimeout(this.timers.rel1xxTimer),this.request.reply(504),this.terminated(null,t.C.causes.NO_PRACK))}.bind(this),64*t.Timers.T1),s=this.request.reply(o,a,c,e),this.emit("progress",s,a)}}.bind(this),function(){this.request.reply(480),this.failed(null,t.C.causes.WEBRTC_ERROR),this.terminated(null,t.C.causes.WEBRTC_ERROR)}.bind(this))}function r(){s=this.request.reply(o,a,c,h),this.emit("progress",s,a)}e=e||{};var i,s,o=e.statusCode||180,a=e.reasonPhrase,c=(e.extraHeaders||[]).slice(),l=e.stunServers||null,d=e.turnServers||null,h=e.body;if(o<100||o>199)throw new TypeError("Invalid statusCode: "+o);if(this.isCanceled||this.status===u.STATUS_TERMINATED)return this;if(l||d){if(l){if(i=t.UA.configuration_check.optional.stunServers(l),!i)throw new TypeError("Invalid stunServers: "+l);this.stunServers=i}if(d){if(i=t.UA.configuration_check.optional.turnServers(d),!i)throw new TypeError("Invalid turnServers: "+d);this.turnServers=i}this.mediaHandler.updateIceServers({stunServers:this.stunServers,turnServers:this.turnServers})}return 100!==e.statusCode&&(this.rel100===t.C.supported.REQUIRED||this.rel100===t.C.supported.SUPPORTED&&e.rel100||this.rel100===t.C.supported.SUPPORTED&&this.ua.configuration.rel100===t.C.supported.REQUIRED)?n.apply(this):r.apply(this),this},accept:function(e){e=Object.create(r.desugar(e)),t.Utils.optionsOverride(e,"media","mediaConstraints",!0,this.logger,this.ua.configuration.media),this.mediaHint=e.media,this.onInfo=e.onInfo;var n,i=this,s=this.request,o=(e.extraHeaders||[]).slice(),a=e.stunServers||null,c=e.turnServers||null,l=function(e){var n,r=function(){i.status=u.STATUS_WAITING_FOR_ACK,i.setInvite2xxTimer(s,e),i.setACKTimer()},a=function(){i.failed(null,t.C.causes.CONNECTION_ERROR),i.terminated(null,t.C.causes.CONNECTION_ERROR)};i.mediaHandler.render(),o.push("Contact: "+i.contact),o.push("Allow: "+t.UA.C.ALLOWED_METHODS.toString());var c=s.parseHeader("Supported")||[],l=s.parseHeader("Session-Expires")||{},d=l.deltaSeconds;if(d){var h=l.refresher||"uas";o.push("Session-Expires: "+d+";"+h),("uac"===h||c.indexOf("timer")>=0)&&o.push("Require: timer")}i.hasOffer?i.hasAnswer=!0:i.hasOffer=!0,n=s.reply(200,null,o,e,r,a),i.status!==u.STATUS_TERMINATED&&i.accepted(n,t.Utils.getReasonPhrase(200))},d=function(){i.status!==u.STATUS_TERMINATED&&(i.request.reply(480),i.failed(null,t.C.causes.WEBRTC_ERROR),i.terminated(null,t.C.causes.WEBRTC_ERROR))};if(this.status===u.STATUS_WAITING_FOR_PRACK)return this.status=u.STATUS_ANSWERED_WAITING_FOR_PRACK,this;if(this.status===u.STATUS_WAITING_FOR_ANSWER)this.status=u.STATUS_ANSWERED;else if(this.status!==u.STATUS_EARLY_MEDIA)throw new t.Exceptions.InvalidStateError(this.status);if((a||c)&&this.status!==u.STATUS_EARLY_MEDIA&&this.status!==u.STATUS_ANSWERED_WAITING_FOR_PRACK){if(a){if(n=t.UA.configuration_check.optional.stunServers(a),!n)throw new TypeError("Invalid stunServers: "+a);this.stunServers=n}if(c){if(n=t.UA.configuration_check.optional.turnServers(c),!n)throw new TypeError("Invalid turnServers: "+c);this.turnServers=n}this.mediaHandler.updateIceServers({stunServers:this.stunServers,turnServers:this.turnServers})}return this.createDialog(s,"UAS")?(t.Timers.clearTimeout(this.timers.userNoAnswerTimer),this.status===u.STATUS_EARLY_MEDIA?l({}):this.mediaHandler.getDescription(i.mediaHint).then(l,d),this):(s.reply(500,"Missing Contact header field"),this)},receiveRequest:function(e){function n(){var n;t.Timers.clearTimeout(this.timers.ackTimer),t.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=u.STATUS_CONFIRMED,this.unmute(),n=e.getHeader("Content-Type"),this.mediaHandler.hasDescription(e)||(this.renderbody=e.body,this.rendertype=n),this.emit("confirmed",e)}switch(e.method){case t.C.CANCEL:this.status!==u.STATUS_WAITING_FOR_ANSWER&&this.status!==u.STATUS_WAITING_FOR_PRACK&&this.status!==u.STATUS_ANSWERED_WAITING_FOR_PRACK&&this.status!==u.STATUS_EARLY_MEDIA&&this.status!==u.STATUS_ANSWERED||(this.status=u.STATUS_CANCELED,this.request.reply(487),this.canceled(e),this.rejected(e,t.C.causes.CANCELED),this.failed(e,t.C.causes.CANCELED),this.terminated(e,t.C.causes.CANCELED));break;case t.C.ACK:this.status===u.STATUS_WAITING_FOR_ACK&&(this.hasAnswer?n.apply(this):this.mediaHandler.hasDescription(e)?(this.hasAnswer=!0,this.mediaHandler.setDescription(e).then(n.bind(this),function(n){this.logger.warn(n),this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(e,t.C.causes.BAD_MEDIA_DESCRIPTION)}.bind(this))):this.early_sdp?n.apply(this):(this.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(e,t.C.causes.BAD_MEDIA_DESCRIPTION)));break;case t.C.PRACK:this.status===u.STATUS_WAITING_FOR_PRACK||this.status===u.STATUS_ANSWERED_WAITING_FOR_PRACK?this.hasAnswer?(t.Timers.clearTimeout(this.timers.rel1xxTimer),t.Timers.clearTimeout(this.timers.prackTimer),e.reply(200),this.status===u.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=u.STATUS_EARLY_MEDIA,this.accept()),this.status=u.STATUS_EARLY_MEDIA,this.mute()):this.mediaHandler.hasDescription(e)?(this.hasAnswer=!0,this.mediaHandler.setDescription(e).then(function(){t.Timers.clearTimeout(this.timers.rel1xxTimer),t.Timers.clearTimeout(this.timers.prackTimer),e.reply(200),this.status===u.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=u.STATUS_EARLY_MEDIA,this.accept()),this.status=u.STATUS_EARLY_MEDIA,this.mute()}.bind(this),function(n){this.logger.warn(n),this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(e,t.C.causes.BAD_MEDIA_DESCRIPTION)}.bind(this))):(this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(e,t.C.causes.BAD_MEDIA_DESCRIPTION)):this.status===u.STATUS_EARLY_MEDIA&&e.reply(200);break;default:r.prototype.receiveRequest.apply(this,[e])}},onTransportError:function(){this.status!==u.STATUS_CONFIRMED&&this.status!==u.STATUS_TERMINATED&&this.failed(null,t.C.causes.CONNECTION_ERROR)},onRequestTimeout:function(){this.status===u.STATUS_CONFIRMED?this.terminated(null,t.C.causes.REQUEST_TIMEOUT):this.status!==u.STATUS_TERMINATED&&(this.failed(null,t.C.causes.REQUEST_TIMEOUT),this.terminated(null,t.C.causes.REQUEST_TIMEOUT))}},t.InviteServerContext=i,s=function(e,n,i){i=Object.create(r.desugar(i)),i.params=Object.create(i.params||Object.prototype);var s,o=(i.extraHeaders||[]).slice(),a=i.stunServers||null,c=i.turnServers||null,l=i.mediaHandlerFactory||e.configuration.mediaHandlerFactory,d=l.isSupported;if(d&&!d())throw new t.Exceptions.NotSupportedError("Media not supported");if(this.RTCConstraints=i.RTCConstraints||{},this.inviteWithoutSdp=i.inviteWithoutSdp||!1,this.anonymous=i.anonymous||!1,this.renderbody=i.renderbody||null,this.rendertype=i.rendertype||"text/plain",i.params.from_tag=this.from_tag,this.contact=e.contact.toString({anonymous:this.anonymous,outbound:this.anonymous?!e.contact.temp_gruu:!e.contact.pub_gruu}),this.anonymous&&(i.params.from_displayName="Anonymous",i.params.from_uri="sip:anonymous@anonymous.invalid",o.push("P-Preferred-Identity: "+e.configuration.uri.toString()),o.push("Privacy: id")),o.push("Contact: "+this.contact),o.push("Allow: "+t.UA.C.ALLOWED_METHODS.toString()),this.inviteWithoutSdp&&this.renderbody&&(o.push("Content-Type: "+this.rendertype),o.push("Content-Disposition: render;handling=optional")),e.configuration.rel100===t.C.supported.REQUIRED&&o.push("Require: 100rel"),e.configuration.replaces===t.C.supported.REQUIRED&&o.push("Require: replaces"),i.extraHeaders=o,t.Utils.augment(this,t.ClientContext,[e,t.C.INVITE,n,i]),t.Utils.augment(this,t.Session,[l]),this.status!==u.STATUS_NULL)throw new t.Exceptions.InvalidStateError(this.status);if(this.from_tag=t.Utils.newTag(),this.isCanceled=!1,this.received_100=!1,this.method=t.C.INVITE,this.receiveNonInviteResponse=this.receiveResponse,this.receiveResponse=this.receiveInviteResponse,this.logger=e.getLogger("sip.inviteclientcontext"),a){if(s=t.UA.configuration_check.optional.stunServers(a),!s)throw new TypeError("Invalid stunServers: "+a);this.stunServers=s}if(c){if(s=t.UA.configuration_check.optional.turnServers(c),!s)throw new TypeError("Invalid turnServers: "+c);this.turnServers=s}e.applicants[this]=this,this.id=this.request.call_id+this.from_tag,this.mediaHandler=this.mediaHandlerFactory(this,{RTCConstraints:this.RTCConstraints,stunServers:this.stunServers,turnServers:this.turnServers}),this.mediaHandler&&this.mediaHandler.getRemoteStreams&&(this.getRemoteStreams=this.mediaHandler.getRemoteStreams.bind(this.mediaHandler),this.getLocalStreams=this.mediaHandler.getLocalStreams.bind(this.mediaHandler)),t.Utils.optionsOverride(i,"media","mediaConstraints",!0,this.logger,this.ua.configuration.media),this.mediaHint=i.media,this.onInfo=i.onInfo},s.prototype={invite:function(){var e=this;return this.ua.sessions[this.id]=this,this.inviteWithoutSdp?(this.request.body=e.renderbody,this.status=u.STATUS_INVITE_SENT,this.send()):this.mediaHandler.getDescription(e.mediaHint).then(function(t){e.isCanceled||e.status===u.STATUS_TERMINATED||(e.hasOffer=!0,e.request.body=t,e.status=u.STATUS_INVITE_SENT,e.send())},function(){e.status!==u.STATUS_TERMINATED&&(e.failed(null,t.C.causes.WEBRTC_ERROR),e.terminated(null,t.C.causes.WEBRTC_ERROR))}),this},receiveInviteResponse:function(e){var n,r=this,i=e.call_id+e.from_tag+e.to_tag,s=[],o={};if(this.status!==u.STATUS_TERMINATED&&e.method===t.C.INVITE){if(this.dialog&&e.status_code>=200&&e.status_code<=299){if(i!==this.dialog.id.toString()){if(!this.createDialog(e,"UAC",!0))return;return this.earlyDialogs[i].sendRequest(this,t.C.ACK,{body:t.Utils.generateFakeSDP(e.body)}),this.earlyDialogs[i].sendRequest(this,t.C.BYE),void(this.status!==u.STATUS_CONFIRMED&&(this.failed(e,t.C.causes.WEBRTC_ERROR),this.terminated(e,t.C.causes.WEBRTC_ERROR)))}if(this.status===u.STATUS_CONFIRMED)return void this.sendRequest(t.C.ACK,{cseq:e.cseq});if(!this.hasAnswer)return}if(this.dialog&&e.status_code<200){if(this.dialog.pracked.indexOf(e.getHeader("rseq"))!==-1||this.dialog.pracked[this.dialog.pracked.length-1]>=e.getHeader("rseq")&&this.dialog.pracked.length>0)return;if(!this.earlyDialogs[i]&&!this.createDialog(e,"UAC",!0))return;if(this.earlyDialogs[i].pracked.indexOf(e.getHeader("rseq"))!==-1||this.earlyDialogs[i].pracked[this.earlyDialogs[i].pracked.length-1]>=e.getHeader("rseq")&&this.earlyDialogs[i].pracked.length>0)return;return s.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),this.earlyDialogs[i].pracked.push(e.getHeader("rseq")),void this.earlyDialogs[i].sendRequest(this,t.C.PRACK,{extraHeaders:s,body:t.Utils.generateFakeSDP(e.body)})}if(this.isCanceled)return void(e.status_code>=100&&e.status_code<200?(this.request.cancel(this.cancelReason,s),this.canceled(null)):e.status_code>=200&&e.status_code<299?(this.acceptAndTerminate(e),this.emit("bye",this.request)):e.status_code>=300&&(n=t.C.REASON_PHRASE[e.status_code]||t.C.causes.CANCELED,this.rejected(e,n),this.failed(e,n),this.terminated(e,n)));switch(!0){case/^100$/.test(e.status_code):this.received_100=!0,this.emit("progress",e);break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){this.logger.warn("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this.createDialog(e,"UAC",!0))break;if(this.status=u.STATUS_1XX_RECEIVED,e.hasHeader("require")&&e.getHeader("require").indexOf("100rel")!==-1){if(this.dialog||!this.earlyDialogs[i])break;if(this.earlyDialogs[i].pracked.indexOf(e.getHeader("rseq"))!==-1||this.earlyDialogs[i].pracked[this.earlyDialogs[i].pracked.length-1]>=e.getHeader("rseq")&&this.earlyDialogs[i].pracked.length>0)return;if(this.mediaHandler.hasDescription(e))if(this.hasOffer){if(!this.createDialog(e,"UAC"))break;this.hasAnswer=!0,this.dialog.pracked.push(e.getHeader("rseq")),this.mediaHandler.setDescription(e).then(function(){s.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),r.sendRequest(t.C.PRACK,{extraHeaders:s,receiveResponse:function(){}}),r.status=u.STATUS_EARLY_MEDIA,r.mute(),r.emit("progress",e)},function(n){r.logger.warn(n),r.acceptAndTerminate(e,488,"Not Acceptable Here"),r.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION)})}else{var a=this.earlyDialogs[i],c=a.mediaHandler;a.pracked.push(e.getHeader("rseq")),c.setDescription(e).then(c.getDescription.bind(c,r.mediaHint)).then(function(n){s.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),a.sendRequest(r,t.C.PRACK,{extraHeaders:s,body:n}),r.status=u.STATUS_EARLY_MEDIA,r.emit("progress",e)}).catch(function(n){if(n instanceof t.Exceptions.GetDescriptionError){if(a.pracked.push(e.getHeader("rseq")),r.status===u.STATUS_TERMINATED)return;r.failed(null,t.C.causes.WEBRTC_ERROR),r.terminated(null,t.C.causes.WEBRTC_ERROR)}else a.pracked.splice(a.pracked.indexOf(e.getHeader("rseq")),1),r.logger.warn("invalid description"),r.logger.warn(n)})}else s.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),this.earlyDialogs[i].pracked.push(e.getHeader("rseq")),this.earlyDialogs[i].sendRequest(this,t.C.PRACK,{extraHeaders:s}),this.emit("progress",e)}else this.emit("progress",e);break;case/^2[0-9]{2}$/.test(e.status_code):if(this.request.cseq+" "+this.request.method!==e.getHeader("cseq"))break;if(this.status===u.STATUS_EARLY_MEDIA&&this.dialog){this.status=u.STATUS_CONFIRMED,this.unmute(),o={},this.renderbody&&(s.push("Content-Type: "+this.rendertype),o.extraHeaders=s,o.body=this.renderbody),o.cseq=e.cseq,this.sendRequest(t.C.ACK,o),this.accepted(e);break}if(this.dialog)break;if(this.hasOffer)if(this.hasAnswer)this.renderbody&&(s.push("Content-Type: "+r.rendertype),o.extraHeaders=s,o.body=this.renderbody),this.sendRequest(t.C.ACK,o);else{if(!this.mediaHandler.hasDescription(e)){this.acceptAndTerminate(e,400,"Missing session description"),this.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(e,"UAC"))break;this.hasAnswer=!0,this.mediaHandler.setDescription(e).then(function(){var n={};r.status=u.STATUS_CONFIRMED,r.unmute(),r.renderbody&&(s.push("Content-Type: "+r.rendertype),n.extraHeaders=s,n.body=r.renderbody),n.cseq=e.cseq,r.sendRequest(t.C.ACK,n),r.accepted(e)},function(n){r.logger.warn(n),r.acceptAndTerminate(e,488,"Not Acceptable Here"),r.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION)})}else if(this.earlyDialogs[i]&&this.earlyDialogs[i].mediaHandler.localMedia){if(this.hasOffer=!0,this.hasAnswer=!0,this.mediaHandler=this.earlyDialogs[i].mediaHandler,!this.createDialog(e,"UAC"))break;this.status=u.STATUS_CONFIRMED,this.sendRequest(t.C.ACK,{cseq:e.cseq}),this.unmute(),this.accepted(e)}else{if(!this.mediaHandler.hasDescription(e)){this.acceptAndTerminate(e,400,"Missing session description"),this.failed(e,t.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(e,"UAC"))break;this.hasOffer=!0,this.mediaHandler.setDescription(e).then(this.mediaHandler.getDescription.bind(this.mediaHandler,this.mediaHint)).then(function(n){r.isCanceled||r.status===u.STATUS_TERMINATED||(r.status=u.STATUS_CONFIRMED,r.hasAnswer=!0,r.unmute(),r.sendRequest(t.C.ACK,{body:n,cseq:e.cseq}),r.accepted(e))}).catch(function(n){n instanceof t.Exceptions.GetDescriptionError?r.logger.warn("there was a problem"):(r.logger.warn("invalid description"),r.logger.warn(n),e.reply(488))})}break;default:n=t.Utils.sipErrorCause(e.status_code),this.rejected(e,n),this.failed(e,n),this.terminated(e,n)}}},cancel:function(e){if(e=e||{},e.extraHeaders=(e.extraHeaders||[]).slice(),this.status===u.STATUS_TERMINATED||this.status===u.STATUS_CONFIRMED)throw new t.Exceptions.InvalidStateError(this.status);this.logger.log("canceling RTCSession");var n=t.Utils.getCancelReason(e.status_code,e.reason_phrase);return this.status===u.STATUS_NULL||this.status===u.STATUS_INVITE_SENT&&!this.received_100?(this.isCanceled=!0,this.cancelReason=n):this.status!==u.STATUS_INVITE_SENT&&this.status!==u.STATUS_1XX_RECEIVED&&this.status!==u.STATUS_EARLY_MEDIA||this.request.cancel(n,e.extraHeaders),this.canceled()},terminate:function(e){return this.status===u.STATUS_TERMINATED?this:(this.status===u.STATUS_WAITING_FOR_ACK||this.status===u.STATUS_CONFIRMED?this.bye(e):this.cancel(e),this)},receiveRequest:function(e){return e.method,t.C.CANCEL,e.method===t.C.ACK&&this.status===u.STATUS_WAITING_FOR_ACK&&(t.Timers.clearTimeout(this.timers.ackTimer),t.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=u.STATUS_CONFIRMED,this.unmute(),this.accepted()),r.prototype.receiveRequest.apply(this,[e])},onTransportError:function(){this.status!==u.STATUS_CONFIRMED&&this.status!==u.STATUS_TERMINATED&&this.failed(null,t.C.causes.CONNECTION_ERROR)},onRequestTimeout:function(){this.status===u.STATUS_CONFIRMED?this.terminated(null,t.C.causes.REQUEST_TIMEOUT):this.status!==u.STATUS_TERMINATED&&(this.failed(null,t.C.causes.REQUEST_TIMEOUT),this.terminated(null,t.C.causes.REQUEST_TIMEOUT))}},t.InviteClientContext=s}},{"./RFC4028":88,"./Session/DTMF":96}],96:[function(e,t,n){"use strict";t.exports=function(e){var t,n={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};return t=function(n,r,i){var s,o;if(void 0===r)throw new TypeError("Not enough arguments");if(this.logger=n.ua.getLogger("sip.invitecontext.dtmf",n.id),this.owner=n,this.direction=null,i=i||{},s=i.duration||null,o=i.interToneGap||null,"string"==typeof r)r=r.toUpperCase();else{if("number"!=typeof r)throw new TypeError("Invalid tone: "+r);r=r.toString()}if(!r.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+r);if(this.tone=r,s&&!e.Utils.isDecimal(s))throw new TypeError("Invalid tone duration: "+s);if(s?s<t.C.MIN_DURATION?(this.logger.warn('"duration" value is lower than the minimum allowed, setting it to '+t.C.MIN_DURATION+" milliseconds"),s=t.C.MIN_DURATION):s>t.C.MAX_DURATION?(this.logger.warn('"duration" value is greater than the maximum allowed, setting it to '+t.C.MAX_DURATION+" milliseconds"),s=t.C.MAX_DURATION):s=Math.abs(s):s=t.C.DEFAULT_DURATION,this.duration=s,o&&!e.Utils.isDecimal(o))throw new TypeError("Invalid interToneGap: "+o);o?o<t.C.MIN_INTER_TONE_GAP?(this.logger.warn('"interToneGap" value is lower than the minimum allowed, setting it to '+t.C.MIN_INTER_TONE_GAP+" milliseconds"),o=t.C.MIN_INTER_TONE_GAP):o=Math.abs(o):o=t.C.DEFAULT_INTER_TONE_GAP,this.interToneGap=o},t.prototype=Object.create(e.EventEmitter.prototype),t.prototype.send=function(t){var n,r={};if(this.direction="outgoing",this.owner.status!==e.Session.C.STATUS_CONFIRMED&&this.owner.status!==e.Session.C.STATUS_WAITING_FOR_ACK)throw new e.Exceptions.InvalidStateError(this.owner.status);t=t||{},n=t.extraHeaders?t.extraHeaders.slice():[],r.contentType="application/dtmf-relay",r.body="Signal= "+this.tone+"\r\n",r.body+="Duration= "+this.duration,this.request=this.owner.dialog.sendRequest(this,e.C.INFO,{extraHeaders:n,body:r}),this.owner.emit("dtmf",this.request,this)},t.prototype.receiveResponse=function(t){var n;switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("succeeded",{originator:"remote",response:t});break;default:n=e.Utils.sipErrorCause(t.status_code),this.emit("failed",t,n)}},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT),this.owner.onRequestTimeout()},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR),this.owner.onTransportError()},t.prototype.onDialogError=function(t){this.emit("failed",t,e.C.causes.DIALOG_ERROR),this.owner.onDialogError(t)},t.prototype.init_incoming=function(e){this.direction="incoming",this.request=e,e.reply(200),this.tone&&this.duration?this.owner.emit("dtmf",e,this):this.logger.warn("invalid INFO DTMF received, discarded")},t.C=n,t}},{}],97:[function(e,t,n){"use strict";t.exports=function(e){e.Subscription=function(t,n,r,i){if(i=Object.create(i||Object.prototype),this.extraHeaders=i.extraHeaders=(i.extraHeaders||[]).slice(),this.id=null,this.state="init",!r)throw new TypeError("Event necessary to create a subscription.");this.event=r,"number"!=typeof i.expires?(t.logger.warn("expires must be a number. Using default of 3600."),this.expires=3600):this.expires=i.expires,i.extraHeaders.push("Event: "+this.event),i.extraHeaders.push("Expires: "+this.expires),i.body&&(this.body=i.body),this.contact=t.contact.toString(),i.extraHeaders.push("Contact: "+this.contact),i.extraHeaders.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),e.Utils.augment(this,e.ClientContext,[t,e.C.SUBSCRIBE,n,i]),this.logger=t.getLogger("sip.subscription"),this.dialog=null,this.timers={N:null,sub_duration:null},this.errorCodes=[404,405,410,416,480,481,482,483,484,485,489,501,604]},e.Subscription.prototype={subscribe:function(){var t=this;return"active"===this.state?(this.refresh(),this):"notify_wait"===this.state?this:(e.Timers.clearTimeout(this.timers.sub_duration),e.Timers.clearTimeout(this.timers.N),this.timers.N=e.Timers.setTimeout(t.timer_fire.bind(t),e.Timers.TIMER_N),this.send(),this.state="notify_wait",this)},refresh:function(){"terminated"!==this.state&&"pending"!==this.state&&"notify_wait"!==this.state&&this.dialog.sendRequest(this,e.C.SUBSCRIBE,{extraHeaders:this.extraHeaders,body:this.body})},receiveResponse:function(t){var n,r=this,i=e.Utils.getReasonPhrase(t.status_code);"notify_wait"===this.state&&t.status_code>=300||"notify_wait"!==this.state&&this.errorCodes.indexOf(t.status_code)!==-1?this.failed(t,null):/^2[0-9]{2}$/.test(t.status_code)&&(n=t.getHeader("Expires"),e.Timers.clearTimeout(this.timers.N),this.createConfirmedDialog(t,"UAC")&&(this.id=this.dialog.id.toString(),this.ua.subscriptions[this.id]=this,this.emit("accepted",t,i)),n&&n<=this.expires?(this.expires=n,this.timers.sub_duration=e.Timers.setTimeout(r.refresh.bind(r),900*n)):n?(this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),this.failed(t,e.C.INVALID_EXPIRES_HEADER)):(this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE"),this.failed(t,e.C.EXPIRES_HEADER_MISSING)))},unsubscribe:function(){var t=[],n=this;this.state="terminated",t.push("Event: "+this.event),t.push("Expires: 0"),t.push("Contact: "+this.contact),t.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.receiveResponse=function(){},this.dialog.sendRequest(this,this.method,{extraHeaders:t,body:this.body}),e.Timers.clearTimeout(this.timers.sub_duration),e.Timers.clearTimeout(this.timers.N),this.timers.N=e.Timers.setTimeout(n.timer_fire.bind(n),e.Timers.TIMER_N)},timer_fire:function(){"terminated"===this.state?(this.terminateDialog(),e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),delete this.ua.subscriptions[this.id]):"pending"===this.state||"notify_wait"===this.state?this.close():this.refresh()},close:function(){"notify_wait"!==this.state&&"terminated"!==this.state&&this.unsubscribe()},createConfirmedDialog:function(t,n){var r;return this.terminateDialog(),r=new e.Dialog(this,t,n),!r.error&&(this.dialog=r,!0)},terminateDialog:function(){this.dialog&&(delete this.ua.subscriptions[this.id],this.dialog.terminate(),delete this.dialog)},receiveRequest:function(t){function n(){r.expires&&(e.Timers.clearTimeout(i.timers.sub_duration),r.expires=Math.min(i.expires,Math.max(r.expires,0)),i.timers.sub_duration=e.Timers.setTimeout(i.refresh.bind(i),900*r.expires))}var r,i=this;if(!this.matchEvent(t))return void t.reply(489);if(r=t.parseHeader("Subscription-State"),t.reply(200,e.C.REASON_200),e.Timers.clearTimeout(this.timers.N),this.emit("notify",{request:t}),"terminated"===this.state)return void("terminated"===r.state&&(this.terminateDialog(),e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),delete this.ua.subscriptions[this.id]));switch(r.state){case"active":this.state="active",n();break;case"pending":"notify_wait"===this.state&&n(),this.state="pending";break;case"terminated":if(e.Timers.clearTimeout(this.timers.sub_duration),r.reason)switch(this.logger.log("terminating subscription with reason "+r.reason),r.reason){case"deactivated":case"timeout":return void this.subscribe();case"probation":case"giveup":return void(r.params&&r.params["retry-after"]?this.timers.sub_duration=e.Timers.setTimeout(i.subscribe.bind(i),r.params["retry-after"]):this.subscribe());case"rejected":case"noresource":case"invariant":}this.close()}},failed:function(e,t){return this.close(),this.emit("failed",e,t),this},onDialogError:function(t){this.failed(t,e.C.causes.DIALOG_ERROR)},matchEvent:function(e){var t;return e.hasHeader("Event")?e.hasHeader("Subscription-State")?(t=e.parseHeader("event").event,this.event===t||(this.logger.warn("event match failed"),e.reply(481,"Event Match Failed"),!1)):(this.logger.warn("missing Subscription-State header"),!1):(this.logger.warn("missing Event header"),!1)}}}},{}],98:[function(e,t,n){"use strict";var r=500,i=5e3;t.exports=function(e){var t={T1:r,T2:4e3,T4:i,TIMER_B:64*r,TIMER_D:0*r,TIMER_F:64*r,TIMER_H:64*r,TIMER_I:0*r,TIMER_J:0*r,TIMER_K:0*i,TIMER_L:64*r,TIMER_M:64*r,TIMER_N:64*r,PROVISIONAL_RESPONSE_INTERVAL:6e4};return["setTimeout","clearTimeout","setInterval","clearInterval"].forEach(function(n){t[n]=function(){return e[n].apply(e,arguments)}}),t}},{}],99:[function(e,t,n){"use strict";t.exports=function(e){function t(e,t,n){var r;return r="SIP/2.0/"+(e.ua.configuration.hackViaTcp?"TCP":t.server.scheme),r+=" "+e.ua.configuration.viaHost+";branch="+n,e.ua.configuration.forceRport&&(r+=";rport"),r}var n={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},r=function(e,r,i){var s;this.type=n.NON_INVITE_CLIENT,this.transport=i,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=r,this.logger=e.ua.getLogger("sip.transaction.nict",this.id),s=t(e,i,this.id),this.request.setHeader("via",s),this.request_sender.ua.newTransaction(this)};r.prototype=Object.create(e.EventEmitter.prototype),r.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},r.prototype.send=function(){var t=this;this.stateChanged(n.STATUS_TRYING),this.F=e.Timers.setTimeout(t.timer_F.bind(t),e.Timers.TIMER_F),this.transport.send(this.request)||this.onTransportError()},r.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting non-INVITE client transaction "+this.id),e.Timers.clearTimeout(this.F),e.Timers.clearTimeout(this.K),this.stateChanged(n.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onTransportError()},r.prototype.timer_F=function(){this.logger.log("Timer F expired for non-INVITE client transaction "+this.id),this.stateChanged(n.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout()},r.prototype.timer_K=function(){this.stateChanged(n.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},r.prototype.receiveResponse=function(t){var r=this,i=t.status_code;if(i<200)switch(this.state){case n.STATUS_TRYING:case n.STATUS_PROCEEDING:this.stateChanged(n.STATUS_PROCEEDING),this.request_sender.receiveResponse(t)}else switch(this.state){case n.STATUS_TRYING:case n.STATUS_PROCEEDING:this.stateChanged(n.STATUS_COMPLETED),e.Timers.clearTimeout(this.F),408===i?this.request_sender.onRequestTimeout():this.request_sender.receiveResponse(t),this.K=e.Timers.setTimeout(r.timer_K.bind(r),e.Timers.TIMER_K);break;case n.STATUS_COMPLETED:}};var i=function(e,r,i){var s,o=this;this.type=n.INVITE_CLIENT,this.transport=i,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=r,this.logger=e.ua.getLogger("sip.transaction.ict",this.id),s=t(e,i,this.id),this.request.setHeader("via",s),this.request_sender.ua.newTransaction(this),this.request.cancel=function(e,t){t=(t||[]).slice();for(var n=t.length,r=null,i=0;i<n;i++)r=(r||"")+t[i].trim()+"\r\n";o.cancel_request(o,e,r)}};i.prototype=Object.create(e.EventEmitter.prototype),i.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},i.prototype.send=function(){var t=this;this.stateChanged(n.STATUS_CALLING),this.B=e.Timers.setTimeout(t.timer_B.bind(t),e.Timers.TIMER_B),this.transport.send(this.request)||this.onTransportError()},i.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting INVITE client transaction "+this.id),e.Timers.clearTimeout(this.B),e.Timers.clearTimeout(this.D),e.Timers.clearTimeout(this.M),this.stateChanged(n.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.state!==n.STATUS_ACCEPTED&&this.request_sender.onTransportError()},i.prototype.timer_M=function(){this.logger.log("Timer M expired for INVITE client transaction "+this.id),this.state===n.STATUS_ACCEPTED&&(e.Timers.clearTimeout(this.B),this.stateChanged(n.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this))},i.prototype.timer_B=function(){this.logger.log("Timer B expired for INVITE client transaction "+this.id),this.state===n.STATUS_CALLING&&(this.stateChanged(n.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout())},i.prototype.timer_D=function(){this.logger.log("Timer D expired for INVITE client transaction "+this.id),e.Timers.clearTimeout(this.B),this.stateChanged(n.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},i.prototype.sendACK=function(t){var n=this;this.ack="ACK "+this.request.ruri+" SIP/2.0\r\n",this.ack+="Via: "+this.request.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.ack+="Route: "+this.request.headers.Route.toString()+"\r\n"),this.ack+="To: "+t.getHeader("to")+"\r\n",this.ack+="From: "+this.request.headers.From.toString()+"\r\n",this.ack+="Call-ID: "+this.request.headers["Call-ID"].toString()+"\r\n",this.ack+="Content-Length: 0\r\n",this.ack+="CSeq: "+this.request.headers.CSeq.toString().split(" ")[0],this.ack+=" ACK\r\n\r\n",this.D=e.Timers.setTimeout(n.timer_D.bind(n),e.Timers.TIMER_D),this.transport.send(this.ack)},i.prototype.cancel_request=function(t,r,i){var s=t.request;this.cancel=e.C.CANCEL+" "+s.ruri+" SIP/2.0\r\n",this.cancel+="Via: "+s.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.cancel+="Route: "+s.headers.Route.toString()+"\r\n"),this.cancel+="To: "+s.headers.To.toString()+"\r\n",this.cancel+="From: "+s.headers.From.toString()+"\r\n",this.cancel+="Call-ID: "+s.headers["Call-ID"].toString()+"\r\n",this.cancel+="CSeq: "+s.headers.CSeq.toString().split(" ")[0]+" CANCEL\r\n",r&&(this.cancel+="Reason: "+r+"\r\n"),i&&(this.cancel+=i),this.cancel+="Content-Length: 0\r\n\r\n",this.state===n.STATUS_PROCEEDING&&this.transport.send(this.cancel)},i.prototype.receiveResponse=function(t){var r=this,i=t.status_code;if(i>=100&&i<=199)switch(this.state){case n.STATUS_CALLING:this.stateChanged(n.STATUS_PROCEEDING),this.request_sender.receiveResponse(t),this.cancel&&this.transport.send(this.cancel);break;case n.STATUS_PROCEEDING:this.request_sender.receiveResponse(t)}else if(i>=200&&i<=299)switch(this.state){case n.STATUS_CALLING:case n.STATUS_PROCEEDING:this.stateChanged(n.STATUS_ACCEPTED),this.M=e.Timers.setTimeout(r.timer_M.bind(r),e.Timers.TIMER_M),this.request_sender.receiveResponse(t);break;case n.STATUS_ACCEPTED:this.request_sender.receiveResponse(t)}else if(i>=300&&i<=699)switch(this.state){case n.STATUS_CALLING:case n.STATUS_PROCEEDING:this.stateChanged(n.STATUS_COMPLETED),this.sendACK(t),this.request_sender.receiveResponse(t);break;case n.STATUS_COMPLETED:this.sendACK(t)}};var s=function(e,n,r){var i;this.transport=r,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=n,this.logger=e.ua.getLogger("sip.transaction.nict",this.id),i=t(e,r,this.id),this.request.setHeader("via",i)};s.prototype=Object.create(e.EventEmitter.prototype),s.prototype.send=function(){this.transport.send(this.request)||this.onTransportError()},s.prototype.onTransportError=function(){this.logger.log("transport error occurred, for an ACK client transaction "+this.id),this.request_sender.onTransportError()};var o=function(e,t){this.type=n.NON_INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.logger=t.getLogger("sip.transaction.nist",this.id),this.state=n.STATUS_TRYING,t.newTransaction(this)};o.prototype=Object.create(e.EventEmitter.prototype),o.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},o.prototype.timer_J=function(){this.logger.log("Timer J expired for non-INVITE server transaction "+this.id),this.stateChanged(n.STATUS_TERMINATED),this.ua.destroyTransaction(this)},o.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting non-INVITE server transaction "+this.id),e.Timers.clearTimeout(this.J),this.stateChanged(n.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.receiveResponse=function(t,r){var i=this,s=e.Utils.defer();if(100===t)switch(this.state){case n.STATUS_TRYING:this.stateChanged(n.STATUS_PROCEEDING),this.transport.send(r)||this.onTransportError();break;case n.STATUS_PROCEEDING:this.last_response=r,this.transport.send(r)?s.resolve():(this.onTransportError(),s.reject())}else if(t>=200&&t<=699)switch(this.state){case n.STATUS_TRYING:case n.STATUS_PROCEEDING:this.stateChanged(n.STATUS_COMPLETED),this.last_response=r,this.J=e.Timers.setTimeout(i.timer_J.bind(i),e.Timers.TIMER_J),this.transport.send(r)?s.resolve():(this.onTransportError(),s.reject());break;case n.STATUS_COMPLETED:}return s.promise};var a=function(e,t){this.type=n.INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.logger=t.getLogger("sip.transaction.ist",this.id),this.state=n.STATUS_PROCEEDING,t.newTransaction(this),this.resendProvisionalTimer=null,e.reply(100)};a.prototype=Object.create(e.EventEmitter.prototype),a.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},a.prototype.timer_H=function(){this.logger.log("Timer H expired for INVITE server transaction "+this.id),this.state===n.STATUS_COMPLETED&&this.logger.warn("transactions","ACK for INVITE server transaction was never received, call will be terminated"),this.stateChanged(n.STATUS_TERMINATED),this.ua.destroyTransaction(this)},a.prototype.timer_I=function(){this.stateChanged(n.STATUS_TERMINATED),this.ua.destroyTransaction(this)},a.prototype.timer_L=function(){this.logger.log("Timer L expired for INVITE server transaction "+this.id),this.state===n.STATUS_ACCEPTED&&(this.stateChanged(n.STATUS_TERMINATED),this.ua.destroyTransaction(this))},a.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting INVITE server transaction "+this.id),null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),e.Timers.clearTimeout(this.L),e.Timers.clearTimeout(this.H),e.Timers.clearTimeout(this.I),this.stateChanged(n.STATUS_TERMINATED),this.ua.destroyTransaction(this))},a.prototype.resend_provisional=function(){this.transport.send(this.last_response)||this.onTransportError()},a.prototype.receiveResponse=function(t,r){var i=this,s=e.Utils.defer();if(t>=100&&t<=199)switch(this.state){case n.STATUS_PROCEEDING:this.transport.send(r)||this.onTransportError(),this.last_response=r}if(t>100&&t<=199&&this.state===n.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=e.Timers.setInterval(i.resend_provisional.bind(i),e.Timers.PROVISIONAL_RESPONSE_INTERVAL));else if(t>=200&&t<=299)switch(this.state){case n.STATUS_PROCEEDING:this.stateChanged(n.STATUS_ACCEPTED),this.last_response=r,this.L=e.Timers.setTimeout(i.timer_L.bind(i),e.Timers.TIMER_L),null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case n.STATUS_ACCEPTED:this.transport.send(r)?s.resolve():(this.onTransportError(),s.reject())}else if(t>=300&&t<=699)switch(this.state){case n.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(r)?(this.stateChanged(n.STATUS_COMPLETED),this.H=e.Timers.setTimeout(i.timer_H.bind(i),e.Timers.TIMER_H),s.resolve()):(this.onTransportError(),s.reject())}return s.promise};var u=function(t,r){var i;switch(r.method){case e.C.INVITE:if(i=t.transactions.ist[r.via_branch]){switch(i.state){case n.STATUS_PROCEEDING:i.transport.send(i.last_response);break;case n.STATUS_ACCEPTED:}return!0}break;case e.C.ACK:if(i=t.transactions.ist[r.via_branch],!i)return!1;if(i.state===n.STATUS_ACCEPTED)return!1;if(i.state===n.STATUS_COMPLETED)return i.stateChanged(n.STATUS_CONFIRMED),i.I=e.Timers.setTimeout(i.timer_I.bind(i),e.Timers.TIMER_I),!0;break;case e.C.CANCEL:return i=t.transactions.ist[r.via_branch],i?(r.reply_sl(200),i.state!==n.STATUS_PROCEEDING):(r.reply_sl(481),!0);default:if(i=t.transactions.nist[r.via_branch]){switch(i.state){case n.STATUS_TRYING:break;case n.STATUS_PROCEEDING:case n.STATUS_COMPLETED:i.transport.send(i.last_response)}return!0}}};e.Transactions={C:n,checkTransaction:u,NonInviteClientTransaction:r,InviteClientTransaction:i,AckClientTransaction:s,NonInviteServerTransaction:o,InviteServerTransaction:a}}},{}],100:[function(e,t,n){"use strict";t.exports=function(e,t){function n(e){var t=.8*e;return 1e3*(Math.random()*(e-t)+t)}var r,i={STATUS_READY:0,STATUS_DISCONNECTED:1,STATUS_ERROR:2};return r=function(e,t){this.logger=e.getLogger("sip.transport"),this.ua=e,this.ws=null,this.server=t,this.reconnection_attempts=0,this.closed=!1,this.connected=!1,this.reconnectTimer=null,this.lastTransportError={},this.keepAliveInterval=e.configuration.keepAliveInterval,this.keepAliveTimeout=null,this.keepAliveTimer=null,this.ua.transport=this,this.connect()},r.prototype={send:function(e){var n=e.toString();return this.ws&&this.ws.readyState===t.OPEN?(this.ua.configuration.traceSip===!0&&this.logger.log("sending WebSocket message:\n\n"+n+"\n"),this.ws.send(n),!0):(this.logger.warn("unable to send message, WebSocket is not open"),!1)},sendKeepAlive:function(){if(!this.keepAliveTimeout)return this.keepAliveTimeout=e.Timers.setTimeout(function(){this.ua.emit("keepAliveTimeout")}.bind(this),1e4),this.send("\r\n\r\n")},startSendingKeepAlives:function(){this.keepAliveInterval&&!this.keepAliveTimer&&(this.keepAliveTimer=e.Timers.setTimeout(function(){this.sendKeepAlive(),this.keepAliveTimer=null,this.startSendingKeepAlives()}.bind(this),n(this.keepAliveInterval)))},stopSendingKeepAlives:function(){e.Timers.clearTimeout(this.keepAliveTimer),e.Timers.clearTimeout(this.keepAliveTimeout),this.keepAliveTimer=null,this.keepAliveTimeout=null},disconnect:function(){this.ws&&(e.Timers.clearTimeout(this.reconnectTimer),this.stopSendingKeepAlives(),this.closed=!0,this.logger.log("closing WebSocket "+this.server.ws_uri),this.ws.close()),null!==this.reconnectTimer&&(e.Timers.clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.ua.emit("disconnected",{transport:this,code:this.lastTransportError.code,reason:this.lastTransportError.reason}))},connect:function(){var e=this;if(this.ws&&(this.ws.readyState===t.OPEN||this.ws.readyState===t.CONNECTING))return this.logger.log("WebSocket "+this.server.ws_uri+" is already connected"),!1;this.ws&&this.ws.close(),this.logger.log("connecting to WebSocket "+this.server.ws_uri),this.ua.onTransportConnecting(this,0===this.reconnection_attempts?1:this.reconnection_attempts);try{this.ws=new t(this.server.ws_uri,"sip")}catch(e){this.logger.warn("error connecting to WebSocket "+this.server.ws_uri+": "+e)}this.ws.binaryType="arraybuffer",this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(t){e.onClose(t)},this.ws.onmessage=function(t){e.onMessage(t)},this.ws.onerror=function(t){e.onError(t)}},onOpen:function(){this.connected=!0,this.logger.log("WebSocket "+this.server.ws_uri+" connected"),null!==this.reconnectTimer&&(e.Timers.clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnection_attempts=0,this.closed=!1,this.ua.onTransportConnected(this),this.startSendingKeepAlives()},onClose:function(e){var t=this.connected;this.lastTransportError.code=e.code,this.lastTransportError.reason=e.reason,this.stopSendingKeepAlives(),this.reconnection_attempts>0?(this.logger.log("Reconnection attempt "+this.reconnection_attempts+" failed (code: "+e.code+(e.reason?"| reason: "+e.reason:"")+")"),this.reconnect()):(this.connected=!1,this.logger.log("WebSocket disconnected (code: "+e.code+(e.reason?"| reason: "+e.reason:"")+")"),e.wasClean===!1&&this.logger.warn("WebSocket abrupt disconnection"),t===!0?(this.ua.onTransportClosed(this),this.closed?this.ua.emit("disconnected",{transport:this,code:this.lastTransportError.code,reason:this.lastTransportError.reason}):this.reconnect()):this.ua.onTransportError(this))},onMessage:function(t){var n,r,i=t.data;if("\r\n"===i)return e.Timers.clearTimeout(this.keepAliveTimeout),this.keepAliveTimeout=null,void(this.ua.configuration.traceSip===!0&&this.logger.log("received WebSocket message with CRLF Keep Alive response"));if("string"!=typeof i){try{i=String.fromCharCode.apply(null,new Uint8Array(i))}catch(e){return void this.logger.warn("received WebSocket binary message failed to be converted into string, message discarded")}this.ua.configuration.traceSip===!0&&this.logger.log("received WebSocket binary message:\n\n"+i+"\n")}else this.ua.configuration.traceSip===!0&&this.logger.log("received WebSocket text message:\n\n"+i+"\n");if(n=e.Parser.parseMessage(i,this.ua),n&&!(this.ua.status===e.UA.C.STATUS_USER_CLOSED&&n instanceof e.IncomingRequest)&&e.sanityCheck(n,this.ua,this))if(n instanceof e.IncomingRequest)n.transport=this,this.ua.receiveRequest(n);else if(n instanceof e.IncomingResponse)switch(n.method){case e.C.INVITE:r=this.ua.transactions.ict[n.via_branch],r&&r.receiveResponse(n);break;case e.C.ACK:break;default:r=this.ua.transactions.nict[n.via_branch],r&&r.receiveResponse(n)}},onError:function(e){this.logger.warn("WebSocket connection error: "+JSON.stringify(e))},reconnect:function(){var t=this;this.reconnection_attempts+=1,this.reconnection_attempts>this.ua.configuration.wsServerMaxReconnection?(this.logger.warn("maximum reconnection attempts for WebSocket "+this.server.ws_uri),this.ua.onTransportError(this)):1===this.reconnection_attempts?(this.logger.log("Connection to WebSocket "+this.server.ws_uri+" severed, attempting first reconnect"),t.connect()):(this.logger.log("trying to reconnect to WebSocket "+this.server.ws_uri+" (reconnection attempt "+this.reconnection_attempts+")"),this.reconnectTimer=e.Timers.setTimeout(function(){t.connect(),t.reconnectTimer=null},1e3*this.ua.configuration.wsServerReconnectionTimeout))}},r.C=i,r}},{}],101:[function(e,t,r){(function(e){"use strict";t.exports=function(t,n){function r(e){if(e instanceof Function)return e.initialize||(e.initialize=function(){return t.Utils.Promise.resolve()}),e}var i,s={STATUS_INIT:0,STATUS_STARTING:1,STATUS_READY:2,STATUS_USER_CLOSED:3,STATUS_NOT_READY:4,CONFIGURATION_ERROR:1,NETWORK_ERROR:2,ALLOWED_METHODS:["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"],ACCEPTED_BODY_TYPES:["application/sdp","application/dtmf-relay"],MAX_FORWARDS:70,TAG_LENGTH:10};i=function(r){function i(e){return o.emit.bind(o,e)}var o=this;s.ACCEPTED_BODY_TYPES=s.ACCEPTED_BODY_TYPES.toString(),this.log=new t.LoggerFactory,this.logger=this.getLogger("sip.ua"),this.cache={credentials:{}},this.configuration={},this.dialogs={},this.applicants={},this.data={},this.sessions={},this.subscriptions={},this.transport=null,this.contact=null,this.status=s.STATUS_INIT,this.error=null,this.transactions={nist:{},nict:{},ist:{},ict:{}},this.transportRecoverAttempts=0,this.transportRecoveryTimer=null,Object.defineProperties(this,{transactionsCount:{get:function(){var e,t=["nist","nict","ist","ict"],n=0;for(e in t)n+=Object.keys(this.transactions[t[e]]).length;return n}},nictTransactionsCount:{get:function(){return Object.keys(this.transactions.nict).length}},nistTransactionsCount:{get:function(){return Object.keys(this.transactions.nist).length}},ictTransactionsCount:{get:function(){return Object.keys(this.transactions.ict).length}},istTransactionsCount:{get:function(){return Object.keys(this.transactions.ist).length}}}),void 0===r?r={}:("string"==typeof r||r instanceof String)&&(r={uri:r}),r.log&&(r.log.hasOwnProperty("builtinEnabled")&&(this.log.builtinEnabled=r.log.builtinEnabled),r.log.hasOwnProperty("level")&&(this.log.level=r.log.level),r.log.hasOwnProperty("connector")&&(this.log.connector=r.log.connector));try{this.loadConfig(r)}catch(e){throw this.status=s.STATUS_NOT_READY,this.error=s.CONFIGURATION_ERROR,e}this.registerContext=new t.RegisterContext(this),this.registerContext.on("failed",i("registrationFailed")),this.registerContext.on("registered",i("registered")),this.registerContext.on("unregistered",i("unregistered")),this.configuration.autostart&&this.start(),"function"==typeof n.addEventListener&&(e.chrome&&e.chrome.app&&e.chrome.app.runtime||n.addEventListener("unload",this.stop.bind(this)))},i.prototype=Object.create(t.EventEmitter.prototype),i.prototype.register=function(e){return this.configuration.register=!0,this.registerContext.register(e),this},i.prototype.unregister=function(e){this.configuration.register=!1;var t=this.registerContext;return this.afterConnected(t.unregister.bind(t,e)),this},i.prototype.isRegistered=function(){return this.registerContext.registered},i.prototype.isConnected=function(){return!!this.transport&&this.transport.connected},i.prototype.afterConnected=function(e){this.isConnected()?e():this.once("connected",e)},i.prototype.invite=function(e,n){var r=new t.InviteClientContext(this,e,n);return this.afterConnected(r.invite.bind(r)),r},i.prototype.subscribe=function(e,n,r){var i=new t.Subscription(this,e,n,r);return this.afterConnected(i.subscribe.bind(i)),i},i.prototype.message=function(e,n,r){if(void 0===n)throw new TypeError("Not enough arguments");return r=Object.create(r||Object.prototype),r.contentType||(r.contentType="text/plain"),r.body=n,this.request(t.C.MESSAGE,e,r)},i.prototype.request=function(e,n,r){var i=new t.ClientContext(this,e,n,r);return this.afterConnected(i.send.bind(i)),i},i.prototype.stop=function(){function e(){0===o.nistTransactionsCount&&0===o.nictTransactionsCount&&(o.removeListener("transactionDestroyed",e),o.transport.disconnect())}var n,r,i,o=this;if(this.logger.log("user requested closure..."),this.status===s.STATUS_USER_CLOSED)return this.logger.warn("UA already closed"),this;t.Timers.clearTimeout(this.transportRecoveryTimer),this.logger.log("closing registerContext"),this.registerContext.close();for(n in this.sessions)this.logger.log("closing session "+n),this.sessions[n].terminate();for(r in this.subscriptions)this.logger.log("unsubscribing from subscription "+r),this.subscriptions[r].close();for(i in this.applicants)this.applicants[i].close();return this.status=s.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount?this.transport.disconnect():this.on("transactionDestroyed",e),this},i.prototype.start=function(){var e;return this.logger.log("user requested startup..."),this.status===s.STATUS_INIT?(e=this.getNextWsServer(),this.status=s.STATUS_STARTING,new t.Transport(this,e)):this.status===s.STATUS_USER_CLOSED?(this.logger.log("resuming"),this.status=s.STATUS_READY,this.transport.connect()):this.status===s.STATUS_STARTING?this.logger.log("UA is in STARTING status, not opening new connection"):this.status===s.STATUS_READY?this.logger.log("UA is in READY status, not resuming"):this.logger.error("Connection is down. Auto-Recovery system is trying to connect"),this},i.prototype.normalizeTarget=function(e){return t.Utils.normalizeTarget(e,this.configuration.hostportParams)},i.prototype.saveCredentials=function(e){return this.cache.credentials[e.realm]=this.cache.credentials[e.realm]||{},this.cache.credentials[e.realm][e.uri]=e,this},i.prototype.getCredentials=function(e){var t,n;return t=e.ruri.host,this.cache.credentials[t]&&this.cache.credentials[t][e.ruri]&&(n=this.cache.credentials[t][e.ruri],n.method=e.method),n},i.prototype.getLogger=function(e,t){return this.log.getLogger(e,t)},i.prototype.onTransportClosed=function(e){var n,r,i,s=["nict","ict","nist","ist"];for(e.server.status=t.Transport.C.STATUS_DISCONNECTED,this.logger.log("connection state set to "+t.Transport.C.STATUS_DISCONNECTED),i=s.length,n=0;n<i;n++)for(r in this.transactions[s[n]])this.transactions[s[n]][r].onTransportError();this.contact.pub_gruu||this.closeSessionsOnTransportError()},i.prototype.onTransportError=function(e){var n;this.logger.log("transport "+e.server.ws_uri+" failed | connection state set to "+t.Transport.C.STATUS_ERROR),e.server.status=t.Transport.C.STATUS_ERROR,this.emit("disconnected",{transport:e}),this.status!==s.STATUS_USER_CLOSED&&(n=this.getNextWsServer(),n?new t.Transport(this,n):(this.closeSessionsOnTransportError(),this.error&&this.error===s.NETWORK_ERROR||(this.status=s.STATUS_NOT_READY,this.error=s.NETWORK_ERROR),this.recoverTransport()))},i.prototype.onTransportConnected=function(e){this.transport=e,this.transportRecoverAttempts=0,e.server.status=t.Transport.C.STATUS_READY,this.logger.log("connection state set to "+t.Transport.C.STATUS_READY),this.status!==s.STATUS_USER_CLOSED&&(this.status=s.STATUS_READY,this.error=null,this.configuration.register&&this.configuration.authenticationFactory.initialize().then(function(){this.registerContext.onTransportConnected()}.bind(this)),this.emit("connected",{transport:e}))},i.prototype.onTransportConnecting=function(e,t){this.emit("connecting",{transport:e,attempts:t})},i.prototype.newTransaction=function(e){this.transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})},i.prototype.destroyTransaction=function(e){delete this.transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})},i.prototype.receiveRequest=function(e){function n(t){return t&&t.user===e.ruri.user}var r,i,o,a,u,c=e.method,l=this;if(!(n(this.configuration.uri)||n(this.contact.uri)||n(this.contact.pub_gruu)||n(this.contact.temp_gruu)))return this.logger.warn("Request-URI does not point to us"),void(e.method!==t.C.ACK&&e.reply_sl(404));if(e.ruri.scheme===t.C.SIPS)return void e.reply_sl(416);if(!t.Transactions.checkTransaction(this,e))if(c===t.C.OPTIONS?(new t.Transactions.NonInviteServerTransaction(e,this),e.reply(200,null,["Allow: "+t.UA.C.ALLOWED_METHODS.toString(),"Accept: "+s.ACCEPTED_BODY_TYPES])):c===t.C.MESSAGE?(o=new t.ServerContext(this,e),o.body=e.body,o.content_type=e.getHeader("Content-Type")||"text/plain",e.reply(200,null),this.emit("message",o)):c!==t.C.INVITE&&c!==t.C.ACK&&new t.ServerContext(this,e),e.to_tag)r=this.findDialog(e),r?(c===t.C.INVITE&&new t.Transactions.InviteServerTransaction(e,this),r.receiveRequest(e)):c===t.C.NOTIFY?(i=this.findSession(e),i?i.receiveRequest(e):(this.logger.warn("received NOTIFY request for a non existent session"),e.reply(481,"Subscription does not exist"))):c!==t.C.ACK&&e.reply(481);else switch(c){case t.C.INVITE:if(a=this.configuration.replaces!==t.C.supported.UNSUPPORTED&&e.parseHeader("replaces")){if(u=this.dialogs[a.call_id+a.replaces_to_tag+a.replaces_from_tag],!u)return void e.reply_sl(481,null);if(u.owner.status===t.Session.C.STATUS_TERMINATED)return void e.reply_sl(603,null);if(u.state===t.Dialog.C.STATUS_CONFIRMED&&a.early_only)return void e.reply_sl(486,null)}var d=this.configuration.mediaHandlerFactory.isSupported;!d||d()?(i=new t.InviteServerContext(this,e),i.replacee=u&&u.owner,i.on("invite",function(){l.emit("invite",this)})):(this.logger.warn("INVITE received but WebRTC is not supported"),e.reply(488));break;case t.C.BYE:e.reply(481);break;case t.C.CANCEL:i=this.findSession(e),i?i.receiveRequest(e):this.logger.warn("received CANCEL request for a non existent session");break;case t.C.ACK:break;case t.C.NOTIFY:this.configuration.allowLegacyNotifications&&this.listeners("notify").length>0?(e.reply(200,null),l.emit("notify",{request:e})):e.reply(481,"Subscription does not exist");break;default:e.reply(405)}},i.prototype.findSession=function(e){return this.sessions[e.call_id+e.from_tag]||this.sessions[e.call_id+e.to_tag]||null},i.prototype.findDialog=function(e){return this.dialogs[e.call_id+e.from_tag+e.to_tag]||this.dialogs[e.call_id+e.to_tag+e.from_tag]||null},i.prototype.getNextWsServer=function(){var e,n,r,i=[];for(n=this.configuration.wsServers.length,e=0;e<n;e++)r=this.configuration.wsServers[e],r.status!==t.Transport.C.STATUS_ERROR&&(0===i.length?i.push(r):r.weight>i[0].weight?i=[r]:r.weight===i[0].weight&&i.push(r));return e=Math.floor(Math.random()*i.length),i[e]},i.prototype.closeSessionsOnTransportError=function(){var e;for(e in this.sessions)this.sessions[e].onTransportError();this.registerContext.onTransportClosed()},i.prototype.recoverTransport=function(e){var n,r,i,s,o,a;for(e=e||this,o=e.transportRecoverAttempts,r=e.configuration.wsServers.length,n=0;n<r;n++)e.configuration.wsServers[n].status=0;a=e.getNextWsServer(),i=Math.floor(Math.random()*Math.pow(2,o)+1),s=i*e.configuration.connectionRecoveryMinInterval,s>e.configuration.connectionRecoveryMaxInterval&&(this.logger.log("time for next connection attempt exceeds connectionRecoveryMaxInterval, resetting counter"),s=e.configuration.connectionRecoveryMinInterval,o=0),this.logger.log("next connection attempt in "+s+" seconds"),this.transportRecoveryTimer=t.Timers.setTimeout(function(){e.transportRecoverAttempts=o+1,new t.Transport(e,a)},1e3*s)},i.prototype.loadConfig=function(e){function n(t,n){var r=t.replace(/([a-z][A-Z])/g,function(e){return e[0]+"_"+e[1].toLowerCase()});if(t!==r){var i=e.hasOwnProperty(t);e.hasOwnProperty(r)&&(n.warn(r+" is deprecated, please use "+t),i&&n.warn(t+" overriding "+r)),e[t]=i?e[t]:e[r]}}var s,o,a,u,c,l={viaHost:t.Utils.createRandomToken(12)+".invalid",uri:new t.URI("sip","anonymous."+t.Utils.createRandomToken(6),"anonymous.invalid",null,null),wsServers:[{scheme:"WSS",sip_uri:"<sip:edge.sip.onsip.com;transport=ws;lr>",status:0,weight:0,ws_uri:"wss://edge.sip.onsip.com"}],password:null,registerExpires:600,register:!0,registrarServer:null,wsServerMaxReconnection:3,wsServerReconnectionTimeout:4,connectionRecoveryMinInterval:2,connectionRecoveryMaxInterval:30,keepAliveInterval:0,extraSupported:[],usePreloadedRoute:!1,userAgentString:t.C.USER_AGENT,iceCheckingTimeout:5e3,noAnswerTimeout:60,stunServers:["stun:stun.l.google.com:19302"],turnServers:[],traceSip:!1,hackViaTcp:!1,hackIpInContact:!1,hackWssInTransport:!1,hackAllowUnregisteredOptionTags:!1,hackCleanJitsiSdpImageattr:!1,hackStripTcp:!1,contactTransport:"ws",forceRport:!1,autostart:!0,rel100:t.C.supported.UNSUPPORTED,replaces:t.C.supported.UNSUPPORTED,mediaHandlerFactory:t.WebRTC.MediaHandler.defaultFactory,authenticationFactory:r(function(e){return new t.DigestAuthentication(e)}),allowLegacyNotifications:!1};for(s in i.configuration_check.mandatory){if(n(s,this.logger),!e.hasOwnProperty(s))throw new t.Exceptions.ConfigurationError(s);if(o=e[s],a=i.configuration_check.mandatory[s](o),void 0===a)throw new t.Exceptions.ConfigurationError(s,o);l[s]=a}t.Utils.optionsOverride(e,"rel100","reliable",!0,this.logger,t.C.supported.UNSUPPORTED);var d=["stunServers","turnServers"];for(s in i.configuration_check.optional)if(n(s,this.logger),e.hasOwnProperty(s)){if(o=e[s],o instanceof Array&&0===o.length&&d.indexOf(s)<0)continue;if(null===o||""===o||void 0===o)continue;if("number"==typeof o&&isNaN(o))continue;if(a=i.configuration_check.optional[s](o),void 0===a)throw new t.Exceptions.ConfigurationError(s,o);l[s]=a}if(l.connectionRecoveryMaxInterval<l.connectionRecoveryMinInterval)throw new t.Exceptions.ConfigurationError("connectionRecoveryMaxInterval",l.connectionRecoveryMaxInterval);0===l.displayName&&(l.displayName="0"),l.instanceId||(l.instanceId=t.Utils.newUUID()),l.sipjsId=t.Utils.createRandomToken(5),u=l.uri.clone(),u.user=null,l.hostportParams=u.toRaw().replace(/^sip:/i,""),l.authorizationUser||(l.authorizationUser=l.uri.user),l.registrarServer||(c=l.uri.clone(),c.user=null,l.registrarServer=c),l.noAnswerTimeout=1e3*l.noAnswerTimeout,l.hackIpInContact&&("boolean"==typeof l.hackIpInContact?l.viaHost=t.Utils.getRandomTestNetIP():"string"==typeof l.hackIpInContact&&(l.viaHost=l.hackIpInContact)),l.hackWssInTransport&&(l.contactTransport="wss"),this.contact={pub_gruu:null,temp_gruu:null,uri:new t.URI("sip",t.Utils.createRandomToken(8),l.viaHost,null,{transport:l.contactTransport}),toString:function(e){e=e||{};var t=e.anonymous||null,n=e.outbound||null,r="<";return r+=t?(this.temp_gruu||"sip:anonymous@anonymous.invalid;transport="+l.contactTransport).toString():(this.pub_gruu||this.uri).toString(),n&&(r+=";ob"),r+=">"}},t.Utils.optionsOverride(l,"media","mediaConstraints",!0,this.logger);for(s in l)i.configuration_skeleton[s].value=l[s];Object.defineProperties(this.configuration,i.configuration_skeleton);for(s in l)i.configuration_skeleton[s].value="";this.logger.log("configuration parameters after validation:");for(s in l)switch(s){case"uri":case"registrarServer":case"mediaHandlerFactory":this.logger.log(" "+s+": "+l[s]);break;case"password":this.logger.log(" "+s+": NOT SHOWN");break;default:this.logger.log(" "+s+": "+JSON.stringify(l[s]))}},i.configuration_skeleton=function(){var e,t,n={},r=["sipjsId","hostportParams","uri","wsServers","authorizationUser","connectionRecoveryMaxInterval","connectionRecoveryMinInterval","keepAliveInterval","extraSupported","displayName","hackViaTcp","hackIpInContact","hackWssInTransport","hackAllowUnregisteredOptionTags","hackCleanJitsiSdpImageattr","hackStripTcp","contactTransport","forceRport","iceCheckingTimeout","instanceId","noAnswerTimeout","password","registerExpires","registrarServer","reliable","rel100","replaces","userAgentString","autostart","stunServers","traceSip","turnServers","usePreloadedRoute","wsServerMaxReconnection","wsServerReconnectionTimeout","mediaHandlerFactory","media","mediaConstraints","authenticationFactory","allowLegacyNotifications","via_core_value","viaHost"];for(e in r)t=r[e],n[t]={value:"",writable:!1,configurable:!1};return n.register={value:"",writable:!0,configurable:!1},n}(),i.configuration_check={mandatory:{},optional:{uri:function(e){var n;return/^sip:/i.test(e)||(e=t.C.SIP+":"+e),n=t.URI.parse(e),n&&n.user?n:void 0},wsServers:function(e){var n,r,i;if("string"==typeof e)e=[{ws_uri:e}];else{if(!(e instanceof Array))return;for(r=e.length,n=0;n<r;n++)"string"==typeof e[n]&&(e[n]={ws_uri:e[n]})}if(0===e.length)return!1;for(r=e.length,n=0;n<r;n++){if(!e[n].ws_uri)return;if(e[n].weight&&!Number(e[n].weight))return;if(i=t.Grammar.parse(e[n].ws_uri,"absoluteURI"),i===-1)return;if(["wss","ws","udp"].indexOf(i.scheme)<0)return;e[n].sip_uri="<sip:"+i.host+(i.port?":"+i.port:"")+";transport="+i.scheme.replace(/^wss$/i,"ws")+";lr>",e[n].weight||(e[n].weight=0),e[n].status=0,e[n].scheme=i.scheme.toUpperCase()}return e},authorizationUser:function(e){return t.Grammar.parse('"'+e+'"',"quoted_string")===-1?void 0:e},connectionRecoveryMaxInterval:function(e){var n;if(t.Utils.isDecimal(e)&&(n=Number(e),n>0))return n},connectionRecoveryMinInterval:function(e){var n;if(t.Utils.isDecimal(e)&&(n=Number(e),n>0))return n},displayName:function(e){return t.Grammar.parse('"'+e+'"',"displayName")===-1?void 0:e},hackViaTcp:function(e){if("boolean"==typeof e)return e},hackIpInContact:function(e){return"boolean"==typeof e?e:"string"==typeof e&&t.Grammar.parse(e,"host")!==-1?e:void 0},iceCheckingTimeout:function(e){if(t.Utils.isDecimal(e))return Math.max(500,e)},hackWssInTransport:function(e){if("boolean"==typeof e)return e},hackAllowUnregisteredOptionTags:function(e){if("boolean"==typeof e)return e},hackCleanJitsiSdpImageattr:function(e){if("boolean"==typeof e)return e},hackStripTcp:function(e){if("boolean"==typeof e)return e},contactTransport:function(e){if("string"==typeof e)return e},forceRport:function(e){if("boolean"==typeof e)return e},instanceId:function(e){if("string"==typeof e)return/^uuid:/i.test(e)&&(e=e.substr(5)),t.Grammar.parse(e,"uuid")===-1?void 0:e},keepAliveInterval:function(e){var n;if(t.Utils.isDecimal(e)&&(n=Number(e),n>0))return n},extraSupported:function(e){var t,n;if(e instanceof Array){for(n=e.length,t=0;t<n;t++)if("string"!=typeof e[t])return;return e}},noAnswerTimeout:function(e){var n;if(t.Utils.isDecimal(e)&&(n=Number(e),n>0))return n},password:function(e){return String(e)},rel100:function(e){return e===t.C.supported.REQUIRED?t.C.supported.REQUIRED:e===t.C.supported.SUPPORTED?t.C.supported.SUPPORTED:t.C.supported.UNSUPPORTED},replaces:function(e){return e===t.C.supported.REQUIRED?t.C.supported.REQUIRED:e===t.C.supported.SUPPORTED?t.C.supported.SUPPORTED:t.C.supported.UNSUPPORTED},register:function(e){if("boolean"==typeof e)return e},registerExpires:function(e){var n;if(t.Utils.isDecimal(e)&&(n=Number(e),n>0))return n},registrarServer:function(e){var n;if("string"==typeof e)return/^sip:/i.test(e)||(e=t.C.SIP+":"+e),n=t.URI.parse(e),n?n.user?void 0:n:void 0},stunServers:function(e){var n,r,i;if("string"==typeof e)e=[e];else if(!(e instanceof Array))return;for(r=e.length,n=0;n<r;n++){if(i=e[n],/^stuns?:/.test(i)||(i="stun:"+i),t.Grammar.parse(i,"stun_URI")===-1)return;e[n]=i}return e},traceSip:function(e){if("boolean"==typeof e)return e},turnServers:function(e){var n,r,i,s,o,a;for(e instanceof Array||(e=[e]),i=e.length,n=0;n<i;n++){if(s=e[n],s.server&&(s.urls=[s.server]),!s.urls||!s.username||!s.password)return;for(s.urls instanceof Array?o=s.urls.length:(s.urls=[s.urls],o=1),r=0;r<o;r++)if(a=s.urls[r],/^turns?:/.test(a)||(a="turn:"+a),t.Grammar.parse(a,"turn_URI")===-1)return}return e},userAgentString:function(e){if("string"==typeof e)return e},usePreloadedRoute:function(e){if("boolean"==typeof e)return e},wsServerMaxReconnection:function(e){var n;if(t.Utils.isDecimal(e)&&(n=Number(e),n>0))return n},wsServerReconnectionTimeout:function(e){var n;if(t.Utils.isDecimal(e)&&(n=Number(e),n>0))return n},autostart:function(e){if("boolean"==typeof e)return e},mediaHandlerFactory:function(e){if(e instanceof Function){var n=function(){function n(e){if(r[e].length>1){var n="getDescription"===e;r[e]=t.Utils.promisify(r,e,n)}}var r=e.apply(this,arguments);return n("getDescription"),n("setDescription"),r};return n.isSupported=e.isSupported,n}},authenticationFactory:r,allowLegacyNotifications:function(e){if("boolean"==typeof e)return e}}},i.C=s,t.UA=i}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],102:[function(e,t,n){"use strict";t.exports=function(e){var t;t=function(t,n,r,i,s,o){var a,u,c,l;if(!r)throw new TypeError('missing or invalid "host" parameter');t=t||e.C.SIP,this.parameters={},this.headers={};for(a in s)this.setParam(a,s[a]);for(u in o)this.setHeader(u,o[u]);c={scheme:t,user:n,host:r,port:i},l={scheme:t.toLowerCase(),user:n,host:r.toLowerCase(),port:i},Object.defineProperties(this,{_normal:{get:function(){return l}},_raw:{get:function(){return c}},scheme:{get:function(){return l.scheme},set:function(e){c.scheme=e,l.scheme=e.toLowerCase()}},user:{get:function(){return l.user},set:function(e){l.user=c.user=e}},host:{get:function(){return l.host},set:function(e){c.host=e,l.host=e.toLowerCase()}},aor:{get:function(){return l.user+"@"+l.host}},port:{get:function(){return l.port},set:function(e){l.port=c.port=0===e?e:parseInt(e,10)||null}}})},t.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]=void 0===t||null===t?null:t.toString().toLowerCase())},getParam:function(e){if(e)return this.parameters[e.toLowerCase()]},hasParam:function(e){if(e)return this.parameters.hasOwnProperty(e.toLowerCase())&&!0||!1},deleteParam:function(e){var t;if(e=e.toLowerCase(),this.parameters.hasOwnProperty(e))return t=this.parameters[e],delete this.parameters[e],t},clearParams:function(){this.parameters={}},setHeader:function(t,n){this.headers[e.Utils.headerize(t)]=n instanceof Array?n:[n]},getHeader:function(t){if(t)return this.headers[e.Utils.headerize(t)]},hasHeader:function(t){if(t)return this.headers.hasOwnProperty(e.Utils.headerize(t))&&!0||!1},deleteHeader:function(t){var n;if(t=e.Utils.headerize(t),this.headers.hasOwnProperty(t))return n=this.headers[t],delete this.headers[t],n},clearHeaders:function(){this.headers={}},clone:function(){return new t(this._raw.scheme,this._raw.user,this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},toRaw:function(){return this._toString(this._raw)},toString:function(){return this._toString(this._normal)},_toString:function(t){var n,r,i,s,o=[];s=t.scheme+":",t.scheme.toLowerCase().match("^sips?$")||(s+="//"),t.user&&(s+=e.Utils.escapeUser(t.user)+"@"),s+=t.host,(t.port||0===t.port)&&(s+=":"+t.port);for(r in this.parameters)s+=";"+r,null!==this.parameters[r]&&(s+="="+this.parameters[r]);for(n in this.headers)for(i in this.headers[n])o.push(n+"="+this.headers[n][i]);return o.length>0&&(s+="?"+o.join("&")),s}},t.parse=function(t){return t=e.Grammar.parse(t,"SIP_URI"),t!==-1?t:void 0},e.URI=t}},{}],103:[function(e,t,n){"use strict";t.exports=function(e,t){var n;n={Promise:t.Promise,defer:function(){var e={};return e.promise=new n.Promise(function(t,n){e.resolve=t,e.reject=n}),e},promisify:function(e,t,r){var i=e[t];return function(t,s,o){return new n.Promise(function(n,s){var o=[t,n,s];r&&(o=[n,s,t]),i.apply(e,o)}).then(s,o)}},augment:function(e,t,n,r){var i,s;s=t.prototype;for(i in s)(r||void 0===e[i])&&(e[i]=s[i]);t.apply(e,n)},optionsOverride:function(e,t,n,r,i,s){r&&e[n]&&i.warn(n+" is deprecated, please use "+t+" instead"),e[t]&&e[n]&&i.warn(t+" overriding "+n),e[t]=e[t]||e[n]||s},str_utf8_length:function(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length},generateFakeSDP:function(e){if(e){var t=e.indexOf("o="),n=e.indexOf("\r\n",t);return"v=0\r\n"+e.slice(t,n)+"\r\ns=-\r\nt=0 0\r\nc=IN IP4 0.0.0.0"}},isFunction:function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)},isDecimal:function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},createRandomToken:function(e,t){var n,r,i="";for(t=t||32,n=0;n<e;n++)r=Math.random()*t|0,i+=r.toString(t);return i},newTag:function(){return e.Utils.createRandomToken(e.UA.C.TAG_LENGTH)},newUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},hostType:function(t){if(t)return t=e.Grammar.parse(t,"host"),t!==-1?t.host_type:void 0},normalizeTarget:function(t,n){var r,i,s,o;if(t){if(t instanceof e.URI)return t;if("string"==typeof t){switch(i=t.split("@"),i.length){case 1:if(!n)return;s=t,o=n;break;case 2:s=i[0],o=i[1];break;default:s=i.slice(0,i.length-1).join("@"),o=i[i.length-1]}return s=s.replace(/^(sips?|tel):/i,""),/^[\-\.\(\)]*\+?[0-9\-\.\(\)]+$/.test(s)&&(s=s.replace(/[\-\.\(\)]/g,"")),t=e.C.SIP+":"+e.Utils.escapeUser(s)+"@"+o,(r=e.URI.parse(t))?r:void 0}}else;},escapeUser:function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},headerize:function(e){var t,n={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),i="",s=r.length;for(t=0;t<s;t++)0!==t&&(i+="-"),i+=r[t].charAt(0).toUpperCase()+r[t].substring(1);return n[i]&&(i=n[i]),i},sipErrorCause:function(t){var n;for(n in e.C.SIP_ERROR_CAUSES)if(e.C.SIP_ERROR_CAUSES[n].indexOf(t)!==-1)return e.C.causes[n];return e.C.causes.SIP_FAILURE_CODE},getReasonPhrase:function(t,n){return n||e.C.REASON_PHRASE[t]||""},getReasonHeaderValue:function(t,n){return n=e.Utils.getReasonPhrase(t,n),"SIP ;cause="+t+' ;text="'+n+'"'},getCancelReason:function(t,n){if(t&&t<200||t>699)throw new TypeError("Invalid status_code: "+t);if(t)return e.Utils.getReasonHeaderValue(t,n)},buildStatusLine:function(e,t){if(e=e||null,t=t||null,!e||e<100||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);return t=n.getReasonPhrase(e,t),"SIP/2.0 "+e+" "+t+"\r\n"},getRandomTestNetIP:function(){function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return"192.0.2."+e(1,254)},calculateMD5:function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,s,o;return i=2147483648&e,s=2147483648&t,n=1073741824&e,r=1073741824&t,o=(1073741823&e)+(1073741823&t),n&r?2147483648^o^i^s:n|r?1073741824&o?3221225472^o^i^s:1073741824^o^i^s:o^i^s}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function s(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function a(e,i,s,o,a,u,c){return e=n(e,n(n(r(i,s,o),a),c)),n(t(e,u),i)}function u(e,r,s,o,a,u,c){return e=n(e,n(n(i(r,s,o),a),c)),n(t(e,u),r)}function c(e,r,i,o,a,u,c){return e=n(e,n(n(s(r,i,o),a),c)),n(t(e,u),r)}function l(e,r,i,s,a,u,c){return e=n(e,n(n(o(r,i,s),a),c)),n(t(e,u),r)}function d(e){for(var t,n=e.length,r=n+8,i=(r-r%64)/64,s=16*(i+1),o=Array(s-1),a=0,u=0;u<n;)t=(u-u%4)/4,a=u%4*8,o[t]=o[t]|e.charCodeAt(u)<<a,u++;return t=(u-u%4)/4,a=u%4*8,o[t]=o[t]|128<<a,o[s-2]=n<<3,o[s-1]=n>>>29,o}function h(e){var t,n,r="",i="";for(n=0;n<=3;n++)t=e>>>8*n&255,i="0"+t.toString(16),r+=i.substr(i.length-2,2);return r}function f(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var p,m,_,g,v,y,b,T,k,w=[],M=7,S=12,L=17,E=22,C=5,x=9,D=14,j=20,R=4,A=11,Y=16,I=23,P=6,O=10,N=15,H=21;for(e=f(e),w=d(e),y=1732584193,b=4023233417,T=2562383102,k=271733878,p=0;p<w.length;p+=16)m=y,_=b,g=T,v=k,y=a(y,b,T,k,w[p+0],M,3614090360),k=a(k,y,b,T,w[p+1],S,3905402710),T=a(T,k,y,b,w[p+2],L,606105819),b=a(b,T,k,y,w[p+3],E,3250441966),y=a(y,b,T,k,w[p+4],M,4118548399),k=a(k,y,b,T,w[p+5],S,1200080426),T=a(T,k,y,b,w[p+6],L,2821735955),b=a(b,T,k,y,w[p+7],E,4249261313),y=a(y,b,T,k,w[p+8],M,1770035416),k=a(k,y,b,T,w[p+9],S,2336552879),T=a(T,k,y,b,w[p+10],L,4294925233),b=a(b,T,k,y,w[p+11],E,2304563134),y=a(y,b,T,k,w[p+12],M,1804603682),k=a(k,y,b,T,w[p+13],S,4254626195),T=a(T,k,y,b,w[p+14],L,2792965006),b=a(b,T,k,y,w[p+15],E,1236535329),y=u(y,b,T,k,w[p+1],C,4129170786),k=u(k,y,b,T,w[p+6],x,3225465664),T=u(T,k,y,b,w[p+11],D,643717713),b=u(b,T,k,y,w[p+0],j,3921069994),y=u(y,b,T,k,w[p+5],C,3593408605),k=u(k,y,b,T,w[p+10],x,38016083),T=u(T,k,y,b,w[p+15],D,3634488961),b=u(b,T,k,y,w[p+4],j,3889429448),y=u(y,b,T,k,w[p+9],C,568446438),k=u(k,y,b,T,w[p+14],x,3275163606),T=u(T,k,y,b,w[p+3],D,4107603335),b=u(b,T,k,y,w[p+8],j,1163531501),y=u(y,b,T,k,w[p+13],C,2850285829),k=u(k,y,b,T,w[p+2],x,4243563512),T=u(T,k,y,b,w[p+7],D,1735328473),b=u(b,T,k,y,w[p+12],j,2368359562),y=c(y,b,T,k,w[p+5],R,4294588738),k=c(k,y,b,T,w[p+8],A,2272392833),T=c(T,k,y,b,w[p+11],Y,1839030562),b=c(b,T,k,y,w[p+14],I,4259657740),y=c(y,b,T,k,w[p+1],R,2763975236),k=c(k,y,b,T,w[p+4],A,1272893353),T=c(T,k,y,b,w[p+7],Y,4139469664),b=c(b,T,k,y,w[p+10],I,3200236656),y=c(y,b,T,k,w[p+13],R,681279174),k=c(k,y,b,T,w[p+0],A,3936430074),T=c(T,k,y,b,w[p+3],Y,3572445317),b=c(b,T,k,y,w[p+6],I,76029189),y=c(y,b,T,k,w[p+9],R,3654602809),k=c(k,y,b,T,w[p+12],A,3873151461),T=c(T,k,y,b,w[p+15],Y,530742520),b=c(b,T,k,y,w[p+2],I,3299628645),y=l(y,b,T,k,w[p+0],P,4096336452),k=l(k,y,b,T,w[p+7],O,1126891415),T=l(T,k,y,b,w[p+14],N,2878612391),b=l(b,T,k,y,w[p+5],H,4237533241),y=l(y,b,T,k,w[p+12],P,1700485571),k=l(k,y,b,T,w[p+3],O,2399980690),T=l(T,k,y,b,w[p+10],N,4293915773),b=l(b,T,k,y,w[p+1],H,2240044497),y=l(y,b,T,k,w[p+8],P,1873313359),k=l(k,y,b,T,w[p+15],O,4264355552),T=l(T,k,y,b,w[p+6],N,2734768916),b=l(b,T,k,y,w[p+13],H,1309151649),y=l(y,b,T,k,w[p+4],P,4149444226),k=l(k,y,b,T,w[p+11],O,3174756917),T=l(T,k,y,b,w[p+2],N,718787259),b=l(b,T,k,y,w[p+9],H,3951481745),y=n(y,m),b=n(b,_),T=n(T,g),k=n(k,v);return(h(y)+h(b)+h(T)+h(k)).toLowerCase()}},e.Utils=n}},{}],104:[function(e,t,n){"use strict";t.exports=function(t,n){var r;r={},r.MediaHandler=e("./WebRTC/MediaHandler")(t),r.MediaStreamManager=e("./WebRTC/MediaStreamManager")(t,n);var i;return r.isSupported=function(){return void 0!==i?i:(r.MediaStream=n.MediaStream,r.getUserMedia=n.getUserMedia,r.RTCPeerConnection=n.RTCPeerConnection,r.RTCSessionDescription=n.RTCSessionDescription,r.RTCPeerConnection&&r.RTCSessionDescription?(r.getUserMedia&&(r.getUserMedia=t.Utils.promisify(n,"getUserMedia")),i=!0):i=!1,i)},r}},{"./WebRTC/MediaHandler":105,"./WebRTC/MediaStreamManager":106}],105:[function(e,t,n){"use strict";t.exports=function(e){var t=function(t,n){function r(e,t){e.mediaStreamManager.on&&e.mediaStreamManager.on(t,function(){e.emit.apply(e,[t].concat(Array.prototype.slice.call(arguments)))})}n=n||{},this.logger=t.ua.getLogger("sip.invitecontext.mediahandler",t.id),this.session=t,this.localMedia=null,this.ready=!0,this.mediaStreamManager=n.mediaStreamManager||new e.WebRTC.MediaStreamManager(this.logger),this.audioMuted=!1,this.videoMuted=!1,this.local_hold=!1,this.remote_hold=!1;var i=this.prepareIceServers(n.stunServers,n.turnServers);this.RTCConstraints=n.RTCConstraints||{},this.initPeerConnection(i),r(this,"userMediaRequest"),r(this,"userMedia"),r(this,"userMediaFailed")};return t.defaultFactory=function(e,n){return new t(e,n)},t.defaultFactory.isSupported=function(){return e.WebRTC.isSupported()},t.prototype=Object.create(e.MediaHandler.prototype,{isReady:{writable:!0,value:function(){return this.ready}},close:{writable:!0,value:function(){this.logger.log("closing PeerConnection"),this._remoteStreams=[],this.peerConnection&&"closed"!==this.peerConnection.signalingState&&(this.peerConnection.close(),this.localMedia&&this.mediaStreamManager.release(this.localMedia))}},getDescription:{writable:!0,value:function(t){var n=this,r=n.mediaStreamManager.acquire;r.length>1&&(r=e.Utils.promisify(this.mediaStreamManager,"acquire",!0)),t=t||{},t.dataChannel===!0&&(t.dataChannel={}),this.mediaHint=t;var i;return n.localMedia?(n.logger.log("already have local media"),i=e.Utils.Promise.resolve(n.localMedia)):(n.logger.log("acquiring local media"),i=r.call(n.mediaStreamManager,t).then(function(e){return n.logger.log("acquired local media streams"),n.localMedia=e,n.session.connecting(),e},function(e){throw n.logger.error("unable to acquire streams"),n.logger.error(e),n.session.connecting(),e}).then(this.addStreams.bind(this))),i.then(function(){return n.hasOffer("remote")?n.peerConnection.ondatachannel=function(e){n.dataChannel=e.channel,n.emit("dataChannel",n.dataChannel)}:t.dataChannel&&n.peerConnection.createDataChannel&&(n.dataChannel=n.peerConnection.createDataChannel("sipjs",t.dataChannel),n.emit("dataChannel",n.dataChannel)),n.render(),n.createOfferOrAnswer(n.RTCConstraints)}).then(function(t){return t=e.Hacks.Firefox.hasMissingCLineInSDP(t),n.local_hold&&(/a=(sendrecv|sendonly|recvonly|inactive)/.test(t)?(t=t.replace(/a=sendrecv\r\n/g,"a=sendonly\r\n"),t=t.replace(/a=recvonly\r\n/g,"a=inactive\r\n")):t=t.replace(/(m=[^\r]*\r\n)/g,"$1a=sendonly\r\n")),{body:t,contentType:"application/sdp"}})}},hasDescription:{writeable:!0,value:function(e){return"application/sdp"===e.getHeader("Content-Type")&&!!e.body}},setDescription:{writable:!0,value:function(t){var n=t.body;this.remote_hold=/a=(sendonly|inactive)/.test(n),n=e.Hacks.Firefox.cannotHandleExtraWhitespace(n),n=e.Hacks.AllBrowsers.maskDtls(n);var r={type:this.hasOffer("local")?"answer":"offer",sdp:n};this.emit("setDescription",r);var i=new e.WebRTC.RTCSessionDescription(r);return e.Utils.promisify(this.peerConnection,"setRemoteDescription")(i)}},getReferMedia:{writable:!0,value:function(){function e(e,t){return t[e]().length>0}function t(t){return this.getLocalStreams().some(e.bind(null,t))&&this.getRemoteStreams().some(e.bind(null,t))}return{constraints:{audio:t.call(this,"getAudioTracks"),video:t.call(this,"getVideoTracks")}}}},updateIceServers:{writeable:!0,value:function(e){var t=this.prepareIceServers(e.stunServers,e.turnServers);this.RTCConstraints=e.RTCConstraints||this.RTCConstraints,this.initPeerConnection(t)}},isMuted:{writable:!0,value:function(){return{audio:this.audioMuted,video:this.videoMuted}}},mute:{writable:!0,value:function(e){if(0!==this.getLocalStreams().length){e=e||{audio:this.getLocalStreams()[0].getAudioTracks().length>0,video:this.getLocalStreams()[0].getVideoTracks().length>0};var t=!1,n=!1;return e.audio&&!this.audioMuted&&(t=!0,this.audioMuted=!0,this.toggleMuteAudio(!0)),e.video&&!this.videoMuted&&(n=!0,this.videoMuted=!0,this.toggleMuteVideo(!0)),t||n?{audio:t,video:n}:void 0}}},unmute:{writable:!0,value:function(e){if(0!==this.getLocalStreams().length){e=e||{audio:this.getLocalStreams()[0].getAudioTracks().length>0,video:this.getLocalStreams()[0].getVideoTracks().length>0};var t=!1,n=!1;return e.audio&&this.audioMuted&&(t=!0,this.audioMuted=!1,this.toggleMuteAudio(!1)),e.video&&this.videoMuted&&(n=!0,this.videoMuted=!1,this.toggleMuteVideo(!1)),t||n?{audio:t,video:n}:void 0}}},hold:{writable:!0,value:function(){this.local_hold=!0,this.toggleMuteAudio(!0),this.toggleMuteVideo(!0)}},unhold:{writable:!0,value:function(){this.local_hold=!1,this.audioMuted||this.toggleMuteAudio(!1),this.videoMuted||this.toggleMuteVideo(!1)}},getLocalStreams:{writable:!0,value:function(){var e=this.peerConnection;return e&&"closed"===e.signalingState?(this.logger.warn("peerConnection is closed, getLocalStreams returning []"),[]):e.getLocalStreams&&e.getLocalStreams()||e.localStreams||[]}},getRemoteStreams:{writable:!0,value:function(){var e=this.peerConnection;return e&&"closed"===e.signalingState?(this.logger.warn("peerConnection is closed, getRemoteStreams returning this._remoteStreams"),this._remoteStreams):e.getRemoteStreams&&e.getRemoteStreams()||e.remoteStreams||[]}},render:{writable:!0,value:function(t){if(t=t||this.mediaHint&&this.mediaHint.render,!t)return!1;var n={local:"getLocalStreams",remote:"getRemoteStreams"};Object.keys(n).forEach(function(r){var i=n[r],s=this[i]();e.WebRTC.MediaStreamManager.render(s,t[r])}.bind(this))}},hasOffer:{writable:!0,value:function(e){var t="have-"+e+"-offer";return this.peerConnection.signalingState===t}},prepareIceServers:{writable:!0,value:function(e,t){var n=[],r=this.session.ua.configuration;return e=e||r.stunServers,t=t||r.turnServers,[].concat(e).forEach(function(e){n.push({urls:e})}),[].concat(t).forEach(function(e){n.push({urls:e.urls,username:e.username,credential:e.password})}),n}},initPeerConnection:{writable:!0,value:function(t){var n=this,r=this.session.ua.configuration;this.onIceCompleted=e.Utils.defer(),this.onIceCompleted.promise.then(function(t){n.emit("iceGatheringComplete",t),n.iceCheckingTimer&&(e.Timers.clearTimeout(n.iceCheckingTimer),n.iceCheckingTimer=null)}),this.peerConnection&&this.peerConnection.close(),this.peerConnection=new e.WebRTC.RTCPeerConnection({iceServers:t}),this._remoteStreams=[],this.peerConnection.onaddstream=function(e){n.logger.log("stream added: "+e.stream.id),n._remoteStreams.push(e.stream),n.render(),n.emit("addStream",e)},this.peerConnection.onremovestream=function(e){n.logger.log("stream removed: "+e.stream.id)},this.startIceCheckingTimer=function(){n.iceCheckingTimer||(n.iceCheckingTimer=e.Timers.setTimeout(function(){n.logger.log("RTCIceChecking Timeout Triggered after "+r.iceCheckingTimeout+" milliseconds"),n.onIceCompleted.resolve(this)}.bind(this.peerConnection),r.iceCheckingTimeout))},this.peerConnection.onicecandidate=function(e){n.emit("iceCandidate",e),e.candidate?(n.logger.log("ICE candidate received: "+(null===e.candidate.candidate?null:e.candidate.candidate.trim())),n.startIceCheckingTimer()):n.onIceCompleted.resolve(this)},this.peerConnection.onicegatheringstatechange=function(){n.logger.log("RTCIceGatheringState changed: "+this.iceGatheringState),"gathering"===this.iceGatheringState&&n.emit("iceGathering",this),"complete"===this.iceGatheringState&&n.onIceCompleted.resolve(this)},this.peerConnection.oniceconnectionstatechange=function(){var e;switch("checking"===this.iceConnectionState&&n.startIceCheckingTimer(),this.iceConnectionState){case"new":e="iceConnection";break;case"checking":e="iceConnectionChecking";break;case"connected":e="iceConnectionConnected";break;case"completed":e="iceConnectionCompleted";break;case"failed":e="iceConnectionFailed";break;case"disconnected":e="iceConnectionDisconnected";break;case"closed":e="iceConnectionClosed";break;default:return void n.logger.warn("Unknown iceConnection state:",this.iceConnectionState)}n.emit(e,this)},this.peerConnection.onstatechange=function(){n.logger.log('PeerConnection state changed to "'+this.readyState+'"')}}},createOfferOrAnswer:{writable:!0,value:function(t){var n,r=this,i=r.peerConnection;return r.ready=!1,n=r.hasOffer("remote")?"createAnswer":"createOffer",e.Utils.promisify(i,n,!0)(t).then(e.Utils.promisify(i,"setLocalDescription")).then(function(){var t=e.Utils.defer();return"complete"===i.iceConnectionState||"completed"===i.iceConnectionState?t.resolve():r.onIceCompleted.promise.then(t.resolve),t.promise}).then(function(){var t=i.localDescription.sdp;t=e.Hacks.Chrome.needsExplicitlyInactiveSDP(t),t=e.Hacks.AllBrowsers.unmaskDtls(t);var s={type:"createOffer"===n?"offer":"answer",sdp:t};return r.emit("getDescription",s),r.session.ua.configuration.hackStripTcp&&(s.sdp=s.sdp.replace(/^a=candidate:\d+ \d+ tcp .*?\r\n/gim,"")),r.ready=!0,s.sdp}).catch(function(t){throw r.logger.error(t),r.ready=!0,new e.Exceptions.GetDescriptionError(t)})}},addStreams:{writable:!0,value:function(t){try{t=[].concat(t),t.forEach(function(e){this.peerConnection.addStream(e)},this)}catch(t){return this.logger.error("error adding stream"),this.logger.error(t),e.Utils.Promise.reject(t)}return e.Utils.Promise.resolve()}},toggleMuteHelper:{writable:!0,value:function(e,t){this.getLocalStreams().forEach(function(n){n[e]().forEach(function(e){e.enabled=!t})})}},toggleMuteAudio:{writable:!0,value:function(e){this.toggleMuteHelper("getAudioTracks",e)}},toggleMuteVideo:{writable:!0,value:function(e){this.toggleMuteHelper("getVideoTracks",e)}}}),t}},{}],106:[function(e,t,n){"use strict";t.exports=function(e,t){var n=function(t,n){if(!e.WebRTC.isSupported())throw new e.Exceptions.NotSupportedError("Media not supported");this.mediaHint=n||{constraints:{audio:!0,video:!0}},this.acquisitions={}};return n.streamId=function(e){return e.getAudioTracks().concat(e.getVideoTracks()).map(function(e){return e.id}).join("")},n.render=function(n,r){function i(e,t){e.srcObject=t}function s(t){t.ensurePlayingIntervalId=e.Timers.setInterval(function(){t.paused&&t.srcObject?t.play():e.Timers.clearInterval(t.ensurePlayingIntervalId)},100)}function o(e,n,r){var o=e[r%e.length];"function"==typeof o&&(o=o()),(t.attachMediaStream||i)(o,n),s(o)}if(!r)return!1;if(Array.isArray(r)&&!r.length)throw new TypeError("elements must not be empty");r=[].concat(r),[].concat(n).forEach(o.bind(null,r))},n.prototype=Object.create(e.EventEmitter.prototype,{acquire:{writable:!0,value:function(t){t=Object.keys(t||{}).length?t:this.mediaHint;var r=function(t,r){return r=[].concat(r),r.forEach(function(e){var r=n.streamId(e);this.acquisitions[r]=!!t},this),e.Utils.Promise.resolve(r)}.bind(this);if(t.stream)return r(!0,t.stream);var i=t.constraints||this.mediaHint&&this.mediaHint.constraints||{audio:!0,video:!0},s=e.Utils.defer();return e.Timers.setTimeout(function(){this.emit("userMediaRequest",i);var t=function(e,t){var n=Array.prototype.slice.call(arguments,2),r=[e].concat(n);return this.emit.apply(this,r),t.apply(null,n)}.bind(this);i.audio||i.video?s.resolve(e.WebRTC.getUserMedia(i).then(t.bind(this,"userMedia",r.bind(null,!1)),t.bind(this,"userMediaFailed",function(e){throw e}))):s.resolve([])}.bind(this),0),s.promise}},release:{writable:!0,value:function(e){e=[].concat(e),e.forEach(function(e){var t=n.streamId(e);this.acquisitions[t]===!1&&e.getTracks().forEach(function(e){e.stop()}),delete this.acquisitions[t]},this)}}}),n}},{}],107:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],108:[function(e,t,n){t.exports=function(e){return e&&"object"===(void 0===e?"undefined":a(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],109:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:o};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&r._extend(n,t),k(n.showHidden)&&(n.showHidden=!1),k(n.depth)&&(n.depth=2),k(n.colors)&&(n.colors=!1),k(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),c(n,e,n.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,n){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return b(i)||(i=c(e,i,n)),i}var s=l(e,t);if(s)return s;var o=Object.keys(t),a=u(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),L(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(t);if(0===o.length){if(E(t)){var _=t.name?": "+t.name:"";return e.stylize("[Function"+_+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(L(t))return d(t)}var g="",v=!1,y=["{","}"];if(m(t)&&(v=!0,y=["[","]"]),E(t)){g=" [Function"+(t.name?": "+t.name:"")+"]"}if(w(t)&&(g=" "+RegExp.prototype.toString.call(t)),S(t)&&(g=" "+Date.prototype.toUTCString.call(t)),L(t)&&(g=" "+d(t)),0===o.length&&(!v||0==t.length))return y[0]+g+y[1];if(n<0)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var T;return T=v?h(e,t,n,a,o):o.map(function(r){return f(e,t,n,a,r,v)}),e.seen.pop(),p(T,g,y)}function l(e,t){if(k(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var s=[],o=0,a=t.length;o<a;++o)D(t,String(o))?s.push(f(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(f(e,t,n,r,i,!0))}),s}function f(e,t,n,r,i,s){var o,a,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),D(r,i)||(o="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=g(n)?c(e,u.value,null):c(e,u.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),k(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function T(e){return"symbol"===(void 0===e?"undefined":a(e))}function k(e){return void 0===e}function w(e){return M(e)&&"[object RegExp]"===x(e)}function M(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e}function S(e){return M(e)&&"[object Date]"===x(e)}function L(e){return M(e)&&("[object Error]"===x(e)||e instanceof Error)}function E(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":a(e))||void 0===e}function x(e){return Object.prototype.toString.call(e)}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var j=/%[sdj%]/g;r.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(j,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<s;a=r[++n])o+=g(a)||!M(a)?" "+a:" "+i(a);return o},r.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation,o=!0}return e.apply(this,arguments)}if(k(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var R,A={};r.debuglog=function(e){if(k(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!A[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){t.pid;A[e]=function(){r.format.apply(r,arguments)}}else A[e]=function(){};return A[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=m,r.isBoolean=_,r.isNull=g,r.isNullOrUndefined=v,r.isNumber=y,r.isString=b,r.isSymbol=T,r.isUndefined=k,r.isRegExp=w,r.isObject=M,r.isDate=S,r.isError=L,r.isFunction=E,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");r.log=function(){},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!M(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":108,_process:72,inherits:107}],110:[function(e,t,n){t.exports={name:"twilio-video",title:"Twilio Video",description:"Twilio Video JavaScript library",version:"1.0.0-beta4",homepage:"https://twilio.com",author:"Mark Andrus Roberts <mroberts@twilio.com>",contributors:["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>"],keywords:["twilio","webrtc","library","javascript","video","rooms"],repository:{type:"git",url:"https://github.com/twilio/twilio-video.js.git"},devDependencies:{browserify:"^9.0.3",cheerio:"^0.18.0",chromedriver:"^2.26.1",eslint:"^2.12.0","ink-docstrap":"^1.3.0",istanbul:"^0.4.5",jsdoc:"^3.4.3",mocha:"^2.2.5","mock-browser":"^0.91.34","npm-run-all":"^4.0.0",phantom:"^2.1.14","release-tool":"^0.2.2",requirejs:"^2.2.0",rimraf:"^2.5.4","selenium-webdriver":"^3.0.1",sinon:"^1.17.7",twilio:"^2.11.1","uglify-js":"^2.7.5","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0"},engines:{node:">=0.12"},license:"BSD-3-Clause",main:"./lib/index.js",scripts:{lint:"eslint ./lib","test:unit":"mocha ./test/unit/index.js","test:integration":"mocha ./test/integration/index.js","test:integration:travis":"node ./scripts/integration.js","test:umd":"mocha ./test/umd/index.js","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules && npm install","test:framework:angular:test":"node ./scripts/framework.js twilio-video-angular","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:meteor:install":"cd ./test/framework/twilio-video-meteor && rimraf ./node_modules && npm install","test:framework:meteor:test":"node ./scripts/framework.js twilio-video-meteor","test:framework:meteor:run":"mocha ./test/framework/twilio-video-meteor.js","test:framework:meteor":"npm-run-all test:framework:meteor:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework":"npm-run-all test:framework:angular test:framework:meteor test:framework:react",test:"npm-run-all test:unit test:integration","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":'uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments "/^! twilio-video.js/"',"build:test:webrtc":"browserify ./test/webrtc/index.js -o ./test/dist/webrtc.js",build:"npm-run-all clean lint docs cover test:integration build:js build:min.js test:umd","build:travis":"npm-run-all clean lint docs cover test:integration:travis build:js build:min.js test:umd test:framework",docs:"node ./scripts/docs.js ./dist/docs",clean:"rimraf ./coverage ./dist ./test/dist/webrtc.js",cover:"istanbul cover _mocha -- ./test/unit/index.js"},dependencies:{"sip.js":"twilio/SIP.js.git#420ed46ba6751b32e99950fb6fb84683afb820cc",ws:"^1.0.1",xmlhttprequest:"^1.8.0"},browser:{ws:"./src/ws.js",xmlhttprequest:"./src/xmlhttprequest.js"}}},{}],111:[function(e,t,n){t.exports=WebSocket},{}],112:[function(e,t,n){n.XMLHttpRequest=XMLHttpRequest},{}]},{},[1]),c=u(1);s=[],o=function(){return c}.apply(t,s),void 0!==o&&(e.exports=o)}("undefined"!=typeof window?window:void 0!==n?n:this)}).call(t,n(3),n(148).Buffer)},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function s(e){var t,n,i,s,o,a,u=e.length;o=r(e),a=new d(3*u/4-o),i=o>0?u-4:u;var c=0;for(t=0,n=0;t<i;t+=4,n+=3)s=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],a[c++]=s>>16&255,a[c++]=s>>8&255,a[c++]=255&s;return 2===o?(s=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,a[c++]=255&s):1===o&&(s=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,a[c++]=s>>8&255,a[c++]=255&s),a}function o(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function a(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(o(r));return i.join("")}function u(e){for(var t,n=e.length,r=n%3,i="",s=[],o=16383,u=0,l=n-r;u<l;u+=o)s.push(a(e,u,u+o>l?l:u+o));return 1===r?(t=e[n-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),s.push(i),s.join("")}t.byteLength=i,t.toByteArray=s,t.fromByteArray=u;for(var c=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)c[f]=h[f],l[h.charCodeAt(f)]=f;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},,function(e,t,n){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?d(e,t,n):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}function l(e,t){if(u(t),e=s(e,t<0?0:0|m(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n);e=s(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function h(e,t){var n=t.length<0?0:0|m(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=h(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|m(t.length);return e=s(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?s(e,0):h(e,t);if("Buffer"===t.type&&Q(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:T(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):T(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function T(e,t,n,r,i){function s(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,a=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<a;c++)if(s(e,c)===s(t,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*o}else l!==-1&&(c-=c-l),l=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var d=!0,h=0;h<u;h++)if(s(e,c+h)!==s(t,h)){d=!1;break}if(d)return c}return-1}function k(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function w(e,t,n,r){return V(W(t,e.length-n),e,n,r)}function M(e,t,n,r){return V(B(t),e,n,r)}function S(e,t,n,r){return M(e,t,n,r)}function L(e,t,n,r){return V(G(t),e,n,r)}function E(e,t,n,r){return V(z(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s=e[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=n){var u,c,l,d;switch(a){case 1:s<128&&(o=s);break;case 2:u=e[i+1],128===(192&u)&&(d=(31&s)<<6|63&u,d>127&&(o=d));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(d=(15&s)<<12|(63&u)<<6|63&c,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(d=(15&s)<<18|(63&u)<<12|(63&c)<<6|63&l,d>65535&&d<1114112&&(o=d))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return D(r)}function D(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=X(e[s]);return i}function Y(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function H(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||H(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||H(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function $(e){if(e=q(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function B(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function z(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}function G(e){return K.toByteArray($(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var K=n(146),Z=n(150),Q=n(151);t.Buffer=o,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return c(null,e,t,n)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var s=i-r,a=n-t,u=Math.min(s,a),c=this.slice(r,i),l=e.slice(t,n),d=0;d<u;++d)if(c[d]!==l[d]){s=c[d],a=l[d];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return L(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),Z.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),Z.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),Z.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),Z.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=o.isBuffer(e)?e:W(new o(e,r).toString()),u=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(3))},,function(e,t){t.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+e[t+d],d+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+d],d+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:(f?-1:1)*(1/0);o+=Math.pow(2,r),s-=c}return(f?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var o,a,u,c=8*s-i-1,l=(1<<c)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+d>=1?h/u:h*Math.pow(2,1-d),t*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(t*u-1)*Math.pow(2,i),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},,function(e,t,n){function r(e){return n(i(e))}function i(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var s={"./af":13,"./af.js":13,"./ar":19,"./ar-dz":14,"./ar-dz.js":14,"./ar-ly":15,"./ar-ly.js":15,"./ar-ma":16,"./ar-ma.js":16,"./ar-sa":17,"./ar-sa.js":17,"./ar-tn":18,"./ar-tn.js":18,"./ar.js":19,"./az":20,"./az.js":20,"./be":21,"./be.js":21,"./bg":22,"./bg.js":22,"./bn":23,"./bn.js":23,"./bo":24,"./bo.js":24,"./br":25,"./br.js":25,"./bs":26,"./bs.js":26,"./ca":27,"./ca.js":27,"./cs":28,"./cs.js":28,"./cv":29,"./cv.js":29,"./cy":30,"./cy.js":30,"./da":31,"./da.js":31,"./de":33,"./de-at":32,"./de-at.js":32,"./de.js":33,"./dv":34,"./dv.js":34,"./el":35,"./el.js":35,"./en-au":36,"./en-au.js":36,"./en-ca":37,"./en-ca.js":37,"./en-gb":38,"./en-gb.js":38,"./en-ie":39,"./en-ie.js":39,"./en-nz":40,"./en-nz.js":40,"./eo":41,"./eo.js":41,"./es":43,"./es-do":42,"./es-do.js":42,"./es.js":43,"./et":44,"./et.js":44,"./eu":45,"./eu.js":45,"./fa":46,"./fa.js":46,"./fi":47,"./fi.js":47,"./fo":48,"./fo.js":48,"./fr":51,"./fr-ca":49,"./fr-ca.js":49,"./fr-ch":50,"./fr-ch.js":50,"./fr.js":51,"./fy":52,"./fy.js":52,"./gd":53,"./gd.js":53,"./gl":54,"./gl.js":54,"./he":55,"./he.js":55,"./hi":56,"./hi.js":56,"./hr":57,"./hr.js":57,"./hu":58,"./hu.js":58,"./hy-am":59,"./hy-am.js":59,"./id":60,"./id.js":60,"./is":61,"./is.js":61,"./it":62,"./it.js":62,"./ja":63,"./ja.js":63,"./jv":64,"./jv.js":64,"./ka":65,"./ka.js":65,"./kk":66,"./kk.js":66,"./km":67,"./km.js":67,"./ko":68,"./ko.js":68,"./ky":69,"./ky.js":69,"./lb":70,"./lb.js":70,"./lo":71,"./lo.js":71,"./lt":72,"./lt.js":72,"./lv":73,"./lv.js":73,"./me":74,"./me.js":74,"./mi":75,"./mi.js":75,"./mk":76,"./mk.js":76,"./ml":77,"./ml.js":77,"./mr":78,"./mr.js":78,"./ms":80,"./ms-my":79,"./ms-my.js":79,"./ms.js":80,"./my":81,"./my.js":81,"./nb":82,"./nb.js":82,"./ne":83,"./ne.js":83,"./nl":85,"./nl-be":84,"./nl-be.js":84,"./nl.js":85,"./nn":86,"./nn.js":86,"./pa-in":87,"./pa-in.js":87,"./pl":88,"./pl.js":88,"./pt":90,"./pt-br":89,"./pt-br.js":89,"./pt.js":90,"./ro":91,"./ro.js":91,"./ru":92,"./ru.js":92,"./se":93,"./se.js":93,"./si":94,"./si.js":94,"./sk":95,"./sk.js":95,"./sl":96,"./sl.js":96,"./sq":97,"./sq.js":97,"./sr":99,"./sr-cyrl":98,"./sr-cyrl.js":98,"./sr.js":99,"./ss":100,"./ss.js":100,"./sv":101,"./sv.js":101,"./sw":102,"./sw.js":102,"./ta":103,"./ta.js":103,"./te":104,"./te.js":104,"./tet":105,"./tet.js":105,"./th":106,"./th.js":106,"./tl-ph":107,"./tl-ph.js":107,"./tlh":108,"./tlh.js":108,"./tr":109,"./tr.js":109,"./tzl":110,"./tzl.js":110,"./tzm":112,"./tzm-latn":111,"./tzm-latn.js":111,"./tzm.js":112,"./uk":113,"./uk.js":113,"./uz":114,"./uz.js":114,"./vi":115,"./vi.js":115,"./x-pseudo":116,"./x-pseudo.js":116,"./yo":117,"./yo.js":117,"./zh-cn":118,"./zh-cn.js":118,"./zh-hk":119,"./zh-hk.js":119,"./zh-tw":120,"./zh-tw.js":120};r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id=153},function(e,t,n){var r,i;!function(n,s){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=s(n,document):(r=[],i=function(){return s(n,document)}.apply(t,r),void 0!==i&&(e.exports=i))}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(){var e,n,r,i=navigator.userAgent,s=navigator.appName,o=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10),u=!1,c=!1,l=!1,d=!1;return navigator.appVersion.indexOf("Windows NT")!==-1&&navigator.appVersion.indexOf("rv:11")!==-1?(u=!0,s="IE",o="11"):(n=i.indexOf("MSIE"))!==-1?(u=!0,s="IE",o=i.substring(n+5)):(n=i.indexOf("Chrome"))!==-1?(l=!0,s="Chrome",o=i.substring(n+7)):(n=i.indexOf("Safari"))!==-1?(d=!0,s="Safari",o=i.substring(n+7),(n=i.indexOf("Version"))!==-1&&(o=i.substring(n+8))):(n=i.indexOf("Firefox"))!==-1?(c=!0,s="Firefox",o=i.substring(n+8)):(e=i.lastIndexOf(" ")+1)<(n=i.lastIndexOf("/"))&&(s=i.substring(e,n),o=i.substring(n+1),s.toLowerCase()===s.toUpperCase()&&(s=navigator.appName)),(r=o.indexOf(";"))!==-1&&(o=o.substring(0,r)),(r=o.indexOf(" "))!==-1&&(o=o.substring(0,r)),a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),{name:s,version:a,isIE:u,isFirefox:c,isChrome:l,isSafari:d,isIos:/(iPad|iPhone|iPod)/g.test(navigator.platform),isIphone:/(iPhone|iPod)/g.test(navigator.userAgent),isTouch:"ontouchstart"in t.documentElement}}function r(e,t){var n=e.media;if("video"===e.type)switch(t){case"video/webm":return!(!n.canPlayType||!n.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""));case"video/mp4":return!(!n.canPlayType||!n.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""));case"video/ogg":return!(!n.canPlayType||!n.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))}else if("audio"===e.type)switch(t){case"audio/mpeg":return!(!n.canPlayType||!n.canPlayType("audio/mpeg;").replace(/no/,""));case"audio/ogg":return!(!n.canPlayType||!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""));case"audio/wav":return!(!n.canPlayType||!n.canPlayType('audio/wav; codecs="1"').replace(/no/,""))}return!1}function i(e){if(!t.querySelectorAll('script[src="'+e+'"]').length){var n=t.createElement("script");n.src=e;var r=t.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}}function s(e,t){return Array.prototype.indexOf&&e.indexOf(t)!==-1}function o(e,t,n){return e.replace(new RegExp(t.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),n)}function a(e,t){e.length||(e=[e]);for(var n=e.length-1;n>=0;n--){var r=n>0?t.cloneNode(!0):t,i=e[n],s=i.parentNode,o=i.nextSibling;return r.appendChild(i),o?s.insertBefore(r,o):s.appendChild(r),r}}function u(e){e&&e.parentNode.removeChild(e)}function c(e,t){e.insertBefore(t,e.firstChild)}function l(e,t){for(var n in t)e.setAttribute(n,Y.boolean(t[n])&&t[n]?"":t[n])}function d(e,n,r){var i=t.createElement(e);l(i,r),c(n,i)}function h(e){return e.replace(".","")}function f(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=r+(n?" "+t:"")}}function p(e,t){return!!e&&(e.classList?e.classList.contains(t):new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className))}function m(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(e){return[].indexOf.call(t.querySelectorAll(e),this)!==-1}).call(e,n)}function _(e,t,n,r,i){v(e,t,function(t){n&&n.apply(e,[t]),r.apply(e,[t])},i)}function g(e,t,n,r,i){var s=t.split(" ");if(Y.boolean(i)||(i=!1),e instanceof NodeList)for(var o=0;o<e.length;o++)e[o]instanceof Node&&g(e[o],arguments[1],arguments[2],arguments[3]);else for(var a=0;a<s.length;a++)e[r?"addEventListener":"removeEventListener"](s[a],n,i)}function v(e,t,n,r){e&&g(e,t,n,!0,r)}function y(e,t,n,r){if(e&&t){Y.boolean(n)||(n=!1);var i=new CustomEvent(t,{bubbles:n,detail:r});e.dispatchEvent(i)}}function b(e,t){if(e)return t=Y.boolean(t)?t:!e.getAttribute("aria-pressed"),e.setAttribute("aria-pressed",t),t}function T(e,t){return 0===e||0===t||isNaN(e)||isNaN(t)?0:(e/t*100).toFixed(2)}function k(){var e=arguments;if(e.length){if(1===e.length)return e[0];for(var t=Array.prototype.shift.call(e),n=e.length,r=0;r<n;r++){var i=e[r];for(var s in i)i[s]&&i[s].constructor&&i[s].constructor===Object?(t[s]=t[s]||{},k(t[s],i[s])):t[s]=i[s]}return t}}function w(e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;return e.match(t)?RegExp.$2:e}function M(e){var t=/^.*(vimeo.com\/|video\/)(\d+).*/;return e.match(t)?RegExp.$2:e}function S(){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",element:null,prefix:""},n="webkit o moz ms khtml".split(" ");if(Y.undefined(t.cancelFullScreen))for(var r=0,i=n.length;r<i;r++){if(e.prefix=n[r],!Y.undefined(t[e.prefix+"CancelFullScreen"])){e.supportsFullScreen=!0;break}if(!Y.undefined(t.msExitFullscreen)&&t.msFullscreenEnabled){e.prefix="ms",e.supportsFullScreen=!0;break}}else e.supportsFullScreen=!0;return e.supportsFullScreen&&(e.fullScreenEventName="ms"===e.prefix?"MSFullscreenChange":e.prefix+"fullscreenchange",e.isFullScreen=function(e){switch(Y.undefined(e)&&(e=t.body),this.prefix){case"":return t.fullscreenElement===e;case"moz":return t.mozFullScreenElement===e;default:return t[this.prefix+"FullscreenElement"]===e}},e.requestFullScreen=function(e){return Y.undefined(e)&&(e=t.body),""===this.prefix?e.requestFullScreen():e[this.prefix+("ms"===this.prefix?"RequestFullscreen":"RequestFullScreen")]()},e.cancelFullScreen=function(){return""===this.prefix?t.cancelFullScreen():t[this.prefix+("ms"===this.prefix?"ExitFullscreen":"CancelFullScreen")]()},e.element=function(){return""===this.prefix?t.fullscreenElement:t[this.prefix+"FullscreenElement"]}),e}function L(g,L){function x(e,t,n,r){y(e,t,n,k({},r,{plyr:Xe}))}function P(t,n){L.debug&&e.console&&(n=Array.prototype.slice.call(n),Y.string(L.logPrefix)&&L.logPrefix.length&&n.unshift(L.logPrefix))}function O(){return{url:L.iconUrl,absolute:0===L.iconUrl.indexOf("http")||We.browser.isIE}}function N(){var e=[],t=O(),n=(t.absolute?"":t.url)+"#"+L.iconPrefix;return s(L.controls,"play-large")&&e.push('<button type="button" data-plyr="play" class="plyr__play-large">','<svg><use xlink:href="'+n+'-play" /></svg>','<span class="plyr__sr-only">'+L.i18n.play+"</span>","</button>"),e.push('<div class="plyr__controls">'),s(L.controls,"restart")&&e.push('<button type="button" data-plyr="restart">','<svg><use xlink:href="'+n+'-restart" /></svg>','<span class="plyr__sr-only">'+L.i18n.restart+"</span>","</button>"),s(L.controls,"rewind")&&e.push('<button type="button" data-plyr="rewind">','<svg><use xlink:href="'+n+'-rewind" /></svg>','<span class="plyr__sr-only">'+L.i18n.rewind+"</span>","</button>"),s(L.controls,"play")&&e.push('<button type="button" data-plyr="play">','<svg><use xlink:href="'+n+'-play" /></svg>','<span class="plyr__sr-only">'+L.i18n.play+"</span>","</button>",'<button type="button" data-plyr="pause">','<svg><use xlink:href="'+n+'-pause" /></svg>','<span class="plyr__sr-only">'+L.i18n.pause+"</span>","</button>"),s(L.controls,"fast-forward")&&e.push('<button type="button" data-plyr="fast-forward">','<svg><use xlink:href="'+n+'-fast-forward" /></svg>','<span class="plyr__sr-only">'+L.i18n.forward+"</span>","</button>"),s(L.controls,"progress")&&(e.push('<span class="plyr__progress">','<label for="seek{id}" class="plyr__sr-only">Seek</label>','<input id="seek{id}" class="plyr__progress--seek" type="range" min="0" max="100" step="0.1" value="0" data-plyr="seek">','<progress class="plyr__progress--played" max="100" value="0" role="presentation"></progress>','<progress class="plyr__progress--buffer" max="100" value="0">',"<span>0</span>% "+L.i18n.buffered,"</progress>"),L.tooltips.seek&&e.push('<span class="plyr__tooltip">00:00</span>'),e.push("</span>")),s(L.controls,"current-time")&&e.push('<span class="plyr__time">','<span class="plyr__sr-only">'+L.i18n.currentTime+"</span>",'<span class="plyr__time--current">00:00</span>',"</span>"),s(L.controls,"duration")&&e.push('<span class="plyr__time">','<span class="plyr__sr-only">'+L.i18n.duration+"</span>",'<span class="plyr__time--duration">00:00</span>',"</span>"),s(L.controls,"mute")&&e.push('<button type="button" data-plyr="mute">','<svg class="icon--muted"><use xlink:href="'+n+'-muted" /></svg>','<svg><use xlink:href="'+n+'-volume" /></svg>','<span class="plyr__sr-only">'+L.i18n.toggleMute+"</span>","</button>"),s(L.controls,"volume")&&e.push('<span class="plyr__volume">','<label for="volume{id}" class="plyr__sr-only">'+L.i18n.volume+"</label>",'<input id="volume{id}" class="plyr__volume--input" type="range" min="'+L.volumeMin+'" max="'+L.volumeMax+'" value="'+L.volume+'" data-plyr="volume">','<progress class="plyr__volume--display" max="'+L.volumeMax+'" value="'+L.volumeMin+'" role="presentation"></progress>',"</span>"),s(L.controls,"captions")&&e.push('<button type="button" data-plyr="captions">','<svg class="icon--captions-on"><use xlink:href="'+n+'-captions-on" /></svg>','<svg><use xlink:href="'+n+'-captions-off" /></svg>','<span class="plyr__sr-only">'+L.i18n.toggleCaptions+"</span>","</button>"),s(L.controls,"fullscreen")&&e.push('<button type="button" data-plyr="fullscreen">','<svg class="icon--exit-fullscreen"><use xlink:href="'+n+'-exit-fullscreen" /></svg>','<svg><use xlink:href="'+n+'-enter-fullscreen" /></svg>','<span class="plyr__sr-only">'+L.i18n.toggleFullscreen+"</span>","</button>"),e.push("</div>"),e.join("")}function H(){if(We.supported.full&&("audio"!==We.type||L.fullscreen.allowAudio)&&L.fullscreen.enabled){var e=j.supportsFullScreen;e||L.fullscreen.fallback&&!B()?(Ge((e?"Native":"Fallback")+" fullscreen enabled"),f(We.container,L.classes.fullscreen.enabled,!0)):Ge("Fullscreen not supported and fallback disabled"),We.buttons&&We.buttons.fullscreen&&b(We.buttons.fullscreen,!1),z()}}function U(){if("video"===We.type){W(L.selectors.captions)||We.videoContainer.insertAdjacentHTML("afterbegin",'<div class="'+h(L.selectors.captions)+'"></div>'),We.usingTextTracks=!1,We.media.textTracks&&(We.usingTextTracks=!0);for(var e,t="",n=We.media.childNodes,r=0;r<n.length;r++)"track"===n[r].nodeName.toLowerCase()&&(e=n[r].kind,"captions"!==e&&"subtitles"!==e||(t=n[r].getAttribute("src")));if(We.captionExists=!0,""===t?(We.captionExists=!1,Ge("No caption track found")):Ge("Caption track found; URI: "+t),We.captionExists){for(var i=We.media.textTracks,s=0;s<i.length;s++)i[s].mode="hidden";if(q(We),(We.browser.isIE&&We.browser.version>=10||We.browser.isFirefox&&We.browser.version>=31)&&(Ge("Detected browser with known TextTrack issues - using manual fallback"),We.usingTextTracks=!1),We.usingTextTracks){Ge("TextTracks supported");for(var o=0;o<i.length;o++){var a=i[o];"captions"!==a.kind&&"subtitles"!==a.kind||v(a,"cuechange",function(){this.activeCues[0]&&"text"in this.activeCues[0]?F(this.activeCues[0].getCueAsHTML()):F()})}}else if(Ge("TextTracks not supported so rendering captions manually"),We.currentCaption="",We.captions=[],""!==t){var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState)if(200===u.status){var e,t=[],n=u.responseText,r="\r\n";n.indexOf(r+r)===-1&&(r=n.indexOf("\r\r")!==-1?"\r":"\n"),t=n.split(r+r);for(var i=0;i<t.length;i++){e=t[i],We.captions[i]=[];var s=e.split(r),o=0;s[o].indexOf(":")===-1&&(o=1),We.captions[i]=[s[o],s[o+1]]}We.captions.shift(),Ge("Successfully loaded the caption file via AJAX")}else Ve(L.logPrefix+"There was a problem loading the caption file via AJAX")},u.open("get",t,!0),u.send()}}else f(We.container,L.classes.captions.enabled)}}function F(e){var n=W(L.selectors.captions),r=t.createElement("span");n.innerHTML="",Y.undefined(e)&&(e=""),Y.string(e)?r.innerHTML=e.trim():r.appendChild(e),n.appendChild(r);n.offsetHeight}function $(e){function t(e,t){var n=[];n=e.split(" --> ");for(var r=0;r<n.length;r++)n[r]=n[r].replace(/(\d+:\d+:\d+\.\d+).*/,"$1");return i(n[t])}function n(e){return t(e,0)}function r(e){return t(e,1)}function i(e){if(null===e||void 0===e)return 0;var t=[],n=[];return t=e.split(","),n=t[0].split(":"),Math.floor(60*n[0]*60)+Math.floor(60*n[1])+Math.floor(n[2])}if(!We.usingTextTracks&&"video"===We.type&&We.supported.full&&(We.subcount=0,e=Y.number(e)?e:We.media.currentTime,We.captions[We.subcount])){for(;r(We.captions[We.subcount][0])<e.toFixed(1);)if(We.subcount++,We.subcount>We.captions.length-1){We.subcount=We.captions.length-1;break}We.media.currentTime.toFixed(1)>=n(We.captions[We.subcount][0])&&We.media.currentTime.toFixed(1)<=r(We.captions[We.subcount][0])?(We.currentCaption=We.captions[We.subcount][1],F(We.currentCaption)):F()}}function q(){if(We.buttons.captions){f(We.container,L.classes.captions.enabled,!0);var e=We.storage.captionsEnabled;Y.boolean(e)||(e=L.captions.defaultActive),e&&(f(We.container,L.classes.captions.active,!0),b(We.buttons.captions,!0))}}function X(e){return We.container.querySelectorAll(e)}function W(e){return X(e)[0]}function B(){try{return e.self!==e.top}catch(e){return!0}}function z(){function e(e){9===e.which&&We.isFullscreen&&(e.target!==r||e.shiftKey?e.target===n&&e.shiftKey&&(e.preventDefault(),r.focus()):(e.preventDefault(),n.focus()))}var t=X("input:not([disabled]), button:not([disabled])"),n=t[0],r=t[t.length-1];v(We.container,"keydown",e)}function G(e,t){if(Y.string(t))d(e,We.media,{src:t});else if(t.constructor===Array)for(var n=t.length-1;n>=0;n--)d(e,We.media,t[n])}function V(){if(L.loadSprite){var e=O();e.absolute?(Ge("AJAX loading absolute SVG sprite"+(We.browser.isIE?" (due to IE)":"")),E(e.url,"sprite-plyr")):Ge("Sprite will be used as external resource directly")}var n=L.html;Ge("Injecting custom controls"),n||(n=N()),n=o(n,"{seektime}",L.seekTime),n=o(n,"{id}",Math.floor(1e4*Math.random()));var r;if(Y.string(L.selectors.controls.container)&&(r=t.querySelector(L.selectors.controls.container)),Y.htmlElement(r)||(r=We.container),r.insertAdjacentHTML("beforeend",n),L.tooltips.controls)for(var i=X([L.selectors.controls.wrapper," ",L.selectors.labels," .",L.classes.hidden].join("")),s=i.length-1;s>=0;s--){var a=i[s];f(a,L.classes.hidden,!1),f(a,L.classes.tooltip,!0)}}function J(){try{return We.controls=W(L.selectors.controls.wrapper),We.buttons={},We.buttons.seek=W(L.selectors.buttons.seek),We.buttons.play=X(L.selectors.buttons.play),We.buttons.pause=W(L.selectors.buttons.pause),We.buttons.restart=W(L.selectors.buttons.restart),We.buttons.rewind=W(L.selectors.buttons.rewind),We.buttons.forward=W(L.selectors.buttons.forward),We.buttons.fullscreen=W(L.selectors.buttons.fullscreen),We.buttons.mute=W(L.selectors.buttons.mute),We.buttons.captions=W(L.selectors.buttons.captions),We.progress={},We.progress.container=W(L.selectors.progress.container),We.progress.buffer={},We.progress.buffer.bar=W(L.selectors.progress.buffer),We.progress.buffer.text=We.progress.buffer.bar&&We.progress.buffer.bar.getElementsByTagName("span")[0],We.progress.played=W(L.selectors.progress.played),We.progress.tooltip=We.progress.container&&We.progress.container.querySelector("."+L.classes.tooltip),We.volume={},We.volume.input=W(L.selectors.volume.input),We.volume.display=W(L.selectors.volume.display),We.duration=W(L.selectors.duration),We.currentTime=W(L.selectors.currentTime),We.seekTime=X(L.selectors.seekTime),!0}catch(e){return Ve("It looks like there is a problem with your controls HTML"),Z(!0),!1}}function K(){f(We.container,L.selectors.container.replace(".",""),We.supported.full)}function Z(e){e&&s(L.types.html5,We.type)?We.media.setAttribute("controls",""):We.media.removeAttribute("controls")}function Q(e){var t=L.i18n.play;if(Y.string(L.title)&&L.title.length&&(t+=", "+L.title,We.container.setAttribute("aria-label",L.title)),We.supported.full&&We.buttons.play)for(var n=We.buttons.play.length-1;n>=0;n--)We.buttons.play[n].setAttribute("aria-label",t);Y.htmlElement(e)&&e.setAttribute("title",L.i18n.frameTitle.replace("{title}",L.title))}function ee(){var t=null;We.storage={},I.supported&&L.storage.enabled&&(e.localStorage.removeItem("plyr-volume"),t=e.localStorage.getItem(L.storage.key),t&&(/^\d+(\.\d+)?$/.test(t)?te({volume:parseFloat(t)}):We.storage=JSON.parse(t)))}function te(t){I.supported&&L.storage.enabled&&(k(We.storage,t),e.localStorage.setItem(L.storage.key,JSON.stringify(We.storage)))}function ne(){if(!We.media)return void Ve("No media element found!");if(We.supported.full&&(f(We.container,L.classes.type.replace("{0}",We.type),!0),s(L.types.embed,We.type)&&f(We.container,L.classes.type.replace("{0}","video"),!0),f(We.container,L.classes.stopped,L.autoplay),f(We.ontainer,L.classes.isIos,We.browser.isIos),f(We.container,L.classes.isTouch,We.browser.isTouch),"video"===We.type)){var e=t.createElement("div");e.setAttribute("class",L.classes.videoWrapper),a(We.media,e),We.videoContainer=e}s(L.types.embed,We.type)&&re()}function re(){var n,r=t.createElement("div"),s=We.type+"-"+Math.floor(1e4*Math.random());switch(We.type){case"youtube":n=w(We.embedId);break;case"vimeo":n=M(We.embedId);break;default:n=We.embedId}for(var o=X('[id^="'+We.type+'-"]'),a=o.length-1;a>=0;a--)u(o[a]);if(f(We.media,L.classes.videoWrapper,!0),f(We.media,L.classes.embedWrapper,!0),"youtube"===We.type)We.media.appendChild(r),r.setAttribute("id",s),Y.object(e.YT)?se(n,r):(i(L.urls.youtube.api),e.onYouTubeReadyCallbacks=e.onYouTubeReadyCallbacks||[],e.onYouTubeReadyCallbacks.push(function(){se(n,r)}),e.onYouTubeIframeAPIReady=function(){e.onYouTubeReadyCallbacks.forEach(function(e){e()})});else if("vimeo"===We.type)if(We.supported.full?We.media.appendChild(r):r=We.media,r.setAttribute("id",s),Y.object(e.Vimeo))oe(n,r);else{i(L.urls.vimeo.api);var c=e.setInterval(function(){Y.object(e.Vimeo)&&(e.clearInterval(c),oe(n,r))},50)}else if("soundcloud"===We.type){var d=t.createElement("iframe");d.loaded=!1,v(d,"load",function(){d.loaded=!0}),l(d,{src:"https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/"+n,id:s}),r.appendChild(d),We.media.appendChild(r),e.SC||i(L.urls.soundcloud.api);var h=e.setInterval(function(){e.SC&&d.loaded&&(e.clearInterval(h),ae.call(d))},50)}}function ie(){We.supported.full&&($e(),qe()),Q(W("iframe"))}function se(t,n){We.embed=new e.YT.Player(n.id,{videoId:t,playerVars:{autoplay:L.autoplay?1:0,controls:We.supported.full?0:1,rel:0,showinfo:0,iv_load_policy:3,cc_load_policy:L.captions.defaultActive?1:0,cc_lang_pref:"en",wmode:"transparent",modestbranding:1,disablekb:1,origin:"*"},events:{onError:function(e){x(We.container,"error",!0,{code:e.data,embed:e.target})},onReady:function(t){var n=t.target;We.media.play=function(){n.playVideo(),We.media.paused=!1},We.media.pause=function(){n.pauseVideo(),We.media.paused=!0},We.media.stop=function(){n.stopVideo(),We.media.paused=!0},We.media.duration=n.getDuration(),We.media.paused=!0,We.media.currentTime=0,We.media.muted=n.isMuted(),L.title=n.getVideoData().title,We.supported.full&&We.media.querySelector("iframe").setAttribute("tabindex","-1"),ie(),x(We.media,"timeupdate"),x(We.media,"durationchange"),e.clearInterval(Be.buffering),Be.buffering=e.setInterval(function(){We.media.buffered=n.getVideoLoadedFraction(),(null===We.media.lastBuffered||We.media.lastBuffered<We.media.buffered)&&x(We.media,"progress"),We.media.lastBuffered=We.media.buffered,1===We.media.buffered&&(e.clearInterval(Be.buffering),x(We.media,"canplaythrough"))},200)},onStateChange:function(t){var n=t.target;switch(e.clearInterval(Be.playing),t.data){case 0:We.media.paused=!0,x(We.media,"ended");break;case 1:We.media.paused=!1,We.media.seeking&&x(We.media,"seeked"),We.media.seeking=!1,x(We.media,"play"),x(We.media,"playing"),Be.playing=e.setInterval(function(){We.media.currentTime=n.getCurrentTime(),x(We.media,"timeupdate")},100),We.media.duration!==n.getDuration()&&(We.media.duration=n.getDuration(),x(We.media,"durationchange"));break;case 2:We.media.paused=!0,x(We.media,"pause")}x(We.container,"statechange",!1,{code:t.data})}}})}function oe(t,n){We.embed=new e.Vimeo.Player(n,{id:parseInt(t),loop:L.loop,autoplay:L.autoplay,byline:!1,portrait:!1,title:!1}),We.media.play=function(){We.embed.play(),We.media.paused=!1},We.media.pause=function(){We.embed.pause(),We.media.paused=!0},We.media.stop=function(){We.embed.stop(),We.media.paused=!0},We.media.paused=!0,We.media.currentTime=0,ie(),We.embed.getCurrentTime().then(function(e){We.media.currentTime=e,x(We.media,"timeupdate")}),We.embed.getDuration().then(function(e){We.media.duration=e,x(We.media,"durationchange")}),We.embed.on("loaded",function(){Y.htmlElement(We.embed.element)&&We.supported.full&&We.embed.element.setAttribute("tabindex","-1")}),We.embed.on("play",function(){We.media.paused=!1,x(We.media,"play"),x(We.media,"playing")}),We.embed.on("pause",function(){We.media.paused=!0,x(We.media,"pause")}),We.embed.on("timeupdate",function(e){We.media.seeking=!1,We.media.currentTime=e.seconds,x(We.media,"timeupdate")}),We.embed.on("progress",function(e){We.media.buffered=e.percent,x(We.media,"progress"),1===parseInt(e.percent)&&x(We.media,"canplaythrough")}),We.embed.on("seeked",function(){We.media.seeking=!1,x(We.media,"seeked"),x(We.media,"play")}),We.embed.on("ended",function(){We.media.paused=!0,x(We.media,"ended")})}function ae(){We.embed=e.SC.Widget(this),We.embed.bind(e.SC.Widget.Events.READY,function(){We.media.play=function(){We.embed.play(),We.media.paused=!1},We.media.pause=function(){We.embed.pause(),We.media.paused=!0},We.media.stop=function(){We.embed.seekTo(0),We.embed.pause(),We.media.paused=!0},We.media.paused=!0,We.media.currentTime=0,We.embed.getDuration(function(e){We.media.duration=e/1e3,ie()}),We.embed.getPosition(function(e){We.media.currentTime=e,x(We.media,"timeupdate")}),We.embed.bind(e.SC.Widget.Events.PLAY,function(){We.media.paused=!1,x(We.media,"play"),x(We.media,"playing")}),We.embed.bind(e.SC.Widget.Events.PAUSE,function(){We.media.paused=!0,x(We.media,"pause")}),We.embed.bind(e.SC.Widget.Events.PLAY_PROGRESS,function(e){We.media.seeking=!1,We.media.currentTime=e.currentPosition/1e3,x(We.media,"timeupdate")}),We.embed.bind(e.SC.Widget.Events.LOAD_PROGRESS,function(e){We.media.buffered=e.loadProgress,x(We.media,"progress"),1===parseInt(e.loadProgress)&&x(We.media,"canplaythrough")}),We.embed.bind(e.SC.Widget.Events.FINISH,function(){We.media.paused=!0,x(We.media,"ended")})})}function ue(){"play"in We.media&&We.media.play()}function ce(){"pause"in We.media&&We.media.pause()}function le(e){return Y.boolean(e)||(e=We.media.paused),e?ue():ce(),e}function de(e){Y.number(e)||(e=L.seekTime),fe(We.media.currentTime-e)}function he(e){Y.number(e)||(e=L.seekTime),fe(We.media.currentTime+e)}function fe(e){var t=0,n=We.media.paused,r=pe();Y.number(e)?t=e:Y.object(e)&&s(["input","change"],e.type)&&(t=e.target.value/e.target.max*r),t<0?t=0:t>r&&(t=r),je(t);try{We.media.currentTime=t.toFixed(4)}catch(e){}if(s(L.types.embed,We.type)){switch(We.type){case"youtube":We.embed.seekTo(t);break;case"vimeo":We.embed.setCurrentTime(t.toFixed(0));break;case"soundcloud":We.embed.seekTo(1e3*t)}n&&ce(),x(We.media,"timeupdate"),We.media.seeking=!0,x(We.media,"seeking")}Ge("Seeking to "+We.media.currentTime+" seconds"),$(t)}function pe(){var e=parseInt(L.duration),t=0;return null===We.media.duration||isNaN(We.media.duration)||(t=We.media.duration),isNaN(e)?t:e}function me(){f(We.container,L.classes.playing,!We.media.paused),f(We.container,L.classes.stopped,We.media.paused),Ae(We.media.paused)}function _e(){R={x:e.pageXOffset||0,y:e.pageYOffset||0}}function ge(){e.scrollTo(R.x,R.y)}function ve(e){var n=j.supportsFullScreen;if(n){if(!e||e.type!==j.fullScreenEventName)return j.isFullScreen(We.container)?j.cancelFullScreen():(_e(),j.requestFullScreen(We.container)),void(We.isFullscreen=j.isFullScreen(We.container));We.isFullscreen=j.isFullScreen(We.container)}else We.isFullscreen=!We.isFullscreen,t.body.style.overflow=We.isFullscreen?"hidden":"";f(We.container,L.classes.fullscreen.active,We.isFullscreen),z(We.isFullscreen),We.buttons&&We.buttons.fullscreen&&b(We.buttons.fullscreen,We.isFullscreen),x(We.container,We.isFullscreen?"enterfullscreen":"exitfullscreen",!0),!We.isFullscreen&&n&&ge()}function ye(e){if(Y.boolean(e)||(e=!We.media.muted),b(We.buttons.mute,e),We.media.muted=e,0===We.media.volume&&be(L.volume),s(L.types.embed,We.type)){switch(We.type){case"youtube":We.embed[We.media.muted?"mute":"unMute"]();break;case"vimeo":case"soundcloud":We.embed.setVolume(We.media.muted?0:parseFloat(L.volume/L.volumeMax))}x(We.media,"volumechange")}}function be(e){var t=L.volumeMax,n=L.volumeMin;if(Y.undefined(e)&&(e=We.storage.volume),(null===e||isNaN(e))&&(e=L.volume),e>t&&(e=t),e<n&&(e=n),We.media.volume=parseFloat(e/t),We.volume.display&&(We.volume.display.value=e),s(L.types.embed,We.type)){switch(We.type){case"youtube":We.embed.setVolume(100*We.media.volume);break;case"vimeo":case"soundcloud":We.embed.setVolume(We.media.volume)}x(We.media,"volumechange")}0===e?We.media.muted=!0:We.media.muted&&e>0&&ye()}function Te(e){var t=We.media.muted?0:We.media.volume*L.volumeMax;Y.number(e)||(e=L.volumeStep),be(t+e)}function ke(e){var t=We.media.muted?0:We.media.volume*L.volumeMax;Y.number(e)||(e=L.volumeStep),be(t-e)}function we(){var e=We.media.muted?0:We.media.volume*L.volumeMax;We.supported.full&&(We.volume.input&&(We.volume.input.value=e),We.volume.display&&(We.volume.display.value=e)),te({volume:e}),f(We.container,L.classes.muted,0===e),We.supported.full&&We.buttons.mute&&b(We.buttons.mute,0===e)}function Me(e){We.supported.full&&We.buttons.captions&&(Y.boolean(e)||(e=We.container.className.indexOf(L.classes.captions.active)===-1),We.captionsEnabled=e,b(We.buttons.captions,We.captionsEnabled),f(We.container,L.classes.captions.active,We.captionsEnabled),x(We.container,We.captionsEnabled?"captionsenabled":"captionsdisabled",!0),te({captionsEnabled:We.captionsEnabled}))}function Se(e){var t="waiting"===e.type;clearTimeout(Be.loading),Be.loading=setTimeout(function(){f(We.container,L.classes.loading,t),Ae(t)},t?250:0)}function Le(e){if(We.supported.full){var t=We.progress.played,n=0,r=pe();if(e)switch(e.type){case"timeupdate":case"seeking":if(We.controls.pressed)return;n=T(We.media.currentTime,r),"timeupdate"===e.type&&We.buttons.seek&&(We.buttons.seek.value=n);break;case"playing":case"progress":t=We.progress.buffer,n=function(){var e=We.media.buffered;return e&&e.length?T(e.end(0),r):Y.number(e)?100*e:0}()}Ee(t,n)}}function Ee(e,t){if(We.supported.full){if(Y.undefined(t)&&(t=0),Y.undefined(e)){if(!We.progress||!We.progress.buffer)return;e=We.progress.buffer}Y.htmlElement(e)?e.value=t:e&&(e.bar&&(e.bar.value=t),e.text&&(e.text.innerHTML=t))}}function Ce(e,t){if(t){isNaN(e)&&(e=0),We.secs=parseInt(e%60),We.mins=parseInt(e/60%60),We.hours=parseInt(e/60/60%60);var n=parseInt(pe()/60/60%60)>0;We.secs=("0"+We.secs).slice(-2),We.mins=("0"+We.mins).slice(-2),t.innerHTML=(n?We.hours+":":"")+We.mins+":"+We.secs}}function xe(){if(We.supported.full){var e=pe()||0;!We.duration&&L.displayDuration&&We.media.paused&&Ce(e,We.currentTime),We.duration&&Ce(e,We.duration),Re()}}function De(e){Ce(We.media.currentTime,We.currentTime),e&&"timeupdate"===e.type&&We.media.seeking||Le(e)}function je(e){Y.number(e)||(e=0);var t=pe(),n=T(e,t);We.progress&&We.progress.played&&(We.progress.played.value=n),We.buttons&&We.buttons.seek&&(We.buttons.seek.value=n)}function Re(e){var t=pe();if(L.tooltips.seek&&We.progress.container&&0!==t){var n=We.progress.container.getBoundingClientRect(),r=0,i=L.classes.tooltip+"--visible";if(e)r=100/n.width*(e.pageX-n.left);else{if(!p(We.progress.tooltip,i))return;r=We.progress.tooltip.style.left.replace("%","")}r<0?r=0:r>100&&(r=100),Ce(t/100*r,We.progress.tooltip),We.progress.tooltip.style.left=r+"%",e&&s(["mouseenter","mouseleave"],e.type)&&f(We.progress.tooltip,i,"mouseenter"===e.type)}}function Ae(t){if(L.hideControls&&"audio"!==We.type){var n=0,r=!1,i=t,o=p(We.container,L.classes.loading);if(Y.boolean(t)||(t&&t.type?(r="enterfullscreen"===t.type,i=s(["mousemove","touchstart","mouseenter","focus"],t.type),s(["mousemove","touchmove"],t.type)&&(n=2e3),"focus"===t.type&&(n=3e3)):i=p(We.container,L.classes.hideControls)),e.clearTimeout(Be.hover),i||We.media.paused||o){if(f(We.container,L.classes.hideControls,!1),We.media.paused||o)return;We.browser.isTouch&&(n=3e3)}i&&We.media.paused||(Be.hover=e.setTimeout(function(){(!We.controls.pressed&&!We.controls.hover||r)&&f(We.container,L.classes.hideControls,!0)},n))}}function Ye(e){if(!Y.undefined(e))return void Ie(e);var t;switch(We.type){case"youtube":t=We.embed.getVideoUrl();break;case"vimeo":We.embed.getVideoUrl.then(function(e){t=e});break;case"soundcloud":We.embed.getCurrentSound(function(e){t=e.permalink_url});break;default:t=We.media.currentSrc}return t||""}function Ie(e){function n(){if(We.embed=null,u(We.media),"video"===We.type&&We.videoContainer&&u(We.videoContainer),We.container&&We.container.removeAttribute("class"),"type"in e&&(We.type=e.type,"video"===We.type)){var n=e.sources[0];"type"in n&&s(L.types.embed,n.type)&&(We.type=n.type)}switch(We.supported=C(We.type),We.type){case"video":We.media=t.createElement("video");break;case"audio":We.media=t.createElement("audio");break;case"youtube":case"vimeo":case"soundcloud":We.media=t.createElement("div"),We.embedId=e.sources[0].src}c(We.container,We.media),Y.boolean(e.autoplay)&&(L.autoplay=e.autoplay),s(L.types.html5,We.type)&&(L.crossorigin&&We.media.setAttribute("crossorigin",""),L.autoplay&&We.media.setAttribute("autoplay",""),"poster"in e&&We.media.setAttribute("poster",e.poster),L.loop&&We.media.setAttribute("loop","")),f(We.container,L.classes.fullscreen.active,We.isFullscreen),f(We.container,L.classes.captions.active,We.captionsEnabled),K(),s(L.types.html5,We.type)&&G("source",e.sources),ne(),s(L.types.html5,We.type)&&("tracks"in e&&G("track",e.tracks),We.media.load()),(s(L.types.html5,We.type)||s(L.types.embed,We.type)&&!We.supported.full)&&($e(),qe()),L.title=e.title,Q()}if(!(Y.object(e)&&"sources"in e&&e.sources.length))return void Ve("Invalid source format");f(We.container,L.classes.ready,!1),ce(),je(),Ee(),He(),Ue(n,!1)}function Pe(e){"video"===We.type&&We.media.setAttribute("poster",e)}function Oe(){function n(){var e=le(),t=We.buttons[e?"play":"pause"],n=We.buttons[e?"pause":"play"];if(n=n&&n.length>1?n[n.length-1]:n[0]){var r=p(t,L.classes.tabFocus);setTimeout(function(){n.focus(),r&&(f(t,L.classes.tabFocus,!1),f(n,L.classes.tabFocus,!0))},100)}}function r(){var e=t.activeElement;return e=e&&e!==t.body?t.querySelector(":focus"):null}function i(e){return e.keyCode?e.keyCode:e.which}function o(e){for(var t in We.buttons){var n=We.buttons[t];if(Y.nodeList(n))for(var r=0;r<n.length;r++)f(n[r],L.classes.tabFocus,n[r]===e);else f(n,L.classes.tabFocus,n===e)}}function a(e){function t(){var e=We.media.duration;Y.number(e)&&fe(e/10*(n-48))}var n=i(e),r="keydown"===e.type,o=r&&n===c;if(Y.number(n))if(r){var a=[48,49,50,51,52,53,54,56,57,32,75,38,40,77,39,37,70,67];switch(s(a,n)&&(e.preventDefault(),e.stopPropagation()),n){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:o||t();break;case 32:case 75:o||le();break;case 38:Te();break;case 40:ke();break;case 77:o||ye();break;case 39:he();break;case 37:de();break;case 70:ve();break;case 67:o||Me()}!j.supportsFullScreen&&We.isFullscreen&&27===n&&ve(),c=n}else c=null}var u=We.browser.isIE?"change":"input";if(L.keyboardShorcuts.focused){var c=null;L.keyboardShorcuts.global&&v(e,"keydown keyup",function(e){var t=i(e),n=r(),o=[48,49,50,51,52,53,54,56,57,75,77,70,67];1!==D().length||!s(o,t)||Y.htmlElement(n)&&m(n,L.selectors.editable)||a(e)}),v(We.container,"keydown keyup",a)}v(e,"keyup",function(e){var t=i(e),n=r();9===t&&o(n)}),v(t.body,"click",function(){f(W("."+L.classes.tabFocus),L.classes.tabFocus,!1)});for(var l in We.buttons){var d=We.buttons[l];v(d,"blur",function(){f(d,"tab-focus",!1)})}_(We.buttons.play,"click",L.listeners.play,n),_(We.buttons.pause,"click",L.listeners.pause,n),_(We.buttons.restart,"click",L.listeners.restart,fe),_(We.buttons.rewind,"click",L.listeners.rewind,de),_(We.buttons.forward,"click",L.listeners.forward,he),_(We.buttons.seek,u,L.listeners.seek,fe),_(We.volume.input,u,L.listeners.volume,function(){be(We.volume.input.value)}),_(We.buttons.mute,"click",L.listeners.mute,ye),_(We.buttons.fullscreen,"click",L.listeners.fullscreen,ve),j.supportsFullScreen&&v(t,j.fullScreenEventName,ve),v(We.buttons.captions,"click",Me),v(We.progress.container,"mouseenter mouseleave mousemove",Re),L.hideControls&&(v(We.container,"mouseenter mouseleave mousemove touchstart touchend touchcancel touchmove enterfullscreen",Ae),v(We.controls,"mouseenter mouseleave",function(e){We.controls.hover="mouseenter"===e.type}),v(We.controls,"mousedown mouseup touchstart touchend touchcancel",function(e){We.controls.pressed=s(["mousedown","touchstart"],e.type)}),v(We.controls,"focus blur",Ae,!0)),v(We.volume.input,"wheel",function(e){e.preventDefault();var t=e.webkitDirectionInvertedFromDevice,n=L.volumeStep/5;(e.deltaY<0||e.deltaX>0)&&(t?ke(n):Te(n)),(e.deltaY>0||e.deltaX<0)&&(t?Te(n):ke(n))})}function Ne(){if(v(We.media,"timeupdate seeking",De),v(We.media,"timeupdate",$),v(We.media,"durationchange loadedmetadata",xe),v(We.media,"ended",function(){"video"===We.type&&L.showPosterOnEnd&&("video"===We.type&&F(),fe(),We.media.load())}),v(We.media,"progress playing",Le),v(We.media,"volumechange",we),v(We.media,"play pause ended",me),v(We.media,"waiting canplay seeked",Se),L.clickToPlay&&"audio"!==We.type){var e=W("."+L.classes.videoWrapper);if(!e)return;e.style.cursor="pointer",v(e,"click",function(){L.hideControls&&We.browser.isTouch&&!We.media.paused||(We.media.paused?ue():We.media.ended?(fe(),ue()):ce())})}L.disableContextMenu&&v(We.media,"contextmenu",function(e){e.preventDefault()}),v(We.media,L.events.concat(["keyup","keydown"]).join(" "),function(e){x(We.container,e.type,!0)})}function He(){if(s(L.types.html5,We.type)){for(var e=We.media.querySelectorAll("source"),t=0;t<e.length;t++)u(e[t]);We.media.setAttribute("src","https://cdn.selz.com/plyr/blank.mp4"),We.media.load(),Ge("Cancelled network requests")}}function Ue(n,r){function i(){clearTimeout(Be.cleanUp),Y.boolean(r)||(r=!0),Y.function(n)&&n.call(ze),r&&(We.init=!1,We.container.parentNode.replaceChild(ze,We.container),t.body.style.overflow="",x(ze,"destroyed",!0))}if(!We.init)return null;switch(We.type){case"youtube":e.clearInterval(Be.buffering),e.clearInterval(Be.playing),We.embed.destroy(),i();break;case"vimeo":We.embed.unload().then(i),Be.cleanUp=e.setTimeout(i,200);break;case"video":case"audio":Z(!0),i()}}function Fe(){if(We.init)return null;if(j=S(),We.browser=n(),Y.htmlElement(We.media)){ee();var e=g.tagName.toLowerCase();"div"===e?(We.type=g.getAttribute("data-type"),We.embedId=g.getAttribute("data-video-id"),g.removeAttribute("data-type"),g.removeAttribute("data-video-id")):(We.type=e,L.crossorigin=null!==g.getAttribute("crossorigin"),L.autoplay=L.autoplay||null!==g.getAttribute("autoplay"),L.loop=L.loop||null!==g.getAttribute("loop")),We.supported=C(We.type),We.supported.basic&&(We.container=a(g,t.createElement("div")),We.container.setAttribute("tabindex",0),K(),Ge(We.browser.name+" "+We.browser.version),ne(),(s(L.types.html5,We.type)||s(L.types.embed,We.type)&&!We.supported.full)&&($e(),qe(),Q()),We.init=!0)}}function $e(){if(!We.supported.full)return Ve("Basic support only",We.type),u(W(L.selectors.controls.wrapper)),u(W(L.selectors.buttons.play)),void Z(!0);var e=!X(L.selectors.controls.wrapper).length;e&&V(),J()&&(e&&Oe(),Ne(),Z(),H(),U(),be(),we(),De(),me())}function qe(){e.setTimeout(function(){x(We.media,"ready")},0),f(We.media,A.classes.setup,!0),f(We.container,L.classes.ready,!0),We.media.plyr=Xe,L.autoplay&&ue()}var Xe,We=this,Be={};We.media=g;var ze=g.cloneNode(!0),Ge=function(){P("log",arguments)},Ve=function(){P("warn",arguments)};return Ge("Config",L),Xe={getOriginal:function(){return ze},getContainer:function(){return We.container},getEmbed:function(){return We.embed},getMedia:function(){return We.media},getType:function(){return We.type},getDuration:pe,getCurrentTime:function(){return We.media.currentTime},getVolume:function(){return We.media.volume},isMuted:function(){return We.media.muted},isReady:function(){return p(We.container,L.classes.ready)},isLoading:function(){return p(We.container,L.classes.loading)},isPaused:function(){return We.media.paused},on:function(e,t){return v(We.container,e,t),this},play:ue,pause:ce,stop:function(){ce(),fe()},restart:fe,rewind:de,forward:he,seek:fe,source:Ye,poster:Pe,setVolume:be,togglePlay:le,toggleMute:ye,toggleCaptions:Me,toggleFullscreen:ve,toggleControls:Ae,isFullscreen:function(){return We.isFullscreen||!1},support:function(e){return r(We,e)},destroy:Ue},Fe(),We.init?Xe:null}function E(e,n){var r=new XMLHttpRequest;if(!Y.string(n)||!Y.htmlElement(t.querySelector("#"+n))){var i=t.createElement("div");i.setAttribute("hidden",""),Y.string(n)&&i.setAttribute("id",n),t.body.insertBefore(i,t.body.childNodes[0]),"withCredentials"in r&&(r.open("GET",e,!0),r.onload=function(){i.innerHTML=r.responseText},r.send())}}function C(e){var r=n(),i=r.isIE&&r.version<=9,s=r.isIos,o=r.isIphone,a=!!t.createElement("audio").canPlayType,u=!!t.createElement("video").canPlayType,c=!1,l=!1;switch(e){case"video":c=u,l=c&&!i&&!o;break;case"audio":c=a,l=c&&!i;break;case"vimeo":c=!0,l=!i&&!s;break;case"youtube":c=!0,l=!i&&!s,s&&!o&&r.version>=10&&(l=!0);break;case"soundcloud":c=!0,l=!i&&!o;break;default:c=a&&u,l=c&&!i}return{basic:c,full:l}}function x(e,n){function r(e,t){p(t,A.classes.hook)||i.push({target:e,media:t})}var i=[],s=[],o=[A.selectors.html5,A.selectors.embed].join(",");if(Y.string(e)?e=t.querySelectorAll(e):Y.htmlElement(e)?e=[e]:Y.nodeList(e)||Y.array(e)||Y.string(e)||(Y.undefined(n)&&Y.object(e)&&(n=e),e=t.querySelectorAll(o)),Y.nodeList(e)&&(e=Array.prototype.slice.call(e)),!C().basic||!e.length)return!1;for(var a=0;a<e.length;a++){var u=e[a],c=u.querySelectorAll(o);if(c.length)for(var l=0;l<c.length;l++)r(u,c[l]);else m(u,o)&&r(u,u)}return i.forEach(function(e){var t=e.target,r=e.media;var i={};try{i=JSON.parse(t.getAttribute("data-plyr"))}catch(e){}var o=k({},A,n,i);if(!o.enabled)return null;var a=new L(r,o);if(Y.object(a)){if(o.debug){var u=o.events.concat(["setup","statechange","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled"]);v(a.getContainer(),u.join(" "),function(e){})}y(a.getContainer(),"setup",!0,{plyr:a}),s.push(a)}}),s}function D(e){if(Y.string(e)?e=t.querySelector(e):Y.undefined(e)&&(e=t.body),Y.htmlElement(e)){var n=e.querySelectorAll("."+A.classes.setup),r=[];return Array.prototype.slice.call(n).forEach(function(e){Y.object(e.plyr)&&r.push(e.plyr)}),r}return[]}var j,R={x:0,y:0},A={enabled:!0,debug:!1,autoplay:!1,loop:!1,seekTime:10,volume:10,volumeMin:0,volumeMax:10,volumeStep:1,duration:null,displayDuration:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/2.0.11/plyr.svg",clickToPlay:!0,hideControls:!0,showPosterOnEnd:!1,disableContextMenu:!0,keyboardShorcuts:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},selectors:{html5:"video, audio",embed:"[data-type]",editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{seek:'[data-plyr="seek"]',play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',forward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',fullscreen:'[data-plyr="fullscreen"]'},volume:{input:'[data-plyr="volume"]',display:".plyr__volume--display"},progress:{container:".plyr__progress",buffer:".plyr__progress--buffer",played:".plyr__progress--played"},captions:".plyr__captions",currentTime:".plyr__time--current",duration:".plyr__time--duration"},classes:{setup:"plyr--setup",ready:"plyr--ready",videoWrapper:"plyr__video-wrapper",embedWrapper:"plyr__video-embed",type:"plyr--{0}",stopped:"plyr--stopped",playing:"plyr--playing",muted:"plyr--muted",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",active:"plyr--fullscreen-active"},tabFocus:"tab-focus"},captions:{defaultActive:!1},fullscreen:{enabled:!0,fallback:!0,allowAudio:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime} secs",play:"Play",pause:"Pause",forward:"Forward {seektime} secs",played:"played",buffered:"buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",toggleMute:"Toggle Mute",toggleCaptions:"Toggle Captions",toggleFullscreen:"Toggle Fullscreen",frameTitle:"Player for {title}"},types:{embed:["youtube","vimeo","soundcloud"],html5:["video","audio"]},urls:{vimeo:{api:"https://player.vimeo.com/api/player.js"},youtube:{api:"https://www.youtube.com/iframe_api"},soundcloud:{api:"https://w.soundcloud.com/player/api.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,forward:null,mute:null,volume:null,captions:null,fullscreen:null},events:["ready","ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied"],logPrefix:"[Plyr]"},Y={object:function(e){return null!==e&&"object"==typeof e},array:function(e){return null!==e&&"object"==typeof e&&e.constructor===Array},number:function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"==typeof e&&e.constructor===Number)},string:function(e){return null!==e&&("string"==typeof e||"object"==typeof e&&e.constructor===String)},boolean:function(e){return null!==e&&"boolean"==typeof e},nodeList:function(e){return null!==e&&e instanceof NodeList},htmlElement:function(e){return null!==e&&e instanceof HTMLElement},function:function(e){return null!==e&&"function"==typeof e},undefined:function(e){return null!==e&&void 0===e}},I={supported:function(){if(!("localStorage"in e))return!1;try{e.localStorage.setItem("___test","OK");var t=e.localStorage.getItem("___test");return e.localStorage.removeItem("___test"),"OK"===t}catch(e){return!1}return!1}()};return{setup:x,supported:C,loadSprite:E,get:D}}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}()},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return m[p]=r,f(p),p++}function i(e){delete m[e]}function s(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(_)setTimeout(o,0,e);else{var t=m[e];if(t){_=!0;try{s(t)}finally{i(e),_=!1}}}}function a(){f=function(e){t.nextTick(function(){o(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),f=function(n){e.postMessage(t+n,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},f=function(t){e.port2.postMessage(t)}}function d(){var e=g.documentElement;f=function(t){var n=g.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function h(){f=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var f,p=1,m={},_=!1,g=e.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(e);v=v&&v.setTimeout?v:e,"[object process]"==={}.toString.call(e.process)?a():u()?c():e.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?d():h(),v.setImmediate=r,v.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(3),n(5))},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(155),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},,function(e,t,n){n(7),e.exports=n(122)}]);